	define("subContext/friendhead.js", function(require, module, exports){ 			
(function(){var a=require("sheet.js"),b=function(){var b,c=[],d=!1,e=function(b,c){var d=f(b,c);console.warn("findFriendAtIndex",d),!d||a.drawImage("subContext/res/friendhead/playerPos.png",b.rect.x,b.rect.y,b.rect.width,b.rect.height,null,function(){var c=d.avatarUrl;c.endsWith("/0")&&(c=c.substring(0,c.length-1),c+=64);var e=64*b.rect.width/84,f=10*b.rect.width/84,g=6*b.rect.height/94;a.drawRoundImage(c,b.rect.x+f+e/2,b.rect.y+g+e/2,e/2)})},f=function(a,b){var c=null,d=a.data.userInfo.openid,e=a.data.id;if(a.data.staticsNtf.stage_statics.max_stage_id==e){for(var f,g=0;g<b.data.length;g++)if(f=b.data[g],f.openId==d){c=f;break}}else{var h=0,i=0,k=0;loop:for(var f,g=0;g<b.data.length;g++)if(f=b.data[g],!!f.buffer){var l=JSON.parse(f.buffer);if(!!l.wxgame&&!!l.wxgame.rank)for(var m,n=0;n<l.wxgame.rank.length;n++)m=l.wxgame.rank[n],!m||"score"!=m.key||(i=m.value1?m.value1:0,k=m.value2?m.value2:0,i==e&&k>h&&(k=h,c=f))}}return c};return{showFriendIndex:function(f){if(f.data.staticsNtf.stage_statics.max_stage_id!=f.data.id)return a.clearRect(f),b?void e(f,b):d?void c.push(f):void(d=!0,wx.getFriendUserGameData({success:(a)=>{if(console.warn(a),d=!1,null!=a&&null!=a.data)for(b=a,e(f,b);0<c.length;){var g=c.shift();e(g,b)}},fail:(a)=>{if(console.warn(a),d=!1,null!=b&&null!=b.data)for(;0<c.length;){var f=c.shift();e(f,b)}}}))},clearCache:function(){b=null}}}();module.exports=b})(); 
 			});
 		define("subContext/overfriend.js", function(require, module, exports){ 			
(function(){var a=require("sheet.js"),b=function(){var b,c,d,e,f,g=Math.PI,h=null,k=null,i=!1,j={upBoardCanvas:wx.createCanvas(),downBoardCanvas:wx.createCanvas(),upArrowCanvas:wx.createCanvas(),downArrowCanvas:wx.createCanvas(),wordCanvas:wx.createCanvas()},l=function(f,g){var h=r(f,g);if(console.warn("findOverFriendAtIndex",h),h.isOver){var k={x:253.5+c,y:170+d,w:133,h:98},l={x:253.5+c,y:720+d,w:133,h:98},o={x:114+c,y:278+d,w:412,h:157},p={x:114+c,y:552+d,w:412,h:157},q={ray_rotate:0,ray_alpha:1,arrow_scale:1,board_scale:1,word_scale:1,word_alpha:0,arrow_offsetY:0,board_offsetY:0},s={ray_alpha_speed:0.02,ray_rotate_speed:0.3,arrow_start:100,arrow_time:2e3,arrow_alpha:0,board_time:2e3,word_time:2500,arrow_offset:400,board_offset:300},t={startX:c+e/2,startY:d+500,starNum:15,startSpeed:4.5,speedRange:7.5},u=[];if(!!f.data.noAnimate)a.clearRect(f),n(h,k,l,o,p,u,q);else{for(var v=0;v<t.starNum;v++)u.push({x:t.startX,y:t.startY,speedX:(0.5<Math.random()?1:-1)*(t.startSpeed+Math.random()*t.speedRange),speedY:(0.5<Math.random()?1:-1)*(t.startSpeed+Math.random()*t.speedRange),scale:0.25+1.5*Math.random(),rotate:360*Math.random(),alpha:1,width:81,height:79});var i=new Date().getTime();b=setInterval(function(){var b=Math.min,c=new Date().getTime()-i;(1<=q.ray_alpha||0.25>=q.ray_alpha)&&(s.ray_alpha_speed*=-1),q.ray_alpha=Math.max(0,b(1,q.ray_alpha+s.ray_alpha_speed)),q.ray_rotate+=s.ray_rotate_speed;var d=b(1,c/s.word_time);q.word_alpha=a.rebound.getInterpolation(d,0.25),q.word_scale=a.rebound.getInterpolation(d,0.25);var e=c<s.arrow_start?0:b(1,(c-s.arrow_start)/s.arrow_time);q.arrow_alpha=0.1>=e?1e-4:1,q.arrow_scale=a.rebound.getInterpolation(e),q.arrow_offsetY=s.arrow_offset*(1-a.rebound.getInterpolation(0>=e?0:e,0.7));var g=b(1,c/s.board_time);for(var n in q.board_scale=a.rebound.getInterpolation(g,0.3),q.board_offsetY=s.board_offset*(1-a.rebound.getInterpolation(g,0.6)),j)j[n].getContext("2d").clearRect(0,0,j[n].width,j[n].height);a.clearRect(f),m(h,k,l,o,p,u,q)},16)}}},m=function(b,h,k,l,m,n,o){a.context.save(),a.context.globalAlpha=0.7,a.drawRect("#000000",c,d,e,f),a.context.restore(),a.context.save(),a.context.globalAlpha=o.ray_alpha,a.context.translate(320+c,90+833/2+d),a.context.rotate(o.ray_rotate*g/180),a.drawImage("subContext/res/overfriend/ray.png",-437,-833/2,874,833,null,function(){a.context.restore(),a.drawImage("subContext/res/overfriend/up_arrow.png",h.x,h.y,h.w,h.h,{canvas:j.upArrowCanvas},function(){a.drawNum("up_num",b.oldIndex-b.newIndex,h.x+64,h.y+34,0,0,24,"center",{canvas:j.upArrowCanvas})}),a.drawImage("subContext/res/overfriend/down_arrow.png",k.x,k.y,k.w,k.h,{canvas:j.downArrowCanvas},function(){a.drawNum("down_num",1,k.x+66.5,k.y+22,0,0,24,"center",{canvas:j.downArrowCanvas})}),a.drawCanvas(j.upArrowCanvas,{scale:o.arrow_scale,alpha:o.arrow_alpha,translateY:o.arrow_offsetY,centerX:c+e/2,centerY:d+210}),a.drawCanvas(j.downArrowCanvas,{scale:o.arrow_scale,alpha:o.arrow_alpha,translateY:-o.arrow_offsetY,centerX:c+e/2,centerY:d}),q(n);var f=a.getAvatarUrl(b.selfItem.avatarUrl),g=b.selfItem.nick,r=b.selfItem.star,s=b.selfItem.level,t=l;p(f,g,r,s,t,"up",j.upBoardCanvas,o);var f=a.getAvatarUrl(b.friendItem.avatarUrl),g=b.friendItem.nickName,r=0,s=0,u=JSON.parse(b.friendItem.buffer);if(!!u.wxgame&&!!u.wxgame.rank)for(var v,w=0;w<u.wxgame.rank.length;w++)v=u.wxgame.rank[w],!v||"score"!=v.key||(s=v.value1?v.value1:0,r=v.value2?v.value2:0);var t=m;p(f,g,r,s,t,"down",j.downBoardCanvas,o),a.drawImage("subContext/res/overfriend/words.png",155.5+c,460+d,329,67,{canvas:j.wordCanvas}),a.drawCanvas(j.wordCanvas,{scale:o.word_scale,alpha:o.word_alpha,centerX:c+e/2,centerY:d+475})})},n=function(b,h,j,k,l,i,m){a.context.save(),a.context.globalAlpha=0.7,a.drawRect("#000000",c,d,e,f),a.context.restore(),a.context.save(),a.context.globalAlpha=m.ray_alpha,a.context.translate(320+c,90+833/2+d),a.context.rotate(m.ray_rotate*g/180),a.drawImage("subContext/res/overfriend/ray.png",-437,-833/2,874,833,null,function(){a.context.restore(),a.drawImage("subContext/res/overfriend/up_arrow.png",h.x,h.y,h.w,h.h,null,function(){a.drawNum("up_num",b.oldIndex-b.newIndex,h.x+64,h.y+34,0,0,24,"center",null)}),a.drawImage("subContext/res/overfriend/down_arrow.png",j.x,j.y,j.w,j.h,null,function(){a.drawNum("down_num",1,j.x+66.5,j.y+22,0,0,24,"center",null)});var e=a.getAvatarUrl(b.selfItem.avatarUrl),f=b.selfItem.nick,g=b.selfItem.star,n=b.selfItem.level,o=k;p(e,f,g,n,o,"up",sharedCanvas,m);var e=a.getAvatarUrl(b.friendItem.avatarUrl),f=b.friendItem.nickName,g=0,n=0,q=JSON.parse(b.friendItem.buffer);if(!!q.wxgame&&!!q.wxgame.rank)for(var r,s=0;s<q.wxgame.rank.length;s++)r=q.wxgame.rank[s],!r||"score"!=r.key||(n=r.value1?r.value1:0,g=r.value2?r.value2:0);var o=l;p(e,f,g,n,o,"down",sharedCanvas,m),a.drawImage("subContext/res/overfriend/words.png",155.5+c,460+d,329,67,null)})},o=function(){k&&h||wx.getUserInfo({openIdList:["selfOpenId"],lang:"zh_CN",success:(a)=>{if(console.warn(a),null!=a&&null!=a.data&&0<a.data.length){var b=a.data[0],c=b.avatarUrl;c.endsWith("/0")&&(c=c.substring(0,c.length-1),c+=64),h=c,k=b.nickName}},fail:(a)=>{console.warn(a)}})},p=function(b,f,g,h,j,k,l,m){var n={canvas:l};a.drawImage("subContext/res/overfriend/"+k+"_board.png",j.x,j.y,j.w,j.h,n,function(){a.drawImage("subContext/res/overfriend/"+k+"_avatar.png",j.x-13,j.y-12,72,72,n,function(){a.drawImage(b,j.x-10,j.y-8.5,64,64,n)}),a.drawText(f,j.x+76,j.y+30,300,26,25,"#ffffff","",300,n),a.drawText("\u5192\u9669",j.x+76,j.y+90,300,26,25,"#ffffff","",300,n),a.drawText("\u5173",j.x+218,j.y+90,300,26,25,"#ffffff","",300,n),a.drawNum("number_white",h,j.x+170,j.y+88.5,28,31.5,24,"center",n),a.drawImage("subContext/res/rank/star_bg.png",j.x+255,j.y+90,92,26,n,function(){a.drawImage("subContext/res/rank/star.png",j.x+264,j.y+91,22,23,n),a.drawNum("number_gold",g,j.x+290,j.y+92.5,14,20,12,"",n)})}),i||("up"==k?a.drawCanvas(l,{scale:m.board_scale,translateY:m.board_offsetY,centerX:c+e/2,centerY:d+340}):a.drawCanvas(l,{scale:m.board_scale,translateY:-m.board_offsetY,centerX:c+e/2,centerY:d+615}))},q=function(b){for(var c,d=b.length-1;0<=d;d--)(c=b[d],c.alpha-=0.015,c.x+=c.speedX,c.y+=c.speedY,!(0>=c.alpha||0>c.x||640<c.x||0>c.y||1120<c.y))&&(a.context.save(),a.context.globalAlpha=c.alpha,a.context.translate(c.x+c.width/2,c.y+c.height),a.context.scale(c.scale,c.scale),a.context.rotate(c.rotate*g/180),a.drawImage("subContext/res/overfriend/star.png",-c.width/2,-c.height/2,c.width,c.height),a.context.restore())},r=function(a,b){var c=0,d=0,e=null,f=a.data.userInfo.openid,g=a.data.oldStaticsNtf.stage_statics.max_stage_id,l=a.data.oldStaticsNtf.stage_statics.star_count,m=a.data.newStaticsNtf.stage_statics.max_stage_id,n=a.data.newStaticsNtf.stage_statics.star_count;b.data.sort(function(c,a){var b=0,d=0,e=0,f=0;if(!!c.buffer){var g=JSON.parse(c.buffer);if(!!g.wxgame&&!!g.wxgame.rank)for(var h,j=0;j<g.wxgame.rank.length;j++)h=g.wxgame.rank[j],!h||"score"!=h.key||(b=h.value1?h.value1:0,d=h.value2?h.value2:0)}if(!!a.buffer){var g=JSON.parse(a.buffer);if(!!g.wxgame&&!!g.wxgame.rank)for(var h,j=0;j<g.wxgame.rank.length;j++)h=g.wxgame.rank[j],!h||"score"!=h.key||(e=h.value1?h.value1:0,f=h.value2?h.value2:0)}return b==e?d<f?1:-1:b<e?1:-1});for(var o=-1,p=-1,q=-1,r=0;r<b.data.length;r++){var i=b.data[r],s=0,t=0,u=0;if(!!i.buffer){var v=JSON.parse(i.buffer);if(!!v.wxgame&&!!v.wxgame.rank)for(var w,x=0;x<v.wxgame.rank.length;x++)w=v.wxgame.rank[x],!w||"score"!=w.key||(s=w.value1?w.value1:0,t=w.value2?w.value2:0)}0==r&&(o=r,p=s,q=t),u=s==p&&t==q?o:r,o=u,p=s,q=t,i.rank=u}console.warn(b.data),c=b.data.length-1;loop:for(var j,r=b.data.length-1;0<=r;r--){if(j=b.data[r],j.openId==f){c=j.rank,console.warn("oldIndex1",c);continue}var v=JSON.parse(j.buffer);if(!!v.wxgame&&!!v.wxgame.rank){for(var w,x=0;x<v.wxgame.rank.length;x++)if(w=v.wxgame.rank[x],!!w&&"score"==w.key){var y=w.value1?w.value1:0,z=w.value2?w.value2:0;if(y>g){console.warn("oldIndex 1.1",y,g);break loop}else if(y==g&&z>=l){console.warn("oldIndex 1.2",z,l);break loop}}c=j.rank,console.warn("oldIndex 2",c)}}d=b.data.length-1;loop:for(var j,r=b.data.length-1;0<=r;r--){if(j=b.data[r],j.openId==f){d=j.rank,console.warn("newIndex 1",d);continue}var v=JSON.parse(j.buffer);if(!!v.wxgame&&!!v.wxgame.rank)for(var w,x=0;x<v.wxgame.rank.length;x++)if(w=v.wxgame.rank[x],!!w&&"score"==w.key){var y=w.value1?w.value1:0,z=w.value2?w.value2:0;if(y>m){console.warn("newIndex 1.1",y,m);break loop}else if(y==m&&z>=n){console.warn("newIndex 1.2",z,n);break loop}}d=j.rank,console.warn("newIndex 2",d)}for(var e=null,r=d;r<b.data.length;r++)if(null!=b&&null!=b.data&&null!=b.data[r]&&b.data[r].openId!=f){e=b.data[r];break}return{isOver:d<c,oldIndex:c,newIndex:d,selfItem:{openId:f,avatarUrl:h,nick:k,star:n,level:m},friendItem:e}},s=function(c){a.clearRect(c),clearInterval(b),wx.offTouchStart()};return{onOverFriend:function(b){for(var g in c=b.rect.x,d=b.rect.y,e=b.rect.width,f=b.rect.height,i=b.data.noAnimate,j)j[g].width=b.rect.width,j[g].height=sharedCanvas.height;wx.onTouchStart(function(){s(b)}),a.clearRect(b),wx.getFriendUserGameData({success:(a)=>{console.warn(a),null!=a&&null!=a.data&&l(b,a)},fail:(a)=>{console.warn(a)}}),o()},closeOverFriend:s}}();module.exports=b})(); 
 			});
 		define("subContext/rank.js", function(require, module, exports){ 			
(function(){var a=require("sheet.js"),b=function(){var b,c,d,e,f,g,h=Math.min,k=sharedCanvas.getContext("2d"),l=125,m=125+l,n=0,o=1,p=5,i={},q=-1,r=0,s=0,t=0,u=0,j="",v="",w=function(){!f||(c=f,y()),wx.getFriendUserGameData({success:(a)=>{console.warn(a),null!=a&&null!=a.data&&(c=a.data,f=a.data,y())},fail:(a)=>{console.warn(a),c=f?f:[],y(),g=setTimeout(w,2e3)}}),A()},x=function(){wx.getGroupUserGameData({success:(a)=>{console.warn(a),null!=a&&null!=a.data&&(c=a.data,y())},fail:(a)=>{console.warn(a),c=[],y(),g=setTimeout(x,2e3)}}),A()},y=function(){q=-1,d=null,k.clearRect(r,s,t,u);var a=k,f=c;q=-1;for(var g=0;g<f.length;g++)if(f[g].openId==b.data.userInfo.openid){q=g;break}var i=G();if(console.warn("\u4E3B\u57DF self",i),0<=q){var w=f[q];if(console.warn("server self",w),!!w.buffer){var x=JSON.parse(w.buffer);if(!!x.wxgame&&!!x.wxgame.rank)for(var y,g=0;g<x.wxgame.rank.length;g++)y=x.wxgame.rank[g],!y||"score"!=y.key||(y.value1=i.level,y.value2=i.star);w.buffer=JSON.stringify(x)}console.warn("new client self",w)}else{console.warn("server self not found");var A=f.length;d={openId:b.data.userInfo.openid,buffer:"{\"wxgame\":{\"rank\":[{\"key\":\"score\",\"value1\":"+i.level+",\"value2\":"+i.star+"}]}}",nickName:v,avatarUrl:j},f[A]=d}f.sort(function(c,a){var b=0,d=0,e=0,f=0;if(!!c.buffer){var g=JSON.parse(c.buffer);if(!!g.wxgame&&!!g.wxgame.rank)for(var h,j=0;j<g.wxgame.rank.length;j++)h=g.wxgame.rank[j],!h||"score"!=h.key||(b=h.value1?h.value1:0,d=h.value2?h.value2:0)}if(!!a.buffer){var g=JSON.parse(a.buffer);if(!!g.wxgame&&!!g.wxgame.rank)for(var h,j=0;j<g.wxgame.rank.length;j++)h=g.wxgame.rank[j],!h||"score"!=h.key||(e=h.value1?h.value1:0,f=h.value2?h.value2:0)}return b==e?d==f?c.openId<a.openId?1:-1:d<f?1:-1:b<e?1:-1});for(var D=-1,E=-1,H=-1,g=0;g<f.length;g++){var I=f[g],J=0,K=0,L=0;if(!!I.buffer){var x=JSON.parse(I.buffer);if(!!x.wxgame&&!!x.wxgame.rank)for(var y,M=0;M<x.wxgame.rank.length;M++)y=x.wxgame.rank[M],!y||"score"!=y.key||(J=y.value1?y.value1:0,K=y.value2?y.value2:0)}0==g&&(D=g,E=J,H=K),L=J==E&&K==H?D:g,D=L,E=J,H=K,I.rank=L}q=-1;for(var g=0;g<f.length;g++)if(f[g].openId==b.data.userInfo.openid){q=g;break}if(F(a,"#0996a6",8,l-10,605,l+10),0<=q)z(a,f[q],f[q].rank,l,!0);else{if(!d){var A=f.length;d={openId:b.data.userInfo.openid,buffer:"{\"wxgame\":{\"rank\":[{\"key\":\"score\",\"value1\":0,\"value2\":0}]}}",nickName:v,avatarUrl:j},f[A]=d}q=f.length-1,z(a,d,f.length-1,l,!0)}var N=n;C(a,"subContext/res/rank/fengexian.png",6,m,610,12,function(){B(N)}),o=Math.ceil(f.length/p);for(var O,P=n*p,g=P;g<h(P+p,f.length);g++)O=m+g%p*l,z(a,f[g],f[g].rank,O,!1);if(f.length>p){var Q=0==n?"subContext/res/rank/prev_disable.png":"subContext/res/rank/prev.png",R=n==o-1?"subContext/res/rank/next_disable.png":"subContext/res/rank/next.png";C(a,Q,75,650+m,164,74,function(){B(N)}),C(a,R,370,650+m,164,74,function(){B(N)}),e=!0}else e=!1},z=function(a,c,d,e,f){var g=n,h=100,j=c.openId==b.data.userInfo.openid;if(d!=q||f||F(a,"#62dbeb",8,e,604,l),3>d)0===d?C(a,"subContext/res/rank/gold_crown.png",15,34+e,102,75,function(){B(g)}):1===d?C(a,"subContext/res/rank/silver_crown.png",15,34+e,102,75,function(){B(g)}):2===d?C(a,"subContext/res/rank/bronze_crown.png",15,34+e,102,75,function(){B(g)}):void 0;else{var k=40,m=(d+1).toString().length,o=-10,p=60-(k+o)*m/2;E(a,"white",d+1,p,52+e,k,45*k/40,k+o,function(){B(g)})}var r=f?"\u6211\u7684\u6392\u540D":c.nickName;D(a,r,124,38+e,26,"#ffffff",340);var s=c.avatarUrl;s.endsWith("/0")&&(s=s.substring(0,s.length-1),s+=64),C(a,"subContext/res/rank/avatar_bg.png",124,48+e,67,67,function(){C(a,s,127,51+e,61,61,function(){B(g)})});var u=0,v=0;if(!!c.buffer){var w=JSON.parse(c.buffer);if(!!w.wxgame&&!!w.wxgame.rank)for(var x,y=0;y<w.wxgame.rank.length;y++)x=w.wxgame.rank[y],!x||"score"!=x.key||(v=x.value1?x.value1:0,u=x.value2?x.value2:0)}C(a,"subContext/res/rank/star_bg.png",390+h,15+e,90,0,function(){C(a,"subContext/res/rank/star.png",395+h,16+e,0,0,function(){B(g)}),E(a,"gold",u,420+h,19+e,14,20,12,function(){B(g)})}),D(a,"\u5192\u9669",320+h,86+e,26,"#ffffff"),D(a,"\u5173",455+h,86+e,26,"#ffffff");var k=30,m=v.toString().length,o=-5,p=414+h-(k+o)*m/2;E(a,"white",v,p,60+e,k,45*k/40,k+o,function(){B(g)});var i=9;F(a,"#328893",i,124+e,t-2*i,1),F(a,"#8fd4db",i,125+e,t-2*i,1)},A=function(){v&&j||wx.getUserInfo({openIdList:["selfOpenId"],lang:"zh_CN",success:(a)=>{if(console.warn(a),null!=a&&null!=a.data&&0<a.data.length){var b=a.data[0],d=b.avatarUrl;d.endsWith("/0")&&(d=d.substring(0,d.length-1),d+=64),j=d,v=b.nickName,!c||y()}},fail:(a)=>{console.warn(a)}})},B=function(a){a!=n&&(console.warn("re render",a,n),y())},C=function(a,b,c,d,e,f,g){c+=r,d+=s,c*=t/620,d*=u/1020,e*=t/620,f*=u/1020;var h;return i[b]?(h=i[b],a.drawImage(h,c,d,0<e?e:h.width,0<f?f:h.height),void(!g||g())):void(h=wx.createImage(),h.src=b,h.onload=()=>{i[b]=h,a.drawImage(h,c,d,0<e?e:h.width,0<f?f:h.height),!g||g()})},D=function(b,c,d,e,f,g,h){d+=r,e+=s,d*=t/620,e*=u/1020,f*=u/1020;for(var i=a.getTextWidth(b,c,f),j=!1;i>h;)j=!0,c=c.substring(0,c.length-1),i=a.getTextWidth(b,c,f);j&&(c+="..."),b.font=f+"px Arial",b.fillStyle=g,b.fillText(c,d,e)},E=function(a,b,c,d,e,f,g,h,j){for(var k,l=c.toString().split(""),m=l.length,n=0;n<l.length;n++)k=l[n],C(a,"subContext/res/number/number_"+b+"/"+k+".png",d+n*h,e,f,g,function(){!j||(m--,0==m&&j())})},F=function(a,b,c,d,e,f){c+=r,d+=s,c*=t/620,d*=u/1020,e*=t/620,f*=u/1020,a.fillStyle=b,a.fillRect(c,d,e,f)},G=function(){var a=0,c=0;return!b.data.staticsNtf||!b.data.staticsNtf.stage_statics||(!!b.data.staticsNtf.stage_statics.max_stage_id&&(c=b.data.staticsNtf.stage_statics.max_stage_id),!!b.data.staticsNtf.stage_statics.star_count&&(a=b.data.staticsNtf.stage_statics.star_count)),{star:a,level:c}},H=function(){wx.offTouchStart(),wx.offTouchMove(),wx.offTouchEnd()},I=function(){function a(a){var c={left:75,right:239,top:650+m,bottom:650+m+74},d={left:370,right:534,top:650+m,bottom:650+m+74};if(c.left+=r,c.right+=r,c.top+=s,c.bottom+=s,d.left+=r,d.right+=r,d.top+=s,d.bottom+=s,null!=b&&e){var f=a.touches[0].clientX/b.data.windowWidth,g=f*b.data.screenWidth,h=(b.data.screenWidth-t)/2,i=g-h,j=a.touches[0].clientY/b.data.windowHeight,l=j*b.data.screenHeight,p=(b.data.screenHeight-u)/2,q=l-p,v=i>c.left&&i<c.right&&q>c.top&&q<c.bottom&&0<n,w=i>d.left&&i<d.right&&q>d.top&&q<d.bottom&&n<o-1,x=1.05,y=164*(x-1)/2,z=74*(x-1)/2,A=v?c.left-y:c.left,B=v?c.top-z:c.top,D=w?d.left-y:d.left,E=w?c.top-z:c.top;A-=r,B-=s,D-=r,E-=s,k.clearRect(r,s+c.top-z,t,100);var F=0==n?"subContext/res/rank/prev_disable.png":"subContext/res/rank/prev.png",G=n==o-1?"subContext/res/rank/next_disable.png":"subContext/res/rank/next.png";C(k,F,A,B,164*(v?x:1),74*(v?x:1)),C(k,G,D,E,164*(w?x:1),74*(w?x:1))}}wx.onTouchStart(a),wx.onTouchMove(a),wx.onTouchEnd((a)=>{var c={left:75,right:239,top:650+m,bottom:650+m+74},d={left:370,right:534,top:650+m,bottom:650+m+74};if(c.left+=r,c.right+=r,c.top+=s,c.bottom+=s,d.left+=r,d.right+=r,d.top+=s,d.bottom+=s,null!=b&&e){var f=a.changedTouches[0].clientX/b.data.windowWidth,g=f*b.data.screenWidth,i=(b.data.screenWidth-t)/2,j=g-i;console.warn(f,g,i,j);var k=a.changedTouches[0].clientY/b.data.windowHeight,l=k*b.data.screenHeight,p=(b.data.screenHeight-u)/2,q=l-p;j>c.left&&j<c.right&&q>c.top&&q<c.bottom&&0<n&&(n=Math.max(0,n-1),y()),j>d.left&&j<d.right&&q>d.top&&q<d.bottom&&n<o-1&&(n=h(n+1,o-1),y())}})},J=function(a){l=125,m=125+l,b=a,r=a.rect.x,s=a.rect.y,t=a.rect.width,u=a.rect.height,n=0,k.clearRect(r,s,t,u)};return{onFriendRank:function(a){J(a),I(),w()},onGroupRank:function(a){J(a),I(),x()},onClose:function(){H(),b=null,clearTimeout(g)}}}();module.exports=b})(); 
 			});
 		define("subContext/sheet.js", function(require, module, exports){ 			
(function(){var a=function(){var a=Math.PI,b=sharedCanvas.getContext("2d"),c={},d=function(a,b,d,f,g,h,i){var j;return c[a]?(j=c[a],void e(j,b,d,f,g,h,i)):void(j=wx.createImage(),j.src=a,j.onload=()=>{c[a]=j,e(j,b,d,f,g,h,i)})},e=function(a,c,d,e,f,g,h){var i=g&&g.canvas?g.canvas.getContext("2d"):b,j=0<e?e:a.width,k=0<f?f:a.height;i.drawImage(a,c,d,j,k),!h||h()},f=function(a,b,c){if(null==b)return 0;var d=a.measureText(b);return null==d?0.75*(b.length*c):d.width};return{context:b,drawImage:d,drawRoundImage:function(d,e,f,g,h){var i;if(!!c[d]){i=c[d],b.beginPath();var j=b.createPattern(i,"no-repeat");return b.arc(e,f,g,0,2*a),b.fillStyle=j,b.translate(e-g,f-g),b.fill(),b.translate(-e+g,-f+g),b.closePath(),void(!h||h())}i=wx.createImage(),i.src=d,i.onload=()=>{c[d]=i;var j=b.createPattern(i,"repeat");b.beginPath(),b.arc(e,f,g,0,2*a),b.fillStyle=j,b.translate(e-g,f-g),b.fill(),b.translate(-e+g,-f+g),b.closePath(),!h||h()}},drawText:function(a,c,d,e,g,h,i,j,k,l){var m=!l||!l.canvas?b:l.canvas.getContext("2d");m.font=h+"px Arial",m.fillStyle=i;var n=f(m,a,h),o=f(m,"...",h),p=!1;if(n>k)if(o<k)for(;n+o>k;)p=!0,a=a.substring(0,a.length-1),n=f(m,a,h);else p=!0,a="";p&&(a+="...");var q=c,n=f(m,a,h);"right"==j?q=c+e-n:"center"==j&&(q=c+(e-textWidthh)/2);m.fillText(a,q,d+(g-h)/2+0.85*h)},getTextWidth:f,drawNum:function(a,b,c,e,f,g,h,j,k){var l=0;if("center"==j){var m=b.toString().length;l=-1*h*m/2}for(var n,o=b.toString().split(""),p=0;p<o.length;p++)n=o[p],d("subContext/res/number/"+a+"/"+n+".png",c+p*h+l,e,f,g,k)},drawRect:function(a,c,d,e,f){b.fillStyle=a,b.fillRect(c,d,e,f)},drawCanvas:function(c,d){var e=c.width,f=c.height;!d||(b.save(),b.translate(0+d.centerX,0+d.centerY),!!d.rotate&&b.rotate(d.rotate*a/180),!!d.scale&&b.scale(d.scale,d.scale),!!d.alpha&&(b.globalAlpha=d.alpha),!!d.translateY&&b.translate(0,d.translateY)),b.drawImage(c,-d.centerX,-d.centerY,e,f),!d||b.restore()},getAvatarUrl:function(a){return a?(a.endsWith("/0")&&(a=a.substring(0,a.length-1),a+=64),a):""},clearRect:function(a){b.clearRect(a.rect.x,a.rect.y,a.rect.width,a.rect.height)},rebound:{getInterpolation:function(b,c){var d=!c?0.35:c;return Math.pow(2,-10*b)*Math.sin((b-d/4)*(2*a)/d)+1}},overshoot:{getInterpolation:function(a,b){var c=b?b:2;return a-=1,a*a*((c+1)*a+c)+1}}}}();module.exports=a})(); 
 			});
 		define("subContext/userinfo.js", function(require, module, exports){ 			
(function(){var a=require('sheet.js'),b=function(){var b={},c=[],d=[],e=!1,f=function(j){if(a.clearRect(j),!!b[j.data.openId])return void h(j,b[j.data.openId]);if(e)return void c.push(j);e=!0;for(var k,l=[j.data.openId],m=0;m<c.length;m++)k=c[m].data.openId,-1<k.indexOf(k)&&l.push(k);for(var k,m=0;m<d.length;m++)k=d[m].data.openId,-1<k.indexOf(k)&&l.push(k);wx.getUserInfo({openIdList:l,lang:'zh_CN',success:(a)=>{if(console.warn(a),null!=a&&null!=a.data){for(var h,k=0;k<a.data.length;k++)h=a.data[k],!h||(b[h.openId]=h);f(j)}e=!1;for(var k=c.length-1;0<=k;k--)f(c.shift());for(var k=d.length-1;0<=k;k--)g(d.shift())},fail:(a)=>{console.warn(a),e=!1;for(var b=c.length-1;0<=b;b--)f(c.shift());for(var b=d.length-1;0<=b;b--)g(d.shift())}})},g=function(h){if(a.clearRect(h),!!b[h.data.openId])return void j(h,b[h.data.openId]);if(e)return void d.push(h);e=!0;for(var k,l=[h.data.openId],m=0;m<c.length;m++)k=c[m].data.openId,-1<k.indexOf(k)&&l.push(k);for(var k,m=0;m<d.length;m++)k=d[m].data.openId,-1<k.indexOf(k)&&l.push(k);wx.getUserInfo({openIdList:l,lang:'zh_CN',success:(a)=>{if(console.warn(a),null!=a&&null!=a.data){for(var j,k=0;k<a.data.length;k++)j=a.data[k],!j||(b[j.openId]=j);g(h)}e=!1;for(var k=c.length-1;0<=k;k--)f(c.shift());for(var k=d.length-1;0<=k;k--)g(d.shift())},fail:(a)=>{console.warn(a),e=!1;for(var b=c.length-1;0<=b;b--)f(c.shift());for(var b=d.length-1;0<=b;b--)g(d.shift())}})},h=function(b,c){var d=c.avatarUrl;d.endsWith('/0')&&(d=d.substring(0,d.length-1),d+=64),a.drawImage(d,b.rect.x,b.rect.y,b.rect.width,b.rect.height)},j=function(b,c){a.drawText(c.nickName,b.rect.x,b.rect.y,b.rect.width,b.rect.height,b.data.fontSize,b.data.color,b.data.align,b.rect.width)};return{showAvatar:f,showNick:g,clearCache:function(){b={}}}}();module.exports=b})(); 
 			});
 		define("subContext/sub.js", function(require, module, exports){ 			
(function(){var a=require("friendhead.js"),b=require("rank.js"),c=require("userinfo.js"),d=require("overfriend.js");wx.onMessage((e)=>{console.warn("\u6536\u5230\u4E3B\u57DF\u7684\u6D88\u606F",e),"friendRank"==e.req?b.onFriendRank(e):"groupRank"==e.req?b.onGroupRank(e):"close"==e.req?b.onClose(e):"FRIENDS_HEAD"==e.req?a.showFriendIndex(e):"FRIENDS_HEAD_CLEAR"==e.req?a.clearCache():"USER_HEAD"==e.req?c.showAvatar(e):"USER_NICK"==e.req?c.showNick(e):"USER_CLEAR"==e.req?c.clearCache():"OVER_FRIEND"==e.req?d.onOverFriend(e):"OVER_FRIEND_CLOSE"==e.req&&d.closeOverFriend(e)})})(); 
 			}); 	require("subContext/sub.js");
 	