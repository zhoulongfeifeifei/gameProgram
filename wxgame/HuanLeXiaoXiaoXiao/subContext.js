	define("src/subContext/FriendPKSubLayer.js", function(require, module, exports){ 			
(function(){FriendPKSubLayer=cc.Scene.extend({init:function(){return this.listView={},this.size=this.getContentSize(),console.log("----------",this.getContentWidth()),console.log("----------",this.getContentHeight()),!0},sortPK:function(){sub.sortRankList(this.datas,this.tab),2==this.datas.length?(this.data2=this.datas[0],this.data1=this.datas[1]):1==this.datas.length?(this.data2=this.datas[0],this.data1=sub.selfData):(this.data1=null,this.data2=null)},showPK:function(a,b,c){this.datas=[],this.tab=c||2;var d=sub.getFriendInfo(a),e=sub.getFriendInfo(b);d&&this.datas.push(d),e&&this.datas.push(e),this.sortPK(this.datas),console.log(this.data1,this.data2,a,b),this.loadRes()},loadRes:function(){var a=this,b=["res/image/720x1280/groupranknew.png","res/image/720x1280/bg_shage_pk.png"];cc.sys.os===cc.sys.OS_DEV&&(b=[]),cc.loader.load(b,function(b){b?console.err(b):(cc.spriteFrameCache.addSpriteFrames("res/image/720x1280/groupranknew.plist"),a.createPKNode())})},createItem:function(a,b){var c=cc.size(200,320),d=cc.Node.create();d.setContentSize(c),d.setAnchorPoint(0.5,0.5);var e=sub.createHead(a.avatarUrl,128,128);e.setPosition(c.width/2,240),d.addChild(e);var f=cc.Sprite.create(b?"#gRank_bigHeadFrame_gold.png":"#gRank_bigHeadFrame.png");if(f.setScale(132/(b?100:132)),f.setPosition(c.width/2,e.getPositionY()),d.addChild(f),b){var g=cc.Sprite.create("#gRank_img_crown.png");g.setPosition(e.getPositionX()-65,e.getPositionY()+65),d.addChild(g)}var h=ShortLabel.create(a.nickName,"Arial",28);if(h.setAnchorPoint(0.5,0.5),h.setPosition(c.width/2,e.getPositionY()-66-30),h.setDimensions(cc.size(200,0)),d.addChild(h),a.data.newUser){var h=cc.LabelTTF.create("\u7518\u5FC3\u88AB\u6253\u8D25\uFF1F\n\u593A\u56DE\u4F60\u7684\u51A0\u519B\uFF01","Arial",24);return h.setColor(cc.color(224,181,157)),h.setAnchorPoint(0.5,0.5),h.setPosition(c.width/2,52),d.addChild(h),d}var i=sub.getTitleName(a.comScore),h=cc.LabelTTF.create(i,"Arial",24);h.setAnchorPoint(0.5,0.5),h.setPosition(c.width/2,100),d.addChild(h);var h=cc.LabelTTF.create(2==this.tab?"\u6700\u9AD8\u5173\u5361":"\u7EFC\u5408\u8BC4\u5206","Arial",28);h.setAnchorPoint(0.5,0.5),h.setPosition(c.width/2,40),d.addChild(h);var j=2==this.tab?a.data.rank:a.data.comScore,k=cc.LabelTTF.create(""+j,"Arial",28);return k.setAnchorPoint(0.5,0.5),k.setPosition(c.width/2,-5),d.addChild(k),d},createDesc:function(a,b){this.t_shareWin3100_1="{name}\u8F7B\u677E\u593A\u51A0\uFF0C\u8FDE\u8650\u4F60\u90FD\u662F\u7231\u4F60\u7684\u5F62\u72B6\uFF01",this.t_shareLose3100_1="\u6211\u4E0D\u8981\u9762\u5B50\u7684\u554A\uFF01\u6211\u8FD8\u4F1A\u8D62\u56DE\u6765\u7684\uFF01",this.t_shareWin3100_2="{name}\u4E43\u8D85\u51E1\u7EDD\u4F26\u4EBA\u4E2D\u9F99\u51E4\uFF0C\u4EBA\u9001\u5916\u53F7\u6D88\u9664\u5927\u795E\uFF01",this.t_shareLose3100_2="\u6211\u771F\u7684\u53EA\u5DEE\u4E00\u70B9\u5C31\u6210\u529F\u4E86...",this.t_shareWin3100_3="{name}\u518D\u6B21\u83B7\u80DC\uFF0C\u660E\u660E\u6709\u989C\u503C\uFF0C\u504F\u504F\u770B\u5B9E\u529B\uFF01",this.t_shareLose3100_3="\u522B\u9AD8\u5174\u592A\u65E9\uFF0C\u8FD9\u4E00\u5B9A\u662F\u4E2A\u610F\u5916\uFF01",this.t_shareWin3100_4="\u8BBA\u5B9E\u529B\uFF0C{name}\u8FD8\u6CA1\u8F93\u8FC7\uFF01",this.t_shareLose3100_4="\u53C8\u88ABKO\u4E86\uFF01\u4E0B\u6B21\u6211\u4EEC\u6BD4\u989C\u503C...",this.t_shareWin3100_5="\u8D62\u4E86\uFF0C\u6211\u4E00\u76F4\u5728\u627F\u53D7\u8FD9\u4E2A\u5E74\u7EAA\u4E0D\u8BE5\u6709\u7684\u5B9E\u529B\uFF01",this.t_shareLose3100_5="\u53CB\u8C0A\u7684\u5C0F\u8239\u8BF4\u7FFB\u5C31\u7FFBo(\u2565\uFE4F\u2565)o";var c="gRank_img_talk.png",d=cc.Scale9Sprite.create(c,cc.rect(20,30,2,5));d.setPreferredSize(cc.size(270,110)),d.setPosition(17,739.9),d.setAnchorPoint(0,0),this.addChild(d);var d=cc.Scale9Sprite.create(c,cc.rect(20,30,2,5));d.setPreferredSize(cc.size(270,110)),d.setPosition(112,903.6),d.setAnchorPoint(0,0),this.addChild(d);var e=subutils.random(1,5),f=this["t_shareWin3100_"+e],g=cc.LabelTTF.create(f.replace("{name}",b.nickName),"Arial",22);g.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),g.setAnchorPoint(0.5,0.5),g.setPosition(245,965),g.setDimensions(220,180),g.setColor(cc.color(0,0,0)),this.addChild(g);var f=this["t_shareLose3100_"+e],h=cc.LabelTTF.create(f.replace("{name}",a.nickname),"Arial",22);h.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER),h.setAnchorPoint(0.5,0.5),h.setPosition(156,800),h.setDimensions(220,180),h.setColor(cc.color(0,0,0)),this.addChild(h)},createBG:function(a,b){var c=sub.createHead(a.avatarUrl,120,120);c.setRotation(-10),c.setPosition(250.4,668.3);var d=sub.createHead(b.avatarUrl,185,185);d.setRotation(12),d.setPosition(467.4,803.5),this.addChild(c),this.addChild(d);var e=cc.Sprite.create("res/image/720x1280/bg_shage_pk.png");e.setAnchorPoint(0,0),this.addChild(e)},createPKNode:function(){this.getContentSize();if(this.data1&&this.data2){this.createBG(this.data1,this.data2);var a=this.createItem(this.data1),b=this.createItem(this.data2,!0);a.setPosition(1*this.width/4,220),b.setPosition(3*this.width/4,220),this.addChild(a),this.addChild(b);var c=cc.Sprite.create("#gRank_img_vs.png");c.setPosition(2*this.width/4,240),this.addChild(c),this.createDesc(this.data1,this.data2)}}}),FriendPKSubLayer.create=function(){return new FriendPKSubLayer}})(); 
 			});
 		define("src/subContext/FriendRankSubLayer.js", function(require, module, exports){ 			
(function(){FriendRankSubLayer=cc.Scene.extend({init:function(){return this.listView={},this.size=this.getContentSize(),console.log("----------",this.getContentWidth()),console.log("----------",this.getContentHeight()),!0},showTab:function(a,b,c){this.tab=b,this.selfId=c,sub.sortRankList(a,this.tab),this.loadRes()},loadRes:function(){var a=this,b=["res/image/720x1280/groupranknew.png"];cc.sys.os===cc.sys.OS_DEV&&(b=[]),cc.loader.load(b,function(b){if(b)console.err(b);else for(var c in cc.spriteFrameCache.addSpriteFrames("res/image/720x1280/groupranknew.plist"),a.listView[a.tab]&&a.listView[a.tab].removeFromParent(!0),a.listView[a.tab]=a.createFriendList(sub.friends),a.listView)a.listView[c]&&a.listView[c].setVisible(c==a.tab)})},createRank:function(a){var b=null;if(3>=a)b=cc.Sprite.create("#gRank_rank_"+a+".png"),b.setScale(0.8);else{var b=cc.LabelTTF.create(""+a,"Arial",28);b.setAnchorPoint(0.5,0.5)}return b},createFriendItem:function(a,b){var c=cc.size(this.size.width,105),d=cc.Node.create();d.setContentSize(c);var e=cc.rect(12,16,10,80),f=a.openId==this.selfId?"gRank_scaleSelfListBg.png":"gRank_scaleFriendListBg.png",g=cc.Scale9Sprite.create(f,e);g.setPreferredSize(cc.size(0.96*c.width,0.96*c.height)),g.setPosition(c.width/2,c.height/2),d.addChild(g);var h=ShortLabel.create(a.nickName,"Arial",24);h.setAnchorPoint(0,0.5),h.setPosition(190,c.height/2),h.setHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT),h.setDimensions(cc.size(200,0)),d.addChild(h);var i=2==this.tab?a.data.rank:a.data.comScore,j=cc.LabelTTF.create(""+i,"Arial",24);j.setAnchorPoint(0.5,0.5),j.setPosition(450,c.height/2),d.addChild(j);var k=sub.createHead(a.avatarUrl,62,62);k.setPosition(120,c.height/2),d.addChild(k);var l=cc.Sprite.create("#gRank_bigHeadFrame.png");l.setScale(62/132),l.setPosition(120,c.height/2),d.addChild(l);var m=this.createRank(b);return m.setPosition(50,c.height/2),d.addChild(m),d},createFriendList:function(a){var b=this.getContentSize(),c=ListGridView.create();c.setContentSize(b),c.setAnchorPoint(0.5,0.5),c.setPosition(b.width/2,b.height/2),this.addChild(c);for(var d=this,e=0,f=function(){if(!(e>=a.length)){e++;var b=a[e-1],f=d.createFriendItem(b,e);c.addItem(f)}},g=8,h=1;h<=g;++h)f();return c.unregisterPreloadListener(),a.length>g&&c.registerPreloadListener(0.1,0.05,f),c}}),FriendRankSubLayer.instance=null,FriendRankSubLayer.create=function(){return this.instance||(this.instance=new FriendRankSubLayer,this.instance.init()),this.instance}})(); 
 			});
 		define("src/subContext/GroupRankListItem.js", function(require, module, exports){ 			
(function(){GroupRankListItem=cc.Node.extend({groupPlayerData:null,itemBg:null,frameRect:cc.rect(0,0,0,0),rankIndex:0,listener:null,playerIndexNode:null,playerHeadNode:null,playerNameLab:null,playerTitleLab:null,playerScroeLab:null,playerTopLvLab:null,initData:function(a,b,c,d){return this.rankIndex=a,this.listener=d,this.frameRect.width=c.width,this.frameRect.height=c.height,this.groupPlayerData=b,this.setContentSize(this.frameRect.width,this.frameRect.height),this.refreshSpr(),!0},isMe:function(){return sub.isMe(this.groupPlayerData)},refreshSpr:function(){var a=cc.rect(0,0,this.frameRect.width,this.frameRect.height),b=cc.rect(12,16,15,20),c=cc.size(35,128),d=cc.rect(b.x,b.y,c.width-b.width-b.x,c.height-b.height-b.y);this.itemBg=this.isMe()?cc.Scale9Sprite.createWithSpriteFrameName('gRank_scaleSelfListBg.png',d):cc.Scale9Sprite.createWithSpriteFrameName('gRank_scaleFriendListBg.png',d),this.itemBg.setPreferredSize(a),this.itemBg.setPosition(this.getContentSize().width/2,this.getContentSize().height/2-6),this.addChild(this.itemBg,1),this.playerIndexNode=cc.Node.create(),this.playerIndexNode.setPosition(40,62),this.addChild(this.playerIndexNode,2),this.refreshIndexSpr(),this.playerHeadNode=cc.Node.create(),this.playerHeadNode.setPosition(114,62),this.addChild(this.playerHeadNode,2);var e=sub.createHead(this.groupPlayerData.avatarUrl,80,80);e.setPosition(0,0),this.playerHeadNode.addChild(e,1);var f=cc.Sprite.createWithSpriteFrameName('gRank_bigHeadFrame.png');f.setScale(84/f.height),f.setPosition(0,0),this.playerHeadNode.addChild(f,2);var g=ShortLabel.create(this.groupPlayerData.nickName,'Arial',24);g.setAnchorPoint(0,0.5),g.setPosition(172,80),g.setHorizontalAlignment(cc.TEXT_ALIGNMENT_LEFT),g.setDimensions(cc.size(200,0)),this.isMe()?g.setColor(cc.color(69,16,0)):g.setColor(cc.color(255,255,255)),this.addChild(g,2),this.playerNameLab=g,this.playerTitleLab=cc.LabelTTF.create(this.getTitleNameStr(),'Arial',24),this.playerTitleLab.setAnchorPoint(0,0.5),this.playerTitleLab.setPosition(172,40),this.isMe()?this.playerTitleLab.setColor(cc.color(110,13,0)):this.playerTitleLab.setColor(cc.color(255,255,100)),this.addChild(this.playerTitleLab,2);var h=cc.LabelTTF.create('\u7EFC\u5408\u8BC4\u5206','Arial',24);h.setAnchorPoint(0.5,0.5),h.setPosition(a.width-220,84),this.isMe()?h.setColor(cc.color(69,16,0)):h.setColor(cc.color(255,255,255)),this.addChild(h,2),this.playerScroeLab=cc.LabelTTF.create(''+(this.groupPlayerData.data.comScore||0),'Arial',40),this.playerScroeLab.setAnchorPoint(0.5,0.5),this.playerScroeLab.setPosition(h.getPositionX(),h.getPositionY()-40),this.isMe()?this.playerScroeLab.setColor(cc.color(160,36,3)):this.playerScroeLab.setColor(cc.color(255,255,100)),this.addChild(this.playerScroeLab,2);var i=cc.LabelTTF.create('\u6700\u9AD8\u5173\u5361','Arial',24);i.setAnchorPoint(0.5,0.5),i.setPosition(a.width-84,h.getPositionY()),this.isMe()?i.setColor(cc.color(69,16,0)):i.setColor(cc.color(255,255,255)),this.addChild(i,2),this.playerTopLvLab=cc.LabelTTF.create('\u7B2C'+(this.groupPlayerData.data.rank||0)+'\u5173','Arial',26),this.playerTopLvLab.setAnchorPoint(0.5,0.5),this.playerTopLvLab.setPosition(i.getPositionX(),i.getPositionY()-40),this.isMe()?this.playerTopLvLab.setColor(cc.color(105,26,5)):this.playerTopLvLab.setColor(cc.color(255,255,255)),this.addChild(this.playerTopLvLab,2)},refreshIndexSpr:function(){if(this.playerIndexNode.removeAllChildren(!0),3>this.rankIndex){var a=cc.Sprite.createWithSpriteFrameName('gRank_rank_'+(this.rankIndex+1)+'.png');a.setPosition(0,0),this.playerIndexNode.addChild(a,2)}else{var b=55;10<=this.rankIndex+1&&(b=45);var c=cc.LabelTTF.create(this.rankIndex+1,'Arial',b);c.setAnchorPoint(0.5,0.5),c.setPosition(0,0),this.isMe()?c.setColor(cc.color(148,33,50)):c.setColor(cc.color(121,57,157)),this.playerIndexNode.addChild(c,2)}},getTitleNameStr:function(){var a=this.groupPlayerData.data.comScore;return sub.getTitleName(a)}}),GroupRankListItem.create=function(a,b,c,d){var e=new GroupRankListItem;return e&&e.initData(a,b,c,d)?e:null}})(); 
 			});
 		define("src/subContext/GroupRankSubScene.js", function(require, module, exports){ 			
(function(){GroupRankSubScene=cc.Scene.extend({curGroupOpenId:"",curGroupRankDatas:[],curWorldRankDatas:[],curTabType:0,kTab_Unknown:0,kTab_GroupRank:1,kTab_WorldRank:2,init:function(){return console.log("-----GroupRankSubScene-----",this.getContentWidth()),console.log("-----GroupRankSubScene-----",this.getContentHeight()),this.size=this.getContentSize(),this.refreshGroupRankDatas(),!0},refreshGroupRankDatas:function(){if(this.curGroupRankDatas=[],sub.groups)for(var a=0;a<sub.groups.length;a++)this.curGroupRankDatas.push(sub.groups[a]);sub.sortRankList(this.curGroupRankDatas,3),this.curWorldRankDatas=[];for(var a=0;0>a;a++){var b=4*Math.random()+1,c=SubWorldPlayerData.create("res/image/720x1280/avatar"+parseInt(b)+".png","\u7FA4\u6635\u79F0 "+a,"","");this.curWorldRankDatas.push(c)}this.initGroupRankBg()},initGroupRankBg:function(){var a=["res/image/720x1280/groupranknew.png"];cc.sys.os===cc.sys.OS_DEV&&(a=[]);var b=this;cc.loader.load(a,function(a){a?console.error(a):(cc.spriteFrameCache.addSpriteFrames("res/image/720x1280/groupranknew.plist"),b.createUI())})},onButtonTab1:function(){},onButtonTab2:function(){},createTabButton:function(a,b,c){var d=cc.rect(0,0,304,58),e=ButtonNode.create();e.setContentSize(cc.size(d.width,d.height)),e.setAnchorPoint(0.5,0.5),e.setPosition(b),e.ignoreAnchorPointForPosition(!1),e.setCallback(c,this),e.setEnabled(!1),this.addChild(e);var f=cc.Scale9Sprite.create("gRank_scaleUncheckedSpr.png");f.setPreferredSize(d),f.setPosition(d.width/2,d.height/2),e.addChild(f),e.node1=f;var g=cc.LabelTTF.create(a,"Arial",28);g.setAnchorPoint(0.5,0.5),g.setColor(cc.color(120,47,144)),g.setPosition(d.width/2,d.height/2-3),e.addChild(g);var f=cc.Scale9Sprite.create("gRank_scaleCheckedSpr.png");f.setPreferredSize(d),f.setPosition(d.width/2,d.height/2),e.addChild(f),e.node2=f;var g=cc.LabelTTF.create(a,"Arial",28);return g.setAnchorPoint(0.5,0.5),g.setColor(cc.color(93,0,128)),g.setPosition(d.width/2,d.height/2-3),e.addChild(g),this.addChild(e),e},createGroupList:function(a){var b=26,c=cc.Scale9Sprite.create("gRank_scaleListBg.png",cc.rect(30,30,5,5));c.setPreferredSize(cc.size(a.width+2*b,a.height+2*b)),c.setPosition(a.x-b,a.y-b),c.setAnchorPoint(0,0),this.addChild(c);var d=ListGridView.create();d.setContentSize(cc.size(a.width,a.height)),d.setAnchorPoint(0,0),d.setPosition(a.x,a.y),this.addChild(d),this.listRankView=d},createRightHead:function(){var a=null;if(sub.selfData)for(var b=0;b<this.curGroupRankDatas.length;++b)if(sub.isMe(this.curGroupRankDatas[b])){a=this.curGroupRankDatas[b];break}if(sub.openId)for(var c,b=0;b<this.curGroupRankDatas.length;++b)if(c=this.curGroupRankDatas[b],c.openId==sub.openId){a=c;break}null==a&&this.curGroupRankDatas.length&&(a=this.curGroupRankDatas[0]),null==a&&(a=sub.selfData),a&&this.refreshHeadPortraitSpr(a)},createUI:function(){var a=this,b=a._sceneNode,c=cc.rect(28,160,this.size.width-56,610),d=cc.rect(0,0,304,58);this.tab1=this.createTabButton("\u672C\u7FA4\u6392\u884C\u699C",cc.p(this.size.width/2-d.width/2-8,c.y+c.height+38),this.onButtonTab1),this.tab2=this.createTabButton("\u656C\u8BF7\u671F\u5F85",cc.p(this.size.width/2+d.width/2+8,c.y+c.height+38),this.onButtonTab2),this.createGroupList(c),this.createRightHead(),a.refreshBtnState(a.kTab_GroupRank)},refreshScrollViewList:function(){var a=this.listRankView.getContentWidth();if(this.listRankView.removeAllItems(),this.curTabType==this.kTab_GroupRank){for(var b=this,c=0,d=function(){if(!(c>=b.curGroupRankDatas.length)){c++;var d=b.curGroupRankDatas[c-1],e=GroupRankListItem.create(c-1,d,cc.rect(0,0,a,128));b.listRankView.addItem(e)}},e=5,f=1;f<=e;++f)d();this.listRankView.unregisterPreloadListener(),this.curGroupRankDatas.length>e&&this.listRankView.registerPreloadListener(0.1,0.05,d)}else if(this.curTabType==this.kTab_WorldRank){for(var g,f=0;f<this.curWorldRankDatas.length;f++)g=WorldRankListItem.create(f,this.curWorldRankDatas[f],cc.rect(0,0,a,128)),this.listRankView.addItem(g);2>this.curWorldRankDatas.length}},refreshHeadPortraitSpr:function(a){var b=new cc.Node.create;b.setPosition(500,1162),this.addChild(b,4);var c=sub.createHead(a.avatarUrl,130,130);b.addChild(c,1);var d=cc.Sprite.create("#gRank_bigHeadFrame.png");d.setScale(1),b.addChild(d,2);var e=ShortLabel.create(a.nickName,"Arial",30);e.setAnchorPoint(0.5,0.5),e.setPosition(0,c.getPositionY()-90),e.setColor(cc.color(69,16,0)),e.setDimensions(cc.size(300,0)),b.addChild(e,2);var f=cc.LabelTTF.create("\u7EFC\u5408\u8BC4\u5206","Arial",35);f.setAnchorPoint(0.5,0.5),f.setPosition(0,c.getPositionY()-132),f.setColor(cc.color(255,255,255)),b.addChild(f,2);var g=cc.LabelTTF.create(""+a.data.comScore,"Arial",60);g.setAnchorPoint(0.5,0.5),g.setPosition(0,c.getPositionY()-185),g.setColor(cc.color(255,255,255)),b.addChild(g,2)},refreshBtnState:function(a){if(console.log("-------refreshBtnState",a,this.curTabType),a!=this.curTabType){var b=a==this.kTab_GroupRank;this.tab1.node1.setVisible(!b),this.tab1.node2.setVisible(b),this.tab2.node1.setVisible(b),this.tab2.node2.setVisible(!b),this.curTabType=a,this.refreshScrollViewList()}}}),GroupRankSubScene.instance=null,GroupRankSubScene.create=function(){return(!this.instance||!0)&&(this.instance=new GroupRankSubScene,this.instance.init()),this.instance}})(); 
 			});
 		define("src/subContext/RenderTestScene.js", function(require, module, exports){ 			
(function(){var a=cc.Scene.extend({init:function(){var a=this,b=this._bgLayer=new cc.LayerColor(cc.color(0,0,255,255));return a.addChild(b,0),a._init(),!0},_init:function(){var a=this,b="res/image/720x1280/bg_startmenu.jpg";cc.loader.loadImg(b,function(c,d){if(c)console.error(c);else{console.log(d);var e=cc.textureCache.addImage(b);a._initStageBG(e,cc.visibleRect.center)}});cc.loader.load(["res/image/720x1280/mainui.plist","res/image/720x1280/mainui.png","res/image/720x1280/startmenu.plist","res/image/720x1280/startmenu.png"],function(b){b?console.error(b):(cc.spriteFrameCache.addSpriteFrames("res/image/720x1280/mainui.plist"),cc.spriteFrameCache.addSpriteFrames("res/image/720x1280/startmenu.plist"),a._initStageBtn())});cc.loader.load(["res/image/720x1280/avatar1.png","res/image/720x1280/avatar2.png","res/image/720x1280/avatar3.png","res/image/720x1280/avatar4.png","res/image/720x1280/avatar5.png","res/image/720x1280/button.plist","res/image/720x1280/button.png"],function(b){b?console.error(b):(cc.spriteFrameCache.addSpriteFrames("res/image/720x1280/button.plist"),a._initStageListGridView())})},_initStageBG:function(a,b){var c=this,d=c._bg=new cc.Sprite(a);d.x=b.x,d.y=b.y,d.width=sharedCanvas.width,d.height=sharedCanvas.height,c._bgLayer.addChild(d,0),console.log("initStageBG anchor x:"+d.anchorX+" y:"+d.anchorY),console.log("initStageBG centerPos x:"+b.x+" y:"+b.y),console.log("initStageBG sharedCanvas width:"+sharedCanvas.width+" height:"+sharedCanvas.height),console.log("initStageBG bg getContent:"+d.getContentWidth()+" height:"+d.getContentHeight()),console.log("initStageBG bg width:"+d.width+" height:"+d.height)},_initStageBtn:function(){var a=this,b=ButtonSprite.create(),c=cc.spriteFrameCache.getSpriteFrame("sm_titile_guest.png");b.initWithSpriteFrame(c);var d=cc.visibleRect.center;b.x=d.x,b.y=0,b.setCallback(function(){console.warn("touch button")},a),a._bgLayer.addChild(b,5);var e=cc.Sprite.create(cc.spriteFrameCache.getSpriteFrame("btn_close.png")),d=cc.visibleRect.center;e.setPosition(d.x,d.y),a._bgLayer.addChild(e,5),console.log("_closeSpr anchor x:"+e.anchorX+" y:"+e.anchorY),console.log("_closeSpr centerPos x:"+d.x+" y:"+d.y)},_initStageListGridView:function(){var a=this,b=ListGridView.create();b.setContentSize(cc.size(300,500));var c=cc.visibleRect.center;b.setAnchorPoint(0.5,0.5),b.x=c.x,b.y=c.y,b.setCountPerRow(3),b.setGapWidth(10),b.setGapHeight(5);var d,e,f;d=new cc.Sprite(cc.textureCache.getTextureForKey("res/image/720x1280/avatar1.png")),e=cc.LabelTTF.create("xixi","Arial",26),f=ButtonSprite.create(),f.initWithSpriteFrame(cc.spriteFrameCache.getSpriteFrame("button_blue2.png")),f.setCallback(function(){console.warn("touch button 1")},a),b.addItem(d),b.addItem(e),b.addItem(f),b.addItem(new cc.Sprite(cc.textureCache.getTextureForKey("res/image/720x1280/avatar2.png"))),b.addItem(cc.LabelTTF.create("haha","Arial",26));var f=ButtonSprite.create();f.initWithSpriteFrame(cc.spriteFrameCache.getSpriteFrame("button_green2.png")),f.setCallback(function(){console.warn("touch button 2")},a),b.addItem(f),b.addItem(new cc.Sprite(cc.textureCache.getTextureForKey("res/image/720x1280/avatar3.png"))),b.addItem(cc.LabelTTF.create("haha","Arial",26));var f=ButtonSprite.create();f.initWithSpriteFrame(cc.spriteFrameCache.getSpriteFrame("button_orange2.png")),f.setCallback(function(){console.warn("touch button 3")},a),b.addItem(f)},onEnter:function(){var a=this;cc.Node.prototype.onEnter.call(a)},onExit:function(){cc.Node.prototype.onExit.call(this)}});a.run=function(){return this.instance||(this.instance=new a,this.instance.init()),console.log("contentScaleFactor=",cc.game.config.contentScaleFactor),cc.director.setContentScaleFactor(cc.game.config.contentScaleFactor),cc.director.runScene(this.instance),this.instance},a.runTest=function(b){cc.game.onStart=function(){cc.view.enableRetina(!0),a.run()},cc.game.run(b)}})(); 
 			});
 		define("src/subContext/WorldRankListItem.js", function(require, module, exports){ 			
(function(){var a=cc.Sprite.extend({groupPlayerData:null,itemBg:null,frameRect:cc.rect(0,0,0,0),rankIndex:0,listener:null,playerIndexNode:null,playerHeadNode:null,playerNameLab:null,playerScroeLab:null,initData:function(a,b,c,d){return this.rankIndex=a,this.listener=d,this.frameRect.width=c.width,this.frameRect.height=c.height,this.groupPlayerData=b,this.setContentSize(this.frameRect.width,this.frameRect.height),this.refreshSpr(),!0},isMe:function(){return!(0<this.rankIndex)},refreshSpr:function(){var a=cc.rect(0,0,this.frameRect.width,this.frameRect.height),b=cc.rect(12,16,15,20),c=cc.size(35,128),d=cc.rect(b.x,b.y,c.width-b.width-b.x,c.height-b.height-b.y);this.itemBg=this.isMe()?cc.Scale9Sprite.createWithSpriteFrameName('gRank_scaleSelfListBg.png',d):cc.Scale9Sprite.createWithSpriteFrameName('gRank_scaleFriendListBg.png',d),this.itemBg.setPreferredSize(a),this.itemBg.setPosition(this.getContentSize().width/2,this.getContentSize().height/2-6),this.addChild(this.itemBg,1),this.playerIndexNode=cc.Node.create(),this.playerIndexNode.setPosition(40,62),this.addChild(this.playerIndexNode,2),this.refreshIndexSpr(),this.playerHeadNode=cc.Node.create(),this.playerHeadNode.setPosition(114,62),this.addChild(this.playerHeadNode,2);var e=new cc.Sprite(cc.textureCache.getTextureForKey(this.groupPlayerData.getAvatarUrl()));e.setScaleX(80/e.width),e.setScaleY(80/e.height),e.setPosition(0,0),this.playerHeadNode.addChild(e,1);var f=cc.Sprite.createWithSpriteFrameName('gRank_bigHeadFrame.png');f.setScale(84/f.height),f.setPosition(0,0),this.playerHeadNode.addChild(f,2),this.playerNameLab=cc.LabelTTF.create(this.groupPlayerData.getNickName(),'Arial',24),this.playerNameLab.setAnchorPoint(0,0.5),this.playerNameLab.setPosition(172,62),this.isMe()?this.playerNameLab.setColor(cc.color(69,16,0)):this.playerNameLab.setColor(cc.color(255,255,255)),this.addChild(this.playerNameLab,2);var g=cc.LabelTTF.create('\u603B\u661F\u661F\u6570','Arial',24);g.setAnchorPoint(0.5,0.5),g.setPosition(a.width-150,84),this.isMe()?g.setColor(cc.color(69,16,0)):g.setColor(cc.color(255,255,255)),this.addChild(g,2),this.playerScroeLab=cc.LabelTTF.create('8888','Arial',40),this.playerScroeLab.setAnchorPoint(0.5,0.5),this.playerScroeLab.setPosition(g.getPositionX(),g.getPositionY()-40),this.isMe()?this.playerScroeLab.setColor(cc.color(160,36,3)):this.playerScroeLab.setColor(cc.color(255,255,100)),this.addChild(this.playerScroeLab,2)},refreshIndexSpr:function(){if(this.playerIndexNode.removeAllChildren(!0),3>this.rankIndex){var a=cc.Sprite.createWithSpriteFrameName('gRank_rank_'+(this.rankIndex+1)+'.png');a.setPosition(0,0),this.playerIndexNode.addChild(a,2)}else{var b=55;10<=this.rankIndex+1&&(b=45);var c=cc.LabelTTF.create(this.rankIndex+1,'Arial',b);c.setAnchorPoint(0.5,0.5),c.setPosition(0,0),this.isMe()?c.setColor(cc.color(148,33,50)):c.setColor(cc.color(121,57,157)),this.playerIndexNode.addChild(c,2)}}});a.create=function(b,c,d,e){var f=new a;return f&&f.initData(b,c,d,e)?f:null}})(); 
 			});
 		define("src/subContext/sub_mini.js", function(require, module, exports){ 			
require("./weapp-adapter-subcontext.js");window.cc=cc={};cc._tmp=cc._tmp||{};cc._LogInfos={};cc.timePoints=[];cc.addTimePoint=function(a){var b=(new Date).getTime();cc.timePoints.push(a);cc.timePoints[a]=b};cc.printTimePoint=function(a,b){if(a&&b)console.log(a,"---------",b,cc.timePoints[b]-cc.timePoints[a]);else if(a)console.log(a,cc.timePoints[a]-cc.timePoints[0]);else{a=cc.timePoints[0];for(var c=0;c<cc.timePoints.length;++c)b=cc.timePoints[c],console.log("---------",b,cc.timePoints[b]-cc.timePoints[a])}};
cc.addTimePoint("start");var _p=window,_p=Object.prototype,_p=null;cc.ORIENTATION_PORTRAIT=0;cc.ORIENTATION_PORTRAIT_UPSIDE_DOWN=1;cc.ORIENTATION_LANDSCAPE_LEFT=2;cc.ORIENTATION_LANDSCAPE_RIGHT=3;cc._drawingUtil=null;cc._renderContext=null;cc._supportRender=!1;cc._canvas=null;cc.container=null;cc._gameDiv=null;cc.newElement=function(a){return document.createElement(a)};
cc.each=function(a,b,c){if(a)if(a instanceof Array)for(var d=0,e=a.length;d<e&&!1!==b.call(c,a[d],d);d++);else for(d in a)if(!1===b.call(c,a[d],d))break};cc.extend=function(a){var b=2<=arguments.length?Array.prototype.slice.call(arguments,1):[];cc.each(b,function(b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])});return a};cc.isFunction=function(a){return"function"===typeof a};cc.isNumber=function(a){return"number"===typeof a||"[object Number]"===Object.prototype.toString.call(a)};
cc.isString=function(a){return"string"===typeof a||"[object String]"===Object.prototype.toString.call(a)};cc.isArray=function(a){return Array.isArray(a)||"object"===typeof a&&"[object Array]"===Object.prototype.toString.call(a)};cc.isUndefined=function(a){return"undefined"===typeof a};cc.isObject=function(a){return"object"===typeof a&&"[object Object]"===Object.prototype.toString.call(a)};
cc.isCrossOrigin=function(a){if(!a)return cc.log("invalid URL"),!1;var b=a.indexOf("://");if(-1===b)return!1;b=a.indexOf("/",b+3);return(-1===b?a:a.substring(0,b))!==location.origin};
cc.AsyncPool=function(a,b,c,d,e){var f=this;f._srcObj=a;f._limit=b;f._pool=[];f._iterator=c;f._iteratorTarget=e;f._onEnd=d;f._onEndTarget=e;f._results=a instanceof Array?[]:{};f._errors=a instanceof Array?[]:{};cc.each(a,function(a,b){f._pool.push({index:b,value:a})});f.size=f._pool.length;f.finishedSize=0;f._workingSize=0;f._limit=f._limit||f.size;f.onIterator=function(a,b){f._iterator=a;f._iteratorTarget=b};f.onEnd=function(a,b){f._onEnd=a;f._onEndTarget=b};f._handleItem=function(){var a=this;if(!(0===
a._pool.length||a._workingSize>=a._limit)){var b=a._pool.shift(),c=b.value,d=b.index;a._workingSize++;a._iterator.call(a._iteratorTarget,c,d,function(b,c){a.finishedSize++;a._workingSize--;b?(a._errors[this.index]=b,console.error(a._pool[this.index],b)):a._results[this.index]=c;a.finishedSize===a.size?a._onEnd&&a._onEnd.call(a._onEndTarget,0===a._errors.length?null:a._errors,a._results):a._handleItem()}.bind(b),a)}};f.flow=function(){if(0===this._pool.length)this._onEnd&&this._onEnd.call(this._onEndTarget,
null,[]);else for(var a=0;a<this._limit;a++)this._handleItem()}};
cc.async={series:function(a,b,c){a=new cc.AsyncPool(a,1,function(a,b,f){a.call(c,f)},b,c);a.flow();return a},parallel:function(a,b,c){a=new cc.AsyncPool(a,0,function(a,b,f){a.call(c,f)},b,c);a.flow();return a},waterfall:function(a,b,c){var d=[],e=[null],f=new cc.AsyncPool(a,1,function(b,f,k){d.push(function(b){d=Array.prototype.slice.call(arguments,1);a.length-1===f&&(e=e.concat(d));k.apply(null,arguments)});b.apply(c,d)},function(a){if(b){if(a)return b.call(c,a);b.apply(c,e)}});f.flow();return f},
map:function(a,b,c,d){var e=b;"object"===typeof b&&(c=b.cb,d=b.iteratorTarget,e=b.iterator);a=new cc.AsyncPool(a,0,e,c,d);a.flow();return a},mapLimit:function(a,b,c,d,e){a=new cc.AsyncPool(a,b,c,d,e);a.flow();return a}};
cc.path={normalizeRE:/[^\.\/]+\/\.\.\//,join:function(){for(var a=arguments.length,b="",c=0;c<a;c++)b=(b+(""===b?"":"/")+arguments[c]).replace(/(\/|\\\\)$/,"");return b},extname:function(a){return(a=/(\.[^\.\/\?\\]*)(\?.*)?$/.exec(a))?a[1]:null},mainFileName:function(a){if(a){var b=a.lastIndexOf(".");if(-1!==b)return a.substring(0,b)}return a},basename:function(a,b){var c=a.indexOf("?");0<c&&(a=a.substring(0,c));c=/(\/|\\\\)([^(\/|\\\\)]+)$/g.exec(a.replace(/(\/|\\\\)$/,""));if(!c)return null;c=c[2];
return b&&a.substring(a.length-b.length).toLowerCase()===b.toLowerCase()?c.substring(0,c.length-b.length):c},dirname:function(a){return a.replace(/((.*)(\/|\\|\\\\))?(.*?\..*$)?/,"$2")},changeExtname:function(a,b){b=b||"";var c=a.indexOf("?"),d="";0<c&&(d=a.substring(c),a=a.substring(0,c));c=a.lastIndexOf(".");return 0>c?a+b+d:a.substring(0,c)+b+d},changeBasename:function(a,b,c){if(0===b.indexOf("."))return this.changeExtname(a,b);var d=a.indexOf("?"),e="";c=c?this.extname(a):"";0<d&&(e=a.substring(d),
a=a.substring(0,d));d=a.lastIndexOf("/");return a.substring(0,0>=d?0:d+1)+b+c+e},_normalize:function(a){var b=a=String(a);do b=a,a=a.replace(this.normalizeRE,"");while(b.length!==a.length);return a}};
cc.loader=function(){var a={},b={},c={},d={},e=RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))|(?:localhost))(?::\\d{2,5})?(?:/\\S*)?$","i");return{resPath:"",audioPath:"",cache:{},getXMLHttpRequest:function(){return window.XMLHttpRequest?
new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},_getArgs4Js:function(a){},isLoading:function(a){return void 0!==d[a]},loadJs:function(a,b,c){},loadJsWithImg:function(a,b,c){},_createScript:function(a,b,c){},_loadJs4Dependency:function(a,b,c,d){},_loadJsImg:function(){},loadTxt:function(a,b){if(cc._isNodeJs)require("fs").readFile(a,function(a,c){a?b(a):b(null,c.toString())});else{var c=this.getXMLHttpRequest(),d="load "+a+" failed!",e=this.urlByAliases(a);c.timeout=3E4;c.open("GET",
e,!0);/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)?(c.setRequestHeader("Accept-Charset","utf-8"),c.onreadystatechange=function(){4===c.readyState&&(200===c.status?b(null,c.responseText):b({status:c.status,errorMessage:d},null))}):(c.overrideMimeType&&c.overrideMimeType("text/plain; charset\x3dutf-8"),c.onload=function(){4===c.readyState&&(""==c.responseText&&console.warn(a,": text is empty string, status\x3d",c.status),200===c.status?b(null,c.responseText):b({status:c.status,
errorMessage:d},null))},c.onerror=function(){b({status:c.status,errorMessage:d},null)},c.ontimeout=function(){b({status:c.status,errorMessage:d},null)});c.send(null)}},_loadTxtSync:function(a){},loadCsb:function(a,b){},loadJson:function(a,b){this.loadTxt(a,function(c,d){if(c)b(c);else{try{var e=JSON.parse(d)}catch(n){throw Error("parse json ["+a+"] failed : "+n);}b(null,e)}})},_checkIsImageURL:function(a){return null!=/(\.png)|(\.jpg)|(\.bmp)|(\.jpeg)|(\.gif)/.exec(a)},loadImg:function(a,b,c){var e=
{isCrossOrigin:!0,isSaveToLocalDisk:!0};void 0!==c?(e.isCrossOrigin=void 0===b.isCrossOrigin?e.isCrossOrigin:b.isCrossOrigin,e.isSaveToLocalDisk=void 0===b.isSaveToLocalDisk?e.isSaveToLocalDisk:b.isSaveToLocalDisk):void 0!==b&&(c=b);var m=this.getRes(a);if(m)return c&&c(null,m),m;if(b=d[a])return b.callbacks.push(c),b.img;m=new Image;e.isCrossOrigin&&"file://"!==location.origin&&(m.crossOrigin="Anonymous");var n=function(){this.removeEventListener("load",n,!1);this.removeEventListener("error",r,!1);
var b=d[a];if(b){for(var c=b.callbacks,e=0;e<c.length;++e){var g=c[e];g&&g(null,m)}b.img=null;delete d[a]}},p=this,r=function(){this.removeEventListener("load",n,!1);this.removeEventListener("error",r,!1);if("https:"!==window.location.protocol&&m.crossOrigin&&"anonymous"===m.crossOrigin.toLowerCase())e.isCrossOrigin=!1,p.release(a),cc.loader.loadImg(a,e,c);else{var b=d[a];if(b){for(var g=b.callbacks,t=0;t<g.length;++t){var x=g[t];x&&x("load image failed")}b.img=null;delete d[a]}}};d[a]={img:m,callbacks:c?
[c]:[]};m.addEventListener("load",n);m.addEventListener("error",r);m.src=this.urlByAliases(a);return m},_loadResIterator:function(b,c,d){var k=this,m=null,n=b.type;n?(n="."+n.toLowerCase(),m=b.src?b.src:b.name+n):(m=b,n=cc.path.extname(m));if(c=k.getRes(m))return d(null,c);c=null;n&&(c=a[n.toLowerCase()]);if(!c)return cc.error("loader for ["+n+"] not exists!"),d();n=m;e.test(m)||(n=c.getBasePath?c.getBasePath():k.resPath,n=k.getUrl(n,m));cc.game.config.noCache&&"string"===typeof n&&(n=k._noCacheRex.test(n)?
n+("\x26_t\x3d"+(new Date-0)):n+("?_t\x3d"+(new Date-0)));c.load(n,m,b,function(a,b){a?(cc.log(a),k.cache[m]=null,delete k.cache[m],d({status:520,errorMessage:a},null)):(k.cache[m]=b,d(null,b))})},_noCacheRex:/\?/,getUrl:function(c,d){var e=cc.path;if(void 0!==c&&void 0===d){d=c;var k=e.extname(d),k=k?k.toLowerCase():"";c=(k=a[k])?k.getBasePath?k.getBasePath():this.resPath:this.resPath}d=cc.path.join(c||"",d);if(d.match(/[\/(\\\\)]lang[\/(\\\\)]/i)){if(b[d])return b[d];e=e.extname(d)||"";d=b[d]=d.substring(0,
d.length-e.length)+"_"+cc.sys.language+e}return d},load:function(a,b,c){var d=this,e=arguments.length;if(0===e)throw Error("arguments error!");3===e?"function"===typeof b&&(b="function"===typeof c?{trigger:b,cb:c}:{cb:b,cbTarget:c}):2===e?"function"===typeof b&&(b={cb:b}):1===e&&(b={});a instanceof Array||(a=[a]);e=new cc.AsyncPool(a,0,function(a,c,e,f){d._loadResIterator(a,c,function(a){var c=Array.prototype.slice.call(arguments,1);b.trigger&&b.trigger.call(b.triggerTarget,c[0],f.size,f.finishedSize);
e(a,c[0])})},b.cb,b.cbTarget);e.flow();return e},_handleAliases:function(a,b){var d=[],e;for(e in a){var m=a[e];c[e]=m;d.push(m)}this.load(d,b)},loadAliases:function(a,b){var c=this,d=c.getRes(a);d?c._handleAliases(d.filenames,b):c.load(a,function(a,d){c._handleAliases(d[0].filenames,b)})},register:function(b,c){if(b&&c){if("string"===typeof b)return a[b.trim().toLowerCase()]=c;for(var d=0,e=b.length;d<e;d++)a["."+b[d].trim().toLowerCase()]=c}},getLoader:function(b){return a[b]},getRes:function(a){return this.cache[a]||
this.cache[c[a]]},_getAliase:function(a){return c[a]},release:function(a){if(null!=a){var b=this.cache,e=d[a];e&&(e.img=null,delete d[a]);delete b[a];delete b[c[a]];delete c[a];wxResManager.removeQueue(a)}},releaseAll:function(){var a=this.cache,b;for(b in a)delete a[b];for(b in c)delete c[b]},registerAliases:function(a){this.urlAliases=a},urlByAliases:function(a){if(this.urlAliases){var b=a.indexOf("res/");if(0==b)(b=this.urlAliases[a])&&(a=b),cc.res_url&&(a=cc.res_url+a);else if(0<b&&"/"===a.charAt(b-
1)){var b=a.slice(b),c=this.urlAliases[b];cc.res_url&&c?a=cc.res_url+c:cc.res_url?a=cc.res_url+b:c&&(a=a.replace(b,c))}}else cc.res_url&&0!=a.indexOf("http")&&(b=a.indexOf("res/"),0==b?a=cc.res_url+a:0<b&&"/"===a.charAt(b-1)&&(b=a.slice(b),a=cc.res_url+b));return a}}}();
cc.formatStr=function(){var a=arguments,b=a.length;if(1>b)return"";var c=a[0],d=!0;"object"===typeof c&&(d=!1);for(var e=1;e<b;++e){var f=a[e];if(d)for(;;){var g=null;if("number"===typeof f&&(g=c.match(/(%d)|(%s)/))){c=c.replace(/(%d)|(%s)/,f);break}c=(g=c.match(/%s/))?c.replace(/%s/,f):c+("    "+f);break}else c+="    "+f}return c};
(function(){function a(a){cc._initDebugSetting&&cc._initDebugSetting(a[cc.game.CONFIG_KEY.debugMode]);cc._engineLoaded=!0;cc.log(cc.ENGINE_VERSION);d&&d()}function b(){this.removeEventListener("load",b,!1);a(cc.game.config)}cc.create3DContext=function(a,b){return a.getContext("webgl",b)};(function(){cc.sys={};var a=cc.sys;a.LANGUAGE_ENGLISH="en";a.LANGUAGE_CHINESE="zh";a.LANGUAGE_FRENCH="fr";a.LANGUAGE_ITALIAN="it";a.LANGUAGE_GERMAN="de";a.LANGUAGE_SPANISH="es";a.LANGUAGE_DUTCH="du";a.LANGUAGE_RUSSIAN=
"ru";a.LANGUAGE_KOREAN="ko";a.LANGUAGE_JAPANESE="ja";a.LANGUAGE_HUNGARIAN="hu";a.LANGUAGE_PORTUGUESE="pt";a.LANGUAGE_ARABIC="ar";a.LANGUAGE_NORWEGIAN="no";a.LANGUAGE_POLISH="pl";a.LANGUAGE_UNKNOWN="unkonwn";a.OS_IOS="iOS";a.OS_ANDROID="Android";a.OS_DEV="devtools";a.OS_WINDOWS="Windows";a.OS_MARMALADE="Marmalade";a.OS_LINUX="Linux";a.OS_BADA="Bada";a.OS_BLACKBERRY="Blackberry";a.OS_OSX="OS X";a.OS_WP8="WP8";a.OS_WINRT="WINRT";a.OS_UNKNOWN="Unknown";a.UNKNOWN=-1;a.WIN32=0;a.LINUX=1;a.MACOS=2;a.ANDROID=
3;a.IPHONE=4;a.IPAD=5;a.BLACKBERRY=6;a.NACL=7;a.EMSCRIPTEN=8;a.TIZEN=9;a.WINRT=10;a.WP8=11;a.MOBILE_BROWSER=100;a.DESKTOP_BROWSER=101;a.BROWSER_TYPE_WECHAT="wechat";a.BROWSER_TYPE_ANDROID="androidbrowser";a.BROWSER_TYPE_IE="ie";a.BROWSER_TYPE_QQ="qqbrowser";a.BROWSER_TYPE_MOBILE_QQ="mqqbrowser";a.BROWSER_TYPE_UC="ucbrowser";a.BROWSER_TYPE_360="360browser";a.BROWSER_TYPE_BAIDU_APP="baiduboxapp";a.BROWSER_TYPE_BAIDU="baidubrowser";a.BROWSER_TYPE_MAXTHON="maxthon";a.BROWSER_TYPE_OPERA="opera";a.BROWSER_TYPE_OUPENG=
"oupeng";a.BROWSER_TYPE_MIUI="miuibrowser";a.BROWSER_TYPE_FIREFOX="firefox";a.BROWSER_TYPE_SAFARI="safari";a.BROWSER_TYPE_CHROME="chrome";a.BROWSER_TYPE_LIEBAO="liebao";a.BROWSER_TYPE_QZONE="qzone";a.BROWSER_TYPE_SOUGOU="sogou";a.BROWSER_TYPE_UNKNOWN="unknown";a.isNative=!1;var b=window,c=b.navigator,d=document,k=d.documentElement;c.userAgent.toLowerCase();a.isMobile=!0;a.wxSystemInfo=wx.getSystemInfoSync();a.platform=a.isMobile?a.MOBILE_BROWSER:a.DESKTOP_BROWSER;var m=c.language,m=(m=m?m:c.browserLanguage)?
m.split("-")[0]:a.LANGUAGE_ENGLISH;a.language=m;m=a.wxSystemInfo.platform;"devtools"==m?(a.os=a.OS_DEV,a.osVersion="",a.osMainVersion=0):"ios"==m?(a.os=a.OS_IOS,a.osVersion="",a.osMainVersion=10):"android"==m&&(a.os=a.OS_ANDROID,a.osVersion="",a.osMainVersion=7);a.browserType=a.BROWSER_TYPE_UNKNOWN;a.browserVersion="";a.browserType=a.BROWSER_TYPE_WECHAT;a.browserVersion="";m=window.devicePixelRatio||1;a.windowPixelResolution={width:m*(window.innerWidth||document.documentElement.clientWidth),height:m*
(window.innerHeight||document.documentElement.clientHeight)};a._checkWebGLRenderMode=function(){if(cc._renderType!==cc.game.RENDER_TYPE_WEBGL)throw Error("This feature supports WebGL render mode only.");};a._supportCanvasNewBlendModes=!1;m=a.capabilities={canvas:!0,opengl:!1};if(void 0!==k.ontouchstart||void 0!==d.ontouchstart||c.msPointerEnabled)m.touches=!0;void 0!==k.onmouseup&&(m.mouse=!0);void 0!==k.onkeyup&&(m.keyboard=!0);if(b.DeviceMotionEvent||b.DeviceOrientationEvent)m.accelerometer=!0;
a.garbageCollect=function(){};a.dumpRoot=function(){};a.restartVM=function(){};a.cleanScript=function(a){};a.isObjectValid=function(a){return a?!0:!1};a.dump=function(){var a;a=""+("isMobile : "+this.isMobile+"\r\n");a+="language : "+this.language+"\r\n";a+="browserType : "+this.browserType+"\r\n";a+="browserVersion : "+this.browserVersion+"\r\n";a+="capabilities : "+JSON.stringify(this.capabilities)+"\r\n";a+="os : "+this.os+"\r\n";a+="osVersion : "+this.osVersion+"\r\n";a+="platform : "+this.platform+
"\r\n";a+="Using "+(cc._renderType===cc.game.RENDER_TYPE_WEBGL?"WEBGL":"CANVAS")+" renderer.\r\n";cc.log(a)};a.openURL=function(a){window.open(a)}})();cc.log=cc.warn=cc.error=cc.assert=function(){};var c=!1,d=null;cc._engineLoaded=!1;cc.initEngine=function(e,f){if(c){var g=d;d=function(){g&&g();f&&f()}}else d=f,!cc.game.config&&e?cc.game.config=e:cc.game.config||cc.game._loadConfig(),e=cc.game.config,cc._renderType=cc.game.RENDER_TYPE_CANVAS,cc._supportRender=!0,document.body?a(e):cc._addEventListener(window,
"load",b,!1),c=!0}})();
cc.game={DEBUG_MODE_NONE:0,DEBUG_MODE_INFO:1,DEBUG_MODE_WARN:2,DEBUG_MODE_ERROR:3,DEBUG_MODE_INFO_FOR_WEB_PAGE:4,DEBUG_MODE_WARN_FOR_WEB_PAGE:5,DEBUG_MODE_ERROR_FOR_WEB_PAGE:6,EVENT_HIDE:"game_on_hide",EVENT_SHOW:"game_on_show",EVENT_RESIZE:"game_on_resize",EVENT_RENDERER_INITED:"renderer_inited",RENDER_TYPE_CANVAS:0,RENDER_TYPE_WEBGL:1,RENDER_TYPE_OPENGL:2,_eventHide:null,_eventShow:null,CONFIG_KEY:{width:"width",height:"height",engineDir:"engineDir",modules:"modules",debugMode:"debugMode",showFPS:"showFPS",
frameRate:"frameRate",id:"id",renderMode:"renderMode",jsList:"jsList"},_paused:!0,_prepareCalled:!1,_prepared:!1,_rendererInitialized:!1,_renderContext:null,_intervalId:null,_lastTime:null,_frameTime:null,frame:null,container:null,canvas:null,config:null,onStart:null,onStop:null,setFrameRate:function(a){this.config[this.CONFIG_KEY.frameRate]=a;this._intervalId&&window.cancelAnimationFrame(this._intervalId);this._paused=!0;this._setAnimFrame();this._runMainLoop()},step:function(){cc.director.mainLoop()},
pause:function(){this._paused||(this._paused=!0,cc.audioEngine&&(cc.audioEngine.stopAllEffects(),cc.audioEngine.pauseMusic()),this._intervalId&&window.cancelAnimationFrame(this._intervalId),this._intervalId=0)},resume:function(){this._paused&&(this._paused=!1,cc.audioEngine&&cc.audioEngine.resumeMusic(),this._runMainLoop())},isPaused:function(){return this._paused},restart:function(){cc.director.popToSceneStackLevel(0);cc.audioEngine&&cc.audioEngine.end();cc.game.onStart()},end:function(){close()},
prepare:function(a){var b=this,c=b.config,d=b.CONFIG_KEY;this._loadConfig();this._prepared?a&&a():this._prepareCalled||(cc._engineLoaded?(this._prepareCalled=!0,this._initRenderer(c[d.width],c[d.height]),cc.view=cc.EGLView._getInstance(),cc.director=cc.Director._getInstance(),cc.director.setOpenGLView&&cc.director.setOpenGLView(cc.view),cc.winSize=cc.director.getWinSize(),this._initEvents(),this._setAnimFrame(),this._runMainLoop(),a&&a()):cc.initEngine(this.config,function(){b.prepare(a)}))},run:function(a,
b){"function"===typeof a?cc.game.onStart=a:(a&&("string"===typeof a?(cc.game.config||this._loadConfig(),cc.game.config[cc.game.CONFIG_KEY.id]=a):cc.game.config=a),"function"===typeof b&&(cc.game.onStart=b));this.prepare(cc.game.onStart&&cc.game.onStart.bind(cc.game))},_setAnimFrame:function(){this._lastTime=new Date;this._frameTime=1E3/cc.game.config[cc.game.CONFIG_KEY.frameRate];this._isLowMode=60!==cc.game.config[cc.game.CONFIG_KEY.frameRate];this._isDoubleLoop=!1;window.requestAnimFrame=window.requestAnimationFrame||
window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||this._stTime;window.cancelAnimationFrame=window.cancelAnimationFrame||window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.oCancelAnimationFrame||
this._ctTime},_stTime:function(a){var b=(new Date).getTime(),c=Math.max(0,cc.game._frameTime-(b-cc.game._lastTime)),d=window.setTimeout(function(){a()},c);cc.game._lastTime=b+c;return d},_ctTime:function(a){window.clearTimeout(a)},_runMainLoop:function(){var a=this,b,c=cc.director;c.setDisplayStats(a.config[a.CONFIG_KEY.showFPS]);b=function(){a._paused||(a._isDoubleLoop=!a._isDoubleLoop,a._isLowMode&&!a._isDoubleLoop||c.mainLoop(),a._intervalId&&window.cancelAnimationFrame(a._intervalId),a._intervalId=
window.requestAnimFrame(b))};window.requestAnimFrame(b);a._paused=!1},_loadConfig:function(){this.config?this._initConfig(this.config):this._initConfig(wxConfig.projectConfig)},_initConfig:function(a){var b=this.CONFIG_KEY,c=a[b.modules];a[b.showFPS]="undefined"===typeof a[b.showFPS]?!0:a[b.showFPS];a[b.engineDir]=a[b.engineDir]||"frameworks/cocos2d-html5";null==a[b.debugMode]&&(a[b.debugMode]=0);a[b.frameRate]=a[b.frameRate]||60;null==a[b.renderMode]&&(a[b.renderMode]=0);null==a[b.registerSystemEvent]&&
(a[b.registerSystemEvent]=!0);c&&0>c.indexOf("core")&&c.splice(0,0,"core");c&&(a[b.modules]=c);this.config=a},_initRenderer:function(a,b){if(!this._rendererInitialized){if(!cc._supportRender)throw Error("The renderer doesn't support the renderMode "+this.config[this.CONFIG_KEY.renderMode]);var c=window,d=sharedCanvas,e;a=a||d.width;b=b||d.height;this.canvas=cc._canvas=d;this.container=cc.container=e=document.createElement("DIV");d.parentNode&&d.parentNode.insertBefore(e,d);e.setAttribute("id","Cocos2dGameContainer");
this.frame=e.parentNode===document.body?document.documentElement:e.parentNode;d.setAttribute("width",a||480);d.setAttribute("height",b||320);d.setAttribute("tabindex",99);cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(this._renderContext=cc._renderContext=cc.webglContext=cc.create3DContext(d,{alpha:!1}),cc.labelTTFCanvas=wx.createCanvas(),cc.labelTTFCanvas.width=1,cc.labelTTFCanvas.height=1,cc.labelTTFContext=cc.labelTTFCanvas.getContext("2d"));this._renderContext?(cc.renderer=cc.rendererWebGL,c.gl=
this._renderContext,cc.renderer.init(),cc.shaderCache._init(),cc._drawingUtil=new cc.DrawingPrimitiveWebGL(this._renderContext),cc.textureCache._initializingRenderer(),cc.glExt={},cc.glExt.instanced_arrays=c.gl.getExtension("ANGLE_instanced_arrays"),cc.glExt.element_uint=c.gl.getExtension("OES_element_index_uint")):(cc._renderType=cc.game.RENDER_TYPE_CANVAS,cc.renderer=cc.rendererCanvas,this._renderContext=cc._renderContext=new cc.CanvasContextWrapper(d.getContext("2d")),cc._drawingUtil=cc.DrawingPrimitiveCanvas?
new cc.DrawingPrimitiveCanvas(this._renderContext):null);cc._gameDiv=e;cc.game.canvas.oncontextmenu=function(){if(!cc._isContextMenuEnable)return!1};this.dispatchEvent(this.EVENT_RENDERER_INITED,!0);this._rendererInitialized=!0}},_initEvents:function(){var a=window,b,c;this._eventHide=this._eventHide||new cc.EventCustom(this.EVENT_HIDE);this._eventHide.setUserData(this);this._eventShow=this._eventShow||new cc.EventCustom(this.EVENT_SHOW);this._eventShow.setUserData(this);this.config[this.CONFIG_KEY.registerSystemEvent]&&
cc.inputManager.registerSystemEvent(this.canvas);cc.isUndefined(document.hidden)?cc.isUndefined(document.mozHidden)?cc.isUndefined(document.msHidden)?cc.isUndefined(document.webkitHidden)||(b="webkitHidden",c="webkitvisibilitychange"):(b="msHidden",c="msvisibilitychange"):(b="mozHidden",c="mozvisibilitychange"):(b="hidden",c="visibilitychange");var d=function(){cc.eventManager&&cc.game._eventHide&&cc.eventManager.dispatchEvent(cc.game._eventHide)},e=function(){cc.eventManager&&cc.game._eventShow&&
cc.eventManager.dispatchEvent(cc.game._eventShow)};b?document.addEventListener(c,function(){document[b]?d():e()},!1):(a.addEventListener("blur",d,!1),a.addEventListener("focus",e,!1));-1<navigator.userAgent.indexOf("MicroMessenger")&&(a.onfocus=function(){e()});"onpageshow"in window&&"onpagehide"in window&&(a.addEventListener("pagehide",d,!1),a.addEventListener("pageshow",e,!1));cc.eventManager.addCustomListener(cc.game.EVENT_HIDE,function(){cc.game.pause()});cc.eventManager.addCustomListener(cc.game.EVENT_SHOW,
function(){cc.game.resume()})}};Function.prototype.bind=Function.prototype.bind||function(a){if(!cc.isFunction(this))throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};d.prototype=this.prototype;e.prototype=new d;return e};
cc._urlRegExp=RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))|(?:localhost))(?::\\d{2,5})?(?:/\\S*)?$","i");cc.EventHelper=function(){};
cc.EventHelper.prototype={constructor:cc.EventHelper,apply:function(a){a.addEventListener=cc.EventHelper.prototype.addEventListener;a.hasEventListener=cc.EventHelper.prototype.hasEventListener;a.removeEventListener=cc.EventHelper.prototype.removeEventListener;a.dispatchEvent=cc.EventHelper.prototype.dispatchEvent},addEventListener:function(a,b,c){if("load"===a&&this._textureLoaded)setTimeout(function(){b.call(c)},0);else{void 0===this._listeners&&(this._listeners={});var d=this._listeners;void 0===
d[a]&&(d[a]=[]);this.hasEventListener(a,b,c)||d[a].push({callback:b,eventTarget:c})}},hasEventListener:function(a,b,c){if(void 0===this._listeners)return!1;var d=this._listeners;if(void 0!==d[a]){a=0;for(var e=d.length;a<e;a++){var f=d[a];if(f.callback===b&&f.eventTarget===c)return!0}}return!1},removeEventListener:function(a,b,c){if(void 0!==this._listeners&&(a=this._listeners[a],void 0!==a))for(var d=0;d<a.length;){var e=a[d];e.eventTarget===c&&e.callback===b?a.splice(d,1):d++}},removeEventTarget:function(a,
b,c){if(void 0!==this._listeners&&(a=this._listeners[a],void 0!==a))for(b=0;b<a.length;)a[b].eventTarget===c?a.splice(b,1):b++},dispatchEvent:function(a,b){if(void 0!==this._listeners){null==b&&(b=!0);var c=this._listeners[a];if(void 0!==c){for(var d=[],e=c.length,f=0;f<e;f++)d[f]=c[f];for(f=0;f<e;f++)d[f].callback.call(d[f].eventTarget,this);b&&(c.length=0)}}}};cc.EventHelper.prototype.apply(cc.game);cc._LogInfos={ActionManager_addAction:"cc.ActionManager.addAction(): action must be non-null",ActionManager_removeAction:"cocos2d: removeAction: Target not found",ActionManager_removeActionByTag:"cc.ActionManager.removeActionByTag(): an invalid tag",ActionManager_removeActionByTag_2:"cc.ActionManager.removeActionByTag(): target must be non-null",ActionManager_getActionByTag:"cc.ActionManager.getActionByTag(): an invalid tag",ActionManager_getActionByTag_2:"cocos2d : getActionByTag(tag \x3d %s): Action not found",
configuration_dumpInfo:"cocos2d: **** WARNING **** CC_ENABLE_PROFILERS is defined. Disable it when you finish profiling (from ccConfig.js)",configuration_loadConfigFile:"Expected 'data' dict, but not found. Config file: %s",configuration_loadConfigFile_2:"Please load the resource first : %s",Director_resume:"cocos2d: Director: Error in gettimeofday",Director_setProjection:"cocos2d: Director: unrecognized projection",Director_popToSceneStackLevel:"cocos2d: Director: unrecognized projection",Director_popToSceneStackLevel_2:"cocos2d: Director: Error in gettimeofday",
Director_popScene:"running scene should not null",Director_pushScene:"the scene should not null",arrayVerifyType:"element type is wrong!",Scheduler_scheduleCallbackForTarget:"CCSheduler#scheduleCallback. Callback already scheduled. Updating interval from:%s to %s",Scheduler_scheduleCallbackForTarget_2:"cc.scheduler.scheduleCallbackForTarget(): callback_fn should be non-null.",Scheduler_scheduleCallbackForTarget_3:"cc.scheduler.scheduleCallbackForTarget(): target should be non-null.",Scheduler_pauseTarget:"cc.Scheduler.pauseTarget():target should be non-null",
Scheduler_resumeTarget:"cc.Scheduler.resumeTarget():target should be non-null",Scheduler_isTargetPaused:"cc.Scheduler.isTargetPaused():target should be non-null",Node_getZOrder:"getZOrder is deprecated. Please use getLocalZOrder instead.",Node_setZOrder:"setZOrder is deprecated. Please use setLocalZOrder instead.",Node_getRotation:"RotationX !\x3d RotationY. Don't know which one to return",Node_getScale:"ScaleX !\x3d ScaleY. Don't know which one to return",Node_addChild:"An Node can't be added as a child of itself.",
Node_addChild_2:"child already added. It can't be added again",Node_addChild_3:"child must be non-null",Node_removeFromParentAndCleanup:"removeFromParentAndCleanup is deprecated. Use removeFromParent instead",Node_boundingBox:"boundingBox is deprecated. Use getBoundingBox instead",Node_removeChildByTag:"argument tag is an invalid tag",Node_removeChildByTag_2:"cocos2d: removeChildByTag(tag \x3d %s): child not found!",Node_removeAllChildrenWithCleanup:"removeAllChildrenWithCleanup is deprecated. Use removeAllChildren instead",
Node_stopActionByTag:"cc.Node.stopActionBy(): argument tag an invalid tag",Node_getActionByTag:"cc.Node.getActionByTag(): argument tag is an invalid tag",Node_resumeSchedulerAndActions:"resumeSchedulerAndActions is deprecated, please use resume instead.",Node_pauseSchedulerAndActions:"pauseSchedulerAndActions is deprecated, please use pause instead.",Node__arrayMakeObjectsPerformSelector:"Unknown callback function",Node_reorderChild:"child must be non-null",Node_runAction:"cc.Node.runAction(): action must be non-null",
Node_schedule:"callback function must be non-null",Node_schedule_2:"interval must be positive",Node_initWithTexture:"cocos2d: Could not initialize cc.AtlasNode. Invalid Texture.",AtlasNode_updateAtlasValues:"cc.AtlasNode.updateAtlasValues(): Shall be overridden in subclasses",AtlasNode_initWithTileFile:"",AtlasNode__initWithTexture:"cocos2d: Could not initialize cc.AtlasNode. Invalid Texture.",_EventListenerKeyboard_checkAvailable:"cc._EventListenerKeyboard.checkAvailable(): Invalid EventListenerKeyboard!",
_EventListenerTouchOneByOne_checkAvailable:"cc._EventListenerTouchOneByOne.checkAvailable(): Invalid EventListenerTouchOneByOne!",_EventListenerTouchAllAtOnce_checkAvailable:"cc._EventListenerTouchAllAtOnce.checkAvailable(): Invalid EventListenerTouchAllAtOnce!",_EventListenerAcceleration_checkAvailable:"cc._EventListenerAcceleration.checkAvailable(): _onAccelerationEvent must be non-nil",EventListener_create:"Invalid parameter.",__getListenerID:"Don't call this method if the event is for touch.",
eventManager__forceAddEventListener:"Invalid scene graph priority!",eventManager_addListener:"0 priority is forbidden for fixed priority since it's used for scene graph based priority.",eventManager_removeListeners:"Invalid listener type!",eventManager_setPriority:"Can't set fixed priority with scene graph based listener.",eventManager_addListener_2:"Invalid parameters.",eventManager_addListener_3:"listener must be a cc.EventListener object when adding a fixed priority listener",eventManager_addListener_4:"The listener has been registered, please don't register it again.",
LayerMultiplex_initWithLayers:"parameters should not be ending with null in Javascript",LayerMultiplex_switchTo:"Invalid index in MultiplexLayer switchTo message",LayerMultiplex_switchToAndReleaseMe:"Invalid index in MultiplexLayer switchTo message",LayerMultiplex_addLayer:"cc.Layer.addLayer(): layer should be non-null",EGLView_setDesignResolutionSize:"Resolution not valid",EGLView_setDesignResolutionSize_2:"should set resolutionPolicy",inputManager_handleTouchesBegin:"The touches is more than MAX_TOUCHES, nUnusedIndex \x3d %s",
swap:"cc.swap is being modified from original macro, please check usage",checkGLErrorDebug:"WebGL error %s",animationCache__addAnimationsWithDictionary:"cocos2d: cc.AnimationCache: No animations were found in provided dictionary.",animationCache__addAnimationsWithDictionary_2:"cc.AnimationCache. Invalid animation format",animationCache_addAnimations:"cc.AnimationCache.addAnimations(): File could not be found",animationCache__parseVersion1:"cocos2d: cc.AnimationCache: Animation '%s' found in dictionary without any frames - cannot add to animation cache.",
animationCache__parseVersion1_2:"cocos2d: cc.AnimationCache: Animation '%s' refers to frame '%s' which is not currently in the cc.SpriteFrameCache. This frame will not be added to the animation.",animationCache__parseVersion1_3:"cocos2d: cc.AnimationCache: None of the frames for animation '%s' were found in the cc.SpriteFrameCache. Animation is not being added to the Animation Cache.",animationCache__parseVersion1_4:"cocos2d: cc.AnimationCache: An animation in your dictionary refers to a frame which is not in the cc.SpriteFrameCache. Some or all of the frames for the animation '%s' may be missing.",
animationCache__parseVersion2:"cocos2d: CCAnimationCache: Animation '%s' found in dictionary without any frames - cannot add to animation cache.",animationCache__parseVersion2_2:"cocos2d: cc.AnimationCache: Animation '%s' refers to frame '%s' which is not currently in the cc.SpriteFrameCache. This frame will not be added to the animation.",animationCache_addAnimations_2:"cc.AnimationCache.addAnimations(): Invalid texture file name",Sprite_reorderChild:"cc.Sprite.reorderChild(): this child is not in children list",
Sprite_ignoreAnchorPointForPosition:"cc.Sprite.ignoreAnchorPointForPosition(): it is invalid in cc.Sprite when using SpriteBatchNode",Sprite_setDisplayFrameWithAnimationName:"cc.Sprite.setDisplayFrameWithAnimationName(): Frame not found",Sprite_setDisplayFrameWithAnimationName_2:"cc.Sprite.setDisplayFrameWithAnimationName(): Invalid frame index",Sprite_setDisplayFrame:"setDisplayFrame is deprecated, please use setSpriteFrame instead.",Sprite__updateBlendFunc:"cc.Sprite._updateBlendFunc(): _updateBlendFunc doesn't work when the sprite is rendered using a cc.CCSpriteBatchNode",
Sprite_initWithSpriteFrame:"cc.Sprite.initWithSpriteFrame(): spriteFrame should be non-null",Sprite_initWithSpriteFrameName:"cc.Sprite.initWithSpriteFrameName(): spriteFrameName should be non-null",Sprite_initWithSpriteFrameName1:" is null, please check.",Sprite_initWithFile:"cc.Sprite.initWithFile(): filename should be non-null",Sprite_setDisplayFrameWithAnimationName_3:"cc.Sprite.setDisplayFrameWithAnimationName(): animationName must be non-null",Sprite_reorderChild_2:"cc.Sprite.reorderChild(): child should be non-null",
Sprite_addChild:"cc.Sprite.addChild(): cc.Sprite only supports cc.Sprites as children when using cc.SpriteBatchNode",Sprite_addChild_2:"cc.Sprite.addChild(): cc.Sprite only supports a sprite using same texture as children when using cc.SpriteBatchNode",Sprite_addChild_3:"cc.Sprite.addChild(): child should be non-null",Sprite_setTexture:"cc.Sprite.texture setter: Batched sprites should use the same texture as the batchnode",Sprite_updateQuadFromSprite:"cc.SpriteBatchNode.updateQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",
Sprite_insertQuadFromSprite:"cc.SpriteBatchNode.insertQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",Sprite_addChild_4:"cc.SpriteBatchNode.addChild(): cc.SpriteBatchNode only supports cc.Sprites as children",Sprite_addChild_5:"cc.SpriteBatchNode.addChild(): cc.Sprite is not using the same texture",Sprite_initWithTexture:"Sprite.initWithTexture(): Argument must be non-nil ",Sprite_setSpriteFrame:"Invalid spriteFrameName",Sprite_setTexture_2:"Invalid argument: cc.Sprite.texture setter expects a CCTexture2D.",
Sprite_updateQuadFromSprite_2:"cc.SpriteBatchNode.updateQuadFromSprite(): sprite should be non-null",Sprite_insertQuadFromSprite_2:"cc.SpriteBatchNode.insertQuadFromSprite(): sprite should be non-null",SpriteBatchNode_addSpriteWithoutQuad:"cc.SpriteBatchNode.addQuadFromSprite(): SpriteBatchNode only supports cc.Sprites as children",SpriteBatchNode_increaseAtlasCapacity:"cocos2d: CCSpriteBatchNode: resizing TextureAtlas capacity from %s to %s.",SpriteBatchNode_increaseAtlasCapacity_2:"cocos2d: WARNING: Not enough memory to resize the atlas",
SpriteBatchNode_reorderChild:"cc.SpriteBatchNode.addChild(): Child doesn't belong to Sprite",SpriteBatchNode_removeChild:"cc.SpriteBatchNode.addChild(): sprite batch node should contain the child",SpriteBatchNode_addSpriteWithoutQuad_2:"cc.SpriteBatchNode.addQuadFromSprite(): child should be non-null",SpriteBatchNode_reorderChild_2:"cc.SpriteBatchNode.addChild(): child should be non-null",spriteFrameCache__getFrameConfig:"cocos2d: WARNING: originalWidth/Height not found on the cc.SpriteFrame. AnchorPoint won't work as expected. Regenrate the .plist",
spriteFrameCache_addSpriteFrames:"cocos2d: WARNING: an alias with name %s already exists",spriteFrameCache__checkConflict:"cocos2d: WARNING: Sprite frame: %s has already been added by another source, please fix name conflit",spriteFrameCache_getSpriteFrame:"cocos2d: cc.SpriteFrameCahce: Frame %s not found",spriteFrameCache__getFrameConfig_2:"Please load the resource first : %s",spriteFrameCache_addSpriteFrames_2:"cc.SpriteFrameCache.addSpriteFrames(): plist should be non-null",spriteFrameCache_addSpriteFrames_3:"Argument must be non-nil",
CCSpriteBatchNode_updateQuadFromSprite:"cc.SpriteBatchNode.updateQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",CCSpriteBatchNode_insertQuadFromSprite:"cc.SpriteBatchNode.insertQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",CCSpriteBatchNode_addChild:"cc.SpriteBatchNode.addChild(): cc.SpriteBatchNode only supports cc.Sprites as children",CCSpriteBatchNode_initWithTexture:"Sprite.initWithTexture(): Argument must be non-nil ",CCSpriteBatchNode_addChild_2:"cc.Sprite.addChild(): child should be non-null",
CCSpriteBatchNode_setSpriteFrame:"Invalid spriteFrameName",CCSpriteBatchNode_setTexture:"Invalid argument: cc.Sprite texture setter expects a CCTexture2D.",CCSpriteBatchNode_updateQuadFromSprite_2:"cc.SpriteBatchNode.updateQuadFromSprite(): sprite should be non-null",CCSpriteBatchNode_insertQuadFromSprite_2:"cc.SpriteBatchNode.insertQuadFromSprite(): sprite should be non-null",CCSpriteBatchNode_addChild_3:"cc.SpriteBatchNode.addChild(): child should be non-null",TextureAtlas_initWithFile:"cocos2d: Could not open file: %s",
TextureAtlas_insertQuad:"cc.TextureAtlas.insertQuad(): invalid totalQuads",TextureAtlas_initWithTexture:"cc.TextureAtlas.initWithTexture():texture should be non-null",TextureAtlas_updateQuad:"cc.TextureAtlas.updateQuad(): quad should be non-null",TextureAtlas_updateQuad_2:"cc.TextureAtlas.updateQuad(): Invalid index",TextureAtlas_insertQuad_2:"cc.TextureAtlas.insertQuad(): Invalid index",TextureAtlas_insertQuads:"cc.TextureAtlas.insertQuad(): Invalid index + amount",TextureAtlas_insertQuadFromIndex:"cc.TextureAtlas.insertQuadFromIndex(): Invalid newIndex",
TextureAtlas_insertQuadFromIndex_2:"cc.TextureAtlas.insertQuadFromIndex(): Invalid fromIndex",TextureAtlas_removeQuadAtIndex:"cc.TextureAtlas.removeQuadAtIndex(): Invalid index",TextureAtlas_removeQuadsAtIndex:"cc.TextureAtlas.removeQuadsAtIndex(): index + amount out of bounds",TextureAtlas_moveQuadsFromIndex:"cc.TextureAtlas.moveQuadsFromIndex(): move is out of bounds",TextureAtlas_moveQuadsFromIndex_2:"cc.TextureAtlas.moveQuadsFromIndex(): Invalid newIndex",TextureAtlas_moveQuadsFromIndex_3:"cc.TextureAtlas.moveQuadsFromIndex(): Invalid oldIndex",
textureCache_addPVRTCImage:"TextureCache:addPVRTCImage does not support on HTML5",textureCache_addETCImage:"TextureCache:addPVRTCImage does not support on HTML5",textureCache_textureForKey:"textureForKey is deprecated. Please use getTextureForKey instead.",textureCache_addPVRImage:"addPVRImage does not support on HTML5",textureCache_addUIImage:"cocos2d: Couldn't add UIImage in TextureCache",textureCache_dumpCachedTextureInfo:"cocos2d: '%s' id\x3d%s %s x %s",textureCache_dumpCachedTextureInfo_2:"cocos2d: '%s' id\x3d HTMLCanvasElement %s x %s",
textureCache_dumpCachedTextureInfo_3:"cocos2d: TextureCache dumpDebugInfo: %s textures, HTMLCanvasElement for %s KB (%s MB)",textureCache_addUIImage_2:"cc.Texture.addUIImage(): image should be non-null",Texture2D_initWithETCFile:"initWithETCFile does not support on HTML5",Texture2D_initWithPVRFile:"initWithPVRFile does not support on HTML5",Texture2D_initWithPVRTCData:"initWithPVRTCData does not support on HTML5",Texture2D_addImage:"cc.Texture.addImage(): path should be non-null",Texture2D_initWithImage:"cocos2d: cc.Texture2D. Can't create Texture. UIImage is nil",
Texture2D_initWithImage_2:"cocos2d: WARNING: Image (%s x %s) is bigger than the supported %s x %s",Texture2D_initWithString:"initWithString isn't supported on cocos2d-html5",Texture2D_initWithETCFile_2:"initWithETCFile does not support on HTML5",Texture2D_initWithPVRFile_2:"initWithPVRFile does not support on HTML5",Texture2D_initWithPVRTCData_2:"initWithPVRTCData does not support on HTML5",Texture2D_bitsPerPixelForFormat:"bitsPerPixelForFormat: %s, cannot give useful result, it's a illegal pixel format",
Texture2D__initPremultipliedATextureWithImage:"cocos2d: cc.Texture2D: Using RGB565 texture since image has no alpha",Texture2D_addImage_2:"cc.Texture.addImage(): path should be non-null",Texture2D_initWithData:"NSInternalInconsistencyException",MissingFile:"Missing file: %s",radiansToDegress:"cc.radiansToDegress() should be called cc.radiansToDegrees()",RectWidth:"Rect width exceeds maximum margin: %s",RectHeight:"Rect height exceeds maximum margin: %s",EventManager__updateListeners:"If program goes here, there should be event in dispatch.",
EventManager__updateListeners_2:"_inDispatch should be 1 here."};cc._initDebugSetting=function(a){var b=cc.game;a!==b.DEBUG_MODE_NONE&&(cc.error=Function.prototype.bind.call(console.error,console),cc.assert=Function.prototype.bind.call(console.assert,console),a!==b.DEBUG_MODE_ERROR&&(cc.warn=Function.prototype.bind.call(console.warn,console)),a===b.DEBUG_MODE_INFO&&(cc.log=Function.prototype.bind.call(console.log,console)))};var myVBScript,IEBinaryToArray_ByteStr_Script;cc.loader.loadBinary=function(a,b){wxResManager.loadBinary(a,b)};var cc=cc||{},ClassManager={id:0|998*Math.random(),instanceId:0|998*Math.random(),getNewID:function(){return this.id++},getNewInstanceId:function(){return this.instanceId++}};
(function(){var a=/\b_super\b/;cc.Class=function(){};cc.Class.extend=function(b){function c(){this.__instanceId=ClassManager.getNewInstanceId();this.ctor&&this.ctor.apply(this,arguments)}var d=this.prototype,e=Object.create(d),f=ClassManager.getNewID();ClassManager[f]=d;var g={writable:!0,enumerable:!1,configurable:!0};e.__instanceId=null;c.id=f;g.value=f;Object.defineProperty(e,"__pid",g);c.prototype=e;g.value=c;Object.defineProperty(c.prototype,"constructor",g);this.__getters__&&(c.__getters__=
cc.clone(this.__getters__));this.__setters__&&(c.__setters__=cc.clone(this.__setters__));for(var f=0,h=arguments.length;f<h;++f){var k=arguments[f],m;for(m in k){var n="function"===typeof k[m],p="function"===typeof d[m],r=a.test(k[m]);n&&p&&r?(g.value=function(a,b){return function(){var c=this._super;this._super=d[a];var e=b.apply(this,arguments);this._super=c;return e}}(m,k[m]),Object.defineProperty(e,m,g)):n?(g.value=k[m],Object.defineProperty(e,m,g)):e[m]=k[m];if(n){var s,u;if(this.__getters__&&
this.__getters__[m]){var n=this.__getters__[m],t;for(t in this.__setters__)if(this.__setters__[t]===n){u=t;break}cc.defineGetterSetter(e,n,k[m],k[u]?k[u]:e[u],m,u)}if(this.__setters__&&this.__setters__[m]){n=this.__setters__[m];for(t in this.__getters__)if(this.__getters__[t]===n){s=t;break}cc.defineGetterSetter(e,n,k[s]?k[s]:e[s],k[m],s,m)}}}}c.extend=cc.Class.extend;c.implement=function(a){for(var b in a)e[b]=a[b]};return c}})();
cc.defineGetterSetter=function(a,b,c,d,e,f){if(a.__defineGetter__)c&&a.__defineGetter__(b,c),d&&a.__defineSetter__(b,d);else if(Object.defineProperty){var g={enumerable:!1,configurable:!0};c&&(g.get=c);d&&(g.set=d);Object.defineProperty(a,b,g)}else throw Error("browser does not support getters");if(!e&&!f)for(var g=null!=c,h=void 0!=d,k=Object.getOwnPropertyNames(a),m=0;m<k.length;m++){var n=k[m];if((a.__lookupGetter__?!a.__lookupGetter__(n):!Object.getOwnPropertyDescriptor(a,n))&&"function"===typeof a[n]){var p=
a[n];if(g&&p===c&&(e=n,!h||f))break;if(h&&p===d&&(f=n,!g||e))break}}a=a.constructor;e&&(a.__getters__||(a.__getters__={}),a.__getters__[e]=b);f&&(a.__setters__||(a.__setters__={}),a.__setters__[f]=b)};cc.clone=function(a){var b=a.constructor?new a.constructor:{},c;for(c in a){var d=a[c];b[c]="object"!==typeof d||!d||d instanceof cc.Node||d instanceof HTMLElement?d:cc.clone(d)}return b};cc.inject=function(a,b){for(var c in a)b[c]=a[c]};cc=cc||{};cc._tmp=cc._tmp||{};cc.associateWithNative=function(a,b){};cc.FMT_JPG=0;cc.FMT_PNG=1;cc.FMT_TIFF=2;cc.FMT_RAWDATA=3;cc.FMT_WEBP=4;cc.FMT_UNKNOWN=5;cc.getImageFormatByData=function(a){return 8<a.length&&137===a[0]&&80===a[1]&&78===a[2]&&71===a[3]&&13===a[4]&&10===a[5]&&26===a[6]&&10===a[7]?cc.FMT_PNG:2<a.length&&(73===a[0]&&73===a[1]||77===a[0]&&77===a[1]||255===a[0]&&216===a[1])?cc.FMT_TIFF:cc.FMT_UNKNOWN};
cc.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a};
cc.base=function(a,b,c){var d=arguments.callee.caller;if(d.superClass_)return ret=d.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var e=Array.prototype.slice.call(arguments,2),f=!1,g=a.constructor;g;g=g.superClass_&&g.superClass_.constructor)if(g.prototype[b]===d)f=!0;else if(f)return g.prototype[b].apply(a,e);if(a[b]===d)return a.constructor.prototype[b].apply(a,e);throw Error("cc.base called from a method of one name to a method of a different name");};cc.Point=function(a,b){this.x=a||0;this.y=b||0};cc.p=function(a,b){return void 0===a?{x:0,y:0}:void 0===b?{x:a.x,y:a.y}:{x:a,y:b}};cc.pointEqualToPoint=function(a,b){return a&&b&&a.x===b.x&&a.y===b.y};cc.Size=function(a,b){this.width=a||0;this.height=b||0};cc.size=function(a,b){return void 0===a?{width:0,height:0}:void 0===b?{width:a.width,height:a.height}:{width:a,height:b}};cc.sizeEqualToSize=function(a,b){return a&&b&&a.width===b.width&&a.height===b.height};
cc.Rect=function(a,b,c,d){this.x=a||0;this.y=b||0;this.width=c||0;this.height=d||0};cc.rect=function(a,b,c,d){return void 0===a?{x:0,y:0,width:0,height:0}:void 0===b?{x:a.x,y:a.y,width:a.width,height:a.height}:{x:a,y:b,width:c,height:d}};cc.rectEqualToRect=function(a,b){return a&&b&&a.x===b.x&&a.y===b.y&&a.width===b.width&&a.height===b.height};cc._rectEqualToZero=function(a){return a&&0===a.x&&0===a.y&&0===a.width&&0===a.height};
cc.rectContainsRect=function(a,b){return a&&b?!(a.x>=b.x||a.y>=b.y||a.x+a.width<=b.x+b.width||a.y+a.height<=b.y+b.height):!1};cc.rectGetMaxX=function(a){return a.x+a.width};cc.rectGetMidX=function(a){return a.x+a.width/2};cc.rectGetMinX=function(a){return a.x};cc.rectGetMaxY=function(a){return a.y+a.height};cc.rectGetMidY=function(a){return a.y+a.height/2};cc.rectGetMinY=function(a){return a.y};
cc.rectContainsPoint=function(a,b){return b.x>=cc.rectGetMinX(a)&&b.x<=cc.rectGetMaxX(a)&&b.y>=cc.rectGetMinY(a)&&b.y<=cc.rectGetMaxY(a)};cc.rectIntersectsRect=function(a,b){var c=a.y+a.height,d=b.x+b.width,e=b.y+b.height;return!(a.x+a.width<b.x||d<a.x||c<b.y||e<a.y)};cc.rectOverlapsRect=function(a,b){return!(a.x+a.width<b.x||b.x+b.width<a.x||a.y+a.height<b.y||b.y+b.height<a.y)};
cc.rectUnion=function(a,b){var c=cc.rect(0,0,0,0);c.x=Math.min(a.x,b.x);c.y=Math.min(a.y,b.y);c.width=Math.max(a.x+a.width,b.x+b.width)-c.x;c.height=Math.max(a.y+a.height,b.y+b.height)-c.y;return c};cc.rectIntersection=function(a,b){var c=cc.rect(Math.max(cc.rectGetMinX(a),cc.rectGetMinX(b)),Math.max(cc.rectGetMinY(a),cc.rectGetMinY(b)),0,0);c.width=Math.min(cc.rectGetMaxX(a),cc.rectGetMaxX(b))-cc.rectGetMinX(c);c.height=Math.min(cc.rectGetMaxY(a),cc.rectGetMaxY(b))-cc.rectGetMinY(c);return c};cc.SAXParser=cc.Class.extend({_parser:null,_isSupportDOMParser:null,ctor:function(){window.DOMParser?(this._isSupportDOMParser=!0,this._parser=new DOMParser):this._isSupportDOMParser=!1},parse:function(a){return this._parseXML(a)},_parseXML:function(a){var b;this._isSupportDOMParser?b=this._parser.parseFromString(a,"text/xml"):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a));return b}});cc.PlistParser=cc.SAXParser.extend({parse:function(a){return(new PlistDataParser(a)).data}});
cc.saxParser=new cc.SAXParser;cc.plistParser=new cc.PlistParser;cc._txtLoader={load:function(a,b,c,d){cc.loader.loadTxt(a,d)}};cc.loader.register(["txt","xml","vsh","fsh","atlas"],cc._txtLoader);cc._jsonLoader={load:function(a,b,c,d){cc.loader.loadJson(a,d)}};cc.loader.register(["json","ExportJson"],cc._jsonLoader);cc._jsLoader={load:function(a,b,c,d){cc.loader.loadJs(a,d)}};cc.loader.register(["js"],cc._jsLoader);
cc._imgLoader={load:function(a,b,c,d){c=cc.loader.isLoading(a)?d:function(a,c){if(a)return d(a);cc.loader.cache[b]=c;cc.textureCache.handleLoadedTexture(b);d(null,c)};cc.loader.loadImg(a,c)}};cc.loader.register("png jpg bmp jpeg gif ico tiff webp".split(" "),cc._imgLoader);cc._serverImgLoader={load:function(a,b,c,d){cc._imgLoader.load(c.src,b,c,d)}};cc.loader.register(["serverImg"],cc._serverImgLoader);
cc._plistLoader={load:function(a,b,c,d){cc.loader.loadTxt(a,function(a,b){if(a)return d(a);d(null,cc.plistParser.parse(b))})}};cc.loader.register(["plist"],cc._plistLoader);
cc._fontLoader={TYPE:{".eot":"embedded-opentype",".ttf":"truetype",".ttc":"truetype",".woff":"woff",".svg":"svg"},_loadFont:function(a,b,c){var d=document,e=cc.path,f=this.TYPE,g=document.createElement("style");g.type="text/css";d.body.appendChild(g);var h="",h=isNaN(a-0)?h+("@font-face { font-family:"+a+"; src:"):h+("@font-face { font-family:'"+a+"'; src:");if(b instanceof Array)for(var k=0,m=b.length;k<m;k++)c=e.extname(b[k]).toLowerCase(),h+="url('"+b[k]+"') format('"+f[c]+"')",h+=k===m-1?";":
",";else c=c.toLowerCase(),h+="url('"+b+"') format('"+f[c]+"');";g.textContent+=h+"}";b=document.createElement("div");c=b.style;c.fontFamily=a;b.innerHTML=".";c.position="absolute";c.left="-100px";c.top="-100px";d.body.appendChild(b)},load:function(a,b,c,d){b=c.type;a=c.name;b=c.srcs;cc.isString(c)?(b=cc.path.extname(c),a=cc.path.basename(c,b),this._loadFont(a,c,b)):this._loadFont(a,b);document.fonts?document.fonts.load("1em "+a).then(function(){d(null,!0)},function(a){d(a)}):d(null,!0)}};
cc.loader.register("font eot ttf woff svg ttc".split(" "),cc._fontLoader);cc._binaryLoader={load:function(a,b,c,d){cc.loader.loadBinary(a,d)}};cc._binary2Loader={load:function(a,b,c,d){cc.loader.loadBinary(a,d)}};cc._csbLoader={load:function(a,b,c,d){cc.loader.loadCsb(a,d)}};cc.loader.register(["csb"],cc._csbLoader);window.CocosEngine=cc.ENGINE_VERSION="Cocos2d-JS v3.13";cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL=0;cc.DIRECTOR_STATS_POSITION=cc.p(0,0);cc.DIRECTOR_FPS_INTERVAL=0.5;cc.COCOSNODE_RENDER_SUBPIXEL=1;cc.SPRITEBATCHNODE_RENDER_SUBPIXEL=1;cc.OPTIMIZE_BLEND_FUNC_FOR_PREMULTIPLIED_ALPHA=1;cc.TEXTURE_ATLAS_USE_TRIANGLE_STRIP=0;cc.TEXTURE_ATLAS_USE_VAO=0;cc.TEXTURE_NPOT_SUPPORT=0;cc.RETINA_DISPLAY_SUPPORT=1;cc.RETINA_DISPLAY_FILENAME_SUFFIX="-hd";cc.USE_LA88_LABELS=1;cc.SPRITE_DEBUG_DRAW=0;
cc.SPRITEBATCHNODE_DEBUG_DRAW=0;cc.LABELBMFONT_DEBUG_DRAW=0;cc.LABELATLAS_DEBUG_DRAW=0;cc.IS_RETINA_DISPLAY_SUPPORTED=1;cc.DEFAULT_ENGINE=cc.ENGINE_VERSION+"-canvas";cc.ENABLE_STACKABLE_ACTIONS=1;cc.ENABLE_GL_STATE_CACHE=1;cc.INVALID_INDEX=-1;cc.PI=Math.PI;cc.FLT_MAX=parseFloat("3.402823466e+38F");cc.FLT_MIN=parseFloat("1.175494351e-38F");cc.RAD=cc.PI/180;cc.DEG=180/cc.PI;cc.UINT_MAX=4294967295;cc.swap=function(a,b,c){if(!cc.isObject(c)||cc.isUndefined(c.x)||cc.isUndefined(c.y))cc.log(cc._LogInfos.swap);else{var d=c[a];c[a]=c[b];c[b]=d}};cc.lerp=function(a,b,c){return a+(b-a)*c};cc.rand=function(){return 16777215*Math.random()};cc.randomMinus1To1=function(){return 2*(Math.random()-0.5)};cc.random0To1=Math.random;
cc.degreesToRadians=function(a){return a*cc.RAD};cc.radiansToDegrees=function(a){return a*cc.DEG};cc.radiansToDegress=function(a){cc.log(cc._LogInfos.radiansToDegress);return a*cc.DEG};cc.REPEAT_FOREVER=Number.MAX_VALUE-1;cc.nodeDrawSetup=function(a){a._shaderProgram&&(a._shaderProgram.use(),a._shaderProgram.setUniformForModelViewAndProjectionMatrixWithMat4())};cc.enableDefaultGLStates=function(){};cc.disableDefaultGLStates=function(){};cc.incrementGLDraws=function(a){cc.g_NumberOfDraws+=a};
cc.FLT_EPSILON=1.192092896E-7;cc.contentScaleFactor=cc.IS_RETINA_DISPLAY_SUPPORTED?function(){return cc.director.getContentScaleFactor()}:function(){return 1};cc.pointPointsToPixels=function(a){var b=cc.contentScaleFactor();return cc.p(a.x*b,a.y*b)};cc.pointPixelsToPoints=function(a){var b=cc.contentScaleFactor();return cc.p(a.x/b,a.y/b)};cc._pointPixelsToPointsOut=function(a,b){var c=cc.contentScaleFactor();b.x=a.x/c;b.y=a.y/c};
cc.sizePointsToPixels=function(a){var b=cc.contentScaleFactor();return cc.size(a.width*b,a.height*b)};cc.sizePixelsToPoints=function(a){var b=cc.contentScaleFactor();return cc.size(a.width/b,a.height/b)};cc._sizePixelsToPointsOut=function(a,b){var c=cc.contentScaleFactor();b.width=a.width/c;b.height=a.height/c};cc.rectPixelsToPoints=cc.IS_RETINA_DISPLAY_SUPPORTED?function(a){var b=cc.contentScaleFactor();return cc.rect(a.x/b,a.y/b,a.width/b,a.height/b)}:function(a){return a};
cc.rectPointsToPixels=cc.IS_RETINA_DISPLAY_SUPPORTED?function(a){var b=cc.contentScaleFactor();return cc.rect(a.x*b,a.y*b,a.width*b,a.height*b)}:function(a){return a};cc.ONE=1;cc.ZERO=0;cc.SRC_ALPHA=770;cc.SRC_ALPHA_SATURATE=776;cc.SRC_COLOR=768;cc.DST_ALPHA=772;cc.DST_COLOR=774;cc.ONE_MINUS_SRC_ALPHA=771;cc.ONE_MINUS_SRC_COLOR=769;cc.ONE_MINUS_DST_ALPHA=773;cc.ONE_MINUS_DST_COLOR=775;cc.ONE_MINUS_CONSTANT_ALPHA=32772;cc.ONE_MINUS_CONSTANT_COLOR=32770;cc.LINEAR=9729;cc.REPEAT=10497;
cc.CLAMP_TO_EDGE=33071;cc.MIRRORED_REPEAT=33648;cc.BLEND_SRC=cc.SRC_ALPHA;cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,function(){cc._renderType===cc.game.RENDER_TYPE_WEBGL&&cc.OPTIMIZE_BLEND_FUNC_FOR_PREMULTIPLIED_ALPHA&&(cc.BLEND_SRC=cc.ONE)});cc.BLEND_DST=cc.ONE_MINUS_SRC_ALPHA;cc.checkGLErrorDebug=function(){if(cc.renderMode===cc.game.RENDER_TYPE_WEBGL){var a=cc._renderContext.getError();a&&cc.log(cc._LogInfos.checkGLErrorDebug,a)}};cc.ORIENTATION_PORTRAIT=1;
cc.ORIENTATION_LANDSCAPE=2;cc.ORIENTATION_AUTO=3;cc.VERTEX_ATTRIB_FLAG_NONE=0;cc.VERTEX_ATTRIB_FLAG_POSITION=1;cc.VERTEX_ATTRIB_FLAG_COLOR=2;cc.VERTEX_ATTRIB_FLAG_TEX_COORDS=4;cc.VERTEX_ATTRIB_FLAG_POS_COLOR_TEX=cc.VERTEX_ATTRIB_FLAG_POSITION|cc.VERTEX_ATTRIB_FLAG_COLOR|cc.VERTEX_ATTRIB_FLAG_TEX_COORDS;cc.GL_ALL=0;cc.VERTEX_ATTRIB_POSITION=0;cc.VERTEX_ATTRIB_COLOR=1;cc.VERTEX_ATTRIB_TEX_COORDS=2;cc.VERTEX_ATTRIB_MAX=7;cc.UNIFORM_PMATRIX=0;cc.UNIFORM_MVMATRIX=1;cc.UNIFORM_MVPMATRIX=2;
cc.UNIFORM_TIME=3;cc.UNIFORM_SINTIME=4;cc.UNIFORM_COSTIME=5;cc.UNIFORM_RANDOM01=6;cc.UNIFORM_SAMPLER=7;cc.UNIFORM_MAX=8;cc.SHADER_POSITION_TEXTURECOLOR="ShaderPositionTextureColor";cc.SHADER_SPRITE_POSITION_TEXTURECOLOR="ShaderSpritePositionTextureColor";cc.SHADER_POSITION_TEXTURECOLORALPHATEST="ShaderPositionTextureColorAlphaTest";cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST="ShaderSpritePositionTextureColorAlphaTest";cc.SHADER_POSITION_COLOR="ShaderPositionColor";
cc.SHADER_SPRITE_POSITION_COLOR="ShaderSpritePositionColor";cc.SHADER_POSITION_TEXTURE="ShaderPositionTexture";cc.SHADER_POSITION_TEXTURE_UCOLOR="ShaderPositionTexture_uColor";cc.SHADER_POSITION_TEXTUREA8COLOR="ShaderPositionTextureA8Color";cc.SHADER_POSITION_UCOLOR="ShaderPosition_uColor";cc.SHADER_POSITION_LENGTHTEXTURECOLOR="ShaderPositionLengthTextureColor";cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_CIRCLECLIP="ShaderSpritePositionTextureColorCircleClip";
cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY="ShaderSpritePositionTextureColorGray";cc.UNIFORM_PMATRIX_S="CC_PMatrix";cc.UNIFORM_MVMATRIX_S="CC_MVMatrix";cc.UNIFORM_MVPMATRIX_S="CC_MVPMatrix";cc.UNIFORM_TIME_S="CC_Time";cc.UNIFORM_SINTIME_S="CC_SinTime";cc.UNIFORM_COSTIME_S="CC_CosTime";cc.UNIFORM_RANDOM01_S="CC_Random01";cc.UNIFORM_SAMPLER_S="CC_Texture0";cc.UNIFORM_ALPHA_TEST_VALUE_S="CC_alpha_value";cc.ATTRIBUTE_NAME_COLOR="a_color";cc.ATTRIBUTE_NAME_POSITION="a_position";
cc.ATTRIBUTE_NAME_TEX_COORD="a_texCoord";cc.ATTRIBUTE_NAME_MVMAT="a_mvMatrix";cc.ITEM_SIZE=32;cc.CURRENT_ITEM=3233828865;cc.ZOOM_ACTION_TAG=3233828866;cc.NORMAL_TAG=8801;cc.SELECTED_TAG=8802;cc.DISABLE_TAG=8803;cc.arrayVerifyType=function(a,b){if(a&&0<a.length)for(var c=0;c<a.length;c++)if(!(a[c]instanceof b))return cc.log("element type is wrong!"),!1;return!0};cc.arrayRemoveObject=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b){a.splice(c,1);break}};
cc.arrayRemoveArray=function(a,b){for(var c=0,d=b.length;c<d;c++)cc.arrayRemoveObject(a,b[c])};cc.arrayAppendObjectsToIndex=function(a,b,c){a.splice.apply(a,[c,0].concat(b));return a};cc.copyArray=function(a){var b,c=a.length,d=Array(c);for(b=0;b<c;b+=1)d[b]=a[b];return d};cc._tmp.PrototypeColor=function(){var a=cc.color;a._getWhite=function(){return a(255,255,255)};a._getYellow=function(){return a(255,255,0)};a._getBlue=function(){return a(0,0,255)};a._getGreen=function(){return a(0,255,0)};a._getRed=function(){return a(255,0,0)};a._getMagenta=function(){return a(255,0,255)};a._getBlack=function(){return a(0,0,0)};a._getOrange=function(){return a(255,127,0)};a._getGray=function(){return a(166,166,166)};cc.defineGetterSetter(a,"WHITE",a._getWhite);cc.defineGetterSetter(a,
"YELLOW",a._getYellow);cc.defineGetterSetter(a,"BLUE",a._getBlue);cc.defineGetterSetter(a,"GREEN",a._getGreen);cc.defineGetterSetter(a,"RED",a._getRed);cc.defineGetterSetter(a,"MAGENTA",a._getMagenta);cc.defineGetterSetter(a,"BLACK",a._getBlack);cc.defineGetterSetter(a,"ORANGE",a._getOrange);cc.defineGetterSetter(a,"GRAY",a._getGray);cc.BlendFunc._disable=function(){return new cc.BlendFunc(cc.ONE,cc.ZERO)};cc.BlendFunc._alphaPremultiplied=function(){return new cc.BlendFunc(cc.ONE,cc.ONE_MINUS_SRC_ALPHA)};
cc.BlendFunc._alphaNonPremultiplied=function(){return new cc.BlendFunc(cc.SRC_ALPHA,cc.ONE_MINUS_SRC_ALPHA)};cc.BlendFunc._additive=function(){return new cc.BlendFunc(cc.SRC_ALPHA,cc.ONE)};cc.defineGetterSetter(cc.BlendFunc,"DISABLE",cc.BlendFunc._disable);cc.defineGetterSetter(cc.BlendFunc,"ALPHA_PREMULTIPLIED",cc.BlendFunc._alphaPremultiplied);cc.defineGetterSetter(cc.BlendFunc,"ALPHA_NON_PREMULTIPLIED",cc.BlendFunc._alphaNonPremultiplied);cc.defineGetterSetter(cc.BlendFunc,"ADDITIVE",cc.BlendFunc._additive)};cc.Color=function(a,b,c,d){this.r=a||0;this.g=b||0;this.b=c||0;this.a=null==d?255:d};cc.color=function(a,b,c,d){return void 0===a?{r:0,g:0,b:0,a:255}:cc.isString(a)?cc.hexToColor(a):cc.isObject(a)?{r:a.r,g:a.g,b:a.b,a:null==a.a?255:a.a}:{r:a,g:b,b:c,a:null==d?255:d}};cc.colorEqual=function(a,b){return a.r===b.r&&a.g===b.g&&a.b===b.b};cc.Acceleration=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.timestamp=d||0};
cc.Vertex2F=function(a,b,c,d){this._arrayBuffer=c||new ArrayBuffer(cc.Vertex2F.BYTES_PER_ELEMENT);this._offset=d||0;this._view=new Float32Array(this._arrayBuffer,this._offset,2);this._view[0]=a||0;this._view[1]=b||0};cc.Vertex2F.BYTES_PER_ELEMENT=8;_p=cc.Vertex2F.prototype;_p._getX=function(){return this._view[0]};_p._setX=function(a){this._view[0]=a};_p._getY=function(){return this._view[1]};_p._setY=function(a){this._view[1]=a};cc.defineGetterSetter(_p,"x",_p._getX,_p._setX);
cc.defineGetterSetter(_p,"y",_p._getY,_p._setY);cc.Vertex3F=function(a,b,c,d,e){this._arrayBuffer=d||new ArrayBuffer(cc.Vertex3F.BYTES_PER_ELEMENT);this._offset=e||0;this._view=new Float32Array(this._arrayBuffer,this._offset,3);this._view[0]=a||0;this._view[1]=b||0;this._view[2]=c||0};cc.Vertex3F.BYTES_PER_ELEMENT=12;_p=cc.Vertex3F.prototype;_p._getX=function(){return this._view[0]};_p._setX=function(a){this._view[0]=a};_p._getY=function(){return this._view[1]};
_p._setY=function(a){this._view[1]=a};_p._getZ=function(){return this._view[2]};_p._setZ=function(a){this._view[2]=a};cc.defineGetterSetter(_p,"x",_p._getX,_p._setX);cc.defineGetterSetter(_p,"y",_p._getY,_p._setY);cc.defineGetterSetter(_p,"z",_p._getZ,_p._setZ);cc.Tex2F=function(a,b,c,d){this._arrayBuffer=c||new ArrayBuffer(cc.Tex2F.BYTES_PER_ELEMENT);this._offset=d||0;this._view=new Float32Array(this._arrayBuffer,this._offset,2);this._view[0]=a||0;this._view[1]=b||0};cc.Tex2F.BYTES_PER_ELEMENT=8;
_p=cc.Tex2F.prototype;_p._getU=function(){return this._view[0]};_p._setU=function(a){this._view[0]=a};_p._getV=function(){return this._view[1]};_p._setV=function(a){this._view[1]=a};cc.defineGetterSetter(_p,"u",_p._getU,_p._setU);cc.defineGetterSetter(_p,"v",_p._getV,_p._setV);
cc.Quad2=function(a,b,c,d,e,f){this._arrayBuffer=e||new ArrayBuffer(cc.Quad2.BYTES_PER_ELEMENT);this._offset=f||0;e=this._arrayBuffer;f=this._offset;var g=cc.Vertex2F.BYTES_PER_ELEMENT;this._tl=a?new cc.Vertex2F(a.x,a.y,e,f):new cc.Vertex2F(0,0,e,f);f+=g;this._tr=b?new cc.Vertex2F(b.x,b.y,e,f):new cc.Vertex2F(0,0,e,f);f+=g;this._bl=c?new cc.Vertex2F(c.x,c.y,e,f):new cc.Vertex2F(0,0,e,f);f+=g;this._br=d?new cc.Vertex2F(d.x,d.y,e,f):new cc.Vertex2F(0,0,e,f)};cc.Quad2.BYTES_PER_ELEMENT=32;_p=cc.Quad2.prototype;
_p._getTL=function(){return this._tl};_p._setTL=function(a){this._tl._view[0]=a.x;this._tl._view[1]=a.y};_p._getTR=function(){return this._tr};_p._setTR=function(a){this._tr._view[0]=a.x;this._tr._view[1]=a.y};_p._getBL=function(){return this._bl};_p._setBL=function(a){this._bl._view[0]=a.x;this._bl._view[1]=a.y};_p._getBR=function(){return this._br};_p._setBR=function(a){this._br._view[0]=a.x;this._br._view[1]=a.y};cc.defineGetterSetter(_p,"tl",_p._getTL,_p._setTL);
cc.defineGetterSetter(_p,"tr",_p._getTR,_p._setTR);cc.defineGetterSetter(_p,"bl",_p._getBL,_p._setBL);cc.defineGetterSetter(_p,"br",_p._getBR,_p._setBR);
cc.Quad3=function(a,b,c,d,e,f){this._arrayBuffer=e||new ArrayBuffer(cc.Quad3.BYTES_PER_ELEMENT);this._offset=f||0;e=this._arrayBuffer;f=this._offset;var g=cc.Vertex3F.BYTES_PER_ELEMENT;this.bl=a?new cc.Vertex3F(a.x,a.y,a.z,e,f):new cc.Vertex3F(0,0,0,e,f);f+=g;this.br=b?new cc.Vertex3F(b.x,b.y,b.z,e,f):new cc.Vertex3F(0,0,0,e,f);f+=g;this.tl=c?new cc.Vertex3F(c.x,c.y,c.z,e,f):new cc.Vertex3F(0,0,0,e,f);f+=g;this.tr=d?new cc.Vertex3F(d.x,d.y,d.z,e,f):new cc.Vertex3F(0,0,0,e,f)};
cc.Quad3.BYTES_PER_ELEMENT=48;cc.V3F_C4B_T2F=function(a,b,c,d,e){this._arrayBuffer=d||new ArrayBuffer(cc.V3F_C4B_T2F.BYTES_PER_ELEMENT);this._offset=e||0;d=this._arrayBuffer;e=this._offset;this._vertices=a?new cc.Vertex3F(a.x,a.y,a.z,d,e):new cc.Vertex3F(0,0,0,d,e);e+=cc.Vertex3F.BYTES_PER_ELEMENT;this._colors=b?new cc.Color(b.r,b.g,b.b,b.a,d,e):new cc.Color(0,0,0,0,d,e);e+=cc.Color.BYTES_PER_ELEMENT;this._texCoords=c?new cc.Tex2F(c.u,c.v,d,e):new cc.Tex2F(0,0,d,e)};
cc.V3F_C4B_T2F.BYTES_PER_ELEMENT=24;_p=cc.V3F_C4B_T2F.prototype;_p._getVertices=function(){return this._vertices};_p._setVertices=function(a){var b=this._vertices;b._view[0]=a.x;b._view[1]=a.y;b._view[2]=a.z};_p._getColor=function(){return this._colors};_p._setColor=function(a){var b=this._colors;b._view[0]=a.r;b._view[1]=a.g;b._view[2]=a.b;b._view[3]=a.a};_p._getTexCoords=function(){return this._texCoords};_p._setTexCoords=function(a){this._texCoords._view[0]=a.u;this._texCoords._view[1]=a.v};
cc.defineGetterSetter(_p,"vertices",_p._getVertices,_p._setVertices);cc.defineGetterSetter(_p,"colors",_p._getColor,_p._setColor);cc.defineGetterSetter(_p,"texCoords",_p._getTexCoords,_p._setTexCoords);
cc.V3F_C4B_T2F_Quad=function(a,b,c,d,e,f){this._arrayBuffer=e||new ArrayBuffer(cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT);this._offset=f||0;e=this._arrayBuffer;f=this._offset;var g=cc.V3F_C4B_T2F.BYTES_PER_ELEMENT;this._tl=a?new cc.V3F_C4B_T2F(a.vertices,a.colors,a.texCoords,e,f):new cc.V3F_C4B_T2F(null,null,null,e,f);f+=g;this._bl=b?new cc.V3F_C4B_T2F(b.vertices,b.colors,b.texCoords,e,f):new cc.V3F_C4B_T2F(null,null,null,e,f);f+=g;this._tr=c?new cc.V3F_C4B_T2F(c.vertices,c.colors,c.texCoords,e,f):new cc.V3F_C4B_T2F(null,
null,null,e,f);f+=g;this._br=d?new cc.V3F_C4B_T2F(d.vertices,d.colors,d.texCoords,e,f):new cc.V3F_C4B_T2F(null,null,null,e,f)};cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT=96;_p=cc.V3F_C4B_T2F_Quad.prototype;_p._getTL=function(){return this._tl};_p._setTL=function(a){var b=this._tl;b.vertices=a.vertices;b.colors=a.colors;b.texCoords=a.texCoords};_p._getBL=function(){return this._bl};_p._setBL=function(a){var b=this._bl;b.vertices=a.vertices;b.colors=a.colors;b.texCoords=a.texCoords};_p._getTR=function(){return this._tr};
_p._setTR=function(a){var b=this._tr;b.vertices=a.vertices;b.colors=a.colors;b.texCoords=a.texCoords};_p._getBR=function(){return this._br};_p._setBR=function(a){var b=this._br;b.vertices=a.vertices;b.colors=a.colors;b.texCoords=a.texCoords};_p._getArrayBuffer=function(){return this._arrayBuffer};cc.defineGetterSetter(_p,"tl",_p._getTL,_p._setTL);cc.defineGetterSetter(_p,"tr",_p._getTR,_p._setTR);cc.defineGetterSetter(_p,"bl",_p._getBL,_p._setBL);cc.defineGetterSetter(_p,"br",_p._getBR,_p._setBR);
cc.defineGetterSetter(_p,"arrayBuffer",_p._getArrayBuffer,null);cc.V3F_C4B_T2F_QuadZero=function(){return new cc.V3F_C4B_T2F_Quad};
cc.V3F_C4B_T2F_QuadCopy=function(a){if(!a)return cc.V3F_C4B_T2F_QuadZero();var b=a.tl,c=a.bl,d=a.tr;a=a.br;return{tl:{vertices:{x:b.vertices.x,y:b.vertices.y,z:b.vertices.z},colors:{r:b.colors.r,g:b.colors.g,b:b.colors.b,a:b.colors.a},texCoords:{u:b.texCoords.u,v:b.texCoords.v}},bl:{vertices:{x:c.vertices.x,y:c.vertices.y,z:c.vertices.z},colors:{r:c.colors.r,g:c.colors.g,b:c.colors.b,a:c.colors.a},texCoords:{u:c.texCoords.u,v:c.texCoords.v}},tr:{vertices:{x:d.vertices.x,y:d.vertices.y,z:d.vertices.z},
colors:{r:d.colors.r,g:d.colors.g,b:d.colors.b,a:d.colors.a},texCoords:{u:d.texCoords.u,v:d.texCoords.v}},br:{vertices:{x:a.vertices.x,y:a.vertices.y,z:a.vertices.z},colors:{r:a.colors.r,g:a.colors.g,b:a.colors.b,a:a.colors.a},texCoords:{u:a.texCoords.u,v:a.texCoords.v}}}};cc.V3F_C4B_T2F_QuadsCopy=function(a){if(!a)return[];for(var b=[],c=0;c<a.length;c++)b.push(cc.V3F_C4B_T2F_QuadCopy(a[c]));return b};
cc.V2F_C4B_T2F=function(a,b,c,d,e){this._arrayBuffer=d||new ArrayBuffer(cc.V2F_C4B_T2F.BYTES_PER_ELEMENT);this._offset=e||0;d=this._arrayBuffer;e=this._offset;this._vertices=a?new cc.Vertex2F(a.x,a.y,d,e):new cc.Vertex2F(0,0,d,e);e+=cc.Vertex2F.BYTES_PER_ELEMENT;this._colors=b?cc.color(b.r,b.g,b.b,b.a,d,e):cc.color(0,0,0,0,d,e);e+=cc.Color.BYTES_PER_ELEMENT;this._texCoords=c?new cc.Tex2F(c.u,c.v,d,e):new cc.Tex2F(0,0,d,e)};cc.V2F_C4B_T2F.BYTES_PER_ELEMENT=20;_p=cc.V2F_C4B_T2F.prototype;
_p._getVertices=function(){return this._vertices};_p._setVertices=function(a){this._vertices._view[0]=a.x;this._vertices._view[1]=a.y};_p._getColor=function(){return this._colors};_p._setColor=function(a){var b=this._colors;b._view[0]=a.r;b._view[1]=a.g;b._view[2]=a.b;b._view[3]=a.a};_p._getTexCoords=function(){return this._texCoords};_p._setTexCoords=function(a){this._texCoords._view[0]=a.u;this._texCoords._view[1]=a.v};cc.defineGetterSetter(_p,"vertices",_p._getVertices,_p._setVertices);
cc.defineGetterSetter(_p,"colors",_p._getColor,_p._setColor);cc.defineGetterSetter(_p,"texCoords",_p._getTexCoords,_p._setTexCoords);
cc.V2F_C4B_T2F_Triangle=function(a,b,c,d,e){this._arrayBuffer=d||new ArrayBuffer(cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT);this._offset=e||0;d=this._arrayBuffer;e=this._offset;var f=cc.V2F_C4B_T2F.BYTES_PER_ELEMENT;this._a=a?new cc.V2F_C4B_T2F(a.vertices,a.colors,a.texCoords,d,e):new cc.V2F_C4B_T2F(null,null,null,d,e);e+=f;this._b=b?new cc.V2F_C4B_T2F(b.vertices,b.colors,b.texCoords,d,e):new cc.V2F_C4B_T2F(null,null,null,d,e);e+=f;this._c=c?new cc.V2F_C4B_T2F(c.vertices,c.colors,c.texCoords,d,e):
new cc.V2F_C4B_T2F(null,null,null,d,e)};cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT=60;_p=cc.V2F_C4B_T2F_Triangle.prototype;_p._getA=function(){return this._a};_p._setA=function(a){var b=this._a;b.vertices=a.vertices;b.colors=a.colors;b.texCoords=a.texCoords};_p._getB=function(){return this._b};_p._setB=function(a){var b=this._b;b.vertices=a.vertices;b.colors=a.colors;b.texCoords=a.texCoords};_p._getC=function(){return this._c};
_p._setC=function(a){var b=this._c;b.vertices=a.vertices;b.colors=a.colors;b.texCoords=a.texCoords};cc.defineGetterSetter(_p,"a",_p._getA,_p._setA);cc.defineGetterSetter(_p,"b",_p._getB,_p._setB);cc.defineGetterSetter(_p,"c",_p._getC,_p._setC);cc.vertex2=function(a,b){return new cc.Vertex2F(a,b)};cc.vertex3=function(a,b,c){return new cc.Vertex3F(a,b,c)};cc.tex2=function(a,b){return new cc.Tex2F(a,b)};cc.BlendFunc=function(a,b){this.src=a;this.dst=b};
cc.blendFuncDisable=function(){return new cc.BlendFunc(cc.ONE,cc.ZERO)};cc.hexToColor=function(a){a=a.replace(/^#?/,"0x");a=parseInt(a);return cc.color(a>>16,(a>>8)%256,a%256)};cc.colorToHex=function(a){var b=a.r.toString(16),c=a.g.toString(16),d=a.b.toString(16);return"#"+(16>a.r?"0"+b:b)+(16>a.g?"0"+c:c)+(16>a.b?"0"+d:d)};cc.TEXT_ALIGNMENT_LEFT=0;cc.TEXT_ALIGNMENT_CENTER=1;cc.TEXT_ALIGNMENT_RIGHT=2;cc.VERTICAL_TEXT_ALIGNMENT_TOP=0;cc.VERTICAL_TEXT_ALIGNMENT_CENTER=1;
cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM=2;
cc._Dictionary=cc.Class.extend({_keyMapTb:null,_valueMapTb:null,__currId:0,ctor:function(){this._keyMapTb={};this._valueMapTb={};this.__currId=2<<(0|10*Math.random())},__getKey:function(){this.__currId++;return"key_"+this.__currId},setObject:function(a,b){if(null!=b){var c=this.__getKey();this._keyMapTb[c]=b;this._valueMapTb[c]=a}},objectForKey:function(a){if(null==a)return null;var b=this._keyMapTb,c;for(c in b)if(b[c]===a)return this._valueMapTb[c];return null},valueForKey:function(a){return this.objectForKey(a)},
removeObjectForKey:function(a){if(null!=a){var b=this._keyMapTb,c;for(c in b)if(b[c]===a){delete this._valueMapTb[c];delete b[c];break}}},removeObjectsForKeys:function(a){if(null!=a)for(var b=0;b<a.length;b++)this.removeObjectForKey(a[b])},allKeys:function(){var a=[],b=this._keyMapTb,c;for(c in b)a.push(b[c]);return a},removeAllObjects:function(){this._keyMapTb={};this._valueMapTb={}},count:function(){return this.allKeys().length}});
cc.FontDefinition=function(a){this.fontName="Arial";this.fontSize=12;this.textAlign=cc.TEXT_ALIGNMENT_CENTER;this.verticalAlign=cc.VERTICAL_TEXT_ALIGNMENT_TOP;this.fillStyle=cc.color(255,255,255,255);this.boundingHeight=this.boundingWidth=0;this.strokeEnabled=!1;this.strokeStyle=cc.color(255,255,255,255);this.lineWidth=1;this.fontWeight=this.fontStyle=this.lineHeight="normal";this.shadowEnabled=!1;this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0;this.shadowOpacity=1;if(a&&a instanceof Object)for(var b in a)this[b]=
a[b]};cc.FontDefinition.prototype._getCanvasFontStr=function(){return this.fontStyle+" "+this.fontWeight+" "+this.fontSize+"px/"+(this.lineHeight.charAt?this.lineHeight:this.lineHeight+"px")+" '"+this.fontName+"'"};cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,function(){cc._renderType===cc.game.RENDER_TYPE_CANVAS&&(cc.assert(cc.isFunction(cc._tmp.PrototypeColor),cc._LogInfos.MissingFile,"CCTypesPropertyDefine.js"),cc._tmp.PrototypeColor(),delete cc._tmp.PrototypeColor)});cc.Touches=[];cc.TouchesIntergerDict={};cc.DENSITYDPI_DEVICE="device-dpi";cc.DENSITYDPI_HIGH="high-dpi";cc.DENSITYDPI_MEDIUM="medium-dpi";cc.DENSITYDPI_LOW="low-dpi";var __BrowserGetter={init:function(){this.html=document.getElementsByTagName("html")[0]},availWidth:function(a){return window.innerWidth},availHeight:function(a){return window.innerHeight},meta:{width:"device-width"},adaptationType:cc.sys.browserType};-1<window.navigator.userAgent.indexOf("OS 8_1_")&&(__BrowserGetter.adaptationType=cc.sys.BROWSER_TYPE_MIUI);
cc.sys.os===cc.sys.OS_IOS&&(__BrowserGetter.adaptationType=cc.sys.BROWSER_TYPE_SAFARI);
switch(__BrowserGetter.adaptationType){case cc.sys.BROWSER_TYPE_SAFARI:__BrowserGetter.meta["minimal-ui"]="true";__BrowserGetter.availWidth=function(a){return window.innerWidth};__BrowserGetter.availHeight=function(a){return window.innerHeight};break;case cc.sys.BROWSER_TYPE_CHROME:__BrowserGetter.__defineGetter__("target-densitydpi",function(){return cc.view._targetDensityDPI});case cc.sys.BROWSER_TYPE_SOUGOU:case cc.sys.BROWSER_TYPE_UC:__BrowserGetter.availWidth=function(a){return a.clientWidth};
__BrowserGetter.availHeight=function(a){return a.clientHeight};break;case cc.sys.BROWSER_TYPE_MIUI:__BrowserGetter.init=function(a){if(!a.__resizeWithBrowserSize){var b=function(){a.setDesignResolutionSize(a._designResolutionSize.width,a._designResolutionSize.height,a._resolutionPolicy);window.removeEventListener("resize",b,!1)};window.addEventListener("resize",b,!1)}}}var _scissorRect=cc.rect();
cc.EGLView=cc.Class.extend({_delegate:null,_frameSize:null,_designResolutionSize:null,_originalDesignResolutionSize:null,_viewPortRect:null,_visibleRect:null,_retinaEnabled:!1,_autoFullScreen:!1,_devicePixelRatio:1,_viewName:"",_resizeCallback:null,_scaleX:1,_originalScaleX:1,_scaleY:1,_originalScaleY:1,_isRotated:!1,_orientation:3,_resolutionPolicy:null,_rpExactFit:null,_rpShowAll:null,_rpNoBorder:null,_rpFixedHeight:null,_rpFixedWidth:null,_initialized:!1,_contentTranslateLeftTop:null,_frame:null,
_frameZoomFactor:1,__resizeWithBrowserSize:!1,_isAdjustViewPort:!0,_targetDensityDPI:null,_touchOffest:null,ctor:function(){var a=document,b=cc.ContainerStrategy,c=cc.ContentStrategy;__BrowserGetter.init(this);this._frame=cc.container.parentNode===a.body?a.documentElement:cc.container.parentNode;this._frameSize=cc.size(0,0);this._initFrameSize();var a=cc._canvas.width,d=cc._canvas.height;this._designResolutionSize=cc.size(a,d);this._originalDesignResolutionSize=cc.size(a,d);this._viewPortRect=cc.rect(0,
0,a,d);this._visibleRect=cc.rect(0,0,a,d);this._contentTranslateLeftTop={left:0,top:0};this._viewName="Cocos2dHTML5";this._touchOffest=cc.p(0,0);cc.visibleRect&&cc.visibleRect.init(this._visibleRect);this._rpExactFit=new cc.ResolutionPolicy(b.EQUAL_TO_FRAME,c.EXACT_FIT);this._rpShowAll=new cc.ResolutionPolicy(b.PROPORTION_TO_FRAME,c.SHOW_ALL);this._rpNoBorder=new cc.ResolutionPolicy(b.EQUAL_TO_FRAME,c.NO_BORDER);this._rpFixedHeight=new cc.ResolutionPolicy(b.EQUAL_TO_FRAME,c.FIXED_HEIGHT);this._rpFixedWidth=
new cc.ResolutionPolicy(b.EQUAL_TO_FRAME,c.FIXED_WIDTH);this._targetDensityDPI=cc.DENSITYDPI_HIGH},_resizeEvent:function(){var a;a=this.setDesignResolutionSize?this:cc.view;var b=a._frameSize.width,c=a._frameSize.height,d=a._isRotated;a._initFrameSize();if(a._isRotated!==d||a._frameSize.width!==b||a._frameSize.height!==c)a._resizeCallback&&a._resizeCallback.call(),b=a._originalDesignResolutionSize.width,c=a._originalDesignResolutionSize.height,0<b&&a.setDesignResolutionSize(b,c,a._resolutionPolicy)},
setTargetDensityDPI:function(a){this._targetDensityDPI=a;this._adjustViewportMeta()},getTargetDensityDPI:function(){return this._targetDensityDPI},resizeWithBrowserSize:function(a){a?this.__resizeWithBrowserSize||(this.__resizeWithBrowserSize=!0,window.addEventListener("resize",this._resizeEvent),window.addEventListener("orientationchange",this._resizeEvent)):this.__resizeWithBrowserSize&&(this.__resizeWithBrowserSize=!1,window.removeEventListener("resize",this._resizeEvent),window.removeEventListener("orientationchange",
this._resizeEvent))},setResizeCallback:function(a){if(cc.isFunction(a)||null==a)this._resizeCallback=a},setOrientation:function(a){if(a&=cc.ORIENTATION_AUTO)this._orientation=a},_initFrameSize:function(){var a=this._frameSize,b=__BrowserGetter.availWidth(this._frame),c=__BrowserGetter.availHeight(this._frame),d=b>=c;!cc.sys.isMobile||d&&this._orientation&cc.ORIENTATION_LANDSCAPE||!d&&this._orientation&cc.ORIENTATION_PORTRAIT?(a.width=b,a.height=c,cc.container.style["-webkit-transform"]="rotate(0deg)",
cc.container.style.transform="rotate(0deg)",this._isRotated=!1):(a.width=c,a.height=b,cc.container.style["-webkit-transform"]="rotate(90deg)",cc.container.style.transform="rotate(90deg)",cc.container.style["-webkit-transform-origin"]="0px 0px 0px",cc.container.style.transformOrigin="0px 0px 0px",this._isRotated=!0)},_adjustSizeKeepCanvasSize:function(){var a=this._originalDesignResolutionSize.width,b=this._originalDesignResolutionSize.height;0<a&&this.setDesignResolutionSize(a,b,this._resolutionPolicy)},
_setViewportMeta:function(a,b){},_adjustViewportMeta:function(){this._isAdjustViewPort&&(this._setViewportMeta(__BrowserGetter.meta,!1),this._isAdjustViewPort=!1)},_setScaleXYForRenderTexture:function(){var a=cc.contentScaleFactor();this._scaleY=this._scaleX=a},_resetScale:function(){this._scaleX=this._originalScaleX;this._scaleY=this._originalScaleY},_adjustSizeToBrowser:function(){},initialize:function(){this._initialized=!0},adjustViewPort:function(a){this._isAdjustViewPort=a},enableRetina:function(a){this._retinaEnabled=
a?!0:!1},isRetinaEnabled:function(){return this._retinaEnabled},enableAutoFullScreen:function(a){a&&a!==this._autoFullScreen&&cc.sys.isMobile&&this._frame===document.documentElement?(this._autoFullScreen=!0,cc.screen.autoFullScreen(this._frame)):this._autoFullScreen=!1},isAutoFullScreenEnabled:function(){return this._autoFullScreen},end:function(){},isOpenGLReady:function(){return cc.game.canvas&&cc._renderContext},setFrameZoomFactor:function(a){this._frameZoomFactor=a;this.centerWindow();cc.director.setProjection(cc.director.getProjection())},
swapBuffers:function(){},setIMEKeyboardState:function(a){},setContentTranslateLeftTop:function(a,b){this._contentTranslateLeftTop={left:a,top:b}},getContentTranslateLeftTop:function(){return this._contentTranslateLeftTop},getCanvasSize:function(){return cc.size(cc._canvas.width,cc._canvas.height)},getFrameSize:function(){return cc.size(this._frameSize.width,this._frameSize.height)},setFrameSize:function(a,b){this._frameSize.width=a;this._frameSize.height=b;this._frame.style.width=a+"px";this._frame.style.height=
b+"px";this._resizeEvent();cc.director.setProjection(cc.director.getProjection())},centerWindow:function(){},getVisibleSize:function(){return cc.size(this._visibleRect.width,this._visibleRect.height)},getVisibleSizeInPixel:function(){return cc.size(this._visibleRect.width*this._scaleX,this._visibleRect.height*this._scaleY)},getVisibleOrigin:function(){return cc.p(this._visibleRect.x,this._visibleRect.y)},getVisibleOriginInPixel:function(){return cc.p(this._visibleRect.x*this._scaleX,this._visibleRect.y*
this._scaleY)},canSetContentScaleFactor:function(){return!0},getResolutionPolicy:function(){return this._resolutionPolicy},setResolutionPolicy:function(a){if(a instanceof cc.ResolutionPolicy)this._resolutionPolicy=a;else{var b=cc.ResolutionPolicy;a===b.EXACT_FIT&&(this._resolutionPolicy=this._rpExactFit);a===b.SHOW_ALL&&(this._resolutionPolicy=this._rpShowAll);a===b.NO_BORDER&&(this._resolutionPolicy=this._rpNoBorder);a===b.FIXED_HEIGHT&&(this._resolutionPolicy=this._rpFixedHeight);a===b.FIXED_WIDTH&&
(this._resolutionPolicy=this._rpFixedWidth)}},setDesignResolutionSize:function(a,b,c){if(0<a||0<b)if(this.setResolutionPolicy(c),c=this._resolutionPolicy){c.preApply(this);cc.sys.isMobile&&this._adjustViewportMeta();this._initFrameSize();this._originalDesignResolutionSize.width=this._designResolutionSize.width=a;this._originalDesignResolutionSize.height=this._designResolutionSize.height=b;var d=c.apply(this,this._designResolutionSize);d.scale&&2===d.scale.length&&(this._scaleX=d.scale[0],this._scaleY=
d.scale[1]);d.viewport&&(a=this._viewPortRect,b=this._visibleRect,d=d.viewport,a.x=d.x,a.y=d.y,a.width=d.width,a.height=d.height,b.x=-a.x/this._scaleX,b.y=-a.y/this._scaleY,b.width=cc._canvas.width/this._scaleX,b.height=cc._canvas.height/this._scaleY,cc._renderContext.setOffset&&cc._renderContext.setOffset(a.x,-a.y));a=cc.director;a._winSizeInPoints.width=this._designResolutionSize.width;a._winSizeInPoints.height=this._designResolutionSize.height;c.postApply(this);cc.winSize.width=a._winSizeInPoints.width;
cc.winSize.height=a._winSizeInPoints.height;cc._renderType===cc.game.RENDER_TYPE_WEBGL&&a.setGLDefaultValues();this._originalScaleX=this._scaleX;this._originalScaleY=this._scaleY;cc.DOM&&cc.DOM._resetEGLViewDiv();cc.visibleRect&&cc.visibleRect.init(this._visibleRect)}else cc.log(cc._LogInfos.EGLView_setDesignResolutionSize_2);else cc.log(cc._LogInfos.EGLView_setDesignResolutionSize)},getDesignResolutionSize:function(){return cc.size(this._designResolutionSize.width,this._designResolutionSize.height)},
setRealPixelResolution:function(a,b,c){this._setViewportMeta({width:a,"target-densitydpi":cc.DENSITYDPI_DEVICE},!0);document.body.style.width=a+"px";document.body.style.left="0px";document.body.style.top="0px";this.setDesignResolutionSize(a,b,c)},setViewPortInPoints:function(a,b,c,d){var e=this._frameZoomFactor,f=this._scaleX,g=this._scaleY;cc._renderContext.viewport(a*f*e+this._viewPortRect.x*e,b*g*e+this._viewPortRect.y*e,c*f*e,d*g*e)},setScissorInPoints:function(a,b,c,d){var e=this._frameZoomFactor,
f=this._scaleX,g=this._scaleY;_scissorRect.x=a;_scissorRect.y=b;_scissorRect.width=c;_scissorRect.height=d;cc._renderContext.scissor(a*f*e+this._viewPortRect.x*e,b*g*e+this._viewPortRect.y*e,c*f*e,d*g*e)},isScissorEnabled:function(){return cc._renderContext.isEnabled(gl.SCISSOR_TEST)},getScissorRect:function(){return cc.rect(_scissorRect)},setViewName:function(a){null!=a&&0<a.length&&(this._viewName=a)},getViewName:function(){return this._viewName},getViewPortRect:function(){return this._viewPortRect},
getScaleX:function(){return this._scaleX},getScaleY:function(){return this._scaleY},getDevicePixelRatio:function(){return this._devicePixelRatio},convertToLocationInView:function(a,b,c){a=this._devicePixelRatio*(a-c.left)-this._touchOffest.x;b=this._devicePixelRatio*(c.top+c.height-b)-this._touchOffest.y;return this._isRotated?{x:this._viewPortRect.width-b,y:a}:{x:a,y:b}},setTouchOffest:function(a,b){null==b?this._touchOffest=a:(this._touchOffest.x=a,this._touchOffest.y=b)},_convertMouseToLocationInView:function(a,
b){var c=this._viewPortRect;a.x=(this._devicePixelRatio*(a.x-b.left)-c.x)/this._scaleX;a.y=(this._devicePixelRatio*(b.top+b.height-a.y)-c.y)/this._scaleY},_convertPointWithScale:function(a){var b=this._viewPortRect;a.x=(a.x-b.x)/this._scaleX;a.y=(a.y-b.y)/this._scaleY},_convertTouchesWithScale:function(a){for(var b=this._viewPortRect,c=this._scaleX,d=this._scaleY,e,f,g=0;g<a.length;g++)e=a[g],f=e._point,e=e._prevPoint,f.x=(f.x-b.x)/c,f.y=(f.y-b.y)/d,e.x=(e.x-b.x)/c,e.y=(e.y-b.y)/d}});
cc.EGLView._getInstance=function(){this._instance||(this._instance=this._instance||new cc.EGLView,this._instance.initialize());return this._instance};
cc.ContainerStrategy=cc.Class.extend({preApply:function(a){},apply:function(a,b){},postApply:function(a){},_setupContainer:function(a,b,c){var d=cc.game.canvas,e=cc.game.container;e.style.width=d.style.width=b+"px";e.style.height=d.style.height=c+"px";e=a._devicePixelRatio=1;a.isRetinaEnabled()&&1024>b&&1024>c&&(e=a._devicePixelRatio=Math.min(4,window.devicePixelRatio||1));d.width=b*e;d.height=c*e;cc._renderContext.resetCache&&cc._renderContext.resetCache()},_fixContainer:function(){document.body.insertBefore(cc.container,
document.body.firstChild);var a=document.body.style;a.width=window.innerWidth+"px";a.height=window.innerHeight+"px";a.overflow="hidden";a=cc.container.style;a.position="fixed";a.left=a.top="0px";document.body.scrollTop=0}});
cc.ContentStrategy=cc.Class.extend({_result:{scale:[1,1],viewport:null},_buildResult:function(a,b,c,d,e,f){2>Math.abs(a-c)&&(c=a);2>Math.abs(b-d)&&(d=b);a=cc.rect(Math.round((a-c)/2),Math.round((b-d)/2),c,d);this._result.scale=[e,f];this._result.viewport=a;return this._result},preApply:function(a){},apply:function(a,b){return{scale:[1,1]}},postApply:function(a){}});
(function(){var a=cc.ContainerStrategy.extend({apply:function(a){var b=a._frameSize.height,c=cc.container.style;this._setupContainer(a,a._frameSize.width,a._frameSize.height);a._isRotated?c.marginLeft=b+"px":c.margin="0px"}}),b=cc.ContainerStrategy.extend({apply:function(a,b){var c=a._frameSize.width,d=a._frameSize.height,e=cc.container.style,n=b.width,p=b.height,r=c/n,s=d/p,u,t;r<s?(u=c,t=p*r):(u=n*s,t=d);n=Math.round((c-u)/2);t=Math.round((d-t)/2);this._setupContainer(a,c-2*n,d-2*t);a._isRotated?
e.marginLeft=d+"px":e.margin="0px";e.paddingLeft=n+"px";e.paddingRight=n+"px";e.paddingTop=t+"px";e.paddingBottom=t+"px"}});a.extend({preApply:function(a){this._super(a);a._frame=document.documentElement},apply:function(a){this._super(a);this._fixContainer()}});b.extend({preApply:function(a){this._super(a);a._frame=document.documentElement},apply:function(a,b){this._super(a,b);this._fixContainer()}});var c=cc.ContainerStrategy.extend({apply:function(a){this._setupContainer(a,cc._canvas.width,cc._canvas.height)}});
cc.ContainerStrategy.EQUAL_TO_FRAME=new a;cc.ContainerStrategy.PROPORTION_TO_FRAME=new b;cc.ContainerStrategy.ORIGINAL_CONTAINER=new c;var a=cc.ContentStrategy.extend({apply:function(a,b){var c=cc._canvas.width,d=cc._canvas.height;return this._buildResult(c,d,c,d,c/b.width,d/b.height)}}),b=cc.ContentStrategy.extend({apply:function(a,b){var c=cc._canvas.width,d=cc._canvas.height,e=b.width,n=b.height,p=c/e,r=d/n,s=0,u,t;p<r?(s=p,u=c,t=n*s):(s=r,u=e*s,t=d);return this._buildResult(c,d,u,t,s,s)}}),c=
cc.ContentStrategy.extend({apply:function(a,b){var c=cc._canvas.width,d=cc._canvas.height,e=b.width,n=b.height,p=c/e,r=d/n,s,u,t;p<r?(s=r,u=e*s,t=d):(s=p,u=c,t=n*s);return this._buildResult(c,d,u,t,s,s)}}),d=cc.ContentStrategy.extend({apply:function(a,b){var c=cc._canvas.width,d=cc._canvas.height,e=d/b.height;return this._buildResult(c,d,c,d,e,e)},postApply:function(a){cc.director._winSizeInPoints=a.getVisibleSize()}}),e=cc.ContentStrategy.extend({apply:function(a,b){var c=cc._canvas.width,d=cc._canvas.height,
e=c/b.width;return this._buildResult(c,d,c,d,e,e)},postApply:function(a){cc.director._winSizeInPoints=a.getVisibleSize()}});cc.ContentStrategy.EXACT_FIT=new a;cc.ContentStrategy.SHOW_ALL=new b;cc.ContentStrategy.NO_BORDER=new c;cc.ContentStrategy.FIXED_HEIGHT=new d;cc.ContentStrategy.FIXED_WIDTH=new e})();
cc.ResolutionPolicy=cc.Class.extend({_containerStrategy:null,_contentStrategy:null,ctor:function(a,b){this.setContainerStrategy(a);this.setContentStrategy(b)},preApply:function(a){this._containerStrategy.preApply(a);this._contentStrategy.preApply(a)},apply:function(a,b){this._containerStrategy.apply(a,b);return this._contentStrategy.apply(a,b)},postApply:function(a){this._containerStrategy.postApply(a);this._contentStrategy.postApply(a)},setContainerStrategy:function(a){a instanceof cc.ContainerStrategy&&
(this._containerStrategy=a)},setContentStrategy:function(a){a instanceof cc.ContentStrategy&&(this._contentStrategy=a)}});cc.ResolutionPolicy.EXACT_FIT=0;cc.ResolutionPolicy.NO_BORDER=1;cc.ResolutionPolicy.SHOW_ALL=2;cc.ResolutionPolicy.FIXED_HEIGHT=3;cc.ResolutionPolicy.FIXED_WIDTH=4;cc.ResolutionPolicy.UNKNOWN=5;cc.screen={_supportsFullScreen:!1,_preOnFullScreenChange:null,_touchEvent:"",_fn:null,_fnMap:[["requestFullscreen","exitFullscreen","fullscreenchange","fullscreenEnabled","fullscreenElement"],["requestFullScreen","exitFullScreen","fullScreenchange","fullScreenEnabled","fullScreenElement"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange","webkitIsFullScreen","webkitCurrentFullScreenElement"],["mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozFullScreen",
"mozFullScreenElement"],["msRequestFullscreen","msExitFullscreen","MSFullscreenChange","msFullscreenEnabled","msFullscreenElement"]],init:function(){this._fn={};var a,b,c=this._fnMap,d;a=0;for(l=c.length;a<l;a++)if((b=c[a])&&b[1]in document){a=0;for(d=b.length;a<d;a++)this._fn[c[0][a]]=b[a];break}this._supportsFullScreen="undefined"!==typeof this._fn.requestFullscreen;this._touchEvent="ontouchstart"in window?"touchstart":"mousedown"},fullScreen:function(){return this._supportsFullScreen?void 0===
document[this._fn.fullscreenElement]||null===document[this._fn.fullscreenElement]?!1:!0:!1},requestFullScreen:function(a,b){if(this._supportsFullScreen){a=a||document.documentElement;if(b){var c=this._fn.fullscreenchange;this._preOnFullScreenChange&&document.removeEventListener(c,this._preOnFullScreenChange);this._preOnFullScreenChange=b;document.addEventListener(c,b,!1)}return a[this._fn.requestFullscreen]()}},exitFullScreen:function(){return this._supportsFullScreen?document[this._fn.exitFullscreen]():
!0},autoFullScreen:function(a,b){function c(){d.removeEventListener(e._touchEvent,c);e.requestFullScreen(a,b)}a=a||document.body;var d=cc.game.canvas||a,e=this;this.requestFullScreen(a,b);d.addEventListener(this._touchEvent,c)}};cc.screen.init();cc.visibleRect={topLeft:cc.p(0,0),topRight:cc.p(0,0),top:cc.p(0,0),bottomLeft:cc.p(0,0),bottomRight:cc.p(0,0),bottom:cc.p(0,0),center:cc.p(0,0),left:cc.p(0,0),right:cc.p(0,0),width:0,height:0,init:function(a){var b=this.width=a.width,c=this.height=a.height,d=a.x;a=a.y;var e=a+c,f=d+b;this.topLeft.x=d;this.topLeft.y=e;this.topRight.x=f;this.topRight.y=e;this.top.x=d+b/2;this.top.y=e;this.bottomLeft.x=d;this.bottomLeft.y=a;this.bottomRight.x=f;this.bottomRight.y=a;this.bottom.x=d+b/2;this.bottom.y=
a;this.center.x=d+b/2;this.center.y=a+c/2;this.left.x=d;this.left.y=a+c/2;this.right.x=f;this.right.y=a+c/2}};cc.UIInterfaceOrientationLandscapeLeft=-90;cc.UIInterfaceOrientationLandscapeRight=90;cc.UIInterfaceOrientationPortraitUpsideDown=180;cc.UIInterfaceOrientationPortrait=0;
cc.inputManager={_mousePressed:!1,_isRegisterEvent:!1,_preTouchPoint:cc.p(0,0),_prevMousePoint:cc.p(0,0),_preTouchPool:[],_preTouchPoolPointer:0,_touches:[],_touchesIntegerDict:{},_indexBitsUsed:0,_maxTouches:5,_accelEnabled:!1,_accelInterval:1/30,_accelMinus:1,_accelCurTime:0,_acceleration:null,_accelDeviceEvent:null,_getUnUsedIndex:function(){for(var a=this._indexBitsUsed,b=0;b<this._maxTouches;b++){if(!(a&1))return this._indexBitsUsed|=1<<b,b;a>>=1}return-1},_removeUsedIndexBit:function(a){0>a||
a>=this._maxTouches||(a=~(1<<a),this._indexBitsUsed&=a)},_glView:null,handleTouchesBegin:function(a){for(var b,c,d,e=[],f=this._touchesIntegerDict,g=0,h=a.length;g<h;g++)if(b=a[g],d=b.getID(),c=f[d],null==c){var k=this._getUnUsedIndex();-1===k?cc.log(cc._LogInfos.inputManager_handleTouchesBegin,k):(c=this._touches[k]=new cc.Touch(b._point.x,b._point.y,b.getID()),c._setPrevPoint(b._prevPoint),f[d]=k,e.push(c))}0<e.length&&(this._glView._convertTouchesWithScale(e),a=new cc.EventTouch(e),a._eventCode=
cc.EventTouch.EventCode.BEGAN,cc.eventManager.dispatchEvent(a))},handleTouchesMove:function(a){for(var b,c,d=[],e=this._touches,f=0,g=a.length;f<g;f++)b=a[f],c=b.getID(),c=this._touchesIntegerDict[c],null!=c&&e[c]&&(e[c]._setPoint(b._point),e[c]._setPrevPoint(b._prevPoint),d.push(e[c]));0<d.length&&(this._glView._convertTouchesWithScale(d),a=new cc.EventTouch(d),a._eventCode=cc.EventTouch.EventCode.MOVED,cc.eventManager.dispatchEvent(a))},handleTouchesEnd:function(a){a=this.getSetOfTouchesEndOrCancel(a);
0<a.length&&(this._glView._convertTouchesWithScale(a),a=new cc.EventTouch(a),a._eventCode=cc.EventTouch.EventCode.ENDED,cc.eventManager.dispatchEvent(a))},handleTouchesCancel:function(a){a=this.getSetOfTouchesEndOrCancel(a);0<a.length&&(this._glView._convertTouchesWithScale(a),a=new cc.EventTouch(a),a._eventCode=cc.EventTouch.EventCode.CANCELLED,cc.eventManager.dispatchEvent(a))},getSetOfTouchesEndOrCancel:function(a){for(var b,c,d,e=[],f=this._touches,g=this._touchesIntegerDict,h=0,k=a.length;h<
k;h++)b=a[h],d=b.getID(),c=g[d],null!=c&&f[c]&&(f[c]._setPoint(b._point),f[c]._setPrevPoint(b._prevPoint),e.push(f[c]),this._removeUsedIndexBit(c),delete g[d]);return e},getHTMLElementPosition:function(a){var b=null,b=cc.isFunction(a.getBoundingClientRect)?a.getBoundingClientRect():{left:0,top:0,width:parseInt(a.style.width),height:parseInt(a.style.height)};return{left:0,top:0,width:b.width,height:b.height}},getPreTouch:function(a){for(var b=null,c=this._preTouchPool,d=a.getID(),e=c.length-1;0<=e;e--)if(c[e].getID()===
d){b=c[e];break}b||(b=a);return b},setPreTouch:function(a){for(var b=!1,c=this._preTouchPool,d=a.getID(),e=c.length-1;0<=e;e--)if(c[e].getID()===d){c[e]=a;b=!0;break}b||(50>=c.length?c.push(a):(c[this._preTouchPoolPointer]=a,this._preTouchPoolPointer=(this._preTouchPoolPointer+1)%50))},getTouchByXY:function(a,b,c){var d=this._preTouchPoint;a=this._glView.convertToLocationInView(a,b,c);b=new cc.Touch(a.x,a.y);b._setPrevPoint(d.x,d.y);d.x=a.x;d.y=a.y;return b},getMouseEvent:function(a,b,c){var d=this._prevMousePoint;
this._glView._convertMouseToLocationInView(a,b);b=new cc.EventMouse(c);b.setLocation(a.x,a.y);b._setPrevCursor(d.x,d.y);d.x=a.x;d.y=a.y;return b},getPointByEvent:function(a,b){return null!=a.pageX?{x:a.pageX,y:a.pageY}:{x:a.clientX,y:a.clientY}},getTouchesByEvent:function(a,b){for(var c=[],d=this._glView,e,f,g=this._preTouchPoint,h=a.changedTouches.length,k=0;k<h;k++)if(e=a.changedTouches[k]){var m;m=cc.sys.BROWSER_TYPE_FIREFOX===cc.sys.browserType?d.convertToLocationInView(e.pageX,e.pageY,b):d.convertToLocationInView(e.clientX,
e.clientY,b);null!=e.identifier?(e=new cc.Touch(m.x,m.y,e.identifier),f=this.getPreTouch(e).getLocation(),e._setPrevPoint(f.x,f.y),this.setPreTouch(e)):(e=new cc.Touch(m.x,m.y),e._setPrevPoint(g.x,g.y));g.x=m.x;g.y=m.y;c.push(e)}return c},registerSystemEvent:function(a){if(!this._isRegisterEvent){this._glView=cc.view;var b=this,c="mouse"in cc.sys.capabilities,d="touches"in cc.sys.capabilities,e=!1;cc.sys.isMobile&&(e=!0);c&&(window.addEventListener("mousedown",function(){b._mousePressed=!0},!1),window.addEventListener("mouseup",
function(c){if(!e){var d=b._mousePressed;b._mousePressed=!1;if(d){var d=b.getHTMLElementPosition(a),f=b.getPointByEvent(c,d);cc.rectContainsPoint(new cc.Rect(d.left,d.top,d.width,d.height),f)||(b.handleTouchesEnd([b.getTouchByXY(f.x,f.y,d)]),d=b.getMouseEvent(f,d,cc.EventMouse.UP),d.setButton(c.button),cc.eventManager.dispatchEvent(d))}}},!1),a.addEventListener("mousedown",function(c){if(!e){b._mousePressed=!0;var d=b.getHTMLElementPosition(a),f=b.getPointByEvent(c,d);b.handleTouchesBegin([b.getTouchByXY(f.x,
f.y,d)]);d=b.getMouseEvent(f,d,cc.EventMouse.DOWN);d.setButton(c.button);cc.eventManager.dispatchEvent(d);c.stopPropagation();c.preventDefault()}},!1),a.addEventListener("mouseup",function(c){if(!e){b._mousePressed=!1;var d=b.getHTMLElementPosition(a),f=b.getPointByEvent(c,d);b.handleTouchesEnd([b.getTouchByXY(f.x,f.y,d)]);d=b.getMouseEvent(f,d,cc.EventMouse.UP);d.setButton(c.button);cc.eventManager.dispatchEvent(d);c.stopPropagation();c.preventDefault()}},!1),a.addEventListener("mousemove",function(c){if(!e){var d=
b.getHTMLElementPosition(a),f=b.getPointByEvent(c,d);b.handleTouchesMove([b.getTouchByXY(f.x,f.y,d)]);d=b.getMouseEvent(f,d,cc.EventMouse.MOVE);b._mousePressed?d.setButton(c.button):d.setButton(null);cc.eventManager.dispatchEvent(d);c.stopPropagation();c.preventDefault()}},!1),a.addEventListener("mousewheel",function(c){var d=b.getHTMLElementPosition(a),e=b.getPointByEvent(c,d),d=b.getMouseEvent(e,d,cc.EventMouse.SCROLL);d.setButton(c.button);d.setScrollData(0,c.wheelDelta);cc.eventManager.dispatchEvent(d);
c.stopPropagation();c.preventDefault()},!1),a.addEventListener("DOMMouseScroll",function(c){var d=b.getHTMLElementPosition(a),e=b.getPointByEvent(c,d),d=b.getMouseEvent(e,d,cc.EventMouse.SCROLL);d.setButton(c.button);d.setScrollData(0,-120*c.detail);cc.eventManager.dispatchEvent(d);c.stopPropagation();c.preventDefault()},!1));if(window.navigator.msPointerEnabled){var c={MSPointerDown:b.handleTouchesBegin,MSPointerMove:b.handleTouchesMove,MSPointerUp:b.handleTouchesEnd,MSPointerCancel:b.handleTouchesCancel},
f;for(f in c)(function(c,d){a.addEventListener(c,function(c){var e=b.getHTMLElementPosition(a);d.call(b,[b.getTouchByXY(c.clientX,c.clientY,e)]);c.stopPropagation()},!1)})(f,c[f])}d&&(a.addEventListener("touchstart",function(c){if(c.changedTouches&&!cc.game.isPaused()){var d=b.getHTMLElementPosition(a);b.handleTouchesBegin(b.getTouchesByEvent(c,d));c.stopPropagation();c.preventDefault()}},!1),a.addEventListener("touchmove",function(c){if(c.changedTouches&&!cc.game.isPaused()){var d=b.getHTMLElementPosition(a);
b.handleTouchesMove(b.getTouchesByEvent(c,d));c.stopPropagation();c.preventDefault()}},!1),a.addEventListener("touchend",function(c){if(c.changedTouches&&!cc.game.isPaused()){var d=b.getHTMLElementPosition(a);b.handleTouchesEnd(b.getTouchesByEvent(c,d));c.stopPropagation();c.preventDefault()}},!1),a.addEventListener("touchcancel",function(c){if(c.changedTouches&&!cc.game.isPaused()){var d=b.getHTMLElementPosition(a);b.handleTouchesCancel(b.getTouchesByEvent(c,d));c.stopPropagation();c.preventDefault()}},
!1));this._registerKeyboardEvent();this._registerAccelerometerEvent();this._isRegisterEvent=!0}},_registerKeyboardEvent:function(){},_registerAccelerometerEvent:function(){},update:function(a){this._accelCurTime>this._accelInterval&&(this._accelCurTime-=this._accelInterval,cc.eventManager.dispatchEvent(new cc.EventAcceleration(this._acceleration)));this._accelCurTime+=a}};_p=cc.inputManager;_p.setAccelerometerEnabled=function(a){this._accelEnabled!==a&&(this._accelEnabled=a,a=cc.director.getScheduler(),this._accelCurTime=0,a.scheduleUpdate(this))};_p.setAccelerometerInterval=function(a){this._accelInterval!==a&&(this._accelInterval=a)};
_p._registerKeyboardEvent=function(){cc._canvas.addEventListener("keydown",function(a){cc.eventManager.dispatchEvent(new cc.EventKeyboard(a.keyCode,!0));a.stopPropagation();a.preventDefault()},!1);cc._canvas.addEventListener("keyup",function(a){cc.eventManager.dispatchEvent(new cc.EventKeyboard(a.keyCode,!1));a.stopPropagation();a.preventDefault()},!1)};
_p._registerAccelerometerEvent=function(){var a=window;this._acceleration=new cc.Acceleration;this._accelDeviceEvent=a.DeviceMotionEvent||a.DeviceOrientationEvent;cc.sys.browserType===cc.sys.BROWSER_TYPE_MOBILE_QQ&&(this._accelDeviceEvent=window.DeviceOrientationEvent);var b=this._accelDeviceEvent===a.DeviceMotionEvent?"devicemotion":"deviceorientation",c=navigator.userAgent;if(/Android/.test(c)||/Adr/.test(c)&&cc.sys.browserType===cc.BROWSER_TYPE_UC)this._minus=-1;a.addEventListener(b,this.didAccelerate.bind(this),
!1)};
_p.didAccelerate=function(a){var b=window;if(this._accelEnabled){var c=this._acceleration,d,e,f;this._accelDeviceEvent===window.DeviceMotionEvent?(f=a.accelerationIncludingGravity,d=this._accelMinus*f.x*0.1,e=this._accelMinus*f.y*0.1,f=0.1*f.z):(d=a.gamma/90*0.981,e=0.981*-(a.beta/90),f=a.alpha/90*0.981);c.x=d;c.y=e;c.z=f;c.timestamp=a.timeStamp||Date.now();a=c.x;b.orientation===cc.UIInterfaceOrientationLandscapeRight?(c.x=-c.y,c.y=a):b.orientation===cc.UIInterfaceOrientationLandscapeLeft?(c.x=c.y,
c.y=-a):b.orientation===cc.UIInterfaceOrientationPortraitUpsideDown&&(c.x=-c.x,c.y=-c.y)}};_p=null;cc.AffineTransform=function(a,b,c,d,e,f){this.a=a;this.b=b;this.c=c;this.d=d;this.tx=e;this.ty=f};cc.affineTransformMake=function(a,b,c,d,e,f){return{a:a,b:b,c:c,d:d,tx:e,ty:f}};cc.pointApplyAffineTransform=function(a,b,c){var d;void 0===c?(c=b,d=a.x,a=a.y):(d=a,a=b);return{x:c.a*d+c.c*a+c.tx,y:c.b*d+c.d*a+c.ty}};cc._pointApplyAffineTransform=function(a,b,c){return cc.pointApplyAffineTransform(a,b,c)};
cc.sizeApplyAffineTransform=function(a,b){return{width:b.a*a.width+b.c*a.height,height:b.b*a.width+b.d*a.height}};cc.affineTransformMakeIdentity=function(){return{a:1,b:0,c:0,d:1,tx:0,ty:0}};cc.affineTransformIdentity=function(){return{a:1,b:0,c:0,d:1,tx:0,ty:0}};
cc.rectApplyAffineTransform=function(a,b){var c=cc.rectGetMinY(a),d=cc.rectGetMinX(a),e=cc.rectGetMaxX(a),f=cc.rectGetMaxY(a),g=cc.pointApplyAffineTransform(d,c,b),c=cc.pointApplyAffineTransform(e,c,b),d=cc.pointApplyAffineTransform(d,f,b),h=cc.pointApplyAffineTransform(e,f,b),e=Math.min(g.x,c.x,d.x,h.x),f=Math.max(g.x,c.x,d.x,h.x),k=Math.min(g.y,c.y,d.y,h.y),g=Math.max(g.y,c.y,d.y,h.y);return cc.rect(e,k,f-e,g-k)};
cc._rectApplyAffineTransformIn=function(a,b){var c=cc.rectGetMinY(a),d=cc.rectGetMinX(a),e=cc.rectGetMaxX(a),f=cc.rectGetMaxY(a),g=cc.pointApplyAffineTransform(d,c,b),c=cc.pointApplyAffineTransform(e,c,b),d=cc.pointApplyAffineTransform(d,f,b),h=cc.pointApplyAffineTransform(e,f,b),e=Math.min(g.x,c.x,d.x,h.x),f=Math.max(g.x,c.x,d.x,h.x),k=Math.min(g.y,c.y,d.y,h.y),g=Math.max(g.y,c.y,d.y,h.y);a.x=e;a.y=k;a.width=f-e;a.height=g-k;return a};
cc.affineTransformTranslate=function(a,b,c){return{a:a.a,b:a.b,c:a.c,d:a.d,tx:a.tx+a.a*b+a.c*c,ty:a.ty+a.b*b+a.d*c}};cc.affineTransformScale=function(a,b,c){return{a:a.a*b,b:a.b*b,c:a.c*c,d:a.d*c,tx:a.tx,ty:a.ty}};cc.affineTransformRotate=function(a,b){var c=Math.sin(b),d=Math.cos(b);return{a:a.a*d+a.c*c,b:a.b*d+a.d*c,c:a.c*d-a.a*c,d:a.d*d-a.b*c,tx:a.tx,ty:a.ty}};
cc.affineTransformConcat=function(a,b){return{a:a.a*b.a+a.b*b.c,b:a.a*b.b+a.b*b.d,c:a.c*b.a+a.d*b.c,d:a.c*b.b+a.d*b.d,tx:a.tx*b.a+a.ty*b.c+b.tx,ty:a.tx*b.b+a.ty*b.d+b.ty}};cc.affineTransformConcatIn=function(a,b){var c=a.a,d=a.b,e=a.c,f=a.d,g=a.tx,h=a.ty;a.a=c*b.a+d*b.c;a.b=c*b.b+d*b.d;a.c=e*b.a+f*b.c;a.d=e*b.b+f*b.d;a.tx=g*b.a+h*b.c+b.tx;a.ty=g*b.b+h*b.d+b.ty;return a};cc.affineTransformEqualToTransform=function(a,b){return a.a===b.a&&a.b===b.b&&a.c===b.c&&a.d===b.d&&a.tx===b.tx&&a.ty===b.ty};
cc.affineTransformInvert=function(a){var b=1/(a.a*a.d-a.b*a.c);return{a:b*a.d,b:-b*a.b,c:-b*a.c,d:b*a.a,tx:b*(a.c*a.ty-a.d*a.tx),ty:b*(a.b*a.tx-a.a*a.ty)}};cc.POINT_EPSILON=parseFloat("1.192092896e-07F");cc.pNeg=function(a){return cc.p(-a.x,-a.y)};cc.pAdd=function(a,b){return cc.p(a.x+b.x,a.y+b.y)};cc.pSub=function(a,b){return cc.p(a.x-b.x,a.y-b.y)};cc.pMult=function(a,b){return cc.p(a.x*b,a.y*b)};cc.pMidpoint=function(a,b){return cc.pMult(cc.pAdd(a,b),0.5)};cc.pDot=function(a,b){return a.x*b.x+a.y*b.y};cc.pCross=function(a,b){return a.x*b.y-a.y*b.x};cc.pPerp=function(a){return cc.p(-a.y,a.x)};cc.pRPerp=function(a){return cc.p(a.y,-a.x)};
cc.pProject=function(a,b){return cc.pMult(b,cc.pDot(a,b)/cc.pDot(b,b))};cc.pRotate=function(a,b){return cc.p(a.x*b.x-a.y*b.y,a.x*b.y+a.y*b.x)};cc.pUnrotate=function(a,b){return cc.p(a.x*b.x+a.y*b.y,a.y*b.x-a.x*b.y)};cc.pLengthSQ=function(a){return cc.pDot(a,a)};cc.pDistanceSQ=function(a,b){return cc.pLengthSQ(cc.pSub(a,b))};cc.pLength=function(a){return Math.sqrt(cc.pLengthSQ(a))};cc.pDistance=function(a,b){return cc.pLength(cc.pSub(a,b))};
cc.pNormalize=function(a){var b=cc.pLength(a);return 0===b?cc.p(a):cc.pMult(a,1/b)};cc.pForAngle=function(a){return cc.p(Math.cos(a),Math.sin(a))};cc.pToAngle=function(a){return Math.atan2(a.y,a.x)};cc.clampf=function(a,b,c){if(b>c){var d=b;b=c;c=d}return a<b?b:a<c?a:c};cc.pClamp=function(a,b,c){return cc.p(cc.clampf(a.x,b.x,c.x),cc.clampf(a.y,b.y,c.y))};cc.pFromSize=function(a){return cc.p(a.width,a.height)};cc.pCompOp=function(a,b){return cc.p(b(a.x),b(a.y))};
cc.pLerp=function(a,b,c){return cc.pAdd(cc.pMult(a,1-c),cc.pMult(b,c))};cc.pFuzzyEqual=function(a,b,c){return a.x-c<=b.x&&b.x<=a.x+c&&a.y-c<=b.y&&b.y<=a.y+c?!0:!1};cc.pCompMult=function(a,b){return cc.p(a.x*b.x,a.y*b.y)};cc.pAngleSigned=function(a,b){var c=cc.pNormalize(a),d=cc.pNormalize(b),c=Math.atan2(c.x*d.y-c.y*d.x,cc.pDot(c,d));return Math.abs(c)<cc.POINT_EPSILON?0:c};cc.pAngle=function(a,b){var c=Math.acos(cc.pDot(cc.pNormalize(a),cc.pNormalize(b)));return Math.abs(c)<cc.POINT_EPSILON?0:c};
cc.pRotateByAngle=function(a,b,c){a=cc.pSub(a,b);var d=Math.cos(c);c=Math.sin(c);var e=a.x;a.x=e*d-a.y*c+b.x;a.y=e*c+a.y*d+b.y;return a};cc.pLineIntersect=function(a,b,c,d,e){if(a.x===b.x&&a.y===b.y||c.x===d.x&&c.y===d.y)return!1;var f=b.x-a.x;b=b.y-a.y;var g=d.x-c.x;d=d.y-c.y;var h=a.x-c.x;a=a.y-c.y;c=d*f-g*b;e.x=g*a-d*h;e.y=f*a-b*h;if(0===c)return 0===e.x||0===e.y?!0:!1;e.x/=c;e.y/=c;return!0};
cc.pSegmentIntersect=function(a,b,c,d){var e=cc.p(0,0);return cc.pLineIntersect(a,b,c,d,e)&&0<=e.x&&1>=e.x&&0<=e.y&&1>=e.y?!0:!1};cc.pIntersectPoint=function(a,b,c,d){var e=cc.p(0,0);return cc.pLineIntersect(a,b,c,d,e)?(c=cc.p(0,0),c.x=a.x+e.x*(b.x-a.x),c.y=a.y+e.x*(b.y-a.y),c):cc.p(0,0)};cc.pSameAs=function(a,b){return null!=a&&null!=b?a.x===b.x&&a.y===b.y:!1};cc.pZeroIn=function(a){a.x=0;a.y=0};cc.pIn=function(a,b){a.x=b.x;a.y=b.y};cc.pMultIn=function(a,b){a.x*=b;a.y*=b};
cc.pSubIn=function(a,b){a.x-=b.x;a.y-=b.y};cc.pAddIn=function(a,b){a.x+=b.x;a.y+=b.y};cc.pNormalizeIn=function(a){cc.pMultIn(a,1/Math.sqrt(a.x*a.x+a.y*a.y))};cc.vertexLineToPolygon=function(a,b,c,d,e){e+=d;if(!(1>=e)){b*=0.5;for(var f,g=e-1,h=d;h<e;h++){f=2*h;var k=cc.p(a[2*h],a[2*h+1]),m;if(0===h)m=cc.pPerp(cc.pNormalize(cc.pSub(k,cc.p(a[2*(h+1)],a[2*(h+1)+1]))));else if(h===g)m=cc.pPerp(cc.pNormalize(cc.pSub(cc.p(a[2*(h-1)],a[2*(h-1)+1]),k)));else{m=cc.p(a[2*(h-1)],a[2*(h-1)+1]);var n=cc.p(a[2*(h+1)],a[2*(h+1)+1]),p=cc.pNormalize(cc.pSub(n,k)),r=cc.pNormalize(cc.pSub(m,k)),s=Math.acos(cc.pDot(p,r));m=s<cc.degreesToRadians(70)?cc.pPerp(cc.pNormalize(cc.pMidpoint(p,
r))):s<cc.degreesToRadians(170)?cc.pNormalize(cc.pMidpoint(p,r)):cc.pPerp(cc.pNormalize(cc.pSub(n,m)))}m=cc.pMult(m,b);c[2*f]=k.x+m.x;c[2*f+1]=k.y+m.y;c[2*(f+1)]=k.x-m.x;c[2*(f+1)+1]=k.y-m.y}for(h=0===d?0:d-1;h<g;h++)f=2*h,a=f+2,b=cc.vertex2(c[2*f],c[2*f+1]),e=cc.vertex2(c[2*(f+1)],c[2*(f+1)+1]),f=cc.vertex2(c[2*a],c[2*a]),d=cc.vertex2(c[2*(a+1)],c[2*(a+1)+1]),b=!cc.vertexLineIntersect(b.x,b.y,d.x,d.y,e.x,e.y,f.x,f.y),!b.isSuccess&&(0>b.value||1<b.value)&&(b.isSuccess=!0),b.isSuccess&&(c[2*a]=d.x,
c[2*a+1]=d.y,c[2*(a+1)]=f.x,c[2*(a+1)+1]=f.y)}};cc.vertexLineIntersect=function(a,b,c,d,e,f,g,h){if(a===c&&b===d||e===g&&f===h)return{isSuccess:!1,value:0};c-=a;d-=b;e-=a;f-=b;g-=a;h-=b;a=Math.sqrt(c*c+d*d);c/=a;d/=a;b=e*c+f*d;f=f*c-e*d;e=b;b=g*c+h*d;h=h*c-g*d;g=b;return f===h?{isSuccess:!1,value:0}:{isSuccess:!0,value:(g+(e-g)*h/(h-f))/a}};cc.vertexListIsClockwise=function(a){for(var b=0,c=a.length;b<c;b++){var d=a[(b+1)%c],e=a[(b+2)%c];if(0<cc.pCross(cc.pSub(d,a[b]),cc.pSub(e,d)))return!1}return!0};cc.CGAffineToGL=function(a,b){b[2]=b[3]=b[6]=b[7]=b[8]=b[9]=b[11]=b[14]=0;b[10]=b[15]=1;b[0]=a.a;b[4]=a.c;b[12]=a.tx;b[1]=a.b;b[5]=a.d;b[13]=a.ty};cc.GLToCGAffine=function(a,b){b.a=a[0];b.c=a[4];b.tx=a[12];b.b=a[1];b.d=a[5];b.ty=a[13]};cc.Touch=cc.Class.extend({_point:null,_prevPoint:null,_id:0,_startPointCaptured:!1,_startPoint:null,ctor:function(a,b,c){this.setTouchInfo(c,a,b)},getLocation:function(){return{x:this._point.x,y:this._point.y}},getLocationX:function(){return this._point.x},getLocationY:function(){return this._point.y},getPreviousLocation:function(){return{x:this._prevPoint.x,y:this._prevPoint.y}},getStartLocation:function(){return{x:this._startPoint.x,y:this._startPoint.y}},getDelta:function(){return cc.pSub(this._point,
this._prevPoint)},getLocationInView:function(){return{x:this._point.x,y:this._point.y}},getPreviousLocationInView:function(){return{x:this._prevPoint.x,y:this._prevPoint.y}},getStartLocationInView:function(){return{x:this._startPoint.x,y:this._startPoint.y}},getID:function(){return this._id},getId:function(){cc.log("getId is deprecated. Please use getID instead.");return this._id},setTouchInfo:function(a,b,c){this._prevPoint=this._point;this._point=cc.p(b||0,c||0);this._id=a;this._startPointCaptured||
(this._startPoint=cc.p(this._point),cc.view._convertPointWithScale(this._startPoint),this._startPointCaptured=!0)},_setPoint:function(a,b){void 0===b?(this._point.x=a.x,this._point.y=a.y):(this._point.x=a,this._point.y=b)},_setPrevPoint:function(a,b){this._prevPoint=void 0===b?cc.p(a.x,a.y):cc.p(a||0,b||0)}});cc.Event=cc.Class.extend({_type:0,_isStopped:!1,_currentTarget:null,_setCurrentTarget:function(a){this._currentTarget=a},ctor:function(a){this._type=a},getType:function(){return this._type},stopPropagation:function(){this._isStopped=!0},isStopped:function(){return this._isStopped},getCurrentTarget:function(){return this._currentTarget}});cc.Event.TOUCH=0;cc.Event.KEYBOARD=1;cc.Event.ACCELERATION=2;cc.Event.MOUSE=3;cc.Event.FOCUS=4;cc.Event.CUSTOM=6;
cc.EventCustom=cc.Event.extend({_eventName:null,_userData:null,ctor:function(a){cc.Event.prototype.ctor.call(this,cc.Event.CUSTOM);this._eventName=a},setUserData:function(a){this._userData=a},getUserData:function(){return this._userData},getEventName:function(){return this._eventName}});
cc.EventMouse=cc.Event.extend({_eventType:0,_button:0,_x:0,_y:0,_prevX:0,_prevY:0,_scrollX:0,_scrollY:0,ctor:function(a){cc.Event.prototype.ctor.call(this,cc.Event.MOUSE);this._eventType=a},setScrollData:function(a,b){this._scrollX=a;this._scrollY=b},getScrollX:function(){return this._scrollX},getScrollY:function(){return this._scrollY},setLocation:function(a,b){this._x=a;this._y=b},getLocation:function(){return{x:this._x,y:this._y}},getLocationInView:function(){return{x:this._x,y:cc.view._designResolutionSize.height-
this._y}},_setPrevCursor:function(a,b){this._prevX=a;this._prevY=b},getDelta:function(){return{x:this._x-this._prevX,y:this._y-this._prevY}},getDeltaX:function(){return this._x-this._prevX},getDeltaY:function(){return this._y-this._prevY},setButton:function(a){this._button=a},getButton:function(){return this._button},getLocationX:function(){return this._x},getLocationY:function(){return this._y}});cc.EventMouse.NONE=0;cc.EventMouse.DOWN=1;cc.EventMouse.UP=2;cc.EventMouse.MOVE=3;
cc.EventMouse.SCROLL=4;cc.EventMouse.BUTTON_LEFT=0;cc.EventMouse.BUTTON_RIGHT=2;cc.EventMouse.BUTTON_MIDDLE=1;cc.EventMouse.BUTTON_4=3;cc.EventMouse.BUTTON_5=4;cc.EventMouse.BUTTON_6=5;cc.EventMouse.BUTTON_7=6;cc.EventMouse.BUTTON_8=7;
cc.EventTouch=cc.Event.extend({_eventCode:0,_touches:null,ctor:function(a){cc.Event.prototype.ctor.call(this,cc.Event.TOUCH);this._touches=a||[]},getEventCode:function(){return this._eventCode},getTouches:function(){return this._touches},_setEventCode:function(a){this._eventCode=a},_setTouches:function(a){this._touches=a}});cc.EventTouch.MAX_TOUCHES=5;cc.EventTouch.EventCode={BEGAN:0,MOVED:1,ENDED:2,CANCELLED:3};
cc.EventFocus=cc.Event.extend({_widgetGetFocus:null,_widgetLoseFocus:null,ctor:function(a,b){cc.Event.prototype.ctor.call(this,cc.Event.FOCUS);this._widgetGetFocus=b;this._widgetLoseFocus=a}});cc.EventListener=cc.Class.extend({_onEvent:null,_type:0,_listenerID:null,_registered:!1,_fixedPriority:0,_node:null,_paused:!0,_isEnabled:!0,ctor:function(a,b,c){this._onEvent=c;this._type=a||0;this._listenerID=b||""},_setPaused:function(a){this._paused=a},_isPaused:function(){return this._paused},_setRegistered:function(a){this._registered=a},_isRegistered:function(){return this._registered},_getType:function(){return this._type},_getListenerID:function(){return this._listenerID},_setFixedPriority:function(a){this._fixedPriority=
a},_getFixedPriority:function(){return this._fixedPriority},_setSceneGraphPriority:function(a){this._node=a},_getSceneGraphPriority:function(){return this._node},checkAvailable:function(){return null!==this._onEvent},clone:function(){return null},setEnabled:function(a){this._isEnabled=a},isEnabled:function(){return this._isEnabled},retain:function(){},release:function(){}});cc.EventListener.UNKNOWN=0;cc.EventListener.TOUCH_ONE_BY_ONE=1;cc.EventListener.TOUCH_ALL_AT_ONCE=2;
cc.EventListener.KEYBOARD=3;cc.EventListener.MOUSE=4;cc.EventListener.ACCELERATION=6;cc.EventListener.FOCUS=7;cc.EventListener.CUSTOM=8;
cc._EventListenerCustom=cc.EventListener.extend({_onCustomEvent:null,ctor:function(a,b){this._onCustomEvent=b;var c=this;cc.EventListener.prototype.ctor.call(this,cc.EventListener.CUSTOM,a,function(a){null!==c._onCustomEvent&&c._onCustomEvent(a)})},checkAvailable:function(){return cc.EventListener.prototype.checkAvailable.call(this)&&null!==this._onCustomEvent},clone:function(){return new cc._EventListenerCustom(this._listenerID,this._onCustomEvent)}});
cc._EventListenerCustom.create=function(a,b){return new cc._EventListenerCustom(a,b)};
cc._EventListenerMouse=cc.EventListener.extend({onMouseDown:null,onMouseUp:null,onMouseMove:null,onMouseScroll:null,ctor:function(){var a=this;cc.EventListener.prototype.ctor.call(this,cc.EventListener.MOUSE,cc._EventListenerMouse.LISTENER_ID,function(b){var c=cc.EventMouse;switch(b._eventType){case c.DOWN:if(a.onMouseDown)a.onMouseDown(b);break;case c.UP:if(a.onMouseUp)a.onMouseUp(b);break;case c.MOVE:if(a.onMouseMove)a.onMouseMove(b);break;case c.SCROLL:if(a.onMouseScroll)a.onMouseScroll(b)}})},
clone:function(){var a=new cc._EventListenerMouse;a.onMouseDown=this.onMouseDown;a.onMouseUp=this.onMouseUp;a.onMouseMove=this.onMouseMove;a.onMouseScroll=this.onMouseScroll;return a},checkAvailable:function(){return!0}});cc._EventListenerMouse.LISTENER_ID="__cc_mouse";cc._EventListenerMouse.create=function(){return new cc._EventListenerMouse};
cc._EventListenerTouchOneByOne=cc.EventListener.extend({_claimedTouches:null,swallowTouches:!1,onTouchBegan:null,onTouchMoved:null,onTouchEnded:null,onTouchCancelled:null,ctor:function(){cc.EventListener.prototype.ctor.call(this,cc.EventListener.TOUCH_ONE_BY_ONE,cc._EventListenerTouchOneByOne.LISTENER_ID,null);this._claimedTouches=[]},setSwallowTouches:function(a){this.swallowTouches=a},isSwallowTouches:function(){return this.swallowTouches},clone:function(){var a=new cc._EventListenerTouchOneByOne;
a.onTouchBegan=this.onTouchBegan;a.onTouchMoved=this.onTouchMoved;a.onTouchEnded=this.onTouchEnded;a.onTouchCancelled=this.onTouchCancelled;a.swallowTouches=this.swallowTouches;return a},checkAvailable:function(){return this.onTouchBegan?!0:(cc.log(cc._LogInfos._EventListenerTouchOneByOne_checkAvailable),!1)}});cc._EventListenerTouchOneByOne.LISTENER_ID="__cc_touch_one_by_one";cc._EventListenerTouchOneByOne.create=function(){return new cc._EventListenerTouchOneByOne};
cc._EventListenerTouchAllAtOnce=cc.EventListener.extend({onTouchesBegan:null,onTouchesMoved:null,onTouchesEnded:null,onTouchesCancelled:null,ctor:function(){cc.EventListener.prototype.ctor.call(this,cc.EventListener.TOUCH_ALL_AT_ONCE,cc._EventListenerTouchAllAtOnce.LISTENER_ID,null)},clone:function(){var a=new cc._EventListenerTouchAllAtOnce;a.onTouchesBegan=this.onTouchesBegan;a.onTouchesMoved=this.onTouchesMoved;a.onTouchesEnded=this.onTouchesEnded;a.onTouchesCancelled=this.onTouchesCancelled;return a},
checkAvailable:function(){return null===this.onTouchesBegan&&null===this.onTouchesMoved&&null===this.onTouchesEnded&&null===this.onTouchesCancelled?(cc.log(cc._LogInfos._EventListenerTouchAllAtOnce_checkAvailable),!1):!0}});cc._EventListenerTouchAllAtOnce.LISTENER_ID="__cc_touch_all_at_once";cc._EventListenerTouchAllAtOnce.create=function(){return new cc._EventListenerTouchAllAtOnce};
cc.EventListener.create=function(a){cc.assert(a&&a.event,cc._LogInfos.EventListener_create);var b=a.event;delete a.event;var c=null;b===cc.EventListener.TOUCH_ONE_BY_ONE?c=new cc._EventListenerTouchOneByOne:b===cc.EventListener.TOUCH_ALL_AT_ONCE?c=new cc._EventListenerTouchAllAtOnce:b===cc.EventListener.MOUSE?c=new cc._EventListenerMouse:b===cc.EventListener.CUSTOM?(c=new cc._EventListenerCustom(a.eventName,a.callback),delete a.eventName,delete a.callback):b===cc.EventListener.KEYBOARD?c=new cc._EventListenerKeyboard:
b===cc.EventListener.ACCELERATION?(c=new cc._EventListenerAcceleration(a.callback),delete a.callback):b===cc.EventListener.FOCUS&&(c=new cc._EventListenerFocus);for(var d in a)c[d]=a[d];return c};
cc._EventListenerFocus=cc.EventListener.extend({clone:function(){var a=new cc._EventListenerFocus;a.onFocusChanged=this.onFocusChanged;return a},checkAvailable:function(){return this.onFocusChanged?!0:(cc.log("Invalid EventListenerFocus!"),!1)},onFocusChanged:null,ctor:function(){cc.EventListener.prototype.ctor.call(this,cc.EventListener.FOCUS,cc._EventListenerFocus.LISTENER_ID,function(a){if(this.onFocusChanged)this.onFocusChanged(a._widgetLoseFocus,a._widgetGetFocus)})}});
cc._EventListenerFocus.LISTENER_ID="__cc_focus_event";cc._EventListenerVector=cc.Class.extend({_fixedListeners:null,_sceneGraphListeners:null,gt0Index:0,ctor:function(){this._fixedListeners=[];this._sceneGraphListeners=[]},size:function(){return this._fixedListeners.length+this._sceneGraphListeners.length},empty:function(){return 0===this._fixedListeners.length&&0===this._sceneGraphListeners.length},push:function(a){0===a._getFixedPriority()?this._sceneGraphListeners.push(a):this._fixedListeners.push(a)},clearSceneGraphListeners:function(){this._sceneGraphListeners.length=
0},clearFixedListeners:function(){this._fixedListeners.length=0},clear:function(){this._sceneGraphListeners.length=0;this._fixedListeners.length=0},getFixedPriorityListeners:function(){return this._fixedListeners},getSceneGraphPriorityListeners:function(){return this._sceneGraphListeners}});
cc.__getListenerID=function(a){var b=cc.Event,c=a.getType();if(c===b.ACCELERATION)return cc._EventListenerAcceleration.LISTENER_ID;if(c===b.CUSTOM)return a.getEventName();if(c===b.KEYBOARD)return cc._EventListenerKeyboard.LISTENER_ID;if(c===b.MOUSE)return cc._EventListenerMouse.LISTENER_ID;if(c===b.FOCUS)return cc._EventListenerFocus.LISTENER_ID;c===b.TOUCH&&cc.log(cc._LogInfos.__getListenerID);return""};
cc.eventManager={DIRTY_NONE:0,DIRTY_FIXED_PRIORITY:1,DIRTY_SCENE_GRAPH_PRIORITY:2,DIRTY_ALL:3,_listenersMap:{},_priorityDirtyFlagMap:{},_nodeListenersMap:{},_nodePriorityMap:{},_globalZOrderNodeMap:{},_toAddedListeners:[],_toRemovedListeners:[],_dirtyNodes:[],_inDispatch:0,_isEnabled:!1,_nodePriorityIndex:0,_internalCustomListenerIDs:[cc.game.EVENT_HIDE,cc.game.EVENT_SHOW],_setDirtyForNode:function(a){null!=this._nodeListenersMap[a.__instanceId]&&this._dirtyNodes.push(a);a=a.getChildren();for(var b=
0,c=a.length;b<c;b++)this._setDirtyForNode(a[b])},pauseTarget:function(a,b){var c=this._nodeListenersMap[a.__instanceId],d,e;if(c)for(d=0,e=c.length;d<e;d++)c[d]._setPaused(!0);if(!0===b)for(c=a.getChildren(),d=0,e=c.length;d<e;d++)this.pauseTarget(c[d],!0)},resumeTarget:function(a,b){var c=this._nodeListenersMap[a.__instanceId],d,e;if(c)for(d=0,e=c.length;d<e;d++)c[d]._setPaused(!1);this._setDirtyForNode(a);if(!0===b)for(c=a.getChildren(),d=0,e=c.length;d<e;d++)this.resumeTarget(c[d],!0)},_addListener:function(a){0===
this._inDispatch?this._forceAddEventListener(a):this._toAddedListeners.push(a)},_forceAddEventListener:function(a){var b=a._getListenerID(),c=this._listenersMap[b];c||(c=new cc._EventListenerVector,this._listenersMap[b]=c);c.push(a);0===a._getFixedPriority()?(this._setDirty(b,this.DIRTY_SCENE_GRAPH_PRIORITY),b=a._getSceneGraphPriority(),null===b&&cc.log(cc._LogInfos.eventManager__forceAddEventListener),this._associateNodeAndEventListener(b,a),b.isRunning()&&this.resumeTarget(b)):this._setDirty(b,
this.DIRTY_FIXED_PRIORITY)},_getListeners:function(a){return this._listenersMap[a]},_updateDirtyFlagForSceneGraph:function(){if(0!==this._dirtyNodes.length){for(var a=this._dirtyNodes,b,c,d=this._nodeListenersMap,e=0,f=a.length;e<f;e++)if(b=d[a[e].__instanceId])for(var g=0,h=b.length;g<h;g++)(c=b[g])&&this._setDirty(c._getListenerID(),this.DIRTY_SCENE_GRAPH_PRIORITY);this._dirtyNodes.length=0}},_removeAllListenersInVector:function(a){if(a)for(var b,c=0;c<a.length;)b=a[c],b._setRegistered(!1),null!=
b._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(b._getSceneGraphPriority(),b),b._setSceneGraphPriority(null)),0===this._inDispatch?cc.arrayRemoveObject(a,b):++c},_removeListenersForListenerID:function(a){var b=this._listenersMap[a];if(b){var c=b.getFixedPriorityListeners(),d=b.getSceneGraphPriorityListeners();this._removeAllListenersInVector(d);this._removeAllListenersInVector(c);delete this._priorityDirtyFlagMap[a];this._inDispatch||(b.clear(),delete this._listenersMap[a])}c=this._toAddedListeners;
for(b=0;b<c.length;)(d=c[b])&&d._getListenerID()===a?cc.arrayRemoveObject(c,d):++b},_sortEventListeners:function(a){var b=this.DIRTY_NONE,c=this._priorityDirtyFlagMap;c[a]&&(b=c[a]);b!==this.DIRTY_NONE&&(c[a]=this.DIRTY_NONE,b&this.DIRTY_FIXED_PRIORITY&&this._sortListenersOfFixedPriority(a),b&this.DIRTY_SCENE_GRAPH_PRIORITY&&((b=cc.director.getRunningScene())?this._sortListenersOfSceneGraphPriority(a,b):c[a]=this.DIRTY_SCENE_GRAPH_PRIORITY))},_sortListenersOfSceneGraphPriority:function(a,b){var c=
this._getListeners(a);if(c){var d=c.getSceneGraphPriorityListeners();d&&0!==d.length&&(this._nodePriorityIndex=0,this._nodePriorityMap={},this._visitTarget(b,!0),c.getSceneGraphPriorityListeners().sort(this._sortEventListenersOfSceneGraphPriorityDes))}},_sortEventListenersOfSceneGraphPriorityDes:function(a,b){var c=cc.eventManager._nodePriorityMap,d=a._getSceneGraphPriority(),e=b._getSceneGraphPriority();return b&&e&&c[e.__instanceId]?a&&d&&c[d.__instanceId]?c[b._getSceneGraphPriority().__instanceId]-
c[a._getSceneGraphPriority().__instanceId]:1:-1},_sortListenersOfFixedPriority:function(a){if(a=this._listenersMap[a]){var b=a.getFixedPriorityListeners();if(b&&0!==b.length){b.sort(this._sortListenersOfFixedPriorityAsc);for(var c=0,d=b.length;c<d&&!(0<=b[c]._getFixedPriority());)++c;a.gt0Index=c}}},_sortListenersOfFixedPriorityAsc:function(a,b){return a._getFixedPriority()-b._getFixedPriority()},_onUpdateListeners:function(a){if(a=this._listenersMap[a]){var b=a.getFixedPriorityListeners(),c=a.getSceneGraphPriorityListeners(),
d,e,f=this._toRemovedListeners;if(c)for(d=0;d<c.length;)e=c[d],e._isRegistered()?++d:(cc.arrayRemoveObject(c,e),e=f.indexOf(e),-1!==e&&f.splice(e,1));if(b)for(d=0;d<b.length;)e=b[d],e._isRegistered()?++d:(cc.arrayRemoveObject(b,e),e=f.indexOf(e),-1!==e&&f.splice(e,1));c&&0===c.length&&a.clearSceneGraphListeners();b&&0===b.length&&a.clearFixedListeners()}},_updateListeners:function(a){var b=this._inDispatch;cc.assert(0<b,cc._LogInfos.EventManager__updateListeners);if(!(1<b)){a.getType()===cc.Event.TOUCH?
(this._onUpdateListeners(cc._EventListenerTouchOneByOne.LISTENER_ID),this._onUpdateListeners(cc._EventListenerTouchAllAtOnce.LISTENER_ID)):this._onUpdateListeners(cc.__getListenerID(a));cc.assert(1===b,cc._LogInfos.EventManager__updateListeners_2);a=this._listenersMap;var b=this._priorityDirtyFlagMap,c;for(c in a)a[c].empty()&&(delete b[c],delete a[c]);c=this._toAddedListeners;if(0!==c.length){a=0;for(b=c.length;a<b;a++)this._forceAddEventListener(c[a]);this._toAddedListeners.length=0}0!==this._toRemovedListeners.length&&
this._cleanToRemovedListeners()}},_cleanToRemovedListeners:function(){for(var a=this._toRemovedListeners,b=0;b<a.length;b++){var c=a[b],d=this._listenersMap[c._getListenerID()];if(d){var e=d.getFixedPriorityListeners(),f=d.getSceneGraphPriorityListeners();f&&(d=f.indexOf(c),-1!==d&&f.splice(d,1));e&&(d=e.indexOf(c),-1!==d&&e.splice(d,1))}}a.length=0},_onTouchEventCallback:function(a,b){Utils.traceTouch("CCEventManger :: _onTouchEventCallback, listener\x3d",!!a,", node\x3d",a._node);if(!a._isRegistered)return!1;
var c=b.event,d=b.selTouch;c._setCurrentTarget(a._node);var e=!1,f,g=c.getEventCode(),h=cc.EventTouch.EventCode;Utils.traceTouch("getCode\x3d",g,",onTouchBegan\x3d",!!a.onTouchBegan,", listener._claimedTouches.length\x3d",a._claimedTouches.length);if(g===h.BEGAN)a.onTouchBegan&&(e=a.onTouchBegan(d,c))&&a._registered&&a._claimedTouches.push(d);else if(0<a._claimedTouches.length&&-1!==(f=a._claimedTouches.indexOf(d)))if(e=!0,g===h.MOVED&&a.onTouchMoved)a.onTouchMoved(d,c);else if(g===h.ENDED){Utils.traceTouch("CCEventManger :: eventCode.ENDED");
if(a.onTouchEnded)a.onTouchEnded(d,c);a._registered&&a._claimedTouches.splice(f,1)}else if(g===h.CANCELLED){if(a.onTouchCancelled)a.onTouchCancelled(d,c);a._registered&&a._claimedTouches.splice(f,1)}return c.isStopped()?(cc.eventManager._updateListeners(c),!0):e&&a.swallowTouches?(b.needsMutableSet&&b.touches.splice(d,1),!0):!1},_dispatchTouchEvent:function(a){this._sortEventListeners(cc._EventListenerTouchOneByOne.LISTENER_ID);this._sortEventListeners(cc._EventListenerTouchAllAtOnce.LISTENER_ID);
var b=this._getListeners(cc._EventListenerTouchOneByOne.LISTENER_ID),c=this._getListeners(cc._EventListenerTouchAllAtOnce.LISTENER_ID);if(null!==b||null!==c){var d=a.getTouches(),e=cc.copyArray(d),f={event:a,needsMutableSet:b&&c,touches:e,selTouch:null};if(b)for(var g=0;g<d.length;g++)if(f.selTouch=d[g],this._dispatchEventToListeners(b,this._onTouchEventCallback,f),a.isStopped())return;if(c&&0<e.length&&(this._dispatchEventToListeners(c,this._onTouchesEventCallback,{event:a,touches:e}),a.isStopped()))return;
this._updateListeners(a)}},_onTouchesEventCallback:function(a,b){if(!a._registered)return!1;var c=cc.EventTouch.EventCode,d=b.event,e=b.touches,f=d.getEventCode();d._setCurrentTarget(a._node);if(f===c.BEGAN&&a.onTouchesBegan)a.onTouchesBegan(e,d);else if(f===c.MOVED&&a.onTouchesMoved)a.onTouchesMoved(e,d);else if(f===c.ENDED&&a.onTouchesEnded)a.onTouchesEnded(e,d);else if(f===c.CANCELLED&&a.onTouchesCancelled)a.onTouchesCancelled(e,d);return d.isStopped()?(cc.eventManager._updateListeners(d),!0):
!1},_associateNodeAndEventListener:function(a,b){var c=this._nodeListenersMap[a.__instanceId];c||(c=[],this._nodeListenersMap[a.__instanceId]=c);c.push(b)},_dissociateNodeAndEventListener:function(a,b){var c=this._nodeListenersMap[a.__instanceId];c&&(cc.arrayRemoveObject(c,b),0===c.length&&delete this._nodeListenersMap[a.__instanceId])},_dispatchEventToListeners:function(a,b,c){var d=!1,e=a.getFixedPriorityListeners(),f=a.getSceneGraphPriorityListeners(),g=0,h;if(e&&0!==e.length)for(;g<a.gt0Index;++g)if(h=
e[g],h.isEnabled()&&!h._isPaused()&&h._isRegistered()&&b(h,c)){d=!0;break}if(f&&!d)for(a=0;a<f.length;a++)if(h=f[a],h.isEnabled()&&!h._isPaused()&&h._isRegistered()&&b(h,c)){d=!0;break}if(e&&!d)for(;g<e.length&&(h=e[g],!h.isEnabled()||h._isPaused()||!h._isRegistered()||!b(h,c));++g);},_setDirty:function(a,b){var c=this._priorityDirtyFlagMap;c[a]=null==c[a]?b:b|c[a]},_visitTarget:function(a,b){var c=a.getChildren(),d=0,e=c.length,f=this._globalZOrderNodeMap,g=this._nodeListenersMap;if(0<e){for(var h;d<
e;d++)if((h=c[d])&&0>h.getLocalZOrder())this._visitTarget(h,!1);else break;null!=g[a.__instanceId]&&(f[a.getGlobalZOrder()]||(f[a.getGlobalZOrder()]=[]),f[a.getGlobalZOrder()].push(a.__instanceId));for(;d<e;d++)(h=c[d])&&this._visitTarget(h,!1)}else null!=g[a.__instanceId]&&(f[a.getGlobalZOrder()]||(f[a.getGlobalZOrder()]=[]),f[a.getGlobalZOrder()].push(a.__instanceId));if(b){var c=[],k;for(k in f)c.push(k);c.sort(this._sortNumberAsc);k=c.length;h=this._nodePriorityMap;for(d=0;d<k;d++)for(e=f[c[d]],
g=0;g<e.length;g++)h[e[g]]=++this._nodePriorityIndex;this._globalZOrderNodeMap={}}},_sortNumberAsc:function(a,b){return a-b},addListener:function(a,b){cc.assert(a&&b,cc._LogInfos.eventManager_addListener_2);if(!(a instanceof cc.EventListener))cc.assert(!cc.isNumber(b),cc._LogInfos.eventManager_addListener_3),a=cc.EventListener.create(a);else if(a._isRegistered()){cc.log(cc._LogInfos.eventManager_addListener_4);return}if(a.checkAvailable()){if(cc.isNumber(b)){if(0===b){cc.log(cc._LogInfos.eventManager_addListener);
return}a._setSceneGraphPriority(null);a._setFixedPriority(b);a._setRegistered(!0);a._setPaused(!1)}else a._setSceneGraphPriority(b),a._setFixedPriority(0),a._setRegistered(!0);this._addListener(a);return a}},addCustomListener:function(a,b){var c=new cc._EventListenerCustom(a,b);this.addListener(c,1);return c},removeListener:function(a){if(null!=a){var b,c=this._listenersMap,d;for(d in c){var e=c[d],f=e.getFixedPriorityListeners();b=e.getSceneGraphPriorityListeners();(b=this._removeListenerInVector(b,
a))?this._setDirty(a._getListenerID(),this.DIRTY_SCENE_GRAPH_PRIORITY):(b=this._removeListenerInVector(f,a))&&this._setDirty(a._getListenerID(),this.DIRTY_FIXED_PRIORITY);e.empty()&&(delete this._priorityDirtyFlagMap[a._getListenerID()],delete c[d]);if(b)break}if(!b)for(c=this._toAddedListeners,d=0,e=c.length;d<e;d++)if(f=c[d],f===a){cc.arrayRemoveObject(c,f);f._setRegistered(!1);break}}},_removeListenerInCallback:function(a,b){if(null==a)return!1;for(var c=0,d=a.length;c<d;c++){var e=a[c];if(e._onCustomEvent===
b||e._onEvent===b)return e._setRegistered(!1),null!=e._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(e._getSceneGraphPriority(),e),e._setSceneGraphPriority(null)),0===this._inDispatch&&cc.arrayRemoveObject(a,e),!0}return!1},_removeListenerInVector:function(a,b){if(null==a)return!1;for(var c=0,d=a.length;c<d;c++){var e=a[c];if(e===b)return e._setRegistered(!1),null!=e._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(e._getSceneGraphPriority(),e),e._setSceneGraphPriority(null)),
0===this._inDispatch?cc.arrayRemoveObject(a,e):this._toRemovedListeners.push(e),!0}return!1},removeListeners:function(a,b){if(a instanceof cc.Node){delete this._nodePriorityMap[a.__instanceId];cc.arrayRemoveObject(this._dirtyNodes,a);var c=this._nodeListenersMap[a.__instanceId];if(c){for(var d=cc.copyArray(c),c=0;c<d.length;c++)this.removeListener(d[c]);d.length=0}d=this._toAddedListeners;for(c=0;c<d.length;){var e=d[c];e._getSceneGraphPriority()===a?(e._setSceneGraphPriority(null),e._setRegistered(!1),
d.splice(c,1)):++c}if(!0===b)for(d=a.getChildren(),c=0,e=d.length;c<e;c++)this.removeListeners(d[c],!0)}else a===cc.EventListener.TOUCH_ONE_BY_ONE?this._removeListenersForListenerID(cc._EventListenerTouchOneByOne.LISTENER_ID):a===cc.EventListener.TOUCH_ALL_AT_ONCE?this._removeListenersForListenerID(cc._EventListenerTouchAllAtOnce.LISTENER_ID):a===cc.EventListener.MOUSE?this._removeListenersForListenerID(cc._EventListenerMouse.LISTENER_ID):a===cc.EventListener.ACCELERATION?this._removeListenersForListenerID(cc._EventListenerAcceleration.LISTENER_ID):
a===cc.EventListener.KEYBOARD?this._removeListenersForListenerID(cc._EventListenerKeyboard.LISTENER_ID):cc.log(cc._LogInfos.eventManager_removeListeners)},removeCustomListeners:function(a){this._removeListenersForListenerID(a)},removeAllListeners:function(){var a=this._listenersMap,b=this._internalCustomListenerIDs,c;for(c in a)-1===b.indexOf(c)&&this._removeListenersForListenerID(c)},setPriority:function(a,b){if(null!=a){var c=this._listenersMap,d;for(d in c){var e=c[d].getFixedPriorityListeners();
if(e&&-1!==e.indexOf(a)){null!=a._getSceneGraphPriority()&&cc.log(cc._LogInfos.eventManager_setPriority);a._getFixedPriority()!==b&&(a._setFixedPriority(b),this._setDirty(a._getListenerID(),this.DIRTY_FIXED_PRIORITY));break}}}},setEnabled:function(a){this._isEnabled=a},isEnabled:function(){return this._isEnabled},dispatchEvent:function(a){if(this._isEnabled){this._updateDirtyFlagForSceneGraph();this._inDispatch++;if(!a||!a.getType)throw Error("event is undefined");if(a.getType()===cc.Event.TOUCH)try{this._dispatchTouchEvent(a)}catch(b){cc.log(b)}else{var c=
cc.__getListenerID(a);this._sortEventListeners(c);c=this._listenersMap[c];null!=c&&this._dispatchEventToListeners(c,this._onListenerCallback,a);this._updateListeners(a)}this._inDispatch--}},_onListenerCallback:function(a,b){b._setCurrentTarget(a._getSceneGraphPriority());a._onEvent(b);return b.isStopped()},dispatchCustomEvent:function(a,b){var c=new cc.EventCustom(a);c.setUserData(b);this.dispatchEvent(c)}};cc.EventAcceleration=cc.Event.extend({_acc:null,ctor:function(a){cc.Event.prototype.ctor.call(this,cc.Event.ACCELERATION);this._acc=a}});cc.EventKeyboard=cc.Event.extend({_keyCode:0,_isPressed:!1,ctor:function(a,b){cc.Event.prototype.ctor.call(this,cc.Event.KEYBOARD);this._keyCode=a;this._isPressed=b}});
cc._EventListenerAcceleration=cc.EventListener.extend({_onAccelerationEvent:null,ctor:function(a){this._onAccelerationEvent=a;var b=this;cc.EventListener.prototype.ctor.call(this,cc.EventListener.ACCELERATION,cc._EventListenerAcceleration.LISTENER_ID,function(a){b._onAccelerationEvent(a._acc,a)})},checkAvailable:function(){cc.assert(this._onAccelerationEvent,cc._LogInfos._EventListenerAcceleration_checkAvailable);return!0},clone:function(){return new cc._EventListenerAcceleration(this._onAccelerationEvent)}});
cc._EventListenerAcceleration.LISTENER_ID="__cc_acceleration";cc._EventListenerAcceleration.create=function(a){return new cc._EventListenerAcceleration(a)};
cc._EventListenerKeyboard=cc.EventListener.extend({onKeyPressed:null,onKeyReleased:null,ctor:function(){var a=this;cc.EventListener.prototype.ctor.call(this,cc.EventListener.KEYBOARD,cc._EventListenerKeyboard.LISTENER_ID,function(b){if(b._isPressed){if(a.onKeyPressed)a.onKeyPressed(b._keyCode,b)}else if(a.onKeyReleased)a.onKeyReleased(b._keyCode,b)})},clone:function(){var a=new cc._EventListenerKeyboard;a.onKeyPressed=this.onKeyPressed;a.onKeyReleased=this.onKeyReleased;return a},checkAvailable:function(){return null===
this.onKeyPressed&&null===this.onKeyReleased?(cc.log(cc._LogInfos._EventListenerKeyboard_checkAvailable),!1):!0}});cc._EventListenerKeyboard.LISTENER_ID="__cc_keyboard";cc._EventListenerKeyboard.create=function(){return new cc._EventListenerKeyboard};cc.rendererCanvas={childrenOrderDirty:!0,assignedZ:0,assignedZStep:1E-4,_transformNodePool:[],_renderCmds:[],_isCacheToCanvasOn:!1,_cacheToCanvasCmds:{},_cacheInstanceIds:[],_currentID:0,_clearColor:cc.color(),_clearFillStyle:"rgb(0, 0, 0)",_dirtyRegion:null,_allNeedDraw:!0,_enableDirtyRegion:!1,_debugDirtyRegion:!1,_canUseDirtyRegion:!1,_dirtyRegionCountThreshold:10,getRenderCmd:function(a){return a._createRenderCmd()},enableDirtyRegion:function(a){this._enableDirtyRegion=a},isDirtyRegionEnabled:function(){return this._enableDirtyRegion},
setDirtyRegionCountThreshold:function(a){this._dirtyRegionCountThreshold=a},_collectDirtyRegion:function(){var a=this._renderCmds,b,c,d=this._dirtyRegion,e=0,f=!0,g=cc.Node.CanvasRenderCmd.RegionStatus;b=0;for(c=a.length;b<c;b++){var h=a[b],k=h._oldRegion,m=h._currentRegion;h._regionFlag>g.NotDirty&&(++e,e>this._dirtyRegionCountThreshold&&(f=!1),f&&(!m.isEmpty()&&d.addRegion(m),h._regionFlag>g.Dirty&&!k.isEmpty()&&d.addRegion(k)),h._regionFlag=g.NotDirty)}return f},_beginDrawDirtyRegion:function(a){var b=
a.getContext(),c=this._dirtyRegion.getDirtyRegions();b.save();a.setTransform({a:1,b:0,c:0,d:1,tx:0,ty:0},a._scaleX,a._scaleY);b.beginPath();a=0;for(var d=c.length;a<d;++a){var e=c[a];b.rect(e._minX,-e._maxY,e._width,e._height)}b.clip()},_endDrawDirtyRegion:function(a){a.restore()},_debugDrawDirtyRegion:function(a){if(this._debugDirtyRegion){var b=a.getContext(),c=this._dirtyRegion.getDirtyRegions();a.setTransform({a:1,b:0,c:0,d:1,tx:0,ty:0},a._scaleX,a._scaleY);b.beginPath();a=0;for(var d=c.length;a<
d;++a){var e=c[a];b.rect(e._minX,-e._maxY,e._width,e._height)}c=b.fillStyle;b.fillStyle="green";b.fill();b.fillStyle=c}},rendering:function(a){var b=this._dirtyRegion=this._dirtyRegion||new cc.DirtyRegion,c=cc._canvas;a=a||cc._renderContext;var d=a.getContext(),e=cc.view.getScaleX(),f=cc.view.getScaleY();a.setViewScale(e,f);a.computeRealOffsetY();var g=this._dirtyRegion.getDirtyRegions(),h=this._renderCmds,k,m=this._allNeedDraw||!this._enableDirtyRegion||!this._canUseDirtyRegion;k=!0;m||(k=this._collectDirtyRegion());
(m=m||!k)||this._beginDrawDirtyRegion(a);d.setTransform(1,0,0,1,0,0);d.clearRect(0,0,c.width,c.height);if(0!==this._clearColor.r||0!==this._clearColor.g||0!==this._clearColor.b)a.setFillStyle(this._clearFillStyle),a.setGlobalAlpha(this._clearColor.a),d.fillRect(0,0,c.width,c.height);c=0;for(k=h.length;c<k;c++){var n=h[c],p=!1,r=n._currentRegion;if(!r||m)p=!0;else for(var s=0,u=g.length;s<u;++s)if(g[s].intersects(r)){p=!0;break}p&&n.rendering(a,e,f)}m||(this._debugDrawDirtyRegion(a),this._endDrawDirtyRegion(d));
b.clear();this._allNeedDraw=!1},_renderingToCacheCanvas:function(a,b,c,d){a||cc.log("The context of RenderTexture is invalid.");c=cc.isUndefined(c)?1:c;d=cc.isUndefined(d)?1:d;b=b||this._currentID;var e=this._cacheToCanvasCmds[b],f,g;a.computeRealOffsetY();f=0;for(g=e.length;f<g;f++)e[f].rendering(a,c,d);this._removeCache(b);a=this._cacheInstanceIds;0===a.length?this._isCacheToCanvasOn=!1:this._currentID=a[a.length-1]},_turnToCacheMode:function(a){this._isCacheToCanvasOn=!0;a=a||0;this._cacheToCanvasCmds[a]=
[];-1===this._cacheInstanceIds.indexOf(a)&&this._cacheInstanceIds.push(a);this._currentID=a},_turnToNormalMode:function(){this._isCacheToCanvasOn=!1},_removeCache:function(a){a=a||this._currentID;var b=this._cacheToCanvasCmds[a];b&&(b.length=0,delete this._cacheToCanvasCmds[a]);cc.arrayRemoveObject(this._cacheInstanceIds,a)},resetFlag:function(){this.childrenOrderDirty=!1;this._transformNodePool.length=0},transform:function(){var a=this._transformNodePool;a.sort(this._sortNodeByLevelAsc);for(var b=
0,c=a.length;b<c;b++)0!==a[b]._dirtyFlag&&a[b].updateStatus();a.length=0},transformDirty:function(){return 0<this._transformNodePool.length},_sortNodeByLevelAsc:function(a,b){return a._curLevel-b._curLevel},pushDirtyNode:function(a){this._transformNodePool.push(a)},clear:function(){},clearRenderCommands:function(){this._renderCmds.length=0;this._cacheInstanceIds.length=0;this._isCacheToCanvasOn=!1;this._canUseDirtyRegion=this._allNeedDraw=!0},pushRenderCommand:function(a){if(a.needDraw())if(a._canUseDirtyRegion||
(this._canUseDirtyRegion=!1),this._isCacheToCanvasOn){var b=this._cacheToCanvasCmds[this._currentID];-1===b.indexOf(a)&&b.push(a)}else-1===this._renderCmds.indexOf(a)&&this._renderCmds.push(a)}};
(function(){cc.CanvasContextWrapper=function(a){this._context=a;this._saveCount=0;this._currentAlpha=a.globalAlpha;this._currentCompositeOperation=a.globalCompositeOperation;this._currentFillStyle=a.fillStyle;this._currentStrokeStyle=a.strokeStyle;this._offsetY=this._offsetX=0;this._realOffsetY=this.height;this._armatureMode=0};var a=cc.CanvasContextWrapper.prototype;a.resetCache=function(){var a=this._context;this._currentAlpha=a.globalAlpha;this._currentCompositeOperation=a.globalCompositeOperation;
this._currentFillStyle=a.fillStyle;this._currentStrokeStyle=a.strokeStyle;this._realOffsetY=this._context.canvas.height+this._offsetY};a.setOffset=function(a,c){this._offsetX=a;this._offsetY=c;this._realOffsetY=this._context.canvas.height+this._offsetY};a.computeRealOffsetY=function(){this._realOffsetY=this._context.canvas.height+this._offsetY};a.setViewScale=function(a,c){this._scaleX=a;this._scaleY=c};a.getContext=function(){return this._context};a.save=function(){this._context.save();this._saveCount++};
a.restore=function(){this._context.restore();this._saveCount--};a.setGlobalAlpha=function(a){0<this._saveCount?this._context.globalAlpha=a:this._currentAlpha!==a&&(this._currentAlpha=a,this._context.globalAlpha=a)};a.setCompositeOperation=function(a){0<this._saveCount?this._context.globalCompositeOperation=a:this._currentCompositeOperation!==a&&(this._currentCompositeOperation=a,this._context.globalCompositeOperation=a)};a.setFillStyle=function(a){0<this._saveCount?this._context.fillStyle=a:this._currentFillStyle!==
a&&(this._currentFillStyle=a,this._context.fillStyle=a)};a.setStrokeStyle=function(a){0<this._saveCount?this._context.strokeStyle=a:this._currentStrokeStyle!==a&&(this._currentStrokeStyle=a,this._context.strokeStyle=a)};a.setTransform=function(a,c,d){0<this._armatureMode?(this.restore(),this.save(),this._context.transform(a.a*c,-a.b*d,-a.c*c,a.d*d,a.tx*c,-(a.ty*d))):this._context.setTransform(a.a*c,-a.b*d,-a.c*c,a.d*d,this._offsetX+a.tx*c,this._realOffsetY-a.ty*d)};a._switchToArmatureMode=function(a,
c,d,e){a?(this._armatureMode++,this._context.setTransform(c.a,c.c,c.b,c.d,this._offsetX+c.tx*d,this._realOffsetY-c.ty*e),this.save()):(this._armatureMode--,this.restore())}})();var Region=function(){this._area=this._height=this._width=this._maxY=this._maxX=this._minY=this._minX=0},regionProto=Region.prototype,regionPool=[];function regionCreate(){var a=regionPool.pop();a||(a=new Region);return a}function regionRelease(a){regionPool.push(a)}regionProto.setTo=function(a,b,c,d){this._minX=a;this._minY=b;this._maxX=c;this._maxY=d;this.updateArea();return this};
regionProto.intValues=function(){this._minX=Math.floor(this._minX);this._minY=Math.floor(this._minY);this._maxX=Math.ceil(this._maxX);this._maxY=Math.ceil(this._maxY);this.updateArea()};regionProto.updateArea=function(){this._width=this._maxX-this._minX;this._height=this._maxY-this._minY;this._area=this._width*this._height};
regionProto.union=function(a){0>=this._width||0>=this._height?this.setTo(a._minX,a._minY,a._maxX,a._maxY):(this._minX>a._minX&&(this._minX=a._minX),this._minY>a._minY&&(this._minY=a._minY),this._maxX<a._maxX&&(this._maxX=a._maxX),this._maxY<a._maxY&&(this._maxY=a._maxY),this.updateArea())};regionProto.setEmpty=function(){this._area=this._height=this._width=this._maxY=this._maxX=this._minY=this._minX=0};regionProto.isEmpty=function(){return 0>=this._width||0>=this._height};
regionProto.intersects=function(a){if(0>=this._width||0>=this._height||0>=a._width||0>=a._height)return!1;var b=this._minX>a._minX?this._minX:a._minX,c=this._maxX<a._maxX?this._maxX:a._maxX;if(b>c)return!1;b=this._minY>a._minY?this._minY:a._minY;c=this._maxY<a._maxY?this._maxY:a._maxY;return b<=c};
regionProto.updateRegion=function(a,b){if(0==a.width||0==a.height)this.setEmpty();else{var c=b.a,d=b.b,e=b.c,f=b.d,g=b.tx,h=b.ty,k=a.x,m=a.y,n=k+a.width,p=m+a.height,r,s,u;if(1==c&&0==d&&0==e&&1==f)r=k+g-1,s=m+h-1,u=n+g+1,m=p+h+1;else{r=c*k+e*m+g;s=d*k+f*m+h;u=c*n+e*m+g;var m=d*n+f*m+h,t=c*n+e*p+g,n=d*n+f*p+h,g=c*k+e*p+g,h=d*k+f*p+h,p=0;r>u&&(p=r,r=u,u=p);t>g&&(p=t,t=g,g=p);r=(r<t?r:t)-1;u=(u>g?u:g)+1;s>m&&(p=s,s=m,m=p);n>h&&(p=n,n=h,h=p);s=(s<n?s:n)-1;m=(m>h?m:h)+1}this._minX=r;this._minY=s;this._maxX=
u;this._maxY=m;this._width=u-r;this._height=m-s;this._area=this._width*this._height}};function unionArea(a,b){return((a._maxX>b._maxX?a._maxX:b._maxX)-(a._minX<b._minX?a._minX:b._minX))*((a._maxY>b._maxY?a._maxY:b._maxY)-(a._minY<b._minY?a._minY:b._minY))}var DirtyRegion=function(){this.dirtyList=[];this.hasClipRect=!1;this.clipArea=this.clipHeight=this.clipWidth=0;this.clipRectChanged=!1},dirtyRegionProto=DirtyRegion.prototype;
dirtyRegionProto.setClipRect=function(a,b){this.clipRectChanged=this.hasClipRect=!0;this.clipWidth=Math.ceil(a);this.clipHeight=Math.ceil(b);this.clipArea=this.clipWidth*this.clipHeight};
dirtyRegionProto.addRegion=function(a){var b=a._minX,c=a._minY,d=a._maxX;a=a._maxY;this.hasClipRect&&(0>b&&(b=0),0>c&&(c=0),d>this.clipWidth&&(d=this.clipWidth),a>this.clipHeight&&(a=this.clipHeight));if(b>=d||c>=a)return!1;if(this.clipRectChanged)return!0;var e=this.dirtyList,f=regionCreate();e.push(f.setTo(b,c,d,a));this.mergeDirtyList(e);return!0};dirtyRegionProto.clear=function(){for(var a=this.dirtyList,b=a.length,c=0;c<b;c++)regionRelease(a[c]);a.length=0};
dirtyRegionProto.getDirtyRegions=function(){var a=this.dirtyList;if(this.clipRectChanged){this.clipRectChanged=!1;this.clear();var b=regionCreate();a.push(b.setTo(0,0,this.clipWidth,this.clipHeight))}else for(;this.mergeDirtyList(a););a=this.dirtyList.length;if(0<a)for(b=0;b<a;b++)this.dirtyList[b].intValues();return this.dirtyList};
dirtyRegionProto.mergeDirtyList=function(a){var b=a.length;if(2>b)return!1;for(var c=this.hasClipRect,d=3<b?Number.POSITIVE_INFINITY:0,e=0,f=0,g=0,h=0;h<b-1;h++){var k=a[h];c&&(g+=k.area);for(var m=h+1;m<b;m++){var n=a[m],n=unionArea(k,n)-k.area-n.area;d>n&&(e=h,f=m,d=n)}}c&&0.95<g/this.clipArea&&(this.clipRectChanged=!0);return e!=f?(b=a[f],a[e].union(b),regionRelease(b),a.splice(f,1),!0):!1};cc.Region=Region;cc.DirtyRegion=DirtyRegion;cc._tmp.PrototypeCCNode=function(){var a=cc.Node.prototype;cc.defineGetterSetter(a,"x",a.getPositionX,a.setPositionX);cc.defineGetterSetter(a,"y",a.getPositionY,a.setPositionY);cc.defineGetterSetter(a,"width",a._getWidth,a._setWidth);cc.defineGetterSetter(a,"height",a._getHeight,a._setHeight);cc.defineGetterSetter(a,"anchorX",a._getAnchorX,a._setAnchorX);cc.defineGetterSetter(a,"anchorY",a._getAnchorY,a._setAnchorY);cc.defineGetterSetter(a,"skewX",a.getSkewX,a.setSkewX);cc.defineGetterSetter(a,"skewY",
a.getSkewY,a.setSkewY);cc.defineGetterSetter(a,"zIndex",a.getLocalZOrder,a.setLocalZOrder);cc.defineGetterSetter(a,"vertexZ",a.getVertexZ,a.setVertexZ);cc.defineGetterSetter(a,"rotation",a.getRotation,a.setRotation);cc.defineGetterSetter(a,"rotationX",a.getRotationX,a.setRotationX);cc.defineGetterSetter(a,"rotationY",a.getRotationY,a.setRotationY);cc.defineGetterSetter(a,"scale",a.getScale,a.setScale);cc.defineGetterSetter(a,"scaleX",a.getScaleX,a.setScaleX);cc.defineGetterSetter(a,"scaleY",a.getScaleY,
a.setScaleY);cc.defineGetterSetter(a,"children",a.getChildren);cc.defineGetterSetter(a,"childrenCount",a.getChildrenCount);cc.defineGetterSetter(a,"parent",a.getParent,a.setParent);cc.defineGetterSetter(a,"visible",a.isVisible,a.setVisible);cc.defineGetterSetter(a,"running",a.isRunning);cc.defineGetterSetter(a,"ignoreAnchor",a.isIgnoreAnchorPointForPosition,a.ignoreAnchorPointForPosition);cc.defineGetterSetter(a,"actionManager",a.getActionManager,a.setActionManager);cc.defineGetterSetter(a,"scheduler",
a.getScheduler,a.setScheduler);cc.defineGetterSetter(a,"shaderProgram",a.getShaderProgram,a.setShaderProgram);cc.defineGetterSetter(a,"opacity",a.getOpacity,a.setOpacity);cc.defineGetterSetter(a,"opacityModifyRGB",a.isOpacityModifyRGB);cc.defineGetterSetter(a,"cascadeOpacity",a.isCascadeOpacityEnabled,a.setCascadeOpacityEnabled);cc.defineGetterSetter(a,"color",a.getColor,a.setColor);cc.defineGetterSetter(a,"cascadeColor",a.isCascadeColorEnabled,a.setCascadeColorEnabled)};cc.NODE_TAG_INVALID=-1;cc.s_globalOrderOfArrival=1;
cc.Node=cc.Class.extend({_localZOrder:0,_globalZOrder:0,_vertexZ:0,_customZ:NaN,_nodeName:"",_rotationX:0,_rotationY:0,_scaleX:1,_scaleY:1,_position:null,_normalizedPosition:null,_usingNormalizedPosition:!1,_normalizedPositionDirty:!1,_skewX:0,_skewY:0,_children:null,_visible:!0,_anchorPoint:null,_contentSize:null,_running:!1,_parent:null,_ignoreAnchorPointForPosition:!1,tag:cc.NODE_TAG_INVALID,userData:null,userObject:null,_reorderChildDirty:!1,_shaderProgram:null,arrivalOrder:0,_actionManager:null,
_scheduler:null,_eventDispatcher:null,_additionalTransformDirty:!1,_additionalTransform:null,_componentContainer:null,_isTransitionFinished:!1,_className:"Node",_showNode:!1,_name:"",_realOpacity:255,_realColor:null,_cascadeColorEnabled:!1,_cascadeOpacityEnabled:!1,_renderCmd:null,_scriptHandler:null,ctor:function(){this._initNode();this._initRendererCmd()},_initNode:function(){this._anchorPoint=cc.p(0,0);this._contentSize=cc.size(0,0);this._position=cc.p(0,0);this._normalizedPosition=cc.p(0,0);this._children=
[];var a=cc.director;this._actionManager=a.getActionManager();this._scheduler=a.getScheduler();this._additionalTransform=cc.affineTransformMakeIdentity();cc.ComponentContainer&&(this._componentContainer=new cc.ComponentContainer(this));this._realOpacity=255;this._realColor=cc.color(255,255,255,255);this._cascadeOpacityEnabled=this._cascadeColorEnabled=!1},init:function(){return!0},_arrayMakeObjectsPerformSelector:function(a,b){if(a&&0!==a.length){var c,d=a.length,e;c=cc.Node._stateCallbackType;switch(b){case c.onEnter:for(c=
0;c<d;c++)if(e=a[c])e.onEnter();break;case c.onExit:for(c=0;c<d;c++)if(e=a[c])e.onExit();break;case c.onEnterTransitionDidFinish:for(c=0;c<d;c++)if(e=a[c])e.onEnterTransitionDidFinish();break;case c.cleanup:for(c=0;c<d;c++)(e=a[c])&&e.cleanup();break;case c.updateTransform:for(c=0;c<d;c++)(e=a[c])&&e.updateTransform();break;case c.onExitTransitionDidStart:for(c=0;c<d;c++)if(e=a[c])e.onExitTransitionDidStart();break;case c.sortAllChildren:for(c=0;c<d;c++)(e=a[c])&&e.sortAllChildren();break;default:cc.assert(0,
cc._LogInfos.Node__arrayMakeObjectsPerformSelector)}}},attr:function(a){for(var b in a)this[b]=a[b]},getNodeName:function(){return this._nodeName},setNodeName:function(a){this._nodeName=a},getSkewX:function(){return this._skewX},setSkewX:function(a){this._skewX=a;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getSkewY:function(){return this._skewY},setSkewY:function(a){this._skewY=a;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},setLocalZOrder:function(a){this._localZOrder=
a;this._parent&&this._parent.reorderChild(this,a);cc.eventManager._setDirtyForNode(this)},_setLocalZOrder:function(a){this._localZOrder=a},getLocalZOrder:function(){return this._localZOrder},getZOrder:function(){cc.log(cc._LogInfos.Node_getZOrder);return this.getLocalZOrder()},setZOrder:function(a){this.setLocalZOrder(a)},setGlobalZOrder:function(a){this._globalZOrder!==a&&(this._globalZOrder=a,cc.eventManager._setDirtyForNode(this))},getGlobalZOrder:function(){return this._globalZOrder},getVertexZ:function(){return this._vertexZ},
setVertexZ:function(a){this._customZ=this._vertexZ=a},getRotation:function(){this._rotationX!==this._rotationY&&cc.log(cc._LogInfos.Node_getRotation);return this._rotationX},setRotation:function(a){this._rotationX=this._rotationY=a;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getRotationX:function(){return this._rotationX},setRotationX:function(a){this._rotationX=a;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getRotationY:function(){return this._rotationY},
setRotationY:function(a){this._rotationY=a;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getScale:function(){this._scaleX!==this._scaleY&&cc.log(cc._LogInfos.Node_getScale);return this._scaleX},setScale:function(a,b){this._scaleX=a;this._scaleY=b||0===b?b:a;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getScaleX:function(){return this._scaleX},setScaleX:function(a){this._scaleX=a;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getScaleY:function(){return this._scaleY},
setScaleY:function(a){this._scaleY=a;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},setPosition:function(a,b){var c=this._position;if(void 0===b){if(c.x===a.x&&c.y===a.y)return;c.x=a.x;c.y=a.y}else{if(c.x===a&&c.y===b)return;c.x=a;c.y=b}this._usingNormalizedPosition=!1;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},setNormalizedPosition:function(a,b){var c=this._normalizedPosition;void 0===b?(c.x=a.x,c.y=a.y):(c.x=a,c.y=b);this._normalizedPositionDirty=this._usingNormalizedPosition=
!0;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getPosition:function(){return cc.p(this._position)},getNormalizedPosition:function(){return cc.p(this._normalizedPosition)},getPositionX:function(){return this._position.x},setPositionX:function(a){this._position.x=a;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getPositionY:function(){return this._position.y},setPositionY:function(a){this._position.y=a;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},
getChildrenCount:function(){return this._children.length},getChildren:function(){return this._children},isVisibleInParents:function(a){if(!this._visible)return!1;if(this._parent){var b=null;null!=a&&(b=cc.pointApplyAffineTransform(a,this.nodeToParentTransform()));return this._parent.isVisibleInParents(b)}return!0},m_bOriVisible:!0,setOriVisible:function(a){this.m_bOriVisible=a},isOriVisible:function(){return this.m_bOriVisible},containWorldPoint:function(a,b){var c=this.convertToNodeSpace(ccp(a,b)),
d=cc.rect(0,0,this._contentSize.width,this._contentSize.height);return cc.rectContainsPoint(d,c)},setContentWidth:function(a){this.setContentSize(cc.size(a,this._contentSize.height))},setContentHeight:function(a){this.setContentSize(cc.size(this._contentSize.width,a))},getContentWidth:function(){return this._contentSize.width},getContentHeight:function(){return this._contentSize.height},getChildByIdx:function(a){return this._children&&this._children.length>a?this._children[a]:null},boundingBoxInWorld:function(){var a=
cc.rect(0,0,this._contentSize.width,this._contentSize.height),b=this.getNodeToWorldTransform();return a=cc.rectApplyAffineTransform(a,b)},m_intUserData:0,setIntUserData:function(a){this.m_intUserData=a},getIntUserData:function(){return this.m_intUserData},isVisible:function(){return this._visible},setVisible:function(a){this._visible!==a&&((this.m_bOriVisible=this._visible=a)&&this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),cc.renderer.childrenOrderDirty=!0)},getAnchorPoint:function(){return cc.p(this._anchorPoint)},
setAnchorPoint:function(a,b){var c=this._anchorPoint;if(void 0===b){if(a.x===c.x&&a.y===c.y)return;c.x=a.x;c.y=a.y}else{if(a===c.x&&b===c.y)return;c.x=a;c.y=b}this._renderCmd._updateAnchorPointInPoint()},_getAnchorX:function(){return this._anchorPoint.x},_setAnchorX:function(a){this._anchorPoint.x!==a&&(this._anchorPoint.x=a,this._renderCmd._updateAnchorPointInPoint())},_getAnchorY:function(){return this._anchorPoint.y},_setAnchorY:function(a){this._anchorPoint.y!==a&&(this._anchorPoint.y=a,this._renderCmd._updateAnchorPointInPoint())},
getAnchorPointInPoints:function(){return this._renderCmd.getAnchorPointInPoints()},_getWidth:function(){return this._contentSize.width},_setWidth:function(a){this._contentSize.width=a;this._renderCmd._updateAnchorPointInPoint()},_getHeight:function(){return this._contentSize.height},_setHeight:function(a){this._contentSize.height=a;this._renderCmd._updateAnchorPointInPoint()},getContentSize:function(){return cc.size(this._contentSize)},setContentSize:function(a,b){var c=this._contentSize;if(void 0===
b){if(a.width===c.width&&a.height===c.height)return;c.width=a.width;c.height=a.height}else{if(a===c.width&&b===c.height)return;c.width=a;c.height=b}this._renderCmd._updateAnchorPointInPoint()},isRunning:function(){return this._running},getParent:function(){return this._parent},setParent:function(a){this._parent=a;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},isIgnoreAnchorPointForPosition:function(){return this._ignoreAnchorPointForPosition},ignoreAnchorPointForPosition:function(a){a!==
this._ignoreAnchorPointForPosition&&(this._ignoreAnchorPointForPosition=a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty))},getTag:function(){return this.tag},setTag:function(a){this.tag=a},setName:function(a){this._name=a},getName:function(){return this._name},getUserData:function(){return this.userData},setUserData:function(a){this.userData=a},getUserObject:function(){return this.userObject},setUserObject:function(a){this.userObject!==a&&(this.userObject=a)},getOrderOfArrival:function(){return this.arrivalOrder},
setOrderOfArrival:function(a){this.arrivalOrder=a},getActionManager:function(){this._actionManager||(this._actionManager=cc.director.getActionManager());return this._actionManager},setActionManager:function(a){this._actionManager!==a&&(this.stopAllActions(),this._actionManager=a)},getScheduler:function(){this._scheduler||(this._scheduler=cc.director.getScheduler());return this._scheduler},setScheduler:function(a){this._scheduler!==a&&(this.unscheduleAllCallbacks(),this._scheduler=a)},boundingBox:function(){cc.log(cc._LogInfos.Node_boundingBox);
return this.getBoundingBox()},getBoundingBox:function(){var a=cc.rect(0,0,this._contentSize.width,this._contentSize.height);return cc._rectApplyAffineTransformIn(a,this.getNodeToParentTransform())},cleanup:function(){this.stopAllActions();this.unscheduleAllCallbacks();cc.eventManager.removeListeners(this);this._arrayMakeObjectsPerformSelector(this._children,cc.Node._stateCallbackType.cleanup)},getChildByTag:function(a){var b=this._children;if(null!==b)for(var c=0;c<b.length;c++){var d=b[c];if(d&&
d.tag===a)return d}return null},getChildByName:function(a){if(!a)return cc.log("Invalid name"),null;for(var b=this._children,c=0,d=b.length;c<d;c++)if(b[c]._name===a)return b[c];return null},addChild:function(a,b,c){b=void 0===b?a._localZOrder:b;var d,e=!1;cc.isUndefined(c)?(c=void 0,d=a._name):cc.isString(c)?(d=c,c=void 0):cc.isNumber(c)&&(e=!0,d="");cc.assert(a,cc._LogInfos.Node_addChild_3);cc.assert(null===a._parent,"child already added. It can't be added again");this._addChildHelper(a,b,c,d,e)},
_addChildHelper:function(a,b,c,d,e){this._children||(this._children=[]);this._insertChild(a,b);e?a.setTag(c):a.setName(d);a.setParent(this);a.setOrderOfArrival(cc.s_globalOrderOfArrival++);if(this._running&&(a.onEnter(),this._isTransitionFinished))a.onEnterTransitionDidFinish();a._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);this._cascadeColorEnabled&&a._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty);this._cascadeOpacityEnabled&&a._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)},
removeFromParent:function(a){this._parent&&(void 0===a&&(a=!0),this._parent.removeChild(this,a))},removeFromParentAndCleanup:function(a){this.removeFromParent(a)},removeChild:function(a,b){0!==this._children.length&&(void 0===b&&(b=!0),-1<this._children.indexOf(a)&&this._detachChild(a,b),cc.renderer.childrenOrderDirty=!0)},removeChildByTag:function(a,b){a===cc.NODE_TAG_INVALID&&cc.log(cc._LogInfos.Node_removeChildByTag);var c=this.getChildByTag(a);c?this.removeChild(c,b):cc.log(cc._LogInfos.Node_removeChildByTag_2,
a)},removeAllChildrenWithCleanup:function(a){this.removeAllChildren(a)},removeAllChildren:function(a){var b=this._children;if(null!==b){void 0===a&&(a=!0);for(var c=0;c<b.length;c++){var d=b[c];d&&(this._running&&(d.onExitTransitionDidStart(),d.onExit()),a&&d.cleanup(),d.parent=null,d._renderCmd.detachFromParent(a))}this._children.length=0;cc.renderer.childrenOrderDirty=!0}},_detachChild:function(a,b){this._running&&(a.onExitTransitionDidStart(),a.onExit());b&&a.cleanup();a.parent=null;a._renderCmd.detachFromParent(b);
cc.arrayRemoveObject(this._children,a)},_insertChild:function(a,b){cc.renderer.childrenOrderDirty=this._reorderChildDirty=!0;this._children.push(a);a._setLocalZOrder(b)},setNodeDirty:function(){this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},reorderChild:function(a,b){cc.assert(a,cc._LogInfos.Node_reorderChild);cc.renderer.childrenOrderDirty=this._reorderChildDirty=!0;a.arrivalOrder=cc.s_globalOrderOfArrival;cc.s_globalOrderOfArrival++;a._setLocalZOrder(b);this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.orderDirty)},
sortAllChildren:function(){if(this._reorderChildDirty){var a=this._children,b=a.length,c,d,e;for(c=1;c<b;c++){e=a[c];for(d=c-1;0<=d;){if(e._localZOrder<a[d]._localZOrder)a[d+1]=a[d];else if(e._localZOrder===a[d]._localZOrder&&e.arrivalOrder<a[d].arrivalOrder)a[d+1]=a[d];else break;d--}a[d+1]=e}this._reorderChildDirty=!1}},draw:function(a){},transformAncestors:function(){null!==this._parent&&(this._parent.transformAncestors(),this._parent.transform())},registerScriptHandler:function(a){this._scriptHandler=
a},onEnter:function(){this._isTransitionFinished=!1;this._running=!0;this._scriptHandler&&this._scriptHandler("enter",this);this._arrayMakeObjectsPerformSelector(this._children,cc.Node._stateCallbackType.onEnter);this.resume()},onEnterTransitionDidFinish:function(){this._isTransitionFinished=!0;this._arrayMakeObjectsPerformSelector(this._children,cc.Node._stateCallbackType.onEnterTransitionDidFinish)},onExitTransitionDidStart:function(){this._scriptHandler&&this._scriptHandler("exitTransitionStart",
this);this._arrayMakeObjectsPerformSelector(this._children,cc.Node._stateCallbackType.onExitTransitionDidStart)},onExit:function(){this._running=!1;this._scriptHandler&&this._scriptHandler("exit",this);this.pause();this._arrayMakeObjectsPerformSelector(this._children,cc.Node._stateCallbackType.onExit);this.removeAllComponents()},runAction:function(a){cc.assert(a,cc._LogInfos.Node_runAction);this.actionManager.addAction(a,this,!this._running);return a},stopAllActions:function(){this.actionManager&&
this.actionManager.removeAllActionsFromTarget(this)},stopAction:function(a){this.actionManager.removeAction(a)},stopActionByTag:function(a){a===cc.ACTION_TAG_INVALID?cc.log(cc._LogInfos.Node_stopActionByTag):this.actionManager.removeActionByTag(a,this)},getActionByTag:function(a){return a===cc.ACTION_TAG_INVALID?(cc.log(cc._LogInfos.Node_getActionByTag),null):this.actionManager.getActionByTag(a,this)},getNumberOfRunningActions:function(){return this.actionManager.numberOfRunningActionsInTarget(this)},
scheduleUpdate:function(){this.scheduleUpdateWithPriority(0)},scheduleUpdateWithPriority:function(a){this.scheduler.scheduleUpdate(this,a,!this._running)},unscheduleUpdate:function(){this.scheduler.unscheduleUpdate(this)},schedule:function(a,b,c,d,e){var f=arguments.length;"function"===typeof a?1===f?(b=0,c=cc.REPEAT_FOREVER,d=0,e=this.__instanceId):2===f?"number"===typeof b?(c=cc.REPEAT_FOREVER,d=0,e=this.__instanceId):(e=b,b=0,c=cc.REPEAT_FOREVER,d=0):3===f?("string"===typeof c?(e=c,c=cc.REPEAT_FOREVER):
e=this.__instanceId,d=0):4===f&&(e=this.__instanceId):1===f?(b=0,c=cc.REPEAT_FOREVER,d=0):2===f&&(c=cc.REPEAT_FOREVER,d=0);cc.assert(a,cc._LogInfos.Node_schedule);cc.assert(0<=b,cc._LogInfos.Node_schedule_2);c=null==c?cc.REPEAT_FOREVER:c;this.scheduler.schedule(a,this,b||0,c,d||0,!this._running,e)},scheduleOnce:function(a,b,c){void 0===c&&(c=this.__instanceId);this.schedule(a,0,0,b,c)},unschedule:function(a){a&&this.scheduler.unschedule(a,this)},unscheduleAllCallbacks:function(){this.scheduler.unscheduleAllForTarget(this)},
resumeSchedulerAndActions:function(){cc.log(cc._LogInfos.Node_resumeSchedulerAndActions);this.resume()},resume:function(){this.scheduler.resumeTarget(this);this.actionManager&&this.actionManager.resumeTarget(this);cc.eventManager.resumeTarget(this)},pauseSchedulerAndActions:function(){cc.log(cc._LogInfos.Node_pauseSchedulerAndActions);this.pause()},pause:function(){this.scheduler.pauseTarget(this);this.actionManager&&this.actionManager.pauseTarget(this);cc.eventManager.pauseTarget(this)},setAdditionalTransform:function(a){if(void 0===
a)return this._additionalTransformDirty=!1;this._additionalTransform=a;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);this._additionalTransformDirty=!0},getParentToNodeTransform:function(){return this._renderCmd.getParentToNodeTransform()},parentToNodeTransform:function(){return this.getParentToNodeTransform()},getNodeToWorldTransform:function(){for(var a=this.getNodeToParentTransform(),b=this._parent;null!==b;b=b.parent)a=cc.affineTransformConcat(a,b.getNodeToParentTransform());
return a},nodeToWorldTransform:function(){return this.getNodeToWorldTransform()},getWorldToNodeTransform:function(){return cc.affineTransformInvert(this.getNodeToWorldTransform())},worldToNodeTransform:function(){return this.getWorldToNodeTransform()},convertToNodeSpace:function(a){return cc.pointApplyAffineTransform(a,this.getWorldToNodeTransform())},convertToWorldSpace:function(a){a=a||cc.p(0,0);return cc.pointApplyAffineTransform(a,this.getNodeToWorldTransform())},convertToNodeSpaceAR:function(a){return cc.pSub(this.convertToNodeSpace(a),
this._renderCmd.getAnchorPointInPoints())},convertToWorldSpaceAR:function(a){a=a||cc.p(0,0);a=cc.pAdd(a,this._renderCmd.getAnchorPointInPoints());return this.convertToWorldSpace(a)},_convertToWindowSpace:function(a){a=this.convertToWorldSpace(a);return cc.director.convertToUI(a)},convertTouchToNodeSpace:function(a){a=a.getLocation();return this.convertToNodeSpace(a)},convertTouchToNodeSpaceAR:function(a){a=cc.director.convertToGL(a.getLocation());return this.convertToNodeSpaceAR(a)},update:function(a){this._componentContainer&&
!this._componentContainer.isEmpty()&&this._componentContainer.visit(a)},updateTransform:function(){this._arrayMakeObjectsPerformSelector(this._children,cc.Node._stateCallbackType.updateTransform)},retain:function(){},release:function(){},getComponent:function(a){return this._componentContainer?this._componentContainer.getComponent(a):null},addComponent:function(a){this._componentContainer&&this._componentContainer.add(a)},removeComponent:function(a){return this._componentContainer?this._componentContainer.remove(a):
!1},removeAllComponents:function(){this._componentContainer&&this._componentContainer.removeAll()},grid:null,visit:function(a){this._renderCmd.visit(a)},transform:function(a,b){this._renderCmd.transform(a,b)},nodeToParentTransform:function(){return this.getNodeToParentTransform()},getNodeToParentTransform:function(a){var b=this._renderCmd.getNodeToParentTransform();if(a)for(var b={a:b.a,b:b.b,c:b.c,d:b.d,tx:b.tx,ty:b.ty},c=this._parent;null!=c&&c!=a;c=c.getParent())cc.affineTransformConcatIn(b,c.getNodeToParentTransform());
return b},getNodeToParentAffineTransform:function(a){return this.getNodeToParentTransform(a)},getCamera:function(){return null},getGrid:function(){return this.grid},setGrid:function(a){this.grid=a},getShaderProgram:function(){return this._renderCmd.getShaderProgram()},setShaderProgram:function(a){this._renderCmd.setShaderProgram(a)},setShaderProgramByKey:function(a){var b=cc.shaderCache.programForKey(a);b&&this._renderCmd.setShaderProgram(b);cc._renderType===cc.game.RENDER_TYPE_CANVAS&&(a==cc.SHADER_SPRITE_POSITION_TEXTURECOLOR?
this.setColor(cc.color(255,255,255)):a==cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY&&this.setColor(cc.color(150,150,150)))},getGLServerState:function(){return 0},setGLServerState:function(a){},getBoundingBoxToWorld:function(){var a=cc.rect(0,0,this._contentSize.width,this._contentSize.height),b=this.getNodeToWorldTransform(),a=cc.rectApplyAffineTransform(a,b);if(!this._children)return a;for(var c=this._children,d=0;d<c.length;d++){var e=c[d];e&&e._visible&&(e=e._getBoundingBoxToCurrentNode(b))&&(a=
cc.rectUnion(a,e))}return a},_getBoundingBoxToCurrentNode:function(a){var b=cc.rect(0,0,this._contentSize.width,this._contentSize.height);a=void 0===a?this.getNodeToParentTransform():cc.affineTransformConcat(this.getNodeToParentTransform(),a);b=cc.rectApplyAffineTransform(b,a);if(!this._children)return b;for(var c=this._children,d=0;d<c.length;d++){var e=c[d];e&&e._visible&&(e=e._getBoundingBoxToCurrentNode(a))&&(b=cc.rectUnion(b,e))}return b},getOpacity:function(){return this._realOpacity},getDisplayedOpacity:function(){return this._renderCmd.getDisplayedOpacity()},
setOpacity:function(a){this._realOpacity=a;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)},updateDisplayedOpacity:function(a){this._renderCmd._updateDisplayOpacity(a)},isCascadeOpacityEnabled:function(){return this._cascadeOpacityEnabled},setCascadeOpacityEnabled:function(a){this._cascadeOpacityEnabled!==a&&(this._cascadeOpacityEnabled=a,this._renderCmd.setCascadeOpacityEnabledDirty())},getColor:function(){var a=this._realColor;return cc.color(a.r,a.g,a.b,a.a)},getDisplayedColor:function(){return this._renderCmd.getDisplayedColor()},
setColor:function(a){var b=this._realColor;b.r=a.r;b.g=a.g;b.b=a.b;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty)},updateDisplayedColor:function(a){this._renderCmd._updateDisplayColor(a)},isCascadeColorEnabled:function(){return this._cascadeColorEnabled},setCascadeColorEnabled:function(a){this._cascadeColorEnabled!==a&&(this._cascadeColorEnabled=a,this._renderCmd.setCascadeColorEnabledDirty())},setOpacityModifyRGB:function(a){},isOpacityModifyRGB:function(){return!1},_initRendererCmd:function(){this._renderCmd=
cc.renderer.getRenderCmd(this)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.Node.CanvasRenderCmd(this):new cc.Node.WebGLRenderCmd(this)},enumerateChildren:function(a,b){cc.assert(a&&0!=a.length,"Invalid name");cc.assert(null!=b,"Invalid callback function");var c=a.length,d=0,e=c,f=!1;2<c&&"/"===a[0]&&"/"===a[1]&&(f=!0,d=2,e-=2);var g=!1;3<c&&"/"===a[c-3]&&"."===a[c-2]&&"."===a[c-1]&&(g=!0,e-=3);c=a.substr(d,e);g&&(c="[[:alnum:]]+/"+c);f?this.doEnumerateRecursive(this,
c,b):this.doEnumerate(c,b)},doEnumerateRecursive:function(a,b,c){if(!a.doEnumerate(b,c))for(var d=a.getChildren(),e=d.length,f=0;f<e&&(a=d[f],!this.doEnumerateRecursive(a,b,c));f++);},doEnumerate:function(a,b){var c=a.indexOf("/"),d=a,e=!1;-1!==c&&(d=a.substr(0,c),e=!0);for(var c=!1,f,g=this._children,h=g.length,k=0;k<h;k++)if(f=g[k],-1!==f._name.indexOf(d))if(e){if(c=f.doEnumerate(a,b))break}else if(b(f)){c=!0;break}return c}});cc.Node.create=function(){return new cc.Node};
cc.Node._stateCallbackType={onEnter:1,onExit:2,cleanup:3,onEnterTransitionDidFinish:4,updateTransform:5,onExitTransitionDidStart:6,sortAllChildren:7};cc.assert(cc.isFunction(cc._tmp.PrototypeCCNode),cc._LogInfos.MissingFile,"BaseNodesPropertyDefine.js");cc._tmp.PrototypeCCNode();delete cc._tmp.PrototypeCCNode;cc.CustomRenderCmd=function(a,b){this._needDraw=!0;this._target=a;this._callback=b;this.rendering=function(a,b,e){this._callback&&this._callback.call(this._target,a,b,e)};this.needDraw=function(){return this._needDraw}};cc.Node._dirtyFlags={transformDirty:1,visibleDirty:2,colorDirty:4,opacityDirty:8,cacheDirty:16,orderDirty:32,textDirty:64,gradientDirty:128,textureDirty:256,contentDirty:512,COUNT:10,all:1023};
cc.Node.RenderCmd=function(a){this._dirtyFlag=1;this._savedDirtyFlag=!0;this._node=a;this._needDraw=!1;this._anchorPointInPoints=new cc.Point(0,0);this._transform={a:1,b:0,c:0,d:1,tx:0,ty:0};this._worldTransform={a:1,b:0,c:0,d:1,tx:0,ty:0};this._inverse={a:1,b:0,c:0,d:1,tx:0,ty:0};this._displayedOpacity=255;this._displayedColor=cc.color(255,255,255,255);this._cascadeOpacityEnabledDirty=this._cascadeColorEnabledDirty=!1;this._curLevel=-1};
cc.Node.RenderCmd.prototype={constructor:cc.Node.RenderCmd,needDraw:function(){return this._needDraw},getAnchorPointInPoints:function(){return cc.p(this._anchorPointInPoints)},getDisplayedColor:function(){var a=this._displayedColor;return cc.color(a.r,a.g,a.b,a.a)},getDisplayedOpacity:function(){return this._displayedOpacity},setCascadeColorEnabledDirty:function(){this._cascadeColorEnabledDirty=!0;this.setDirtyFlag(cc.Node._dirtyFlags.colorDirty)},setCascadeOpacityEnabledDirty:function(){this._cascadeOpacityEnabledDirty=
!0;this.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)},getParentToNodeTransform:function(){this._dirtyFlag&cc.Node._dirtyFlags.transformDirty&&(this._inverse=cc.affineTransformInvert(this.getNodeToParentTransform()));return this._inverse},detachFromParent:function(a){for(var b=this._node._children,c,d=0,e=b.length;d<e;d++)(c=b[d])&&c._renderCmd&&c._renderCmd.detachFromParent(a)},_updateAnchorPointInPoint:function(){var a=this._anchorPointInPoints,b=this._node._contentSize,c=this._node._anchorPoint;
a.x=b.width*c.x;a.y=b.height*c.y;this.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},setDirtyFlag:function(a){0===this._dirtyFlag&&0!==a&&cc.renderer.pushDirtyNode(this);this._dirtyFlag|=a},getParentRenderCmd:function(){return this._node&&this._node._parent&&this._node._parent._renderCmd?this._node._parent._renderCmd:null},transform:function(a,b){var c=this._node,d=a?a._worldTransform:null,e=this._transform,f=this._worldTransform;if(c._usingNormalizedPosition&&c._parent){var g=c._parent._contentSize;
c._position.x=c._normalizedPosition.x*g.width;c._position.y=c._normalizedPosition.y*g.height;c._normalizedPositionDirty=!1}var h=c._rotationX||c._rotationY,k=c._skewX||c._skewY,m=c._scaleX,n=c._scaleY,g=this._anchorPointInPoints.x,p=this._anchorPointInPoints.y,r=1,s=0,u=0,t=1;if(h||k){e.tx=c._position.x;e.ty=c._position.y;h&&(r=0.017453292519943295*c._rotationX,u=Math.sin(r),t=Math.cos(r),c._rotationY===c._rotationX?(r=t,s=-u):(s=0.017453292519943295*c._rotationY,r=Math.cos(s),s=-Math.sin(s)));e.a=
r*=m;e.b=s*=m;e.c=u*=n;e.d=t*=n;k&&(k=Math.tan(c._skewX*Math.PI/180),m=Math.tan(c._skewY*Math.PI/180),Infinity===k&&(k=99999999),Infinity===m&&(m=99999999),e.a=r+u*m,e.b=s+t*m,e.c=u+r*k,e.d=t+s*k);if(g||p)e.tx-=e.a*g+e.c*p,e.ty-=e.b*g+e.d*p,c._ignoreAnchorPointForPosition&&(e.tx+=g,e.ty+=p);d?(f.a=e.a*d.a+e.b*d.c,f.b=e.a*d.b+e.b*d.d,f.c=e.c*d.a+e.d*d.c,f.d=e.c*d.b+e.d*d.d,f.tx=d.a*e.tx+d.c*e.ty+d.tx,f.ty=d.d*e.ty+d.ty+d.b*e.tx):(f.a=e.a,f.b=e.b,f.c=e.c,f.d=e.d,f.tx=e.tx,f.ty=e.ty)}else{e.a=m;e.b=
0;e.c=0;e.d=n;e.tx=c._position.x;e.ty=c._position.y;if(g||p)e.tx-=e.a*g,e.ty-=e.d*p,c._ignoreAnchorPointForPosition&&(e.tx+=g,e.ty+=p);d?(f.a=e.a*d.a+e.b*d.c,f.b=e.a*d.b+e.b*d.d,f.c=e.c*d.a+e.d*d.c,f.d=e.c*d.b+e.d*d.d,f.tx=e.tx*d.a+e.ty*d.c+d.tx,f.ty=e.tx*d.b+e.ty*d.d+d.ty):(f.a=e.a,f.b=e.b,f.c=e.c,f.d=e.d,f.tx=e.tx,f.ty=e.ty)}c._additionalTransformDirty&&(this._transform=cc.affineTransformConcat(e,c._additionalTransform));this._updateCurrentRegions&&this._updateCurrentRegions();this._notifyRegionStatus&&
this._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.DirtyDouble);if(b){c=this._node._children;if(!c||0===c.length)return;d=0;for(e=c.length;d<e;d++)c[d].isVisible()&&c[d]._renderCmd.transform(this,b)}this._cacheDirty=!0},getNodeToParentTransform:function(){this._dirtyFlag&cc.Node._dirtyFlags.transformDirty&&this.transform();return this._transform},visit:function(a){var b=this._node,c=cc.renderer;if(b._visible){if(a=a||this.getParentRenderCmd())this._curLevel=a._curLevel+1;isNaN(b._customZ)&&
(b._vertexZ=c.assignedZ,c.assignedZ+=c.assignedZStep);this._syncStatus(a);this.visitChildren()}},_updateDisplayColor:function(a){var b=this._node,c=this._displayedColor,d=b._realColor,e;this._notifyRegionStatus&&this._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.Dirty);if(this._cascadeColorEnabledDirty&&!b._cascadeColorEnabled){c.r=d.r;c.g=d.g;c.b=d.b;c=new cc.Color(255,255,255,255);a=b._children;b=0;for(d=a.length;b<d;b++)(e=a[b])&&e._renderCmd&&e._renderCmd._updateDisplayColor(c);this._cascadeColorEnabledDirty=
!1}else if(void 0===a&&(a=(a=b._parent)&&a._cascadeColorEnabled?a.getDisplayedColor():cc.color.WHITE),c.r=0|d.r*a.r/255,c.g=0|d.g*a.g/255,c.b=0|d.b*a.b/255,b._cascadeColorEnabled)for(a=b._children,b=0,d=a.length;b<d;b++)(e=a[b])&&e._renderCmd&&(e._renderCmd._updateDisplayColor(c),e._renderCmd._updateColor());this._dirtyFlag^=this._dirtyFlag&cc.Node._dirtyFlags.colorDirty},_updateDisplayOpacity:function(a){var b=this._node,c,d;this._notifyRegionStatus&&this._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.Dirty);
if(this._cascadeOpacityEnabledDirty&&!b._cascadeOpacityEnabled){this._displayedOpacity=b._realOpacity;c=b._children;a=0;for(b=c.length;a<b;a++)(d=c[a])&&d._renderCmd&&d._renderCmd._updateDisplayOpacity(255);this._cascadeOpacityEnabledDirty=!1}else if(void 0===a&&(c=b._parent,a=255,c&&c._cascadeOpacityEnabled&&(a=c.getDisplayedOpacity())),this._displayedOpacity=b._realOpacity*a/255,b._cascadeOpacityEnabled)for(c=b._children,a=0,b=c.length;a<b;a++)(d=c[a])&&d._renderCmd&&(d._renderCmd._updateDisplayOpacity(this._displayedOpacity),
d._renderCmd._updateColor());this._dirtyFlag^=this._dirtyFlag&cc.Node._dirtyFlags.opacityDirty},_syncDisplayColor:function(a){var b=this._node,c=this._displayedColor,d=b._realColor;void 0===a&&(a=(a=b._parent)&&a._cascadeColorEnabled?a.getDisplayedColor():cc.color.WHITE);c.r=0|d.r*a.r/255;c.g=0|d.g*a.g/255;c.b=0|d.b*a.b/255},_syncDisplayOpacity:function(a){var b=this._node;if(void 0===a){var c=b._parent;a=255;c&&c._cascadeOpacityEnabled&&(a=c.getDisplayedOpacity())}this._displayedOpacity=b._realOpacity*
a/255},_updateColor:function(){},updateStatus:function(){var a=cc.Node._dirtyFlags,b=this._dirtyFlag,c=b&a.colorDirty,d=b&a.opacityDirty;this._savedDirtyFlag=this._savedDirtyFlag||b;c&&this._updateDisplayColor();d&&this._updateDisplayOpacity();(c||d)&&this._updateColor();b&a.transformDirty&&(this.transform(this.getParentRenderCmd(),!0),this._dirtyFlag^=this._dirtyFlag&a.transformDirty);b&a.orderDirty&&(this._dirtyFlag^=this._dirtyFlag&a.orderDirty)},_syncStatus:function(a){var b=cc.Node._dirtyFlags,
c=this._dirtyFlag,d=null;a?(d=a._node,this._savedDirtyFlag=this._savedDirtyFlag||a._savedDirtyFlag||c):this._savedDirtyFlag=this._savedDirtyFlag||c;d&&d._cascadeColorEnabled&&a._dirtyFlag&b.colorDirty&&(c|=b.colorDirty);d&&d._cascadeOpacityEnabled&&a._dirtyFlag&b.opacityDirty&&(c|=b.opacityDirty);a&&a._dirtyFlag&b.transformDirty&&(c|=b.transformDirty);var d=c&b.colorDirty,e=c&b.opacityDirty;this._dirtyFlag=c;d&&this._syncDisplayColor();e&&this._syncDisplayOpacity();(d||e)&&this._updateColor();c&b.transformDirty&&
this.transform(a);c&b.orderDirty&&(this._dirtyFlag^=this._dirtyFlag&b.orderDirty)},visitChildren:function(){var a=cc.renderer,b=this._node,c=b._children,d,e=c.length;if(0<e){b.sortAllChildren();for(b=0;b<e;b++)if(d=c[b],0>d._localZOrder)d._renderCmd.visit(this);else break;for(a.pushRenderCommand(this);b<e;b++)c[b]._renderCmd.visit(this)}else a.pushRenderCommand(this);this._dirtyFlag=0}};cc.Node.RenderCmd.prototype.originVisit=cc.Node.RenderCmd.prototype.visit;
cc.Node.RenderCmd.prototype.originTransform=cc.Node.RenderCmd.prototype.transform;
(function(){cc.Node.CanvasRenderCmd=function(a){cc.Node.RenderCmd.call(this,a);this._cachedParent=null;this._cacheDirty=!1;this._currentRegion=new cc.Region;this._oldRegion=new cc.Region;this._regionFlag=0;this._canUseDirtyRegion=!1};cc.Node.CanvasRenderCmd.RegionStatus={NotDirty:0,Dirty:1,DirtyDouble:2};var a=cc.Node.CanvasRenderCmd.prototype=Object.create(cc.Node.RenderCmd.prototype);a.constructor=cc.Node.CanvasRenderCmd;a._notifyRegionStatus=function(a){this._needDraw&&this._regionFlag<a&&(this._regionFlag=
a)};var b=new cc.Rect;a.getLocalBB=function(){var a=this._node;b.x=b.y=0;b.width=a._contentSize.width;b.height=a._contentSize.height;return b};a._updateCurrentRegions=function(){var a=this._currentRegion;this._currentRegion=this._oldRegion;this._oldRegion=a;cc.Node.CanvasRenderCmd.RegionStatus.DirtyDouble!==this._regionFlag||this._currentRegion.isEmpty()||this._oldRegion.union(this._currentRegion);this._currentRegion.updateRegion(this.getLocalBB(),this._worldTransform)};a.setDirtyFlag=function(a,
b){cc.Node.RenderCmd.prototype.setDirtyFlag.call(this,a,b);this._setCacheDirty(b);this._cachedParent&&this._cachedParent.setDirtyFlag(a,!0)};a._setCacheDirty=function(){if(!1===this._cacheDirty){this._cacheDirty=!0;var a=this._cachedParent;a&&a!==this&&a._setNodeDirtyForCache&&a._setNodeDirtyForCache()}};a._setCachedParent=function(a){if(this._cachedParent!==a){this._cachedParent=a;for(var b=this._node._children,e=0,f=b.length;e<f;e++)b[e]._renderCmd._setCachedParent(a)}};a.detachFromParent=function(a){this._cachedParent=
null;for(var b=this._node._children,e,f=0,g=b.length;f<g;f++)(e=b[f])&&e._renderCmd&&e._renderCmd.detachFromParent(a)};a.setShaderProgram=function(a){};a.getShaderProgram=function(){return null};cc.Node.CanvasRenderCmd._getCompositeOperationByBlendFunc=function(a){return a?a.src===cc.SRC_ALPHA&&a.dst===cc.ONE||a.src===cc.ONE&&a.dst===cc.ONE?"lighter":a.src===cc.ZERO&&a.dst===cc.SRC_ALPHA?"destination-in":a.src===cc.ZERO&&a.dst===cc.ONE_MINUS_SRC_ALPHA?"destination-out":"source-over":"source-over"}})();cc.AtlasNode=cc.Node.extend({textureAtlas:null,quadsToDraw:0,_itemsPerRow:0,_itemsPerColumn:0,_itemWidth:0,_itemHeight:0,_opacityModifyRGB:!1,_blendFunc:null,_ignoreContentScaleFactor:!1,_className:"AtlasNode",_texture:null,_textureForCanvas:null,ctor:function(a,b,c,d){cc.Node.prototype.ctor.call(this);this._blendFunc={src:cc.BLEND_SRC,dst:cc.BLEND_DST};this._ignoreContentScaleFactor=!1;void 0!==d&&this.initWithTileFile(a,b,c,d)},_createRenderCmd:function(){this._renderCmd=cc._renderType===cc.game.RENDER_TYPE_CANVAS?
new cc.AtlasNode.CanvasRenderCmd(this):new cc.AtlasNode.WebGLRenderCmd(this)},updateAtlasValues:function(){cc.log(cc._LogInfos.AtlasNode_updateAtlasValues)},getColor:function(){return this._opacityModifyRGB?this._renderCmd._colorUnmodified:cc.Node.prototype.getColor.call(this)},setOpacityModifyRGB:function(a){var b=this.color;this._opacityModifyRGB=a;this.setColor(b)},isOpacityModifyRGB:function(){return this._opacityModifyRGB},getBlendFunc:function(){return this._blendFunc},setBlendFunc:function(a,
b){this._blendFunc=void 0===b?a:{src:a,dst:b}},setTextureAtlas:function(a){this.textureAtlas=a},getTextureAtlas:function(){return this.textureAtlas},getQuadsToDraw:function(){return this.quadsToDraw},setQuadsToDraw:function(a){this.quadsToDraw=a},initWithTileFile:function(a,b,c,d){if(!a)throw Error("cc.AtlasNode.initWithTileFile(): title should not be null");a=cc.textureCache.addImage(a);return this.initWithTexture(a,b,c,d)},initWithTexture:function(a,b,c,d){return this._renderCmd.initWithTexture(a,
b,c,d)},setColor:function(a){this._renderCmd.setColor(a)},setOpacity:function(a){this._renderCmd.setOpacity(a)},getTexture:function(){return this._texture},setTexture:function(a){this._texture=a},_setIgnoreContentScaleFactor:function(a){this._ignoreContentScaleFactor=a}});_p=cc.AtlasNode.prototype;cc.defineGetterSetter(_p,"opacity",_p.getOpacity,_p.setOpacity);cc.defineGetterSetter(_p,"color",_p.getColor,_p.setColor);cc.defineGetterSetter(_p,"texture",_p.getTexture,_p.setTexture);cc.EventHelper.prototype.apply(_p);
cc.AtlasNode.create=function(a,b,c,d){return new cc.AtlasNode(a,b,c,d)};(function(){cc.AtlasNode.CanvasRenderCmd=function(a){cc.Node.CanvasRenderCmd.call(this,a);this._needDraw=!1;this._colorUnmodified=cc.color.WHITE;this._textureToRender=null};var a=cc.AtlasNode.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);a.constructor=cc.AtlasNode.CanvasRenderCmd;a.initWithTexture=function(a,c,d,e){var f=this._node;f._itemWidth=c;f._itemHeight=d;f._opacityModifyRGB=!0;f._texture=a;if(!f._texture)return cc.log(cc._LogInfos.AtlasNode__initWithTexture),!1;
this._textureToRender=a;this._calculateMaxItems();f.quadsToDraw=e;return!0};a.setColor=function(a){var c=this._node._realColor;if(c.r!==a.r||c.g!==a.g||c.b!==a.b)this._colorUnmodified=a,this._changeTextureColor()};a._changeTextureColor=function(){var a=this._node._texture,c=this._colorUnmodified,d=a.getHtmlElementObj(),d=cc.rect(0,0,d.width,d.height);a===this._textureToRender?this._textureToRender=a._generateColorTexture(c.r,c.g,c.b,d):a._generateColorTexture(c.r,c.g,c.b,d,this._textureToRender.getHtmlElementObj())};
a.setOpacity=function(a){cc.Node.prototype.setOpacity.call(this._node,a)};a._calculateMaxItems=function(){var a=this._node,c=a._texture.getContentSize();a._itemsPerColumn=0|c.height/a._itemHeight;a._itemsPerRow=0|c.width/a._itemWidth}})();cc._tmp.PrototypeTexture2D=function(){var a=cc.Texture2D;a.PVRImagesHavePremultipliedAlpha=function(a){cc.PVRHaveAlphaPremultiplied_=a};a.PIXEL_FORMAT_RGBA8888=2;a.PIXEL_FORMAT_RGB888=3;a.PIXEL_FORMAT_RGB565=4;a.PIXEL_FORMAT_A8=5;a.PIXEL_FORMAT_I8=6;a.PIXEL_FORMAT_AI88=7;a.PIXEL_FORMAT_RGBA4444=8;a.PIXEL_FORMAT_RGB5A1=7;a.PIXEL_FORMAT_PVRTC4=9;a.PIXEL_FORMAT_PVRTC2=10;a.PIXEL_FORMAT_DEFAULT=a.PIXEL_FORMAT_RGBA8888;a.defaultPixelFormat=a.PIXEL_FORMAT_DEFAULT;var b=cc.Texture2D._M={};b[a.PIXEL_FORMAT_RGBA8888]=
"RGBA8888";b[a.PIXEL_FORMAT_RGB888]="RGB888";b[a.PIXEL_FORMAT_RGB565]="RGB565";b[a.PIXEL_FORMAT_A8]="A8";b[a.PIXEL_FORMAT_I8]="I8";b[a.PIXEL_FORMAT_AI88]="AI88";b[a.PIXEL_FORMAT_RGBA4444]="RGBA4444";b[a.PIXEL_FORMAT_RGB5A1]="RGB5A1";b[a.PIXEL_FORMAT_PVRTC4]="PVRTC4";b[a.PIXEL_FORMAT_PVRTC2]="PVRTC2";b=cc.Texture2D._B={};b[a.PIXEL_FORMAT_RGBA8888]=32;b[a.PIXEL_FORMAT_RGB888]=24;b[a.PIXEL_FORMAT_RGB565]=16;b[a.PIXEL_FORMAT_A8]=8;b[a.PIXEL_FORMAT_I8]=8;b[a.PIXEL_FORMAT_AI88]=16;b[a.PIXEL_FORMAT_RGBA4444]=
16;b[a.PIXEL_FORMAT_RGB5A1]=16;b[a.PIXEL_FORMAT_PVRTC4]=4;b[a.PIXEL_FORMAT_PVRTC2]=3;a=cc.Texture2D.prototype;cc.defineGetterSetter(a,"name",a.getName);cc.defineGetterSetter(a,"pixelFormat",a.getPixelFormat);cc.defineGetterSetter(a,"pixelsWidth",a.getPixelsWide);cc.defineGetterSetter(a,"pixelsHeight",a.getPixelsHigh);cc.defineGetterSetter(a,"width",a._getWidth);cc.defineGetterSetter(a,"height",a._getHeight)};
cc._tmp.PrototypeTextureAtlas=function(){var a=cc.TextureAtlas.prototype;cc.defineGetterSetter(a,"totalQuads",a.getTotalQuads);cc.defineGetterSetter(a,"capacity",a.getCapacity);cc.defineGetterSetter(a,"quads",a.getQuads,a.setQuads)};cc.ALIGN_CENTER=51;cc.ALIGN_TOP=19;cc.ALIGN_TOP_RIGHT=18;cc.ALIGN_RIGHT=50;cc.ALIGN_BOTTOM_RIGHT=34;cc.ALIGN_BOTTOM=35;cc.ALIGN_BOTTOM_LEFT=33;cc.ALIGN_LEFT=49;cc.ALIGN_TOP_LEFT=17;cc.PVRHaveAlphaPremultiplied_=!1;
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,function(){if(cc._renderType===cc.game.RENDER_TYPE_CANVAS){var a={_contentSize:null,_textureLoaded:!1,_htmlElementObj:null,url:null,_pattern:null,retainCount:0,ctor:function(){this._contentSize=cc.size(0,0);this._textureLoaded=!1;this._htmlElementObj=null;this._pattern=""},getPixelsWide:function(){return this._contentSize.width},getPixelsHigh:function(){return this._contentSize.height},getContentSize:function(){var a=cc.contentScaleFactor();return cc.size(this._contentSize.width/
a,this._contentSize.height/a)},_getWidth:function(){return this._contentSize.width/cc.contentScaleFactor()},_getHeight:function(){return this._contentSize.height/cc.contentScaleFactor()},getContentSizeInPixels:function(){return this._contentSize},initWithElement:function(a){a&&(this._htmlElementObj=a,this._contentSize.width=a.width,this._contentSize.height=a.height,this._textureLoaded=!0)},getHtmlElementObj:function(){return this._htmlElementObj},isLoaded:function(){return this._textureLoaded},handleLoadedTexture:function(){if(!this._textureLoaded){if(!this._htmlElementObj){var a=
cc.loader.getRes(this.url);if(!a)return;this.initWithElement(a)}a=this._htmlElementObj;this._contentSize.width=a.width;this._contentSize.height=a.height;this.dispatchEvent("load")}},description:function(){return"\x3ccc.Texture2D | width \x3d "+this._contentSize.width+" height "+this._contentSize.height+"\x3e"},initWithData:function(a,c,d,e,f){return!1},initWithImage:function(a){return!1},initWithString:function(a,c,d,e,f,g){return!1},releaseTexture:function(){cc.loader.release(this.url)},getName:function(){return null},
getMaxS:function(){return 1},setMaxS:function(a){},getMaxT:function(){return 1},setMaxT:function(a){},getPixelFormat:function(){return null},getShaderProgram:function(){return null},setShaderProgram:function(a){},hasPremultipliedAlpha:function(){return!1},hasMipmaps:function(){return!1},releaseData:function(a){},keepData:function(a,c){return a},drawAtPoint:function(a){},drawInRect:function(a){},initWithETCFile:function(a){cc.log(cc._LogInfos.Texture2D_initWithETCFile);return!1},initWithPVRFile:function(a){cc.log(cc._LogInfos.Texture2D_initWithPVRFile);
return!1},initWithPVRTCData:function(a,c,d,e,f,g){cc.log(cc._LogInfos.Texture2D_initWithPVRTCData);return!1},setTexParameters:function(a,c,d,e){void 0!==c&&(a={minFilter:a,magFilter:c,wrapS:d,wrapT:e});this._pattern=a.wrapS===cc.REPEAT&&a.wrapT===cc.REPEAT?"repeat":a.wrapS===cc.REPEAT?"repeat-x":a.wrapT===cc.REPEAT?"repeat-y":""},setAntiAliasTexParameters:function(){},setAliasTexParameters:function(){},generateMipmap:function(){},stringForFormat:function(){return""},bitsPerPixelForFormat:function(a){return-1},
addLoadedEventListener:function(a,c){this.addEventListener("load",a,c)},removeLoadedEventListener:function(a){this.removeEventTarget("load",a)},_generateColorTexture:function(){},_generateTextureCacheForColor:function(){if(this.channelCache)return this.channelCache;var a=[document.createElement("canvas"),document.createElement("canvas"),document.createElement("canvas"),document.createElement("canvas")],c=this._htmlElementObj,d=c.width,e=c.height;a[0].width=d;a[0].height=e;a[1].width=d;a[1].height=
e;a[2].width=d;a[2].height=e;a[3].width=d;a[3].height=e;var f=a[3].getContext("2d");f.drawImage(c,0,0);for(var f=f.getImageData(0,0,d,e).data,g,h=0;4>h;h++){g=a[h].getContext("2d");for(var k=g.getImageData(0,0,d,e),m=k.data,n=0;n<f.length;n+=4)m[n]=0===h?f[n]:0,m[n+1]=1===h?f[n+1]:0,m[n+2]=2===h?f[n+2]:0,m[n+3]=f[n+3];g.putImageData(k,0,0)}c.onload=null;return this.channelCache=a},_grayElementObj:null,_backupElement:null,_isGray:!1,_switchToGray:function(a){this._textureLoaded&&this._isGray!==a&&
((this._isGray=a)?(this._backupElement=this._htmlElementObj,this._grayElementObj||(this._grayElementObj=cc.Texture2D._generateGrayTexture(this._htmlElementObj)),this._htmlElementObj=this._grayElementObj):null!==this._backupElement&&(this._htmlElementObj=this._backupElement))}};a._generateColorTexture=cc.sys._supportCanvasNewBlendModes?function(a,c,d,e,f){var g=!1;f?g=!0:f=document.createElement("canvas");var h=this._htmlElementObj;e||(e=cc.rect(0,0,h.width,h.height));f.width=e.width;f.height=e.height;
var k=f.getContext("2d");k.globalCompositeOperation="source-over";k.fillStyle="rgb("+(a|0)+","+(c|0)+","+(d|0)+")";k.fillRect(0,0,e.width,e.height);k.globalCompositeOperation="multiply";k.drawImage(h,e.x,e.y,e.width,e.height,0,0,e.width,e.height);k.globalCompositeOperation="destination-atop";k.drawImage(h,e.x,e.y,e.width,e.height,0,0,e.width,e.height);if(g)return f;a=new cc.Texture2D;a.initWithElement(f);a.handleLoadedTexture();return a}:function(a,c,d,e,f){var g=!1;f?g=!0:f=document.createElement("canvas");
var h=this._htmlElementObj;e||(e=cc.rect(0,0,h.width,h.height));var k,m,h=e.x;k=e.y;m=e.width;e=e.height;if(m&&e){f.width=m;f.height=e;var n=f.getContext("2d"),p=cc.textureCache.getTextureColors(this);n.globalCompositeOperation="lighter";n.drawImage(p[3],h,k,m,e,0,0,m,e);0<a&&(n.globalAlpha=a/255,n.drawImage(p[0],h,k,m,e,0,0,m,e));0<c&&(n.globalAlpha=c/255,n.drawImage(p[1],h,k,m,e,0,0,m,e));0<d&&(n.globalAlpha=d/255,n.drawImage(p[2],h,k,m,e,0,0,m,e));if(g)return f;a=new cc.Texture2D;a.initWithElement(f);
a.handleLoadedTexture();return a}};cc.Texture2D=cc.Class.extend(a);cc.Texture2D._generateGrayTexture=function(a,c,d){if(null===a)return null;d=d||document.createElement("canvas");c=c||cc.rect(0,0,a.width,a.height);d.width=c.width;d.height=c.height;var e=d.getContext("2d");e.drawImage(a,c.x,c.y,c.width,c.height,0,0,c.width,c.height);a=e.getImageData(0,0,c.width,c.height);c=a.data;for(var f=0,g=c.length;f<g;f+=4)c[f]=c[f+1]=c[f+2]=0.34*c[f]+0.5*c[f+1]+0.16*c[f+2];e.putImageData(a,0,0);return d}}else cc._renderType===
cc.game.RENDER_TYPE_WEBGL&&(cc.assert(cc.isFunction(cc._tmp.WebGLTexture2D),cc._LogInfos.MissingFile,"TexturesWebGL.js"),cc._tmp.WebGLTexture2D(),delete cc._tmp.WebGLTexture2D);cc.EventHelper.prototype.apply(cc.Texture2D.prototype);cc.assert(cc.isFunction(cc._tmp.PrototypeTexture2D),cc._LogInfos.MissingFile,"TexturesPropertyDefine.js");cc._tmp.PrototypeTexture2D();delete cc._tmp.PrototypeTexture2D});cc.textureCache={_textures:{},_retainedTextures:{},_textureColorsCache:{},_textureKeySeq:0|1E3*Math.random(),_loadedTexturesBefore:{},_initializingRenderer:function(){var a,b=this._loadedTexturesBefore,c=this._textures;for(a in b){var d=b[a];d.handleLoadedTexture();c[a]=d}this._loadedTexturesBefore={}},addPVRTCImage:function(a){cc.log(cc._LogInfos.textureCache_addPVRTCImage)},addETCImage:function(a){cc.log(cc._LogInfos.textureCache_addETCImage)},description:function(){return"\x3cTextureCache | Number of textures \x3d "+
this._textures.length+"\x3e"},textureForKey:function(a){cc.log(cc._LogInfos.textureCache_textureForKey);return this.getTextureForKey(a)},getTextureForKey:function(a){return this._textures[a]||this._textures[cc.loader._getAliase(a)]},getKeyByTexture:function(a){for(var b in this._textures)if(this._textures[b]===a)return b;return null},_generalTextureKey:function(a){return"_textureKey_"+a},getTextureColors:function(a){var b=a._htmlElementObj,c=this.getKeyByTexture(b);c||(c=b instanceof HTMLImageElement?
b.src:this._generalTextureKey(a.__instanceId));this._textureColorsCache[c]||(this._textureColorsCache[c]=a._generateTextureCacheForColor());return this._textureColorsCache[c]},addPVRImage:function(a){cc.log(cc._LogInfos.textureCache_addPVRImage)},removeAllTextures:function(){var a=this._textures,b;for(b in a)a[b]&&a[b].releaseTexture();this._textures={}},removeTexture:function(a){if(a){var b=this._textures,c;for(c in b)b[c]===a&&(b[c].releaseTexture(),delete b[c])}},removeTextureForKey:function(a){null!=
a&&this._textures[a]&&delete this._textures[a]},removeTextureByName:function(a){null!=a&&(a=this._textures[a])&&a._textureLoaded&&(a.releaseTexture(),a._htmlElementObj=null,a._textureLoaded=!1)},removeUnusedTextures:function(a){a=this._textures;for(var b in a){var c=a[b];0>=c.retainCount&&cc.loader.cache[b]&&!this._retainedTextures[b]&&(console.log("remove unused texture: "+b),c.releaseTexture(),c._htmlElementObj=null,c._textureLoaded=!1)}},setTextureRetain:function(a){this._retainedTextures[a]=!0},
cacheImage:function(a,b){if(b instanceof cc.Texture2D)this._textures[a]=b;else{var c=new cc.Texture2D;c.initWithElement(b);c.handleLoadedTexture();this._textures[a]=c}},addUIImage:function(a,b){cc.assert(a,cc._LogInfos.textureCache_addUIImage_2);if(b&&this._textures[b])return this._textures[b];var c=new cc.Texture2D;c.initWithImage(a);null!=b?this._textures[b]=c:cc.log(cc._LogInfos.textureCache_addUIImage);return c},dumpCachedTextureInfo:function(){var a=0,b=0,c=this._textures,d;for(d in c){var e=
c[d];e._webTextureObj&&(a++,cc.log("cocos2d: '%s' %sx%s %d",d,e.pixelsWidth,e.pixelsHeight,e.retainCount),b+=e.pixelsWidth*e.pixelsHeight*4)}c=this._textureColorsCache;for(d in c){var e=c[d],f;for(f in e){var g=e[f];a++;cc.log(cc._LogInfos.textureCache_dumpCachedTextureInfo_2,d,g.width,g.height);b+=g.width*g.height*4}}cc.log(cc._LogInfos.textureCache_dumpCachedTextureInfo_3,a,b/1024,(b/1048576).toFixed(2))},_clear:function(){this._textures={};this._textureColorsCache={};this._textureKeySeq=0|1E3*
Math.random();this._loadedTexturesBefore={}}};
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,function(){if(cc._renderType===cc.game.RENDER_TYPE_CANVAS){var a=cc.textureCache;a.handleLoadedTexture=function(a){var c=this._textures,d=c[a];d||(d=c[a]=new cc.Texture2D,d.url=a);d.handleLoadedTexture()};a.addImage=function(a,c,d){cc.assert(a,cc._LogInfos.Texture2D_addImage);var e=this._textures,f=e[a]||e[cc.loader._getAliase(a)];if(f)return f.isLoaded()?c&&c.call(d,f):f.addEventListener("load",function(){c&&c.call(d,f)},d),f;f=e[a]=new cc.Texture2D;
f.url=a;var g=cc.loader.getBasePath?cc.loader.getBasePath():cc.loader.resPath,h=a;-1===a.indexOf("http://")&&-1===a.indexOf("https://")&&(h=cc.path.join(g||"",a));cc.loader.loadImg(h,function(f,g){if(f)return c&&c.call(d,f);cc.loader.cache[a]||(cc.loader.cache[a]=g);cc.textureCache.handleLoadedTexture(a);var h=e[a];c&&c.call(d,h)});return f};a.addImageAsync=a.addImage;a=null}else cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(cc.assert(cc.isFunction(cc._tmp.WebGLTextureCache),cc._LogInfos.MissingFile,
"TexturesWebGL.js"),cc._tmp.WebGLTextureCache(),delete cc._tmp.WebGLTextureCache)});cc.TextureAtlas=cc.Class.extend({dirty:!1,texture:null,_indices:null,_buffersVBO:null,_capacity:0,_quads:null,_quadsArrayBuffer:null,_quadsWebBuffer:null,_quadsReader:null,ctor:function(a,b){this._buffersVBO=[];cc.isString(a)?this.initWithFile(a,b):a instanceof cc.Texture2D&&this.initWithTexture(a,b)},getTotalQuads:function(){return this._totalQuads},getCapacity:function(){return this._capacity},getTexture:function(){return this.texture},setTexture:function(a){this.texture=a},setDirty:function(a){this.dirty=
a},isDirty:function(){return this.dirty},getQuads:function(){return this._quads},setQuads:function(a){this._quads=a},_copyQuadsToTextureAtlas:function(a,b){if(a)for(var c=0;c<a.length;c++)this._setQuadToArray(a[c],b+c)},_setQuadToArray:function(a,b){var c=this._quads;c[b]?(c[b].bl=a.bl,c[b].br=a.br,c[b].tl=a.tl,c[b].tr=a.tr):c[b]=new cc.V3F_C4B_T2F_Quad(a.tl,a.bl,a.tr,a.br,this._quadsArrayBuffer,b*cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT)},description:function(){return"\x3ccc.TextureAtlas | totalQuads \x3d"+
this._totalQuads+"\x3e"},_setupIndices:function(){if(0!==this._capacity)for(var a=this._indices,b=this._capacity,c=0;c<b;c++)cc.TEXTURE_ATLAS_USE_TRIANGLE_STRIP?(a[6*c+0]=4*c+0,a[6*c+1]=4*c+0,a[6*c+2]=4*c+2,a[6*c+3]=4*c+1,a[6*c+4]=4*c+3,a[6*c+5]=4*c+3):(a[6*c+0]=4*c+0,a[6*c+1]=4*c+1,a[6*c+2]=4*c+2,a[6*c+3]=4*c+3,a[6*c+4]=4*c+2,a[6*c+5]=4*c+1)},_setupVBO:function(){var a=cc._renderContext;this._buffersVBO[1]=a.createBuffer();this._quadsWebBuffer=a.createBuffer();this._mapBuffers()},_mapBuffers:function(){var a=
cc._renderContext;a.bindBuffer(a.ARRAY_BUFFER,this._quadsWebBuffer);a.bufferData(a.ARRAY_BUFFER,this._quadsArrayBuffer,a.DYNAMIC_DRAW);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this._buffersVBO[1]);a.bufferData(a.ELEMENT_ARRAY_BUFFER,this._indices,a.STATIC_DRAW)},initWithFile:function(a,b){var c=cc.textureCache.addImage(a);if(c)return this.initWithTexture(c,b);cc.log(cc._LogInfos.TextureAtlas_initWithFile,a);return!1},initWithTexture:function(a,b){cc.assert(a,cc._LogInfos.TextureAtlas_initWithTexture);
this._capacity=b|=0;this._totalQuads=0;this.texture=a;this._quads=[];this._indices=new Uint16Array(6*b);var c=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT;this._quadsArrayBuffer=new ArrayBuffer(c*b);this._quadsReader=new Uint8Array(this._quadsArrayBuffer);if((!this._quads||!this._indices)&&0<b)return!1;for(var d=this._quads,e=0;e<b;e++)d[e]=new cc.V3F_C4B_T2F_Quad(null,null,null,null,this._quadsArrayBuffer,e*c);this._setupIndices();this._setupVBO();return this.dirty=!0},updateQuad:function(a,b){cc.assert(a,
cc._LogInfos.TextureAtlas_updateQuad);cc.assert(0<=b&&b<this._capacity,cc._LogInfos.TextureAtlas_updateQuad_2);this._totalQuads=Math.max(b+1,this._totalQuads);this._setQuadToArray(a,b);this.dirty=!0},insertQuad:function(a,b){cc.assert(b<this._capacity,cc._LogInfos.TextureAtlas_insertQuad_2);this._totalQuads++;if(this._totalQuads>this._capacity)cc.log(cc._LogInfos.TextureAtlas_insertQuad);else{var c=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,d=b*c,e=(this._totalQuads-1-b)*c;this._quads[this._totalQuads-
1]=new cc.V3F_C4B_T2F_Quad(null,null,null,null,this._quadsArrayBuffer,(this._totalQuads-1)*c);this._quadsReader.set(this._quadsReader.subarray(d,d+e),d+c);this._setQuadToArray(a,b);this.dirty=!0}},insertQuads:function(a,b,c){c=c||a.length;cc.assert(b+c<=this._capacity,cc._LogInfos.TextureAtlas_insertQuads);var d=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT;this._totalQuads+=c;if(this._totalQuads>this._capacity)cc.log(cc._LogInfos.TextureAtlas_insertQuad);else{var e=b*d,f=(this._totalQuads-1-b-c)*d,g=this._totalQuads-
1-c,h;for(h=0;h<c;h++)this._quads[g+h]=new cc.V3F_C4B_T2F_Quad(null,null,null,null,this._quadsArrayBuffer,(this._totalQuads-1)*d);this._quadsReader.set(this._quadsReader.subarray(e,e+f),e+d*c);for(h=0;h<c;h++)this._setQuadToArray(a[h],b+h);this.dirty=!0}},insertQuadFromIndex:function(a,b){if(a!==b){cc.assert(0<=b||b<this._totalQuads,cc._LogInfos.TextureAtlas_insertQuadFromIndex);cc.assert(0<=a||a<this._totalQuads,cc._LogInfos.TextureAtlas_insertQuadFromIndex_2);var c=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,
d=this._quadsReader,e=d.subarray(a*c,c),f;a>b?(f=b*c,d.set(d.subarray(f,f+(a-b)*c),f+c),d.set(e,f)):(f=(a+1)*c,d.set(d.subarray(f,f+(b-a)*c),f-c),d.set(e,b*c));this.dirty=!0}},removeQuadAtIndex:function(a){cc.assert(a<this._totalQuads,cc._LogInfos.TextureAtlas_removeQuadAtIndex);var b=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT;this._totalQuads--;this._quads.length=this._totalQuads;if(a!==this._totalQuads){var c=(a+1)*b;this._quadsReader.set(this._quadsReader.subarray(c,c+(this._totalQuads-a)*b),c-b)}this.dirty=
!0},removeQuadsAtIndex:function(a,b){cc.assert(a+b<=this._totalQuads,cc._LogInfos.TextureAtlas_removeQuadsAtIndex);this._totalQuads-=b;if(a!==this._totalQuads){var c=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,d=(a+b)*c,e=a*c;this._quadsReader.set(this._quadsReader.subarray(d,d+(this._totalQuads-a)*c),e)}this.dirty=!0},removeAllQuads:function(){this._totalQuads=this._quads.length=0},_setDirty:function(a){this.dirty=a},resizeCapacity:function(a){if(a===this._capacity)return!0;var b=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,
c=this._capacity;this._totalQuads=Math.min(this._totalQuads,a);var d=this._capacity=0|a,e=this._totalQuads;if(null===this._quads)for(this._quads=[],this._quadsArrayBuffer=new ArrayBuffer(b*d),this._quadsReader=new Uint8Array(this._quadsArrayBuffer),a=0;a<d;a++)this._quads=new cc.V3F_C4B_T2F_Quad(null,null,null,null,this._quadsArrayBuffer,a*b);else{var f,g,h=this._quads;if(d>c){f=[];g=new ArrayBuffer(b*d);for(a=0;a<e;a++)f[a]=new cc.V3F_C4B_T2F_Quad(h[a].tl,h[a].bl,h[a].tr,h[a].br,g,a*b);for(;a<d;a++)f[a]=
new cc.V3F_C4B_T2F_Quad(null,null,null,null,g,a*b)}else for(e=Math.max(e,d),f=[],g=new ArrayBuffer(b*d),a=0;a<e;a++)f[a]=new cc.V3F_C4B_T2F_Quad(h[a].tl,h[a].bl,h[a].tr,h[a].br,g,a*b);this._quadsReader=new Uint8Array(g);this._quads=f;this._quadsArrayBuffer=g}null===this._indices?this._indices=new Uint16Array(6*d):d>c?(b=new Uint16Array(6*d),b.set(this._indices,0),this._indices=b):this._indices=this._indices.subarray(0,6*d);this._setupIndices();this._mapBuffers();return this.dirty=!0},increaseTotalQuadsWith:function(a){this._totalQuads+=
a},moveQuadsFromIndex:function(a,b,c){if(void 0===c){if(c=b,b=this._totalQuads-a,cc.assert(c+(this._totalQuads-a)<=this._capacity,cc._LogInfos.TextureAtlas_moveQuadsFromIndex),0===b)return}else if(cc.assert(c+b<=this._totalQuads,cc._LogInfos.TextureAtlas_moveQuadsFromIndex_2),cc.assert(a<this._totalQuads,cc._LogInfos.TextureAtlas_moveQuadsFromIndex_3),a===c)return;var d=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,e=a*d,f=b*d,g=this._quadsReader,h=g.subarray(e,e+f),k=c*d;c<a?(b=c*d,g.set(g.subarray(b,b+
(a-c)*d),b+f)):(b=(a+b)*d,g.set(g.subarray(b,b+(c-a)*d),e));g.set(h,k);this.dirty=!0},fillWithEmptyQuadsFromIndex:function(a,b){for(var c=b*cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,d=new Uint8Array(this._quadsArrayBuffer,a*cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,c),e=0;e<c;e++)d[e]=0},drawQuads:function(){this.drawNumberOfQuads(this._totalQuads,0)},_releaseBuffer:function(){var a=cc._renderContext;this._buffersVBO&&this._buffersVBO[1]&&a.deleteBuffer(this._buffersVBO[1]);this._quadsWebBuffer&&a.deleteBuffer(this._quadsWebBuffer)}});
_p=cc.TextureAtlas.prototype;cc.defineGetterSetter(_p,"totalQuads",_p.getTotalQuads);cc.defineGetterSetter(_p,"capacity",_p.getCapacity);cc.defineGetterSetter(_p,"quads",_p.getQuads,_p.setQuads);cc.TextureAtlas.create=function(a,b){return new cc.TextureAtlas(a,b)};cc.TextureAtlas.createWithTexture=cc.TextureAtlas.create;
cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,function(){cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(cc.assert(cc.isFunction(cc._tmp.WebGLTextureAtlas),cc._LogInfos.MissingFile,"TexturesWebGL.js"),cc._tmp.WebGLTextureAtlas(),delete cc._tmp.WebGLTextureAtlas)});cc.assert(cc.isFunction(cc._tmp.PrototypeTextureAtlas),cc._LogInfos.MissingFile,"TexturesPropertyDefine.js");cc._tmp.PrototypeTextureAtlas();delete cc._tmp.PrototypeTextureAtlas;cc.Scene=cc.Node.extend({_className:"Scene",ctor:function(){cc.Node.prototype.ctor.call(this);this._ignoreAnchorPointForPosition=!0;this.setAnchorPoint(0.5,0.5);this.setContentSize(cc.director.getWinSize())}});cc.Scene.create=function(){return new cc.Scene};cc.LoaderScene=cc.Scene.extend({_interval:null,_label:null,_className:"LoaderScene",cb:null,target:null,init:function(){var a=this,b=200,c=a._bgLayer=new cc.LayerColor(cc.color(32,32,32,255));a.addChild(c,0);var d=24,e=-b/2+100;cc._loaderImage&&(cc.loader.loadImg(cc._loaderImage,{isCrossOrigin:!1},function(c,d){b=d.height;a._initStage(d,cc.visibleRect.center)}),d=14,e=-b/2-10);d=a._label=new cc.LabelTTF("Loading... 0%","Arial",d);d.setPosition(cc.pAdd(cc.visibleRect.center,cc.p(0,e)));d.setColor(cc.color(180,
180,180));c.addChild(this._label,10);return!0},_initStage:function(a,b){var c=this._texture2d=new cc.Texture2D;c.initWithElement(a);c.handleLoadedTexture();c=this._logo=new cc.Sprite(c);c.setScale(cc.contentScaleFactor());c.x=b.x;c.y=b.y;this._bgLayer.addChild(c,10)},onEnter:function(){cc.Node.prototype.onEnter.call(this);this.schedule(this._startLoading,0)},onExit:function(){cc.Node.prototype.onExit.call(this);this._label.setString("Loading... 0%")},initWithResources:function(a,b,c){cc.isString(a)&&
(a=[a]);this.resources=a||[];this.cb=b;this.target=c},setPercent:function(a){},_startLoading:function(){var a=this;a.unschedule(a._startLoading);cc.loader.load(a.resources,function(b,c,d){b=Math.min(d/c*100|0,100);a._label.setString("Loading... "+b+"%");a.setPercent(b)},function(){a.cb&&a.cb.call(a.target)})},_updateTransform:function(){this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);this._bgLayer._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);this._label._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty);
this._logo._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)}});cc.LoaderScene.preload=function(a,b,c){var d=cc;d.loaderScene||(d.loaderScene=new cc.LoaderScene,d.loaderScene.init(),cc.eventManager.addCustomListener(cc.Director.EVENT_PROJECTION_CHANGED,function(){d.loaderScene._updateTransform()}));d.loaderScene.initWithResources(a,b,c);cc.director.runScene(d.loaderScene);return d.loaderScene};cc.Layer=cc.Node.extend({_className:"Layer",ctor:function(){cc.Node.prototype.ctor.call(this);this._ignoreAnchorPointForPosition=!0;this.setAnchorPoint(0.5,0.5);this.setContentSize(cc.winSize)},init:function(){this._ignoreAnchorPointForPosition=!0;this.setAnchorPoint(0.5,0.5);this.setContentSize(cc.winSize);this._cascadeOpacityEnabled=this._cascadeColorEnabled=!1;return!0},bake:function(){this._renderCmd.bake()},unbake:function(){this._renderCmd.unbake()},isBaked:function(){return this._renderCmd._isBaked},
addChild:function(a,b,c){cc.Node.prototype.addChild.call(this,a,b,c);this._renderCmd._bakeForAddChild(a)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.Layer.CanvasRenderCmd(this):new cc.Layer.WebGLRenderCmd(this)}});cc.Layer.create=function(){return new cc.Layer};
cc.LayerColor=cc.Layer.extend({_blendFunc:null,_className:"LayerColor",getBlendFunc:function(){return this._blendFunc},changeWidthAndHeight:function(a,b){this.width=a;this.height=b},changeWidth:function(a){this.width=a},changeHeight:function(a){this.height=a},setOpacityModifyRGB:function(a){},isOpacityModifyRGB:function(){return!1},ctor:function(a,b,c){cc.Layer.prototype.ctor.call(this);this._blendFunc=cc.BlendFunc._alphaNonPremultiplied();cc.LayerColor.prototype.init.call(this,a,b,c)},init:function(a,
b,c){var d=cc.director.getWinSize();a=a||cc.color(0,0,0,255);b=void 0===b?d.width:b;c=void 0===c?d.height:c;d=this._realColor;d.r=a.r;d.g=a.g;d.b=a.b;this._realOpacity=a.a;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty|cc.Node._dirtyFlags.opacityDirty);cc.LayerColor.prototype.setContentSize.call(this,b,c);return!0},setBlendFunc:function(a,b){var c=this._blendFunc;void 0===b?(c.src=a.src,c.dst=a.dst):(c.src=a,c.dst=b);this._renderCmd.updateBlendFunc(c)},_createRenderCmd:function(){return cc._renderType===
cc.game.RENDER_TYPE_CANVAS?new cc.LayerColor.CanvasRenderCmd(this):new cc.LayerColor.WebGLRenderCmd(this)}});cc.LayerColor.create=function(a,b,c){return new cc.LayerColor(a,b,c)};(function(){var a=cc.LayerColor.prototype;cc.defineGetterSetter(a,"width",a._getWidth,a._setWidth);cc.defineGetterSetter(a,"height",a._getHeight,a._setHeight)})();
cc.LayerGradient=cc.LayerColor.extend({_endColor:null,_startOpacity:255,_endOpacity:255,_alongVector:null,_compressedInterpolation:!1,_className:"LayerGradient",_colorStops:[],ctor:function(a,b,c,d){cc.LayerColor.prototype.ctor.call(this);this._endColor=cc.color(0,0,0,255);this._alongVector=cc.p(0,-1);this._endOpacity=this._startOpacity=255;d&&d instanceof Array?(this._colorStops=d,d.splice(0,0,{p:0,color:a||cc.color.BLACK}),d.push({p:1,color:b||cc.color.BLACK})):this._colorStops=[{p:0,color:a||cc.color.BLACK},
{p:1,color:b||cc.color.BLACK}];cc.LayerGradient.prototype.init.call(this,a,b,c,d)},init:function(a,b,c,d){a=a||cc.color(0,0,0,255);b=b||cc.color(0,0,0,255);c=c||cc.p(0,-1);d=this._endColor;this._startOpacity=a.a;d.r=b.r;d.g=b.g;d.b=b.b;this._endOpacity=b.a;this._alongVector=c;this._compressedInterpolation=!0;cc.LayerColor.prototype.init.call(this,cc.color(a.r,a.g,a.b,255));this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty|cc.Node._dirtyFlags.opacityDirty|cc.Node._dirtyFlags.gradientDirty);
return!0},setContentSize:function(a,b){cc.LayerColor.prototype.setContentSize.call(this,a,b);this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty)},_setWidth:function(a){cc.LayerColor.prototype._setWidth.call(this,a);this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty)},_setHeight:function(a){cc.LayerColor.prototype._setHeight.call(this,a);this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty)},getStartColor:function(){return cc.color(this._realColor)},setStartColor:function(a){this.color=
a;var b=this._colorStops;b&&0<b.length&&(b=b[0].color,b.r=a.r,b.g=a.g,b.b=a.b)},setEndColor:function(a){var b=this._endColor;b.r=a.r;b.g=a.g;b.b=a.b;(b=this._colorStops)&&0<b.length&&(b=b[b.length-1].color,b.r=a.r,b.g=a.g,b.b=a.b);this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty)},getEndColor:function(){return cc.color(this._endColor)},setStartOpacity:function(a){this._startOpacity=a;var b=this._colorStops;b&&0<b.length&&(b[0].color.a=a);this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)},
getStartOpacity:function(){return this._startOpacity},setEndOpacity:function(a){this._endOpacity=a;var b=this._colorStops;b&&0<b.length&&(b[b.length-1].color.a=a);this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)},getEndOpacity:function(){return this._endOpacity},setVector:function(a){this._alongVector.x=a.x;this._alongVector.y=a.y;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty)},getVector:function(){return cc.p(this._alongVector.x,this._alongVector.y)},isCompressedInterpolation:function(){return this._compressedInterpolation},
setCompressedInterpolation:function(a){this._compressedInterpolation=a;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty)},getColorStops:function(){return this._colorStops},setColorStops:function(a){this._colorStops=a;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty|cc.Node._dirtyFlags.opacityDirty|cc.Node._dirtyFlags.gradientDirty)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.LayerGradient.CanvasRenderCmd(this):new cc.LayerGradient.WebGLRenderCmd(this)}});
cc.LayerGradient.create=function(a,b,c,d){return new cc.LayerGradient(a,b,c,d)};
(function(){var a=cc.LayerGradient.prototype;cc.defineGetterSetter(a,"startColor",a.getStartColor,a.setStartColor);cc.defineGetterSetter(a,"endColor",a.getEndColor,a.setEndColor);cc.defineGetterSetter(a,"startOpacity",a.getStartOpacity,a.setStartOpacity);cc.defineGetterSetter(a,"endOpacity",a.getEndOpacity,a.setEndOpacity);cc.defineGetterSetter(a,"vector",a.getVector,a.setVector);cc.defineGetterSetter(a,"colorStops",a.getColorStops,a.setColorStops)})();
cc.LayerMultiplex=cc.Layer.extend({_enabledLayer:0,_layers:null,_className:"LayerMultiplex",ctor:function(a){cc.Layer.prototype.ctor.call(this);a instanceof Array?cc.LayerMultiplex.prototype.initWithLayers.call(this,a):cc.LayerMultiplex.prototype.initWithLayers.call(this,Array.prototype.slice.call(arguments))},initWithLayers:function(a){0<a.length&&null==a[a.length-1]&&cc.log(cc._LogInfos.LayerMultiplex_initWithLayers);this._layers=a;this._enabledLayer=0;this.addChild(this._layers[this._enabledLayer]);
return!0},switchTo:function(a){a>=this._layers.length?cc.log(cc._LogInfos.LayerMultiplex_switchTo):(this.removeChild(this._layers[this._enabledLayer],!0),this._enabledLayer=a,this.addChild(this._layers[a]))},switchToAndReleaseMe:function(a){a>=this._layers.length?cc.log(cc._LogInfos.LayerMultiplex_switchToAndReleaseMe):(this.removeChild(this._layers[this._enabledLayer],!0),this._layers[this._enabledLayer]=null,this._enabledLayer=a,this.addChild(this._layers[a]))},addLayer:function(a){a?this._layers.push(a):
cc.log(cc._LogInfos.LayerMultiplex_addLayer)}});cc.LayerMultiplex.create=function(){return new cc.LayerMultiplex(Array.prototype.slice.call(arguments))};(function(){cc.Layer.CanvasRenderCmd=function(a){cc.Node.CanvasRenderCmd.call(this,a);this._isBaked=!1;this._bakeSprite=null;this._canUseDirtyRegion=!0;this._updateCache=2};var a=cc.Layer.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);a.constructor=cc.Layer.CanvasRenderCmd;a._setCacheDirty=function(a){a&&0===this._updateCache&&(this._updateCache=2);!1===this._cacheDirty&&(this._cacheDirty=!0,(a=this._cachedParent)&&a!==this&&a._setNodeDirtyForCache&&a._setNodeDirtyForCache())};
a.updateStatus=function(){var a=cc.Node._dirtyFlags,c=this._dirtyFlag;c&a.orderDirty&&(this._cacheDirty=!0,0===this._updateCache&&(this._updateCache=2),this._dirtyFlag=c&a.orderDirty^c);cc.Node.RenderCmd.prototype.updateStatus.call(this)};a._syncStatus=function(a){var c=cc.Node._dirtyFlags,d=this._dirtyFlag;d&c.orderDirty&&(this._cacheDirty=!0,0===this._updateCache&&(this._updateCache=2),this._dirtyFlag=d&c.orderDirty^d);cc.Node.RenderCmd.prototype._syncStatus.call(this,a)};a.transform=function(a,
c){var d=this._worldTransform,e=d.a,f=d.b,g=d.c,h=d.d;cc.Node.CanvasRenderCmd.prototype.transform.call(this,a,c);d.a===e&&d.b===f&&d.c===g&&d.d===h||0!==this._updateCache||(this._updateCache=2)};a.bake=function(){if(!this._isBaked){this._needDraw=!0;this._isBaked=this._cacheDirty=cc.renderer.childrenOrderDirty=!0;0===this._updateCache&&(this._updateCache=2);for(var a=this._node._children,c=0,d=a.length;c<d;c++)a[c]._renderCmd._setCachedParent(this);this._bakeSprite||(this._bakeSprite=new cc.BakeSprite,
this._bakeSprite.setAnchorPoint(0,0))}};a.unbake=function(){if(this._isBaked){cc.renderer.childrenOrderDirty=!0;this._isBaked=this._needDraw=!1;this._cacheDirty=!0;0===this._updateCache&&(this._updateCache=2);for(var a=this._node._children,c=0,d=a.length;c<d;c++)a[c]._renderCmd._setCachedParent(null)}};a.isBaked=function(){return this._isBaked};a.rendering=function(){if(this._cacheDirty){var a=this._node,c=a._children,d=this._bakeSprite;this.transform(this.getParentRenderCmd(),!0);var e=this._getBoundingBoxForBake();
e.width=0|e.width+0.5;e.height=0|e.height+0.5;var f=d.getCacheContext(),g=f.getContext();d.setPosition(e.x,e.y);if(0<this._updateCache){d.resetCanvasSize(e.width,e.height);f.setOffset(0-e.x,g.canvas.height-e.height+e.y);a.sortAllChildren();cc.renderer._turnToCacheMode(this.__instanceId);a=0;for(e=c.length;a<e;a++)c[a].visit(this);cc.renderer._renderingToCacheCanvas(f,this.__instanceId);d.transform();this._updateCache--}this._cacheDirty=!1}};a.visit=function(a){if(this._isBaked){var c=this._node,d=
c._children.length;c._visible&&0!==d&&(this._syncStatus(a),cc.renderer.pushRenderCommand(this),this._bakeSprite.visit(this),this._dirtyFlag=0)}else this.originVisit(a)};a._bakeForAddChild=function(a){a._parent===this._node&&this._isBaked&&a._renderCmd._setCachedParent(this)};a._getBoundingBoxForBake=function(){var a=null,c=this._node;if(!c._children||0===c._children.length)return cc.rect(0,0,10,10);for(var d=c.getNodeToWorldTransform(),c=c._children,e=0,f=c.length;e<f;e++){var g=c[e];g&&g._visible&&
(a?(g=g._getBoundingBoxToCurrentNode(d))&&(a=cc.rectUnion(a,g)):a=g._getBoundingBoxToCurrentNode(d))}return a}})();
(function(){cc.LayerColor.CanvasRenderCmd=function(a){cc.Layer.CanvasRenderCmd.call(this,a);this._needDraw=!0;this._blendFuncStr="source-over";this._bakeRenderCmd=new cc.CustomRenderCmd(this,this._bakeRendering)};var a=cc.LayerColor.CanvasRenderCmd.prototype=Object.create(cc.Layer.CanvasRenderCmd.prototype);a.constructor=cc.LayerColor.CanvasRenderCmd;a.unbake=function(){cc.Layer.CanvasRenderCmd.prototype.unbake.call(this);this._needDraw=!0};a.rendering=function(a,c,d){a=a||cc._renderContext;var e=
a.getContext(),f=this._node,g=this._displayedColor,h=this._displayedOpacity/255,k=f._contentSize.width,f=f._contentSize.height;0!==h&&(a.setCompositeOperation(this._blendFuncStr),a.setGlobalAlpha(h),a.setFillStyle("rgba("+(0|g.r)+","+(0|g.g)+","+(0|g.b)+", 1)"),a.setTransform(this._worldTransform,c,d),e.fillRect(0,0,k,-f),cc.g_NumberOfDraws++)};a.updateBlendFunc=function(a){this._blendFuncStr=cc.Node.CanvasRenderCmd._getCompositeOperationByBlendFunc(a)};a._updateSquareVertices=a._updateSquareVerticesWidth=
a._updateSquareVerticesHeight=function(){};a._bakeRendering=function(){if(this._cacheDirty){var a=this._node,c=this._bakeSprite,d=a._children,e=d.length;this.transform(this.getParentRenderCmd(),!0);var f=this._getBoundingBoxForBake();f.width=0|f.width+0.5;f.height=0|f.height+0.5;var g=c.getCacheContext(),h=g.getContext();c.setPosition(f.x,f.y);if(0<this._updateCache){h.fillStyle=g._currentFillStyle;c.resetCanvasSize(f.width,f.height);g.setOffset(0-f.x,h.canvas.height-f.height+f.y);cc.renderer._turnToCacheMode(this.__instanceId);
if(0<e){a.sortAllChildren();for(a=0;a<e;a++)if(f=d[a],0>f._localZOrder)f._renderCmd.visit(this);else break;for(cc.renderer.pushRenderCommand(this);a<e;a++)d[a]._renderCmd.visit(this)}else cc.renderer.pushRenderCommand(this);cc.renderer._renderingToCacheCanvas(g,this.__instanceId);c.transform();this._updateCache--}this._cacheDirty=!1}};a.visit=function(a){this._isBaked?this._node._visible&&(this._syncStatus(a),cc.renderer.pushRenderCommand(this._bakeRenderCmd),this._bakeSprite._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),
this._bakeSprite.visit(this),this._dirtyFlag=0):this.originVisit()};a._getBoundingBoxForBake=function(){var a=this._node,c=cc.rect(0,0,a._contentSize.width,a._contentSize.height),d=a.getNodeToWorldTransform(),c=cc.rectApplyAffineTransform(c,a.getNodeToWorldTransform());if(!a._children||0===a._children.length)return c;for(var a=a._children,e=0;e<a.length;e++){var f=a[e];f&&f._visible&&(f=f._getBoundingBoxToCurrentNode(d),c=cc.rectUnion(c,f))}return c}})();
(function(){cc.LayerGradient.CanvasRenderCmd=function(a){cc.LayerColor.CanvasRenderCmd.call(this,a);this._needDraw=!0;this._startPoint=cc.p(0,0);this._endPoint=cc.p(0,0);this._endStopStr=this._startStopStr=null};var a=cc.LayerGradient.CanvasRenderCmd.prototype=Object.create(cc.LayerColor.CanvasRenderCmd.prototype);a.constructor=cc.LayerGradient.CanvasRenderCmd;a.rendering=function(a,c,d){a=a||cc._renderContext;var e=a.getContext(),f=this._node,g=this._displayedOpacity/255;if(0!==g){var h=f._contentSize.width,
k=f._contentSize.height;a.setCompositeOperation(this._blendFuncStr);a.setGlobalAlpha(g);g=e.createLinearGradient(this._startPoint.x,this._startPoint.y,this._endPoint.x,this._endPoint.y);if(f._colorStops)for(var m=0;m<f._colorStops.length;m++)g.addColorStop(f._colorStops[m].p,this._colorStopsStr[m]);else g.addColorStop(0,this._startStopStr),g.addColorStop(1,this._endStopStr);a.setFillStyle(g);a.setTransform(this._worldTransform,c,d);e.fillRect(0,0,h,-k);cc.g_NumberOfDraws++}};a.updateStatus=function(){var a=
cc.Node._dirtyFlags,c=this._dirtyFlag;c&a.gradientDirty&&(this._dirtyFlag|=a.colorDirty,this._dirtyFlag=c&a.gradientDirty^c);cc.Node.RenderCmd.prototype.updateStatus.call(this)};a._syncStatus=function(a){var c=cc.Node._dirtyFlags,d=this._dirtyFlag;d&c.gradientDirty&&(this._dirtyFlag|=c.colorDirty,this._dirtyFlag=d&c.gradientDirty^d);cc.Node.RenderCmd.prototype._syncStatus.call(this,a)};a._updateColor=function(){var a=this._node,c=a._contentSize,d=0.5*c.width,c=0.5*c.height,e=cc.pAngleSigned(cc.p(0,
-1),a._alongVector),e=cc.pRotateByAngle(cc.p(0,-1),cc.p(0,0),e),f=Math.min(Math.abs(1/e.x),Math.abs(1/e.y));this._startPoint.x=d*-e.x*f+d;this._startPoint.y=c*e.y*f-c;this._endPoint.x=d*e.x*f+d;this._endPoint.y=c*-e.y*f-c;d=this._displayedColor;c=a._endColor;e=a._startOpacity/255;f=a._endOpacity/255;this._startStopStr="rgba("+Math.round(d.r)+","+Math.round(d.g)+","+Math.round(d.b)+","+e.toFixed(4)+")";this._endStopStr="rgba("+Math.round(c.r)+","+Math.round(c.g)+","+Math.round(c.b)+","+f.toFixed(4)+
")";if(a._colorStops)for(this._endOpacity=this._startOpacity=0,this._colorStopsStr=[],d=0;d<a._colorStops.length;d++)c=a._colorStops[d].color,e=null==c.a?1:c.a/255,this._colorStopsStr.push("rgba("+Math.round(c.r)+","+Math.round(c.g)+","+Math.round(c.b)+","+e.toFixed(4)+")")}})();cc._tmp.PrototypeSprite=function(){var a=cc.Sprite.prototype;cc.defineGetterSetter(a,"opacityModifyRGB",a.isOpacityModifyRGB,a.setOpacityModifyRGB);cc.defineGetterSetter(a,"opacity",a.getOpacity,a.setOpacity);cc.defineGetterSetter(a,"color",a.getColor,a.setColor);cc.defineGetterSetter(a,"flippedX",a.isFlippedX,a.setFlippedX);cc.defineGetterSetter(a,"flippedY",a.isFlippedY,a.setFlippedY);cc.defineGetterSetter(a,"offsetX",a._getOffsetX);cc.defineGetterSetter(a,"offsetY",a._getOffsetY);cc.defineGetterSetter(a,
"texture",a.getTexture,a.setTexture);cc.defineGetterSetter(a,"textureRectRotated",a.isTextureRectRotated);cc.defineGetterSetter(a,"batchNode",a.getBatchNode,a.setBatchNode);cc.defineGetterSetter(a,"quad",a.getQuad)};cc.Sprite=cc.Node.extend({dirty:!1,atlasIndex:0,textureAtlas:null,_batchNode:null,_recursiveDirty:null,_hasChildren:null,_shouldBeHidden:!1,_transformToBatch:null,_blendFunc:null,_texture:null,_rect:null,_rectRotated:!1,_offsetPosition:null,_unflippedOffsetPositionFromCenter:null,_opacityModifyRGB:!1,_flippedX:!1,_flippedY:!1,_textureLoaded:!1,_unloadedFrame:null,_className:"Sprite",_releaseTextureWhenDetach:!1,ctor:function(a,b,c){cc.Node.prototype.ctor.call(this);this.setAnchorPoint(0.5,0.5);this._loader=
new cc.Sprite.LoadManager;this._shouldBeHidden=!1;this._offsetPosition=cc.p(0,0);this._unflippedOffsetPositionFromCenter=cc.p(0,0);this._blendFunc={src:cc.BLEND_SRC,dst:cc.BLEND_DST};this._rect=cc.rect(0,0,0,0);this._softInit(a,b,c)},textureLoaded:function(){return this._textureLoaded},addLoadedEventListener:function(a,b){this.addEventListener("load",a,b)},isDirty:function(){return this.dirty},setDirty:function(a){this.dirty=a},isTextureRectRotated:function(){return this._rectRotated},getAtlasIndex:function(){return this.atlasIndex},
setAtlasIndex:function(a){this.atlasIndex=a},getTextureRect:function(){return cc.rect(this._rect)},getTextureAtlas:function(){return this.textureAtlas},setTextureAtlas:function(a){this.textureAtlas=a},getOffsetPosition:function(){return cc.p(this._offsetPosition)},_getOffsetX:function(){return this._offsetPosition.x},_getOffsetY:function(){return this._offsetPosition.y},getBlendFunc:function(){return this._blendFunc},initWithSpriteFrame:function(a){cc.assert(a,cc._LogInfos.Sprite_initWithSpriteFrame);
return this.setSpriteFrame(a)},initWithSpriteFrameName:function(a){cc.assert(a,cc._LogInfos.Sprite_initWithSpriteFrameName);var b=cc.spriteFrameCache.getSpriteFrame(a);cc.assert(b,a+cc._LogInfos.Sprite_initWithSpriteFrameName1);return this.initWithSpriteFrame(b)},useBatchNode:function(a){this.textureAtlas=a.getTextureAtlas();this._batchNode=a},setVertexRect:function(a){var b=this._rect;b.x=a.x;b.y=a.y;b.width=a.width;b.height=a.height;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},
sortAllChildren:function(){if(this._reorderChildDirty){var a=this._children;cc.Node.prototype.sortAllChildren.call(this);this._batchNode&&this._arrayMakeObjectsPerformSelector(a,cc.Node._stateCallbackType.sortAllChildren);this._reorderChildDirty=!1}},reorderChild:function(a,b){cc.assert(a,cc._LogInfos.Sprite_reorderChild_2);-1===this._children.indexOf(a)?cc.log(cc._LogInfos.Sprite_reorderChild):b!==a.zIndex&&(this._batchNode&&!this._reorderChildDirty&&(this._setReorderChildDirtyRecursively(),this._batchNode.reorderBatch(!0)),
cc.Node.prototype.reorderChild.call(this,a,b))},removeChild:function(a,b){this._batchNode&&this._batchNode.removeSpriteFromAtlas(a);cc.Node.prototype.removeChild.call(this,a,b)},setVisible:function(a){cc.Node.prototype.setVisible.call(this,a);this._renderCmd.setDirtyRecursively(!0)},removeAllChildren:function(a){var b=this._children,c=this._batchNode;if(c&&null!=b)for(var d=0,e=b.length;d<e;d++)c.removeSpriteFromAtlas(b[d]);cc.Node.prototype.removeAllChildren.call(this,a);this._hasChildren=!1},ignoreAnchorPointForPosition:function(a){this._batchNode?
cc.log(cc._LogInfos.Sprite_ignoreAnchorPointForPosition):cc.Node.prototype.ignoreAnchorPointForPosition.call(this,a)},setFlippedX:function(a){this._flippedX!==a&&(this._flippedX=a,this.setTextureRect(this._rect,this._rectRotated,this._contentSize),this.setNodeDirty(!0))},setFlippedY:function(a){this._flippedY!==a&&(this._flippedY=a,this.setTextureRect(this._rect,this._rectRotated,this._contentSize),this.setNodeDirty(!0))},setFlipX:function(a){this.setFlippedX(a)},setFlipY:function(a){this.setFlippedY(a)},
isFlippedX:function(){return this._flippedX},isFlippedY:function(){return this._flippedY},setOpacityModifyRGB:function(a){this._opacityModifyRGB!==a&&(this._opacityModifyRGB=a,this._renderCmd._setColorDirty())},isOpacityModifyRGB:function(){return this._opacityModifyRGB},setDisplayFrameWithAnimationName:function(a,b){cc.assert(a,cc._LogInfos.Sprite_setDisplayFrameWithAnimationName_3);var c=cc.animationCache.getAnimation(a);c?(c=c.getFrames()[b])?this.setSpriteFrame(c.getSpriteFrame()):cc.log(cc._LogInfos.Sprite_setDisplayFrameWithAnimationName_2):
cc.log(cc._LogInfos.Sprite_setDisplayFrameWithAnimationName)},getBatchNode:function(){return this._batchNode},_setReorderChildDirtyRecursively:function(){if(!this._reorderChildDirty){this._reorderChildDirty=!0;for(var a=this._parent;a&&a!==this._batchNode;)a._setReorderChildDirtyRecursively(),a=a.parent}},getTexture:function(){return this._texture},_softInit:function(a,b,c){void 0===a?cc.Sprite.prototype.init.call(this):cc.isString(a)?"#"===a[0]?(b=a.substr(1,a.length-1),(b=cc.spriteFrameCache.getSpriteFrame(b))?
this.initWithSpriteFrame(b):cc.log("%s does not exist",a)):cc.Sprite.prototype.init.call(this,a,b):"object"===typeof a&&(a instanceof cc.Texture2D?this.initWithTexture(a,b,c):a instanceof cc.SpriteFrame?this.initWithSpriteFrame(a):(b=new cc.Texture2D,b.initWithElement(a),b.handleLoadedTexture(),this.initWithTexture(b)))},getQuad:function(){return null},setBlendFunc:function(a,b){var c=this._blendFunc;void 0===b?(c.src=a.src,c.dst=a.dst):(c.src=a,c.dst=b);this._renderCmd.updateBlendFunc(c)},init:function(){if(0<
arguments.length)return this.initWithFile(arguments[0],arguments[1]);cc.Node.prototype.init.call(this);this.dirty=this._recursiveDirty=!1;this._blendFunc.src=cc.BLEND_SRC;this._blendFunc.dst=cc.BLEND_DST;this.texture=null;this._flippedX=this._flippedY=!1;this.anchorY=this.anchorX=0.5;this._offsetPosition.x=0;this._offsetPosition.y=0;this._hasChildren=!1;this.setTextureRect(cc.rect(0,0,0,0),!1,cc.size(0,0));return!0},initWithFile:function(a,b){cc.assert(a,cc._LogInfos.Sprite_initWithFile);var c=cc.textureCache.getTextureForKey(a);
c&&c.isLoaded()||(c=cc.textureCache.addImage(a));if(!c.isLoaded())return this._loader.clear(),this._loader.once(c,function(){this.initWithFile(a,b);this.dispatchEvent("load")},this),!1;if(!b){var d=c.getContentSize();b=cc.rect(0,0,d.width,d.height)}return this.initWithTexture(c,b)},initWithTexture:function(a,b,c,d){cc.assert(0!==arguments.length,cc._LogInfos.CCSpriteBatchNode_initWithTexture);this._loader.clear();this._textureLoaded=a.isLoaded();if(!this._textureLoaded)return this._loader.once(a,
function(){this.initWithTexture(a,b,c,d);this.dispatchEvent("load")},this),!1;c=c||!1;a=this._renderCmd._handleTextureForRotatedTexture(a,b,c,d);if(!cc.Node.prototype.init.call(this))return!1;this._batchNode=null;this.dirty=this._recursiveDirty=!1;this._opacityModifyRGB=!0;this._blendFunc.src=cc.BLEND_SRC;this._blendFunc.dst=cc.BLEND_DST;this._flippedX=this._flippedY=!1;this._offsetPosition.x=0;this._offsetPosition.y=0;this._hasChildren=!1;this._rectRotated=c;b&&(this._rect.x=b.x,this._rect.y=b.y,
this._rect.width=b.width,this._rect.height=b.height);b||(b=cc.rect(0,0,a.width,a.height));this._renderCmd._checkTextureBoundary(a,b,c);this.setTexture(a);this.setTextureRect(b,c);this.setBatchNode(null);return!0},_isCanSetRect:!0,setIsCanSetRect:function(a){this._isCanSetRect=a},setDisplayFrameFile:function(a){if(!a||0>=a.length)cc.log("setDisplayFrameFile empty path");else{var b=cc.textureCache.addImage(a);if(b)if(this._textureLoaded=b.isLoaded(),this._loader.clear(),this._textureLoaded){a=b.getContentSize();
var c=cc.rect(0,0,a.width,a.height);this.setTexture(b);this.setTextureRect(c,!1,a)}else this._loader.once(b,function(){var a=b.getContentSize(),c=cc.rect(0,0,a.width,a.height);this.setTexture(b);this.setTextureRect(c,!1,a);this.dispatchEvent("load")},this)}},setTextureRect:function(a,b,c,d){this._isCanSetRect&&(this._rectRotated=b||!1,this.setContentSize(c||a),this.setVertexRect(a),this._renderCmd._setTextureCoords(a,d),a=this._unflippedOffsetPositionFromCenter.x,b=this._unflippedOffsetPositionFromCenter.y,
this._flippedX&&(a=-a),this._flippedY&&(b=-b),c=this._rect,this._offsetPosition.x=a+(this._contentSize.width-c.width)/2,this._offsetPosition.y=b+(this._contentSize.height-c.height)/2)},addChild:function(a,b,c){cc.assert(a,cc._LogInfos.CCSpriteBatchNode_addChild_2);null==b&&(b=a._localZOrder);null==c&&(c=a.tag);this._renderCmd._setBatchNodeForAddChild(a)&&(cc.Node.prototype.addChild.call(this,a,b,c),this._hasChildren=!0)},setSpriteFrame:function(a){cc.isString(a)&&(a=cc.spriteFrameCache.getSpriteFrame(a),
cc.assert(a,cc._LogInfos.Sprite_setSpriteFrame));this._loader.clear();this.setNodeDirty(!0);var b=a.getTexture();this._textureLoaded=a.textureLoaded();this._loader.clear();if(!this._textureLoaded)return this._unloadedFrame=a,this._loader.once(b,function(){this.setSpriteFrame(a);this.dispatchEvent("load")},this),!1;this._unloadedFrame=null;var c=a.getOffset();this._unflippedOffsetPositionFromCenter.x=c.x;this._unflippedOffsetPositionFromCenter.y=c.y;b!==this._texture&&(this._renderCmd._setTexture(b),
this.setColor(this._realColor));this.setTextureRect(a.getRect(),a.isRotated(),a.getOriginalSize())},setDisplayFrame:function(a){this.setSpriteFrame(a)},setDisplayFrameName:function(a){(a=cc.spriteFrameCache.getSpriteFrame(a))&&this.setSpriteFrame(a)},isFrameDisplayed:function(a){return this._renderCmd.isFrameDisplayed(a)},displayFrame:function(){return this.getSpriteFrame()},getSpriteFrame:function(){return!this._textureLoaded&&this._unloadedFrame?this._unloadedFrame:new cc.SpriteFrame(this._texture,
cc.rectPointsToPixels(this._rect),this._rectRotated,cc.pointPointsToPixels(this._unflippedOffsetPositionFromCenter),cc.sizePointsToPixels(this._contentSize))},setBatchNode:function(a){(this._batchNode=a)?(this._transformToBatch=cc.affineTransformIdentity(),this.textureAtlas=this._batchNode.getTextureAtlas()):(this.atlasIndex=cc.Sprite.INDEX_NOT_INITIALIZED,this.textureAtlas=null,this.dirty=this._recursiveDirty=!1)},setTexture:function(a){if(!a)return this._renderCmd._setTexture(null);var b=cc.isString(a);
b&&(a=cc.textureCache.addImage(a));this._loader.clear();if(!a._textureLoaded)return this._loader.once(a,function(){this.setTexture(a);this.dispatchEvent("load")},this),!1;this._renderCmd._setTexture(a);b&&this._changeRectWithTexture(a);this.setColor(this._realColor);this._textureLoaded=!0},_changeRectWithTexture:function(a){a=a._contentSize;a=cc.rect(0,0,a.width,a.height);this.setTextureRect(a)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.Sprite.CanvasRenderCmd(this):
new cc.Sprite.WebGLRenderCmd(this)}});cc.Sprite.create=function(a,b,c){return new cc.Sprite(a,b,c)};cc.Sprite.createWithTexture=cc.Sprite.create;cc.Sprite.createWithSpriteFrameName=function(a){return"#"==a.substring(0,1)?cc.Sprite.create(a):cc.Sprite.create("#"+a)};cc.Sprite.createWithSpriteFrame=cc.Sprite.create;cc.Sprite.INDEX_NOT_INITIALIZED=-1;cc.EventHelper.prototype.apply(cc.Sprite.prototype);cc.assert(cc.isFunction(cc._tmp.PrototypeSprite),cc._LogInfos.MissingFile,"SpritesPropertyDefine.js");
cc._tmp.PrototypeSprite();delete cc._tmp.PrototypeSprite;
(function(){var a=cc.Sprite.LoadManager=function(){this.list=[]};a.prototype.add=function(a,c,d){a&&a.addEventListener&&(a.addEventListener("load",c,d),this.list.push({source:a,listener:c,target:d}))};a.prototype.once=function(a,c,d){if(a&&a.addEventListener){var e=function(f){a.removeEventListener("load",e,d);c.call(d,f)};a.addEventListener("load",e,d);this.list.push({source:a,listener:e,target:d})}};a.prototype.clear=function(){for(;0<this.list.length;){var a=this.list.pop();a.source.removeEventListener("load",
a.listener,a.target)}}})();(function(){cc.Sprite.CanvasRenderCmd=function(a){cc.Node.CanvasRenderCmd.call(this,a);this._needDraw=!0;this._textureCoord={renderX:0,renderY:0,x:0,y:0,width:0,height:0,validRect:!1};this._blendFuncStr="source-over";this._colorized=!1;this._canUseDirtyRegion=!0;this._textureToRender=null};var a=cc.Sprite.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);a.constructor=cc.Sprite.CanvasRenderCmd;a.setDirtyRecursively=function(a){};a._setTexture=function(a){var c=this._node;
c._texture&&c._texture.retainCount--;a&&a.retainCount++;c._texture!==a&&(c._textureLoaded=a?a._textureLoaded:!1,c._texture=a,this._updateColor())};a._setColorDirty=function(){this.setDirtyFlag(cc.Node._dirtyFlags.colorDirty|cc.Node._dirtyFlags.opacityDirty)};a.isFrameDisplayed=function(a){var c=this._node;return a.getTexture()!==c._texture?!1:cc.rectEqualToRect(a.getRect(),c._rect)};a.updateBlendFunc=function(a){this._blendFuncStr=cc.Node.CanvasRenderCmd._getCompositeOperationByBlendFunc(a)};a._setBatchNodeForAddChild=
function(a){return!0};a._handleTextureForRotatedTexture=function(a,c,d,e){d&&a.isLoaded()&&(a=a.getHtmlElementObj(),a=cc.Sprite.CanvasRenderCmd._cutRotateImageToCanvas(a,c,e),e=new cc.Texture2D,e.initWithElement(a),e.handleLoadedTexture(),a=e,c.x=c.y=0,this._node._rect=cc.rect(0,0,c.width,c.height));return a};a._checkTextureBoundary=function(a,c,d){a&&a.url&&(d=c.y+c.height,c.x+c.width>a.width&&cc.error(cc._LogInfos.RectWidth,a.url),d>a.height&&cc.error(cc._LogInfos.RectHeight,a.url))};a.rendering=
function(a,c,d){var e=this._node,f=this._textureCoord,g=this._displayedOpacity/255,h=this._textureToRender||e._texture;if((!h||0!==f.width&&0!==f.height&&h._textureLoaded)&&0!==g){a=a||cc._renderContext;var k=a.getContext(),m=e._offsetPosition.x,n=e._rect.height,p=e._rect.width,r=-e._offsetPosition.y-n;a.setTransform(this._worldTransform,c,d);a.setCompositeOperation(this._blendFuncStr);a.setGlobalAlpha(g);(e._flippedX||e._flippedY)&&a.save();e._flippedX&&(m=-m-p,k.scale(-1,1));e._flippedY&&(r=e._offsetPosition.y,
k.scale(1,-1));var s,u,t;this._colorized?s=g=0:(g=f.renderX,s=f.renderY);u=f.width;t=f.height;h&&h._htmlElementObj?(c=h._htmlElementObj,""!==h._pattern?(a.setFillStyle(k.createPattern(c,h._pattern)),k.fillRect(m,r,p,n)):k.drawImage(c,g,s,u,t,m,r,p,n)):(h=e._contentSize,f.validRect&&(f=this._displayedColor,a.setFillStyle("rgba("+f.r+","+f.g+","+f.b+",1)"),k.fillRect(m,r,h.width*c,h.height*d)));(e._flippedX||e._flippedY)&&a.restore();cc.g_NumberOfDraws++}};a._updateColor=function(){var a=this._node._texture,
c=this._textureCoord,d=this._displayedColor;a&&(255!==d.r||255!==d.g||255!==d.b?(this._textureToRender=a._generateColorTexture(d.r,d.g,d.b,c),this._colorized=!0):a&&(this._textureToRender=a,this._colorized=!1))};a._textureLoadedCallback=function(a){if(!this._textureLoaded){this._textureLoaded=!0;var c=this._rect,d=this._renderCmd;c?cc._rectEqualToZero(c)&&(c.width=a.width,c.height=a.height):c=cc.rect(0,0,a.width,a.height);this.texture=a;this.setTextureRect(c,this._rectRotated);a=d._displayedColor;
255===a.r&&255===a.g&&255===a.b||d._updateColor();this.setBatchNode(this._batchNode);this.dispatchEvent("load")}};a._setTextureCoords=function(a,c){void 0===c&&(c=!0);var d=this._textureCoord,e=c?cc.contentScaleFactor():1;d.renderX=d.x=0|a.x*e;d.renderY=d.y=0|a.y*e;d.width=0|a.width*e;d.height=0|a.height*e;d.validRect=!(0===d.width||0===d.height||0>d.x||0>d.y)};cc.Sprite.CanvasRenderCmd._cutRotateImageToCanvas=function(a,c,d){if(!a)return null;if(!c)return a;d=null==d?!0:d;var e=document.createElement("canvas");
e.width=c.width;e.height=c.height;var f=e.getContext("2d");f.translate(e.width/2,e.height/2);d?f.rotate(-1.5707963267948966):f.rotate(1.5707963267948966);f.drawImage(a,c.x,c.y,c.height,c.width,-c.height/2,-c.width/2,c.height,c.width);return e}})();cc.SpriteBatchNode=cc.Node.extend({_blendFunc:null,_texture:null,_className:"SpriteBatchNode",ctor:function(a){cc.Node.prototype.ctor.call(this);this._blendFunc=new cc.BlendFunc(cc.BLEND_SRC,cc.BLEND_DST);var b;cc.isString(a)?(b=cc.textureCache.getTextureForKey(a))&&b.isLoaded()||(b=cc.textureCache.addImage(a)):a instanceof cc.Texture2D&&(b=a);b&&this.initWithTexture(b)},addSpriteWithoutQuad:function(a,b,c){this.addChild(a,b,c);return this},getTextureAtlas:function(){return null},setTextureAtlas:function(a){},
getDescendants:function(){return this._children},initWithFile:function(a,b){var c=cc.textureCache.getTextureForKey(a);c&&c.isLoaded()||(c=cc.textureCache.addImage(a));return this.initWithTexture(c,b)},init:function(a,b){var c=cc.textureCache.getTextureForKey(a);c&&c.isLoaded()||(c=cc.textureCache.addImage(a));return this.initWithTexture(c,b)},increaseAtlasCapacity:function(){},removeChildAtIndex:function(a,b){this.removeChild(this._children[a],b)},rebuildIndexInOrder:function(a,b){return b},highestAtlasIndexInChild:function(a){var b=
a.children;return b&&0!==b.length?this.highestAtlasIndexInChild(b[b.length-1]):a.zIndex},lowestAtlasIndexInChild:function(a){var b=a.children;return b&&0!==b.length?this.lowestAtlasIndexInChild(b[b.length-1]):a.zIndex},atlasIndexForChild:function(a){return a.zIndex},reorderBatch:function(a){this._reorderChildDirty=a},setBlendFunc:function(a,b){this._blendFunc=void 0===b?a:{src:a,dst:b}},getBlendFunc:function(){return new cc.BlendFunc(this._blendFunc.src,this._blendFunc.dst)},updateQuadFromSprite:function(a,
b){cc.assert(a,cc._LogInfos.CCSpriteBatchNode_updateQuadFromSprite_2);a instanceof cc.Sprite?(a.dirty=!0,a._renderCmd.transform(this._renderCmd,!0)):cc.log(cc._LogInfos.CCSpriteBatchNode_updateQuadFromSprite)},insertQuadFromSprite:function(a,b){this.addChild(a,b)},insertChild:function(a,b){this.addChild(a,b)},appendChild:function(a){this.sortAllChildren();this.addChild(a.lastLocalZOrder+1)},removeSpriteFromAtlas:function(a,b){this.removeChild(a,b)},initWithTexture:function(a){a&&this.setTexture(a);
return!0},getTexture:function(){return this._texture},setTexture:function(a){this._texture=a;if(a._textureLoaded){var b=this._children,c,d=b.length;for(c=0;c<d;++c)b[c].setTexture&&b[c].setTexture(a)}else a.addEventListener("load",function(){var b=this._children,c,d=b.length;for(c=0;c<d;++c)b[c].setTexture&&b[c].setTexture(a)},this)},setShaderProgram:function(a){this._renderCmd.setShaderProgram(a);var b=this._children,c,d=b.length;for(c=0;c<d;++c)b[c].setShaderProgram(a)},addChild:function(a,b,c){cc.assert(void 0!==
a,cc._LogInfos.CCSpriteBatchNode_addChild_3);this._isValidChild(a)&&(b=void 0===b?a.zIndex:b,c=void 0===c?a.tag:c,cc.Node.prototype.addChild.call(this,a,b,c),this._renderCmd._shaderProgram&&(a.shaderProgram=this._renderCmd._shaderProgram))},_isValidChild:function(a){if(!(a instanceof cc.Sprite))return cc.log(cc._LogInfos.Sprite_addChild_4),!0;if(a.texture!==this._texture){if(!a._textureLoaded)return!0;cc.log(cc._LogInfos.Sprite_addChild_5);return!1}return!0}});_p=cc.SpriteBatchNode.prototype;
cc.defineGetterSetter(_p,"texture",_p.getTexture,_p.setTexture);cc.defineGetterSetter(_p,"shaderProgram",_p.getShaderProgram,_p.setShaderProgram);cc.SpriteBatchNode.create=function(a){return new cc.SpriteBatchNode(a)};cc.SpriteBatchNode.createWithTexture=cc.SpriteBatchNode.create;cc.BakeSprite=cc.Sprite.extend({_cacheCanvas:null,_cacheContext:null,ctor:function(){cc.Sprite.prototype.ctor.call(this);var a=document.createElement("canvas");a.width=a.height=10;this._cacheCanvas=a;this._cacheContext=new cc.CanvasContextWrapper(a.getContext("2d"));var b=new cc.Texture2D;b.initWithElement(a);b.handleLoadedTexture();this.setTexture(b)},getCacheContext:function(){return this._cacheContext},getCacheCanvas:function(){return this._cacheCanvas},resetCanvasSize:function(a,b){var c=this._cacheCanvas,
d=this._cacheContext,e=d._context.strokeStyle,f=d._context.fillStyle;void 0===b&&(b=a.height,a=a.width);c.width=a;c.height=b;e!==d._context.strokeStyle&&(d._context.strokeStyle=e);f!==d._context.fillStyle&&(d._context.fillStyle=f);this.getTexture().handleLoadedTexture();this.setTextureRect(cc.rect(0,0,a,b),!1,null,!1)}});cc.AnimationFrame=cc.Class.extend({_spriteFrame:null,_delayPerUnit:0,_userInfo:null,ctor:function(a,b,c){this._spriteFrame=a||null;this._delayPerUnit=b||0;this._userInfo=c||null},clone:function(){var a=new cc.AnimationFrame;a.initWithSpriteFrame(this._spriteFrame.clone(),this._delayPerUnit,this._userInfo);return a},copyWithZone:function(a){return cc.clone(this)},copy:function(a){a=new cc.AnimationFrame;a.initWithSpriteFrame(this._spriteFrame.clone(),this._delayPerUnit,this._userInfo);return a},initWithSpriteFrame:function(a,
b,c){this._spriteFrame=a;this._delayPerUnit=b;this._userInfo=c;return!0},getSpriteFrame:function(){return this._spriteFrame},setSpriteFrame:function(a){this._spriteFrame=a},getDelayUnits:function(){return this._delayPerUnit},setDelayUnits:function(a){this._delayPerUnit=a},getUserInfo:function(){return this._userInfo},setUserInfo:function(a){this._userInfo=a}});cc.AnimationFrame.create=function(a,b,c){return new cc.AnimationFrame(a,b,c)};
cc.Animation=cc.Class.extend({_frames:null,_loops:0,_restoreOriginalFrame:!1,_duration:0,_delayPerUnit:0,_totalDelayUnits:0,ctor:function(a,b,c){this._frames=[];if(void 0===a)this.initWithSpriteFrames(null,0);else{var d=a[0];d&&(d instanceof cc.SpriteFrame?this.initWithSpriteFrames(a,b,c):d instanceof cc.AnimationFrame&&this.initWithAnimationFrames(a,b,c))}},getFrames:function(){return this._frames},setFrames:function(a){this._frames=a},addSpriteFrame:function(a){var b=new cc.AnimationFrame;b.initWithSpriteFrame(a,
1,null);this._frames.push(b);this._totalDelayUnits++},addSpriteFrameWithFile:function(a){a=cc.textureCache.addImage(a);var b=cc.rect(0,0,0,0);b.width=a.width;b.height=a.height;a=new cc.SpriteFrame(a,b);this.addSpriteFrame(a)},addSpriteFrameWithTexture:function(a,b){var c=new cc.SpriteFrame(a,b);this.addSpriteFrame(c)},initWithAnimationFrames:function(a,b,c){cc.arrayVerifyType(a,cc.AnimationFrame);this._delayPerUnit=b;this._loops=void 0===c?1:c;this._totalDelayUnits=0;b=this._frames;for(c=b.length=
0;c<a.length;c++){var d=a[c];b.push(d);this._totalDelayUnits+=d.getDelayUnits()}return!0},clone:function(){var a=new cc.Animation;a.initWithAnimationFrames(this._copyFrames(),this._delayPerUnit,this._loops);a.setRestoreOriginalFrame(this._restoreOriginalFrame);return a},copyWithZone:function(a){a=new cc.Animation;a.initWithAnimationFrames(this._copyFrames(),this._delayPerUnit,this._loops);a.setRestoreOriginalFrame(this._restoreOriginalFrame);return a},_copyFrames:function(){for(var a=[],b=0;b<this._frames.length;b++)a.push(this._frames[b].clone());
return a},copy:function(a){return this.copyWithZone(null)},getLoops:function(){return this._loops},setLoops:function(a){this._loops=a},setRestoreOriginalFrame:function(a){this._restoreOriginalFrame=a},getRestoreOriginalFrame:function(){return this._restoreOriginalFrame},getDuration:function(){return this._totalDelayUnits*this._delayPerUnit},getDelayPerUnit:function(){return this._delayPerUnit},setDelayPerUnit:function(a){this._delayPerUnit=a},getTotalDelayUnits:function(){return this._totalDelayUnits},
initWithSpriteFrames:function(a,b,c){cc.arrayVerifyType(a,cc.SpriteFrame);this._loops=void 0===c?1:c;this._delayPerUnit=b||0;this._totalDelayUnits=0;b=this._frames;b.length=0;if(a){for(c=0;c<a.length;c++){var d=a[c],e=new cc.AnimationFrame;e.initWithSpriteFrame(d,1,null);b.push(e)}this._totalDelayUnits+=a.length}return!0},retain:function(){},release:function(){}});cc.Animation.create=function(a,b,c){return new cc.Animation(a,b,c)};cc.Animation.createWithAnimationFrames=cc.Animation.create;cc.animationCache={_animations:{},addAnimation:function(a,b){this._animations[b]=a},removeAnimation:function(a){a&&this._animations[a]&&delete this._animations[a]},getAnimation:function(a){return this._animations[a]?this._animations[a]:null},_addAnimationsWithDictionary:function(a,b){var c=a.animations;if(c){var d=1,e=a.properties;if(e)for(var d=null!=e.format?parseInt(e.format):d,e=e.spritesheets,f=cc.spriteFrameCache,g=cc.path,h=0;h<e.length;h++)f.addSpriteFrames(g.changeBasename(b,e[h]));switch(d){case 1:this._parseVersion1(c);
break;case 2:this._parseVersion2(c);break;default:cc.log(cc._LogInfos.animationCache__addAnimationsWithDictionary_2)}}else cc.log(cc._LogInfos.animationCache__addAnimationsWithDictionary)},addAnimations:function(a){cc.assert(a,cc._LogInfos.animationCache_addAnimations_2);var b=cc.loader.getRes(a);b?this._addAnimationsWithDictionary(b,a):cc.log(cc._LogInfos.animationCache_addAnimations)},_parseVersion1:function(a){var b=cc.spriteFrameCache,c;for(c in a){var d=a[c],e=d.frames,d=parseFloat(d.delay)||
0,f=null;if(e){for(var f=[],g=0;g<e.length;g++){var h=b.getSpriteFrame(e[g]);if(h){var k=new cc.AnimationFrame;k.initWithSpriteFrame(h,1,null);f.push(k)}else cc.log(cc._LogInfos.animationCache__parseVersion1_2,c,e[g])}0===f.length?cc.log(cc._LogInfos.animationCache__parseVersion1_3,c):(f.length!==e.length&&cc.log(cc._LogInfos.animationCache__parseVersion1_4,c),f=new cc.Animation(f,d,1),cc.animationCache.addAnimation(f,c))}else cc.log(cc._LogInfos.animationCache__parseVersion1,c)}},_parseVersion2:function(a){var b=
cc.spriteFrameCache,c;for(c in a){var d=a[c],e=d.loop,f=parseInt(d.loops),e=e?cc.REPEAT_FOREVER:isNaN(f)?1:f,f=d.restoreOriginalFrame&&!0==d.restoreOriginalFrame?!0:!1,g=d.frames;if(g){for(var h=[],k=0;k<g.length;k++){var m=g[k],n=m.spriteframe,p=b.getSpriteFrame(n);if(p){var n=parseFloat(m.delayUnits)||0,m=m.notification,r=new cc.AnimationFrame;r.initWithSpriteFrame(p,n,m);h.push(r)}else cc.log(cc._LogInfos.animationCache__parseVersion2_2,c,n)}d=parseFloat(d.delayPerUnit)||0;g=new cc.Animation;g.initWithAnimationFrames(h,
d,e);g.setRestoreOriginalFrame(f);cc.animationCache.addAnimation(g,c)}else cc.log(cc._LogInfos.animationCache__parseVersion2,c)}},_clear:function(){this._animations={}}};cc.SpriteFrame=cc.Class.extend({_offset:null,_originalSize:null,_rectInPixels:null,_rotated:!1,_rect:null,_offsetInPixels:null,_originalSizeInPixels:null,_texture:null,_textureFilename:"",_textureLoaded:!1,ctor:function(a,b,c,d,e){this._offset=cc.p(0,0);this._offsetInPixels=cc.p(0,0);this._originalSize=cc.size(0,0);this._rotated=!1;this._originalSizeInPixels=cc.size(0,0);this._textureFilename="";this._texture=null;this._textureLoaded=!1;void 0!==a&&void 0!==b&&(void 0===c||void 0===d||void 0===e?
this.initWithTexture(a,b):this.initWithTexture(a,b,c,d,e))},textureLoaded:function(){return this._textureLoaded},addLoadedEventListener:function(a,b){this.addEventListener("load",a,b)},getRectInPixels:function(){var a=this._rectInPixels;return cc.rect(a.x,a.y,a.width,a.height)},setRectInPixels:function(a){this._rectInPixels||(this._rectInPixels=cc.rect(0,0,0,0));this._rectInPixels.x=a.x;this._rectInPixels.y=a.y;this._rectInPixels.width=a.width;this._rectInPixels.height=a.height;this._rect=cc.rectPixelsToPoints(a)},
isRotated:function(){return this._rotated},setRotated:function(a){this._rotated=a},getRect:function(){var a=this._rect;return cc.rect(a.x,a.y,a.width,a.height)},setRect:function(a){this._rect||(this._rect=cc.rect(0,0,0,0));this._rect.x=a.x;this._rect.y=a.y;this._rect.width=a.width;this._rect.height=a.height;this._rectInPixels=cc.rectPointsToPixels(this._rect)},getOffsetInPixels:function(){return cc.p(this._offsetInPixels)},setOffsetInPixels:function(a){this._offsetInPixels.x=a.x;this._offsetInPixels.y=
a.y;cc._pointPixelsToPointsOut(this._offsetInPixels,this._offset)},getOriginalSizeInPixels:function(){return cc.size(this._originalSizeInPixels)},setOriginalSizeInPixels:function(a){this._originalSizeInPixels.width=a.width;this._originalSizeInPixels.height=a.height},getOriginalSize:function(){return cc.size(this._originalSize)},setOriginalSize:function(a){this._originalSize.width=a.width;this._originalSize.height=a.height},getTexture:function(){if(this._texture)return this._texture;if(""!==this._textureFilename){var a=
cc.textureCache.addImage(this._textureFilename);a&&(this._textureLoaded=a.isLoaded());return a}return null},setTexture:function(a){if(this._texture!==a){var b=a.isLoaded();this._textureLoaded=b;this._texture=a;b||a.addEventListener("load",function(b){this._textureLoaded=!0;if(this._rotated&&cc._renderType===cc.game.RENDER_TYPE_CANVAS){var d=b.getHtmlElementObj(),d=cc.Sprite.CanvasRenderCmd._cutRotateImageToCanvas(d,this.getRect()),e=new cc.Texture2D;e.initWithElement(d);e.handleLoadedTexture();this.setTexture(e);
d=this.getRect();this.setRect(cc.rect(0,0,d.width,d.height))}d=this._rect;if(a.isNeedRestSize||0===d.width&&0===d.height)d=b.width,b=b.height,this._rect.width=d,this._rect.height=b,this._rectInPixels=cc.rectPointsToPixels(this._rect),this._originalSizeInPixels.width=this._rectInPixels.width,this._originalSizeInPixels.height=this._rectInPixels.height,this._originalSize.width=d,this._originalSize.height=b;this.dispatchEvent("load")},this)}},getOffset:function(){return cc.p(this._offset)},setOffset:function(a){this._offset.x=
a.x;this._offset.y=a.y},clone:function(){var a=new cc.SpriteFrame;a.initWithTexture(this._textureFilename,this._rectInPixels,this._rotated,this._offsetInPixels,this._originalSizeInPixels);a.setTexture(this._texture);return a},copyWithZone:function(){var a=new cc.SpriteFrame;a.initWithTexture(this._textureFilename,this._rectInPixels,this._rotated,this._offsetInPixels,this._originalSizeInPixels);a.setTexture(this._texture);return a},copy:function(){return this.copyWithZone()},initWithTexture:function(a,
b,c,d,e){2===arguments.length&&(b=cc.rectPointsToPixels(b));d=d||cc.p(0,0);e=e||b;c=c||!1;cc.isString(a)?(this._texture=null,this._textureFilename=a):a instanceof cc.Texture2D&&this.setTexture(a);if((a=this.getTexture())&&a.url&&a.isLoaded()){a.isNeedRestSize&&(b.width=a.getPixelsWide(),b.height=a.getPixelsHigh());var f,g;c?(f=b.x+b.height,g=b.y+b.width):(f=b.x+b.width,g=b.y+b.height);f>a.getPixelsWide()&&cc.error(cc._LogInfos.RectWidth,a.url);g>a.getPixelsHigh()&&cc.error(cc._LogInfos.RectHeight,
a.url)}this._rectInPixels=b;this._rect=cc.rectPixelsToPoints(b);this._offsetInPixels.x=d.x;this._offsetInPixels.y=d.y;cc._pointPixelsToPointsOut(d,this._offset);this._originalSizeInPixels.width=e.width;this._originalSizeInPixels.height=e.height;cc._sizePixelsToPointsOut(e,this._originalSize);this._rotated=c;return!0}});cc.EventHelper.prototype.apply(cc.SpriteFrame.prototype);cc.SpriteFrame.create=function(a,b,c,d,e){return new cc.SpriteFrame(a,b,c,d,e)};cc.SpriteFrame.createWithTexture=cc.SpriteFrame.create;
cc.SpriteFrame._frameWithTextureForCanvas=function(a,b,c,d,e){var f=new cc.SpriteFrame;f._texture=a;f._rectInPixels=b;f._rect=cc.rectPixelsToPoints(b);f._offsetInPixels.x=d.x;f._offsetInPixels.y=d.y;cc._pointPixelsToPointsOut(f._offsetInPixels,f._offset);f._originalSizeInPixels.width=e.width;f._originalSizeInPixels.height=e.height;cc._sizePixelsToPointsOut(f._originalSizeInPixels,f._originalSize);f._rotated=c;return f};cc.spriteFrameCache={_CCNS_REG1:/^\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*$/,_CCNS_REG2:/^\s*\{\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*,\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*\}\s*$/,_spriteFrames:{},_spriteFramesAliases:{},_frameConfigCache:{},_rectFromString:function(a){return(a=this._CCNS_REG2.exec(a))?cc.rect(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),parseFloat(a[4])):cc.rect(0,0,0,0)},_pointFromString:function(a){return(a=this._CCNS_REG1.exec(a))?
cc.p(parseFloat(a[1]),parseFloat(a[2])):cc.p(0,0)},_sizeFromString:function(a){return(a=this._CCNS_REG1.exec(a))?cc.size(parseFloat(a[1]),parseFloat(a[2])):cc.size(0,0)},_getFrameConfig:function(a){var b=cc.loader.getRes(a);cc.assert(b,cc._LogInfos.spriteFrameCache__getFrameConfig_2,a);if(b._inited)return this._frameConfigCache[a]=b;this._frameConfigCache[a]=this._parseFrameConfig(b);return this._frameConfigCache[a]},_getFrameConfigByJsonObject:function(a,b){cc.assert(b,cc._LogInfos.spriteFrameCache__getFrameConfig_2,
a);this._frameConfigCache[a]=this._parseFrameConfig(b);return this._frameConfigCache[a]},_parseFrameConfig:function(a){var b=a.frames,c=a.metadata||a.meta;a={};var d={},e=0;c&&(e=c.format,e=1>=e.length?parseInt(e):e,d.image=c.textureFileName||c.textureFileName||c.image);for(var f in b){var g=b[f];if(g){c={};if(0==e){c.rect=cc.rect(g.x,g.y,g.width,g.height);c.rotated=!1;c.offset=cc.p(g.offsetX,g.offsetY);var h=g.originalWidth,g=g.originalHeight;h&&g||cc.log(cc._LogInfos.spriteFrameCache__getFrameConfig);
h=Math.abs(h);g=Math.abs(g);c.size=cc.size(h,g)}else if(1==e||2==e)c.rect=this._rectFromString(g.frame),c.rotated=g.rotated||!1,c.offset=this._pointFromString(g.offset),c.size=this._sizeFromString(g.sourceSize);else if(3==e){var h=this._sizeFromString(g.spriteSize),k=this._rectFromString(g.textureRect);h&&(k=cc.rect(k.x,k.y,h.width,h.height));c.rect=k;c.rotated=g.textureRotated||!1;c.offset=this._pointFromString(g.spriteOffset);c.size=this._sizeFromString(g.spriteSourceSize);c.aliases=g.aliases}else h=
g.frame,k=g.sourceSize,f=g.filename||f,c.rect=cc.rect(h.x,h.y,h.w,h.h),c.rotated=g.rotated||!1,c.offset=cc.p(0,0),c.size=cc.size(k.w,k.h);a[f]=c}}return{_inited:!0,frames:a,meta:d}},_addSpriteFramesByObject:function(a,b,c){cc.assert(a,cc._LogInfos.spriteFrameCache_addSpriteFrames_2);b&&b.frames&&(b=this._frameConfigCache[a]||this._getFrameConfigByJsonObject(a,b),this._createSpriteFrames(a,b,c))},_createSpriteFrames:function(a,b,c){var d=b.frames;b=b.meta;c?c instanceof cc.Texture2D||(cc.isString(c)?
c=cc.textureCache.addImage(c):cc.assert(0,cc._LogInfos.spriteFrameCache_addSpriteFrames_3)):(c=cc.path.changeBasename(a,b.image||".png"),c=cc.textureCache.addImage(c));a=this._spriteFramesAliases;b=this._spriteFrames;for(var e in d){var f=d[e],g=b[e];if(g)c.isLoaded()&&!g.textureLoaded()&&g.setTexture(c);else{g=new cc.SpriteFrame(c,f.rect,f.rotated,f.offset,f.size);if(f=f.aliases)for(var h=0,k=f.length;h<k;h++){var m=f[h];a[m]&&cc.log(cc._LogInfos.spriteFrameCache_addSpriteFrames,m);a[m]=e}cc._renderType===
cc.game.RENDER_TYPE_CANVAS&&g.isRotated()&&g.getTexture().isLoaded()&&(f=g.getTexture().getHtmlElementObj(),f=cc.Sprite.CanvasRenderCmd._cutRotateImageToCanvas(f,g.getRectInPixels()),h=new cc.Texture2D,h.initWithElement(f),h.handleLoadedTexture(),g.setTexture(h),f=g._rect,g.setRect(cc.rect(0,0,f.width,f.height)));b[e]=g}}},addSpriteFrames:function(a,b){cc.assert(a,cc._LogInfos.spriteFrameCache_addSpriteFrames_2);var c=this._frameConfigCache[a]||cc.loader.getRes(a);c&&c.frames&&(c=this._frameConfigCache[a]||
this._getFrameConfig(a),this._createSpriteFrames(a,c,b))},_checkConflict:function(a){a=a.frames;for(var b in a)this._spriteFrames[b]&&cc.log(cc._LogInfos.spriteFrameCache__checkConflict,b)},addSpriteFrame:function(a,b){this._spriteFrames[b]=a},removeSpriteFrames:function(){this._spriteFrames={};this._spriteFramesAliases={}},removeSpriteFrameByName:function(a){a&&(this._spriteFramesAliases[a]&&delete this._spriteFramesAliases[a],this._spriteFrames[a]&&delete this._spriteFrames[a])},removeSpriteFramesFromFile:function(a){var b=
this._spriteFrames,c=this._spriteFramesAliases;if(a=this._frameConfigCache[a]){a=a.frames;for(var d in a)if(b[d]){delete b[d];for(var e in c)c[e]===d&&delete c[e]}}},removeSpriteFramesFromTexture:function(a){var b=this._spriteFrames,c=this._spriteFramesAliases,d;for(d in b){var e=b[d];if(e&&e.getTexture()===a){delete b[d];for(var f in c)c[f]===d&&delete c[f]}}},getSpriteFrame:function(a){var b=this._spriteFrames[a];if(!b){var c=this._spriteFramesAliases[a];c&&((b=this._spriteFrames[c.toString()])||
delete this._spriteFramesAliases[a])}return b},_clear:function(){this._spriteFrames={};this._spriteFramesAliases={};this._frameConfigCache={}}};cc.configuration={ERROR:0,STRING:1,INT:2,DOUBLE:3,BOOLEAN:4,_maxTextureSize:0,_maxModelviewStackDepth:0,_supportsPVRTC:!1,_supportsNPOT:!1,_supportsBGRA8888:!1,_supportsDiscardFramebuffer:!1,_supportsShareableVAO:!1,_maxSamplesAllowed:0,_maxTextureUnits:0,_GlExtensions:"",_valueDict:{},_inited:!1,_init:function(){var a=this._valueDict;a["cocos2d.x.version"]=cc.ENGINE_VERSION;a["cocos2d.x.compiled_with_profiler"]=!1;a["cocos2d.x.compiled_with_gl_state_cache"]=cc.ENABLE_GL_STATE_CACHE;this._inited=
!0},getMaxTextureSize:function(){return this._maxTextureSize},getMaxModelviewStackDepth:function(){return this._maxModelviewStackDepth},getMaxTextureUnits:function(){return this._maxTextureUnits},supportsNPOT:function(){return this._supportsNPOT},supportsPVRTC:function(){return this._supportsPVRTC},supportsETC:function(){return!1},supportsS3TC:function(){return!1},supportsATITC:function(){return!1},supportsBGRA8888:function(){return this._supportsBGRA8888},supportsDiscardFramebuffer:function(){return this._supportsDiscardFramebuffer},
supportsShareableVAO:function(){return this._supportsShareableVAO},checkForGLExtension:function(a){return-1<this._GlExtensions.indexOf(a)},getValue:function(a,b){this._inited||this._init();var c=this._valueDict;return c[a]?c[a]:b},setValue:function(a,b){this._valueDict[a]=b},dumpInfo:function(){0===cc.ENABLE_GL_STATE_CACHE&&(cc.log(""),cc.log(cc._LogInfos.configuration_dumpInfo),cc.log(""))},gatherGPUInfo:function(){if(cc._renderType!==cc.game.RENDER_TYPE_CANVAS){this._inited||this._init();var a=
cc._renderContext,b=this._valueDict;b["gl.vendor"]=a.getParameter(a.VENDOR);b["gl.renderer"]=a.getParameter(a.RENDERER);b["gl.version"]=a.getParameter(a.VERSION);this._GlExtensions="";for(var c=a.getSupportedExtensions(),d=0;d<c.length;d++)this._GlExtensions+=c[d]+" ";this._maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE);b["gl.max_texture_size"]=this._maxTextureSize;this._maxTextureUnits=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS);b["gl.max_texture_units"]=this._maxTextureUnits;this._supportsPVRTC=
this.checkForGLExtension("GL_IMG_texture_compression_pvrtc");b["gl.supports_PVRTC"]=this._supportsPVRTC;this._supportsNPOT=!1;b["gl.supports_NPOT"]=this._supportsNPOT;this._supportsBGRA8888=this.checkForGLExtension("GL_IMG_texture_format_BGRA888");b["gl.supports_BGRA8888"]=this._supportsBGRA8888;this._supportsDiscardFramebuffer=this.checkForGLExtension("GL_EXT_discard_framebuffer");b["gl.supports_discard_framebuffer"]=this._supportsDiscardFramebuffer;this._supportsShareableVAO=this.checkForGLExtension("vertex_array_object");
b["gl.supports_vertex_array_object"]=this._supportsShareableVAO;cc.checkGLErrorDebug()}},loadConfigFile:function(a){this._inited||this._init();var b=cc.loader.getRes(a);if(!b)throw Error("Please load the resource first : "+a);cc.assert(b,cc._LogInfos.configuration_loadConfigFile_2,a);if(b=b.data)for(var c in b)this._valueDict[c]=b[c];else cc.log(cc._LogInfos.configuration_loadConfigFile,a)}};cc.g_NumberOfDraws=0;
cc.Director=cc.Class.extend({_landscape:!1,_nextDeltaTimeZero:!1,_paused:!1,_purgeDirectorInNextLoop:!1,_sendCleanupToScene:!1,_animationInterval:0,_oldAnimationInterval:0,_projection:0,_contentScaleFactor:1,_deltaTime:0,_winSizeInPoints:null,_lastUpdate:null,_nextScene:null,_notificationNode:null,_openGLView:null,_scenesStack:null,_projectionDelegate:null,_runningScene:null,_totalFrames:0,_secondsPerFrame:0,_dirtyRegion:null,_scheduler:null,_actionManager:null,_eventProjectionChanged:null,_eventAfterUpdate:null,
_eventAfterVisit:null,_eventAfterDraw:null,ctor:function(){var a=this;a._lastUpdate=Date.now();cc.eventManager.addCustomListener(cc.game.EVENT_SHOW,function(){a._lastUpdate=Date.now()})},init:function(){this._oldAnimationInterval=this._animationInterval=1/cc.defaultFPS;this._scenesStack=[];this._projection=cc.Director.PROJECTION_DEFAULT;this._projectionDelegate=null;this._totalFrames=0;this._lastUpdate=Date.now();this._purgeDirectorInNextLoop=this._paused=!1;this._winSizeInPoints=cc.size(0,0);this._openGLView=
null;this._contentScaleFactor=1;this._scheduler=new cc.Scheduler;cc.ActionManager?(this._actionManager=new cc.ActionManager,this._scheduler.scheduleUpdate(this._actionManager,cc.Scheduler.PRIORITY_SYSTEM,!1)):this._actionManager=null;this._eventAfterUpdate=new cc.EventCustom(cc.Director.EVENT_AFTER_UPDATE);this._eventAfterUpdate.setUserData(this);this._eventAfterVisit=new cc.EventCustom(cc.Director.EVENT_AFTER_VISIT);this._eventAfterVisit.setUserData(this);this._eventAfterDraw=new cc.EventCustom(cc.Director.EVENT_AFTER_DRAW);
this._eventAfterDraw.setUserData(this);this._eventProjectionChanged=new cc.EventCustom(cc.Director.EVENT_PROJECTION_CHANGED);this._eventProjectionChanged.setUserData(this);return!0},calculateDeltaTime:function(){var a=Date.now();this._nextDeltaTimeZero?(this._deltaTime=0,this._nextDeltaTimeZero=!1):this._deltaTime=(a-this._lastUpdate)/1E3;0<cc.game.config[cc.game.CONFIG_KEY.debugMode]&&0.2<this._deltaTime&&(this._deltaTime=1/60);this._lastUpdate=a},convertToGL:function(a){var b=cc.view,c=element.getBoundingClientRect(),
d=b._devicePixelRatio*(a.x-c.left);a=b._devicePixelRatio*(c.top+c.height-a.y);return b._isRotated?{x:b._viewPortRect.width-a,y:d}:{x:d,y:a}},convertToUI:function(a){var b=cc.view,c=element.getBoundingClientRect(),d={x:0,y:0};b._isRotated?(d.x=c.left+a.y/b._devicePixelRatio,d.y=c.top+c.height-(b._viewPortRect.width-a.x)/b._devicePixelRatio):(d.x=c.left+a.x/b._devicePixelRatio,d.y=c.top+c.height-a.y/b._devicePixelRatio);return d},drawScene:function(){var a=cc.renderer;this.calculateDeltaTime();this._paused||
(this._scheduler.update(this._deltaTime),cc.eventManager.dispatchEvent(this._eventAfterUpdate));this._nextScene&&this.setNextScene();this._beforeVisitScene&&this._beforeVisitScene();this._runningScene&&(a.childrenOrderDirty?(cc.renderer.clearRenderCommands(),cc.renderer.assignedZ=0,this._runningScene._renderCmd._curLevel=0,this._runningScene.visit(),a.resetFlag()):a.transformDirty()&&a.transform());a.clear();this._notificationNode&&this._notificationNode.visit();cc.eventManager.dispatchEvent(this._eventAfterVisit);
cc.g_NumberOfDraws=0;this._afterVisitScene&&this._afterVisitScene();a.rendering(cc._renderContext);this._totalFrames++;cc.eventManager.dispatchEvent(this._eventAfterDraw);this._calculateMPF()},_beforeVisitScene:null,_afterVisitScene:null,end:function(){this._purgeDirectorInNextLoop=!0},getContentScaleFactor:function(){return this._contentScaleFactor},getNotificationNode:function(){return this._notificationNode},getWinSize:function(){return cc.size(this._winSizeInPoints)},getWinSizeInPixels:function(){return cc.size(this._winSizeInPoints.width*
this._contentScaleFactor,this._winSizeInPoints.height*this._contentScaleFactor)},getVisibleSize:null,getVisibleOrigin:null,getZEye:null,pause:function(){this._paused||(this._oldAnimationInterval=this._animationInterval,this.setAnimationInterval(0.25),this._paused=!0)},popScene:function(){cc.assert(this._runningScene,cc._LogInfos.Director_popScene);this._scenesStack.pop();var a=this._scenesStack.length;0===a?this.end():(this._sendCleanupToScene=!0,this._nextScene=this._scenesStack[a-1])},purgeCachedData:function(){cc.animationCache._clear();
cc.spriteFrameCache._clear();cc.textureCache._clear()},purgeDirector:function(){this.getScheduler().unscheduleAll();cc.eventManager&&cc.eventManager.setEnabled(!1);this._runningScene&&(this._runningScene.onExitTransitionDidStart(),this._runningScene.onExit(),this._runningScene.cleanup());this._nextScene=this._runningScene=null;this._scenesStack.length=0;this.stopAnimation();this.purgeCachedData();cc.checkGLErrorDebug()},pushScene:function(a){cc.assert(a,cc._LogInfos.Director_pushScene);this._sendCleanupToScene=
!1;this._scenesStack.push(a);this._nextScene=a},runScene:function(a){cc.assert(a,cc._LogInfos.Director_pushScene);if(this._runningScene){var b=this._scenesStack.length;0===b?(this._sendCleanupToScene=!0,this._scenesStack[b]=a):(this._sendCleanupToScene=!0,this._scenesStack[b-1]=a);this._nextScene=a}else this.pushScene(a),this.startAnimation()},resume:function(){this._paused&&(this.setAnimationInterval(this._oldAnimationInterval),(this._lastUpdate=Date.now())||cc.log(cc._LogInfos.Director_resume),
this._paused=!1,this._deltaTime=0)},setContentScaleFactor:function(a){a!==this._contentScaleFactor&&(this._contentScaleFactor=a)},setDepthTest:null,setClearColor:null,setDefaultValues:function(){},setNextDeltaTimeZero:function(a){this._nextDeltaTimeZero=a},setNextScene:function(){var a=!1,b=!1;cc.TransitionScene&&(a=this._runningScene?this._runningScene instanceof cc.TransitionScene:!1,b=this._nextScene?this._nextScene instanceof cc.TransitionScene:!1);if(!b){if(b=this._runningScene)b.onExitTransitionDidStart(),
b.onExit();this._sendCleanupToScene&&b&&b.cleanup()}this._runningScene=this._nextScene;cc.renderer.childrenOrderDirty=!0;this._nextScene=null;a||null===this._runningScene||(this._runningScene.onEnter(),this._runningScene.onEnterTransitionDidFinish())},setNotificationNode:function(a){cc.renderer.childrenOrderDirty=!0;this._notificationNode&&(this._notificationNode.onExitTransitionDidStart(),this._notificationNode.onExit(),this._notificationNode.cleanup());if(this._notificationNode=a)this._notificationNode.onEnter(),
this._notificationNode.onEnterTransitionDidFinish()},getDelegate:function(){return this._projectionDelegate},setDelegate:function(a){this._projectionDelegate=a},setOpenGLView:null,setProjection:null,setViewport:null,getOpenGLView:null,getProjection:null,setAlphaBlending:null,isSendCleanupToScene:function(){return this._sendCleanupToScene},getRunningScene:function(){return this._runningScene},getRunningOrNextScene:function(){return this._nextScene?this._nextScene:this._runningScene},getAnimationInterval:function(){return this._animationInterval},
isDisplayStats:function(){return cc.profiler?cc.profiler.isShowingStats():!1},setDisplayStats:function(a){cc.profiler&&(a?cc.profiler.showStats():cc.profiler.hideStats())},getSecondsPerFrame:function(){return this._secondsPerFrame},isNextDeltaTimeZero:function(){return this._nextDeltaTimeZero},isPaused:function(){return this._paused},getTotalFrames:function(){return this._totalFrames},popToRootScene:function(){this.popToSceneStackLevel(1)},popToSceneStackLevel:function(a){cc.assert(this._runningScene,
cc._LogInfos.Director_popToSceneStackLevel_2);var b=this._scenesStack,c=b.length;if(0===a)this.end();else if(!(a>=c)){for(;c>a;){var d=b.pop();d.running&&(d.onExitTransitionDidStart(),d.onExit());d.cleanup();c--}this._nextScene=b[b.length-1];this._sendCleanupToScene=!0}},popAllBelowScene:function(){cc.assert(this._runningScene,cc._LogInfos.Director_popToSceneStackLevel_2);for(var a=this._scenesStack,b=0;b<a.length-1;b++){var c=a[b];c.running&&(c.onExitTransitionDidStart(),c.onExit());c.cleanup()}this._scenesStack=
[a[a.length-1]];this._sendCleanupToScene=!1},getScheduler:function(){return this._scheduler},setScheduler:function(a){this._scheduler!==a&&(this._scheduler=a)},getActionManager:function(){return this._actionManager},setActionManager:function(a){this._actionManager!==a&&(this._actionManager=a)},getDeltaTime:function(){return this._deltaTime},_calculateMPF:function(){this._secondsPerFrame=(Date.now()-this._lastUpdate)/1E3}});cc.Director.EVENT_PROJECTION_CHANGED="director_projection_changed";
cc.Director.EVENT_AFTER_UPDATE="director_after_update";cc.Director.EVENT_AFTER_VISIT="director_after_visit";cc.Director.EVENT_AFTER_DRAW="director_after_draw";
cc.DisplayLinkDirector=cc.Director.extend({invalid:!1,startAnimation:function(){this._nextDeltaTimeZero=!0;this.invalid=!1},mainLoop:function(){this._purgeDirectorInNextLoop?(this._purgeDirectorInNextLoop=!1,this.purgeDirector()):this.invalid||this.drawScene()},stopAnimation:function(){this.invalid=!0},setAnimationInterval:function(a){this._animationInterval=a;this.invalid||(this.stopAnimation(),this.startAnimation())}});cc.Director.sharedDirector=null;cc.Director.firstUseDirector=!0;
cc.Director._getInstance=function(){cc.Director.firstUseDirector&&(cc.Director.firstUseDirector=!1,cc.Director.sharedDirector=new cc.DisplayLinkDirector,cc.Director.sharedDirector.init());return cc.Director.sharedDirector};cc.defaultFPS=60;cc.Director.PROJECTION_2D=0;cc.Director.PROJECTION_3D=1;cc.Director.PROJECTION_CUSTOM=3;cc.Director.PROJECTION_DEFAULT=cc.Director.PROJECTION_2D;cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,function(){if(cc._renderType===cc.game.RENDER_TYPE_CANVAS){var a=cc.Director.prototype;a.getProjection=function(a){return this._projection};a.setProjection=function(a){this._projection=a;cc.eventManager.dispatchEvent(this._eventProjectionChanged)};a.setDepthTest=function(){};a.setClearColor=function(a){cc.renderer._clearColor=a;cc.renderer._clearFillStyle="rgb("+a.r+","+a.g+","+a.b+")"};a.setOpenGLView=function(a){this._winSizeInPoints.width=
cc._canvas.width;this._winSizeInPoints.height=cc._canvas.height;this._openGLView=a||cc.view;cc.eventManager&&cc.eventManager.setEnabled(!0)};a.getVisibleSize=function(){return this.getWinSize()};a.getVisibleOrigin=function(){return cc.p(0,0)}}else cc.Director._fpsImage=new Image,cc.Director._fpsImage.addEventListener("load",function(){cc.Director._fpsImageLoaded=!0}),cc._fpsImage&&(cc.Director._fpsImage.src=cc._fpsImage)});cc.PRIORITY_NON_SYSTEM=cc.PRIORITY_SYSTEM+1;cc.ListEntry=function(a,b,c,d,e,f,g){this.prev=a;this.next=b;this.callback=c;this.target=d;this.priority=e;this.paused=f;this.markedForDeletion=g};cc.HashUpdateEntry=function(a,b,c,d,e){this.list=a;this.entry=b;this.target=c;this.callback=d;this.hh=e};cc.HashTimerEntry=cc.hashSelectorEntry=function(a,b,c,d,e,f,g){this.timers=a;this.target=b;this.timerIndex=c;this.currentTimer=d;this.currentTimerSalvaged=e;this.paused=f;this.hh=g};
cc.Timer=cc.Class.extend({_scheduler:null,_elapsed:0,_runForever:!1,_useDelay:!1,_timesExecuted:0,_repeat:0,_delay:0,_interval:0,getInterval:function(){return this._interval},setInterval:function(a){this._interval=a},setupTimerWithInterval:function(a,b,c){this._elapsed=-1;this._interval=a;this._delay=c;this._useDelay=0<this._delay;this._repeat=b;this._runForever=this._repeat===cc.REPEAT_FOREVER},trigger:function(){return 0},cancel:function(){return 0},ctor:function(){this._scheduler=null;this._elapsed=
-1;this._useDelay=this._runForever=!1;this._interval=this._delay=this._repeat=this._timesExecuted=0},update:function(a){-1===this._elapsed?this._timesExecuted=this._elapsed=0:(this._elapsed+=a,this._runForever&&!this._useDelay?this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0):(this._useDelay?this._elapsed>=this._delay&&(this.trigger(),this._elapsed-=this._delay,this._timesExecuted+=1,this._useDelay=!1):this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0,this._timesExecuted+=
1),!this._runForever&&this._timesExecuted>this._repeat&&this.cancel()))}});
cc.TimerTargetSelector=cc.Timer.extend({_target:null,_selector:null,ctor:function(){this._selector=this._target=null},initWithSelector:function(a,b,c,d,e,f){this._scheduler=a;this._target=c;this._selector=b;this.setupTimerWithInterval(d,e,f);return!0},getSelector:function(){return this._selector},trigger:function(){this._target&&this._selector&&this._target.call(this._selector,this._elapsed)},cancel:function(){this._scheduler.unschedule(this._selector,this._target)}});
cc.TimerTargetCallback=cc.Timer.extend({_target:null,_callback:null,_key:null,ctor:function(){this._callback=this._target=null},initWithCallback:function(a,b,c,d,e,f,g){this._scheduler=a;this._target=c;this._callback=b;this._key=d;this.setupTimerWithInterval(e,f,g);return!0},getCallback:function(){return this._callback},getKey:function(){return this._key},trigger:function(){this._callback&&this._callback.call(this._target,this._elapsed)},cancel:function(){this._scheduler.unschedule(this._callback,
this._target)}});
cc.Scheduler=cc.Class.extend({_timeScale:1,_updatesNegList:null,_updates0List:null,_updatesPosList:null,_hashForTimers:null,_arrayForTimers:null,_hashForUpdates:null,_currentTarget:null,_currentTargetSalvaged:!1,_updateHashLocked:!1,ctor:function(){this._timeScale=1;this._updatesNegList=[];this._updates0List=[];this._updatesPosList=[];this._hashForUpdates={};this._hashForTimers={};this._currentTarget=null;this._updateHashLocked=this._currentTargetSalvaged=!1;this._arrayForTimers=[]},_schedulePerFrame:function(a,
b,c,d){var e=this._hashForUpdates[b.__instanceId];if(e&&e.entry)if(e.entry.priority!==c){if(this._updateHashLocked){cc.log("warning: you CANNOT change update priority in scheduled function");e.entry.markedForDeletion=!1;e.entry.paused=d;return}this.unscheduleUpdate(b)}else{e.entry.markedForDeletion=!1;e.entry.paused=d;return}0===c?this._appendIn(this._updates0List,a,b,d):0>c?this._priorityIn(this._updatesNegList,a,b,c,d):this._priorityIn(this._updatesPosList,a,b,c,d)},_removeHashElement:function(a){delete this._hashForTimers[a.target.__instanceId];
cc.arrayRemoveObject(this._arrayForTimers,a);a.Timer=null;a.target=null},_removeUpdateFromHash:function(a){if(a=this._hashForUpdates[a.target.__instanceId])cc.arrayRemoveObject(a.list,a.entry),delete this._hashForUpdates[a.target.__instanceId],a.entry=null,a.target=null},_priorityIn:function(a,b,c,d,e){b=new cc.ListEntry(null,null,b,c,d,e,!1);if(a){e=a.length-1;for(var f=0;f<=e&&!(d<a[f].priority);f++);a.splice(f,0,b)}else a=[],a.push(b);this._hashForUpdates[c.__instanceId]=new cc.HashUpdateEntry(a,
b,c,null);return a},_appendIn:function(a,b,c,d){b=new cc.ListEntry(null,null,b,c,0,d,!1);a.push(b);this._hashForUpdates[c.__instanceId]=new cc.HashUpdateEntry(a,b,c,null,null)},setTimeScale:function(a){this._timeScale=a},getTimeScale:function(){return this._timeScale},update:function(a){this._updateHashLocked=!0;1!==this._timeScale&&(a*=this._timeScale);var b,c,d,e;b=0;c=this._updatesNegList;for(d=c.length;b<d;b++)e=c[b],e.paused||e.markedForDeletion||e.callback(a);b=0;c=this._updates0List;for(d=
c.length;b<d;b++)e=c[b],e.paused||e.markedForDeletion||e.callback(a);b=0;c=this._updatesPosList;for(d=c.length;b<d;b++)e=c[b],e.paused||e.markedForDeletion||e.callback(a);d=this._arrayForTimers;for(b=0;b<d.length;b++){this._currentTarget=c=d[b];this._currentTargetSalvaged=!1;if(!c.paused)for(c.timerIndex=0;c.timerIndex<c.timers.length;++c.timerIndex)c.currentTimer=c.timers[c.timerIndex],c.currentTimerSalvaged=!1,c.currentTimer.update(a),c.currentTimer=null;this._currentTargetSalvaged&&0===this._currentTarget.timers.length&&
this._removeHashElement(this._currentTarget)}b=0;for(c=this._updatesNegList;b<c.length;)e=c[b],e.markedForDeletion?this._removeUpdateFromHash(e):b++;b=0;for(c=this._updates0List;b<c.length;)e=c[b],e.markedForDeletion?this._removeUpdateFromHash(e):b++;b=0;for(c=this._updatesPosList;b<c.length;)e=c[b],e.markedForDeletion?this._removeUpdateFromHash(e):b++;this._updateHashLocked=!1;this._currentTarget=null},scheduleCallbackForTarget:function(a,b,c,d,e,f){this.schedule(b,a,c,d,e,f,a.__instanceId+"")},
schedule:function(a,b,c,d,e,f,g){var h=!1;if("function"!==typeof a)var k=a,h=!0;if(!1===h){if(4===arguments.length||5===arguments.length)g=e,f=d,e=0,d=cc.REPEAT_FOREVER}else 4===arguments.length&&(f=d,d=cc.REPEAT_FOREVER,e=0);void 0===g&&(g=b.__instanceId+"");cc.assert(b,cc._LogInfos.Scheduler_scheduleCallbackForTarget_3);var m=this._hashForTimers[b.__instanceId];m?cc.assert(m.paused===f,""):(m=new cc.HashTimerEntry(null,b,0,null,null,f,null),this._arrayForTimers.push(m),this._hashForTimers[b.__instanceId]=
m);var n,p;if(null==m.timers)m.timers=[];else if(!1===h)for(p=0;p<m.timers.length;p++){if(n=m.timers[p],a===n._callback){cc.log(cc._LogInfos.Scheduler_scheduleCallbackForTarget,n.getInterval().toFixed(4),c.toFixed(4));n._interval=c;return}}else for(p=0;p<m.timers.length;++p)if((n=m.timers[p])&&k===n.getSelector()){cc.log("CCScheduler#scheduleSelector. Selector already scheduled. Updating interval from: %.4f to %.4f",n.getInterval(),c);n.setInterval(c);return}!1===h?(n=new cc.TimerTargetCallback,n.initWithCallback(this,
a,b,g,c,d,e)):(n=new cc.TimerTargetSelector,n.initWithSelector(this,k,b,c,d,e));m.timers.push(n)},scheduleUpdate:function(a,b,c){this._schedulePerFrame(function(b){a.update(b)},a,b,c)},_getUnscheduleMark:function(a,b){switch(typeof a){case "number":case "string":return a===b.getKey();case "function":return a===b._callback;default:return a===b.getSelector()}},unschedule:function(a,b){if(b&&a){var c=this._hashForTimers[b.__instanceId];if(c)for(var d=c.timers,e=0,f=d.length;e<f;e++){var g=d[e];if(this._getUnscheduleMark(a,
g)){g!==c.currentTimer||c.currentTimerSalvaged||(c.currentTimerSalvaged=!0);d.splice(e,1);c.timerIndex>=e&&c.timerIndex--;0===d.length&&(this._currentTarget===c?this._currentTargetSalvaged=!0:this._removeHashElement(c));break}}}},unscheduleUpdate:function(a){null!=a&&(a=this._hashForUpdates[a.__instanceId])&&(this._updateHashLocked?a.entry.markedForDeletion=!0:this._removeUpdateFromHash(a.entry))},unscheduleAllForTarget:function(a){if(null!=a){var b=this._hashForTimers[a.__instanceId];b&&(-1<b.timers.indexOf(b.currentTimer)&&
!b.currentTimerSalvaged&&(b.currentTimerSalvaged=!0),b.timers.length=0,this._currentTarget===b?this._currentTargetSalvaged=!0:this._removeHashElement(b));this.unscheduleUpdate(a)}},unscheduleAll:function(){this.unscheduleAllWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)},unscheduleAllWithMinPriority:function(a){var b,c,d=this._arrayForTimers;for(b=d.length-1;0<=b;b--)c=d[b],this.unscheduleAllForTarget(c.target);d=0;if(0>a)for(b=0;b<this._updatesNegList.length;)d=this._updatesNegList.length,(c=this._updatesNegList[b])&&
c.priority>=a&&this.unscheduleUpdate(c.target),d==this._updatesNegList.length&&b++;if(0>=a)for(b=0;b<this._updates0List.length;)d=this._updates0List.length,(c=this._updates0List[b])&&this.unscheduleUpdate(c.target),d==this._updates0List.length&&b++;for(b=0;b<this._updatesPosList.length;)d=this._updatesPosList.length,(c=this._updatesPosList[b])&&c.priority>=a&&this.unscheduleUpdate(c.target),d==this._updatesPosList.length&&b++},isScheduled:function(a,b){cc.assert(a,"Argument key must not be empty");
cc.assert(b,"Argument target must be non-nullptr");var c=this._hashForUpdates[b.__instanceId];if(!c)return!1;if(null!=c.timers)for(var c=c.timers,d=0;d<c.length;++d)if(a===c[d].getKey())return!0;return!1},pauseAllTargets:function(){return this.pauseAllTargetsWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)},pauseAllTargetsWithMinPriority:function(a){var b=[],c,d=this._arrayForTimers,e,f;e=0;for(f=d.length;e<f;e++)if(c=d[e])c.paused=!0,b.push(c.target);if(0>a)for(e=0;e<this._updatesNegList.length;e++)(c=
this._updatesNegList[e])&&c.priority>=a&&(c.paused=!0,b.push(c.target));if(0>=a)for(e=0;e<this._updates0List.length;e++)if(c=this._updates0List[e])c.paused=!0,b.push(c.target);for(e=0;e<this._updatesPosList.length;e++)(c=this._updatesPosList[e])&&c.priority>=a&&(c.paused=!0,b.push(c.target));return b},resumeTargets:function(a){if(a)for(var b=0;b<a.length;b++)this.resumeTarget(a[b])},pauseTarget:function(a){cc.assert(a,cc._LogInfos.Scheduler_pauseTarget);var b=this._hashForTimers[a.__instanceId];b&&
(b.paused=!0);(a=this._hashForUpdates[a.__instanceId])&&(a.entry.paused=!0)},resumeTarget:function(a){cc.assert(a,cc._LogInfos.Scheduler_resumeTarget);var b=this._hashForTimers[a.__instanceId];b&&(b.paused=!1);(a=this._hashForUpdates[a.__instanceId])&&(a.entry.paused=!1)},isTargetPaused:function(a){cc.assert(a,cc._LogInfos.Scheduler_isTargetPaused);var b=this._hashForTimers[a.__instanceId];return b?b.paused:(a=this._hashForUpdates[a.__instanceId])?a.entry.paused:!1},scheduleUpdateForTarget:function(a,
b,c){this.scheduleUpdate(a,b,c)},unscheduleCallbackForTarget:function(a,b){this.unschedule(b,a)},unscheduleUpdateForTarget:function(a){this.unscheduleUpdate(a)},unscheduleAllCallbacksForTarget:function(a){this.unschedule(a.__instanceId+"",a)},unscheduleAllCallbacks:function(){this.unscheduleAllWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)},unscheduleAllCallbacksWithMinPriority:function(a){this.unscheduleAllWithMinPriority(a)}});cc.Scheduler.PRIORITY_SYSTEM=-2147483648;cc.PI2=2*Math.PI;
cc.DrawingPrimitiveCanvas=cc.Class.extend({_cacheArray:[],_renderContext:null,ctor:function(a){this._renderContext=a},drawPoint:function(a,b){b||(b=1);var c=cc.view.getScaleX(),d=cc.view.getScaleY(),d=cc.p(a.x*c,a.y*d),e=this._renderContext.getContext();e.beginPath();e.arc(d.x,-d.y,b*c,0,2*Math.PI,!1);e.closePath();e.fill()},drawPoints:function(a,b,c){if(null!=a){c||(c=1);b=this._renderContext.getContext();var d=cc.view.getScaleX(),e=cc.view.getScaleY();b.beginPath();for(var f=0,g=a.length;f<g;f++)b.arc(a[f].x*
d,-a[f].y*e,c*d,0,2*Math.PI,!1);b.closePath();b.fill()}},drawLine:function(a,b){var c=this._renderContext.getContext();cc.view.getScaleX();cc.view.getScaleY();c.beginPath();c.moveTo(a.x,-a.y);c.lineTo(b.x,-b.y);c.closePath();c.stroke()},drawRect:function(a,b){this.drawLine(cc.p(a.x,a.y),cc.p(b.x,a.y));this.drawLine(cc.p(b.x,a.y),cc.p(b.x,b.y));this.drawLine(cc.p(b.x,b.y),cc.p(a.x,b.y));this.drawLine(cc.p(a.x,b.y),cc.p(a.x,a.y))},drawSolidRect:function(a,b,c){a=[a,cc.p(b.x,a.y),b,cc.p(a.x,b.y)];this.drawSolidPoly(a,
4,c)},drawPoly:function(a,b,c,d){d=d||!1;if(null!=a){if(3>a.length)throw Error("Polygon's point must greater than 2");var e=a[0];b=this._renderContext.getContext();cc.view.getScaleX();cc.view.getScaleY();b.beginPath();b.moveTo(e.x,-e.y);for(var e=1,f=a.length;e<f;e++)b.lineTo(a[e].x,-a[e].y);c&&b.closePath();d?b.fill():b.stroke()}},drawSolidPoly:function(a,b,c){this.setDrawColor(c.r,c.g,c.b,c.a);this.drawPoly(a,b,!0,!0)},drawCircle:function(a,b,c,d,e){e=e||!1;d=this._renderContext.getContext();cc.view.getScaleX();
cc.view.getScaleY();d.beginPath();d.arc(0|a.x,0|-a.y,b,-c,-(c-2*Math.PI),!1);e&&d.lineTo(0|a.x,0|-a.y);d.stroke()},drawQuadBezier:function(a,b,c,d){for(var e=this._cacheArray,f=e.length=0,g=0;g<d;g++){var h=Math.pow(1-f,2)*a.x+2*(1-f)*f*b.x+f*f*c.x,k=Math.pow(1-f,2)*a.y+2*(1-f)*f*b.y+f*f*c.y;e.push(cc.p(h,k));f+=1/d}e.push(cc.p(c.x,c.y));this.drawPoly(e,d+1,!1,!1)},drawCubicBezier:function(a,b,c,d,e){for(var f=this._cacheArray,g=f.length=0,h=0;h<e;h++){var k=Math.pow(1-g,3)*a.x+3*Math.pow(1-g,2)*
g*b.x+3*(1-g)*g*g*c.x+g*g*g*d.x,m=Math.pow(1-g,3)*a.y+3*Math.pow(1-g,2)*g*b.y+3*(1-g)*g*g*c.y+g*g*g*d.y;f.push(cc.p(k,m));g+=1/e}f.push(cc.p(d.x,d.y));this.drawPoly(f,e+1,!1,!1)},drawCatmullRom:function(a,b){this.drawCardinalSpline(a,0.5,b)},drawCardinalSpline:function(a,b,c){cc._renderContext.setStrokeStyle("rgba(255,255,255,1)");var d=this._cacheArray;d.length=0;for(var e,f,g=1/a.length,h=0;h<c+1;h++)f=h/c,1===f?(e=a.length-1,f=1):(e=0|f/g,f=(f-g*e)/g),e=cc.CardinalSplineAt(cc.getControlPointAt(a,
e-1),cc.getControlPointAt(a,e-0),cc.getControlPointAt(a,e+1),cc.getControlPointAt(a,e+2),b,f),d.push(e);this.drawPoly(d,c+1,!1,!1)},drawImage:function(a,b,c,d,e){var f=arguments.length,g=this._renderContext.getContext();switch(f){case 2:g.drawImage(a,b.x,-(b.y+a.height));break;case 3:g.drawImage(a,b.x,-(b.y+c.height),c.width,c.height);break;case 5:g.drawImage(a,b.x,b.y,c.width,c.height,d.x,-(d.y+e.height),e.width,e.height);break;default:throw Error("Argument must be non-nil");}},drawStar:function(a,
b,c){a=a||this._renderContext;var d=a.getContext();c="rgba("+(0|c.r)+","+(0|c.g)+","+(0|c.b);a.setFillStyle(c+",1)");var e=b/10;d.beginPath();d.moveTo(-b,b);d.lineTo(0,e);d.lineTo(b,b);d.lineTo(e,0);d.lineTo(b,-b);d.lineTo(0,-e);d.lineTo(-b,-b);d.lineTo(-e,0);d.lineTo(-b,b);d.closePath();d.fill();var f=d.createRadialGradient(0,0,e,0,0,b);f.addColorStop(0,c+", 1)");f.addColorStop(0.3,c+", 0.8)");f.addColorStop(1,c+", 0.0)");a.setFillStyle(f);d.beginPath();d.arc(0,0,b-e,0,cc.PI2,!1);d.closePath();d.fill()},
drawColorBall:function(a,b,c){a=a||this._renderContext;var d=a.getContext();b*=cc.view.getScaleX();c="rgba("+(0|c.r)+","+(0|c.g)+","+(0|c.b);var e=d.createRadialGradient(0,0,b/10,0,0,b);e.addColorStop(0,c+", 1)");e.addColorStop(0.3,c+", 0.8)");e.addColorStop(0.6,c+", 0.4)");e.addColorStop(1,c+", 0.0)");a.setFillStyle(e);d.beginPath();d.arc(0,0,b,0,cc.PI2,!1);d.closePath();d.fill()},fillText:function(a,b,c){this._renderContext.getContext().fillText(a,b,-c)},setDrawColor:function(a,b,c,d){this._renderContext.setFillStyle("rgba("+
a+","+b+","+c+","+d/255+")");this._renderContext.setStrokeStyle("rgba("+a+","+b+","+c+","+d/255+")")},setPointSize:function(a){},setLineWidth:function(a){this._renderContext.getContext().lineWidth=a*cc.view.getScaleX()}});cc._tmp.PrototypeLabelTTF=function(){var a=cc.LabelTTF.prototype;cc.defineGetterSetter(a,"color",a.getColor,a.setColor);cc.defineGetterSetter(a,"opacity",a.getOpacity,a.setOpacity);cc.defineGetterSetter(a,"string",a.getString,a.setString);cc.defineGetterSetter(a,"textAlign",a.getHorizontalAlignment,a.setHorizontalAlignment);cc.defineGetterSetter(a,"verticalAlign",a.getVerticalAlignment,a.setVerticalAlignment);cc.defineGetterSetter(a,"fontSize",a.getFontSize,a.setFontSize);cc.defineGetterSetter(a,
"fontName",a.getFontName,a.setFontName);cc.defineGetterSetter(a,"font",a._getFont,a._setFont);cc.defineGetterSetter(a,"boundingWidth",a._getBoundingWidth,a._setBoundingWidth);cc.defineGetterSetter(a,"boundingHeight",a._getBoundingHeight,a._setBoundingHeight);cc.defineGetterSetter(a,"fillStyle",a._getFillStyle,a.setFontFillColor);cc.defineGetterSetter(a,"strokeStyle",a._getStrokeStyle,a._setStrokeStyle);cc.defineGetterSetter(a,"lineWidth",a._getLineWidth,a._setLineWidth);cc.defineGetterSetter(a,"shadowOffsetX",
a._getShadowOffsetX,a._setShadowOffsetX);cc.defineGetterSetter(a,"shadowOffsetY",a._getShadowOffsetY,a._setShadowOffsetY);cc.defineGetterSetter(a,"shadowOpacity",a._getShadowOpacity,a._setShadowOpacity);cc.defineGetterSetter(a,"shadowBlur",a._getShadowBlur,a._setShadowBlur)};cc.LabelTTF=cc.Sprite.extend({_dimensions:null,_hAlignment:cc.TEXT_ALIGNMENT_CENTER,_vAlignment:cc.VERTICAL_TEXT_ALIGNMENT_TOP,_fontName:null,_fontSize:0,_string:"",_originalText:null,_onCacheCanvasMode:!0,_shadowEnabled:!1,_shadowOffset:null,_shadowOpacity:0,_shadowBlur:0,_shadowColor:null,_strokeEnabled:!1,_strokeColor:null,_strokeSize:0,_textFillColor:null,_strokeShadowOffsetX:0,_strokeShadowOffsetY:0,_needUpdateTexture:!1,_lineWidths:null,_className:"LabelTTF",_fontStyle:"normal",_fontWeight:"normal",
_lineHeight:"normal",initWithString:function(a,b,c,d,e,f){a=a?a+"":"";c=c||16;d=d||cc.size(0,0);e=e||cc.TEXT_ALIGNMENT_LEFT;f=f||cc.VERTICAL_TEXT_ALIGNMENT_TOP;this._opacityModifyRGB=!1;this._dimensions=cc.size(d.width,d.height);this._fontName=b||"Arial";this._hAlignment=e;this._vAlignment=f;this._fontSize=c;this._renderCmd._setFontStyle(this._fontName,c,this._fontStyle,this._fontWeight);this.string=a;this._renderCmd._setColorsString();this._renderCmd._updateTexture();this._setUpdateTextureDirty();
this._scaleX=this._scaleY=1/cc.view.getDevicePixelRatio();return!0},_setUpdateTextureDirty:function(){this._needUpdateTexture=!0;this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.textDirty)},ctor:function(a,b,c,d,e,f){cc.Sprite.prototype.ctor.call(this);this._dimensions=cc.size(0,0);this._hAlignment=cc.TEXT_ALIGNMENT_LEFT;this._vAlignment=cc.VERTICAL_TEXT_ALIGNMENT_TOP;this._opacityModifyRGB=!1;this._fontName="Arial";this._shadowEnabled=!1;this._shadowOffset=cc.p(0,0);this._shadowBlur=this._shadowOpacity=
0;this._strokeEnabled=!1;this._strokeColor=cc.color(255,255,255,255);this._strokeSize=0;this._textFillColor=cc.color(255,255,255,255);this._strokeShadowOffsetY=this._strokeShadowOffsetX=0;this._needUpdateTexture=!1;this._lineWidths=[];this._renderCmd._setColorsString();this._textureLoaded=!0;b&&b instanceof cc.FontDefinition?this.initWithStringAndTextDefinition(a,b):cc.LabelTTF.prototype.initWithString.call(this,a,b,c,d,e,f)},init:function(){return this.initWithString(" ",this._fontName,this._fontSize)},
description:function(){return"\x3ccc.LabelTTF | FontName \x3d"+this._fontName+" FontSize \x3d "+this._fontSize.toFixed(1)+"\x3e"},getLineHeight:function(){return!this._lineHeight||this._lineHeight.charAt?this._renderCmd._getFontClientHeight():this._lineHeight||this._renderCmd._getFontClientHeight()},setLineHeight:function(a){this._lineHeight=a},getString:function(){return this._string},getHorizontalAlignment:function(){return this._hAlignment},getVerticalAlignment:function(){return this._vAlignment},
getDimensions:function(){return cc.size(this._dimensions)},getFontSize:function(){return this._fontSize},getFontName:function(){return this._fontName},initWithStringAndTextDefinition:function(a,b){this._updateWithTextDefinition(b,!1);this.string=a;return!0},setTextDefinition:function(a){a&&this._updateWithTextDefinition(a,!0)},getTextDefinition:function(){return this._prepareTextDefinition(!1)},enableShadow:function(a,b,c,d){null!=a.r&&null!=a.g&&null!=a.b&&null!=a.a?this._enableShadow(a,b,c):this._enableShadowNoneColor(a,
b,c,d)},_enableShadowNoneColor:function(a,b,c,d){c=c||0.5;!1===this._shadowEnabled&&(this._shadowEnabled=!0);var e=this._shadowOffset;if(e&&e.x!==a||e._y!==b)e.x=a,e.y=b;this._shadowOpacity!==c&&(this._shadowOpacity=c);this._renderCmd._setColorsString();this._shadowBlur!==d&&(this._shadowBlur=d);this._setUpdateTextureDirty()},_enableShadow:function(a,b,c){this._shadowColor||(this._shadowColor=cc.color(255,255,255,128));this._shadowColor.r=a.r;this._shadowColor.g=a.g;this._shadowColor.b=a.b;this._enableShadowNoneColor(b.width||
b.x||0,b.height||b.y||0,null!=a.a?a.a/255:0.5,c)},_getShadowOffsetX:function(){return this._shadowOffset.x},_setShadowOffsetX:function(a){!1===this._shadowEnabled&&(this._shadowEnabled=!0);this._shadowOffset.x!==a&&(this._shadowOffset.x=a,this._setUpdateTextureDirty())},_getShadowOffsetY:function(){return this._shadowOffset._y},_setShadowOffsetY:function(a){!1===this._shadowEnabled&&(this._shadowEnabled=!0);this._shadowOffset._y!==a&&(this._shadowOffset._y=a,this._setUpdateTextureDirty())},_getShadowOffset:function(){return cc.p(this._shadowOffset.x,
this._shadowOffset.y)},_setShadowOffset:function(a){!1===this._shadowEnabled&&(this._shadowEnabled=!0);if(this._shadowOffset.x!==a.x||this._shadowOffset.y!==a.y)this._shadowOffset.x=a.x,this._shadowOffset.y=a.y,this._setUpdateTextureDirty()},_getShadowOpacity:function(){return this._shadowOpacity},_setShadowOpacity:function(a){!1===this._shadowEnabled&&(this._shadowEnabled=!0);this._shadowOpacity!==a&&(this._shadowOpacity=a,this._renderCmd._setColorsString(),this._setUpdateTextureDirty())},_getShadowBlur:function(){return this._shadowBlur},
_setShadowBlur:function(a){!1===this._shadowEnabled&&(this._shadowEnabled=!0);this._shadowBlur!==a&&(this._shadowBlur=a,this._setUpdateTextureDirty())},disableShadow:function(){this._shadowEnabled&&(this._shadowEnabled=!1,this._setUpdateTextureDirty())},enableStroke:function(a,b,c){!1===this._strokeEnabled&&(this._strokeEnabled=!0);var d=this._strokeColor;if(d.r!==a.r||d.g!==a.g||d.b!==a.b)d.r=a.r,d.g=a.g,d.b=a.b,this._renderCmd._setCustomColorsString(c),this._renderCmd._setColorsString();this._strokeSize!==
b&&(this._strokeSize=b||0);this._setUpdateTextureDirty()},_getStrokeStyle:function(){return this._strokeColor},_setStrokeStyle:function(a){!1===this._strokeEnabled&&(this._strokeEnabled=!0);var b=this._strokeColor;if(b.r!==a.r||b.g!==a.g||b.b!==a.b)b.r=a.r,b.g=a.g,b.b=a.b,this._renderCmd._setColorsString(),this._setUpdateTextureDirty()},_getLineWidth:function(){return this._strokeSize},_setLineWidth:function(a){!1===this._strokeEnabled&&(this._strokeEnabled=!0);this._strokeSize!==a&&(this._strokeSize=
a||0,this._setUpdateTextureDirty())},disableStroke:function(){this._strokeEnabled&&(this._strokeEnabled=!1,this._setUpdateTextureDirty())},setFontFillColor:function(a){var b=this._textFillColor;if(b.r!==a.r||b.g!==a.g||b.b!==a.b)b.r=a.r,b.g=a.g,b.b=a.b,this._renderCmd._setColorsString(),this._needUpdateTexture=!0},_getFillStyle:function(){return this._textFillColor},_updateWithTextDefinition:function(a,b){a.fontDimensions?(this._dimensions.width=a.boundingWidth,this._dimensions.height=a.boundingHeight):
(this._dimensions.width=0,this._dimensions.height=0);this._hAlignment=a.textAlign;this._vAlignment=a.verticalAlign;this._fontName=a.fontName;this._fontSize=a.fontSize||12;this._lineHeight=a.lineHeight?a.lineHeight:this._fontSize;this._renderCmd._setFontStyle(a);a.shadowEnabled&&this.enableShadow(a.shadowOffsetX,a.shadowOffsetY,a.shadowOpacity,a.shadowBlur);a.strokeEnabled&&this.enableStroke(a.strokeStyle,a.lineWidth);this.setFontFillColor(a.fillStyle);b&&this._renderCmd._updateTexture();var c=cc.Node._dirtyFlags;
this._renderCmd.setDirtyFlag(c.colorDirty|c.opacityDirty|c.textDirty)},_prepareTextDefinition:function(a){var b=new cc.FontDefinition;a?(b.fontSize=this._fontSize,b.boundingWidth=cc.contentScaleFactor()*this._dimensions.width,b.boundingHeight=cc.contentScaleFactor()*this._dimensions.height):(b.fontSize=this._fontSize,b.boundingWidth=this._dimensions.width,b.boundingHeight=this._dimensions.height);b.fontName=this._fontName;b.textAlign=this._hAlignment;b.verticalAlign=this._vAlignment;if(this._strokeEnabled){b.strokeEnabled=
!0;var c=this._strokeColor;b.strokeStyle=cc.color(c.r,c.g,c.b);b.lineWidth=this._strokeSize}else b.strokeEnabled=!1;this._shadowEnabled?(b.shadowEnabled=!0,b.shadowBlur=this._shadowBlur,b.shadowOpacity=this._shadowOpacity,b.shadowOffsetX=(a?cc.contentScaleFactor():1)*this._shadowOffset.x,b.shadowOffsetY=(a?cc.contentScaleFactor():1)*this._shadowOffset.y):b._shadowEnabled=!1;a=this._textFillColor;b.fillStyle=cc.color(a.r,a.g,a.b);return b},getScale:function(){this._scaleX!==this._scaleY&&cc.log(cc._LogInfos.Node_getScale);
return this._scaleX*cc.view.getDevicePixelRatio()},setScale:function(a,b){this._scaleX=a/cc.view.getDevicePixelRatio();this._scaleY=(b||0===b?b:a)/cc.view.getDevicePixelRatio();this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getScaleX:function(){return this._scaleX*cc.view.getDevicePixelRatio()},setScaleX:function(a){this._scaleX=a/cc.view.getDevicePixelRatio();this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getScaleY:function(){return this._scaleY*cc.view.getDevicePixelRatio()},
setScaleY:function(a){this._scaleY=a/cc.view.getDevicePixelRatio();this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},setString:function(a){a=String(a);this._originalText!==a&&(this._originalText=a+"",this._updateString(),this._setUpdateTextureDirty(),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty))},_updateString:function(){this._string&&""!==this._string||this._string===this._originalText||(cc.renderer.childrenOrderDirty=!0);this._string=this._originalText},setHorizontalAlignment:function(a){a!==
this._hAlignment&&(this._hAlignment=a,this._setUpdateTextureDirty())},setVerticalAlignment:function(a){a!==this._vAlignment&&(this._vAlignment=a,this._setUpdateTextureDirty())},setDimensions:function(a,b){var c;void 0===b?(c=a.width,b=a.height):c=a;if(c!==this._dimensions.width||b!==this._dimensions.height)this._dimensions.width=c,this._dimensions.height=b,this._updateString(),this._setUpdateTextureDirty()},_getBoundingWidth:function(){return this._dimensions.width},_setBoundingWidth:function(a){a!==
this._dimensions.width&&(this._dimensions.width=a,this._updateString(),this._setUpdateTextureDirty())},_getBoundingHeight:function(){return this._dimensions.height},_setBoundingHeight:function(a){a!==this._dimensions.height&&(this._dimensions.height=a,this._updateString(),this._setUpdateTextureDirty())},setFontSize:function(a){this._fontSize!==a&&(this._fontSize=a,this._renderCmd._setFontStyle(this._fontName,this._fontSize,this._fontStyle,this._fontWeight),this._setUpdateTextureDirty())},setFontName:function(a){this._fontName&&
this._fontName!==a&&(this._fontName=a,this._renderCmd._setFontStyle(this._fontName,this._fontSize,this._fontStyle,this._fontWeight),this._setUpdateTextureDirty())},_getFont:function(){return this._renderCmd._getFontStyle()},_setFont:function(a){if(a=cc.LabelTTF._fontStyleRE.exec(a))this._fontSize=parseInt(a[1]),this._fontName=a[2],this._renderCmd._setFontStyle(this._fontName,this._fontSize,this._fontStyle,this._fontWeight),this._setUpdateTextureDirty()},getContentSize:function(){this._needUpdateTexture&&
this._renderCmd._updateTTF();return cc.size(this._contentSize)},_getWidth:function(){this._needUpdateTexture&&this._renderCmd._updateTTF();return this._contentSize.width},_getHeight:function(){this._needUpdateTexture&&this._renderCmd._updateTTF();return this._contentSize.height},setTextureRect:function(a,b,c){cc.Sprite.prototype.setTextureRect.call(this,a,b,c,!1)},setDrawMode:function(a){this._onCacheCanvasMode=a},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_WEBGL?new cc.LabelTTF.WebGLRenderCmd(this):
this._onCacheCanvasMode?new cc.LabelTTF.CacheCanvasRenderCmd(this):new cc.LabelTTF.CanvasRenderCmd(this)},_setFontStyle:function(a){this._fontStyle!==a&&(this._fontStyle=a,this._renderCmd._setFontStyle(this._fontName,this._fontSize,this._fontStyle,this._fontWeight),this._setUpdateTextureDirty())},_getFontStyle:function(){return this._fontStyle},_setFontWeight:function(a){this._fontWeight!==a&&(this._fontWeight=a,this._renderCmd._setFontStyle(this._fontName,this._fontSize,this._fontStyle,this._fontWeight),
this._setUpdateTextureDirty())},_getFontWeight:function(){return this._fontWeight}});cc.assert(cc.isFunction(cc._tmp.PrototypeLabelTTF),cc._LogInfos.MissingFile,"LabelTTFPropertyDefine.js");cc._tmp.PrototypeLabelTTF();delete cc._tmp.PrototypeLabelTTF;cc.LabelTTF._fontStyleRE=/^(\d+)px\s+['"]?([\w\s\d]+)['"]?$/;cc.LabelTTF.create=function(a,b,c,d,e,f){return new cc.LabelTTF(a,b,c,d,e,f)};cc.LabelTTF.createWithFontDefinition=cc.LabelTTF.create;cc.LabelTTF.__labelHeightDiv=document.createElement("div");
cc.LabelTTF.__labelHeightDiv.style.fontFamily="Arial";cc.LabelTTF.__labelHeightDiv.style.position="absolute";cc.LabelTTF.__labelHeightDiv.style.left="-100px";cc.LabelTTF.__labelHeightDiv.style.top="-100px";cc.LabelTTF.__labelHeightDiv.style.lineHeight="normal";document.body?document.body.appendChild(cc.LabelTTF.__labelHeightDiv):window.addEventListener("load",function(){this.removeEventListener("load",arguments.callee,!1);document.body.appendChild(cc.LabelTTF.__labelHeightDiv)},!1);
cc.LabelTTF.__getFontHeightByDiv=function(a,b){var c,d=cc.LabelTTF.__labelHeightDiv;if(a instanceof cc.FontDefinition){c=cc.LabelTTF.__fontHeightCache[a._getCanvasFontStr()];if(0<c)return c;d.innerHTML="ajghl~!";d.style.fontFamily=a.fontName;d.style.fontSize=a.fontSize+"px";d.style.fontStyle=a.fontStyle;d.style.fontWeight=a.fontWeight;c=d.clientHeight;cc.LabelTTF.__fontHeightCache[a._getCanvasFontStr()]=c}else{c=cc.LabelTTF.__fontHeightCache[a+"."+b];if(0<c)return c;d.innerHTML="ajghl~!";d.style.fontFamily=
a;d.style.fontSize=b+"px";c=d.clientHeight;cc.LabelTTF.__fontHeightCache[a+"."+b]=c}d.innerHTML="";return c};cc.LabelTTF.__fontHeightCache={};cc.LabelTTF._textAlign=["left","center","right"];cc.LabelTTF._textBaseline=["top","middle","bottom"];cc.LabelTTF.wrapInspection=!0;cc.LabelTTF._wordRex=/([a-zA-Z0-9\u00c4\u00d6\u00dc\u00e4\u00f6\u00fc\u00df\u00e9\u00e8\u00e7\u00e0\u00f9\u00ea\u00e2\u00ee\u00f4\u00fb]+|\S)/;cc.LabelTTF._symbolRex=/^[!,.:;}\]%\?>\u3001\u2018\u201c\u300b\uff1f\u3002\uff0c\uff01]/;cc.LabelTTF._lastWordRex=/([a-zA-Z0-9\u00c4\u00d6\u00dc\u00e4\u00f6\u00fc\u00df\u00e9\u00e8\u00e7\u00e0\u00f9\u00ea\u00e2\u00ee\u00f4\u00fb]+|\S)$/;
cc.LabelTTF._lastEnglish=/[a-zA-Z0-9\u00c4\u00d6\u00dc\u00e4\u00f6\u00fc\u00df\u00e9\u00e8\u00e7\u00e0\u00f9\u00ea\u00e2\u00ee\u00f4\u00fb]+$/;cc.LabelTTF._firsrEnglish=/^[a-zA-Z0-9\u00c4\u00d6\u00dc\u00e4\u00f6\u00fc\u00df\u00e9\u00e8\u00e7\u00e0\u00f9\u00ea\u00e2\u00ee\u00f4\u00fb]/;
(function(){cc.LabelTTF.RenderCmd=function(){this._fontClientHeight=18;this._fontStyleStr="";this._shadowColorStr="rgba(128, 128, 128, 0.5)";this._strokeColorStr="";this._fillColorStr="rgba(255,255,255,1)";this._labelContext=this._labelCanvas=this._customfillColorStr=null;this._lineWidths=[];this._strings=[];this._isMultiLine=!1;this._status=[];this._renderingIndex=0;this._texRect=cc.rect();this._canUseDirtyRegion=!0};var a=cc.LabelTTF.RenderCmd.prototype;a.constructor=cc.LabelTTF.RenderCmd;a._setFontStyle=
function(a,b,e,f){if(a instanceof cc.FontDefinition)this._fontStyleStr=a._getCanvasFontStr(),this._fontClientHeight=cc.LabelTTF.__getFontHeightByDiv(a);else{var g=b*cc.view.getDevicePixelRatio();this._fontStyleStr=e+" "+f+" "+g+"px '"+a+"'";this._fontClientHeight=cc.LabelTTF.__getFontHeightByDiv(a,b)}};a._getFontStyle=function(){return this._fontStyleStr};a._getFontClientHeight=function(){return this._fontClientHeight};a._updateColor=function(){this._setColorsString();this._updateTexture()};a._setColorsString=
function(){var a=this._displayedColor,b=this._node,e=b._shadowColor||this._displayedColor,f=b._strokeColor,g=b._textFillColor,h=a.r/255,k=a.g/255,a=a.b/255;this._shadowColorStr="rgba("+(0|h*e.r)+","+(0|k*e.g)+","+(0|a*e.b)+","+b._shadowOpacity+")";this._fillColorStr="rgba("+(0|h*g.r)+","+(0|k*g.g)+","+(0|a*g.b)+", 1)";this._strokeColorStr="rgba("+(0|h*f.r)+","+(0|k*f.g)+","+(0|a*f.b)+", 1)"};a._setCustomColorsString=function(a){this._customfillColorStr=a&&"rgba("+(0|a.r)+","+(0|a.g)+","+(0|a.b)+", 1)"};
var b=new cc.Rect;a.getLocalBB=function(){var a=this._node;b.x=b.y=0;var d=cc.view.getDevicePixelRatio();b.width=a._getWidth()*d;b.height=a._getHeight()*d;return b};a._updateTTF=function(){var a=this._node,b=cc.view.getDevicePixelRatio(),e=a._dimensions.width*b,f,g,h=this._lineWidths;h.length=0;this._isMultiLine=!1;this._measureConfig();if(0!==e)for(this._strings=a._string.split("\n"),f=0;f<this._strings.length;f++)this._checkWarp(this._strings,f,e);else for(this._strings=a._string.split("\n"),f=
0,g=this._strings.length;f<g;f++)h.push(this._measure(this._strings[f]));1<this._strings.length&&(this._isMultiLine=!0);g=f=0;a._strokeEnabled&&(f=g=2*a._strokeSize);if(a._shadowEnabled){var k=a._shadowOffset;f+=2*Math.abs(k.x);g+=2*Math.abs(k.y)}e=0===e?this._isMultiLine?cc.size(Math.ceil(Math.max.apply(Math,h)+f),Math.ceil(this._fontClientHeight*b*this._strings.length+g)):cc.size(Math.ceil(this._measure(a._string)+f),Math.ceil(this._fontClientHeight*b+g)):0===a._dimensions.height?this._isMultiLine?
cc.size(Math.ceil(e+f),Math.ceil(a.getLineHeight()*b*this._strings.length+g)):cc.size(Math.ceil(e+f),Math.ceil(a.getLineHeight()*b+g)):cc.size(Math.ceil(e+f),Math.ceil(a._dimensions.height*b+g));"normal"!==a._getFontStyle()&&(e.width=Math.ceil(e.width+0.3*a._fontSize));0===this._strings.length?(this._texRect.width=1,this._texRect.height=e.height||1):(this._texRect.width=e.width,this._texRect.height=e.height);a.setContentSize(e.width/b,e.height/b);a._strokeShadowOffsetX=f;a._strokeShadowOffsetY=g;
a=a._anchorPoint;this._anchorPointInPoints.x=0.5*f+(e.width-f)*a.x;this._anchorPointInPoints.y=0.5*g+(e.height-g)*a.y};a._saveStatus=function(){var a=this._node,b=cc.view.getDevicePixelRatio(),e=a._strokeShadowOffsetX,f=a._strokeShadowOffsetY,g=a._contentSize.height*b-f,h=a._vAlignment,k=a._hAlignment,m=0.5*e,f=g+0.5*f,n=0,p=0,r=[],e=a._contentSize.width*b-e,a=a.getLineHeight()*b,b=(a-this._fontClientHeight*b)/2,n=k===cc.TEXT_ALIGNMENT_RIGHT?n+e:k===cc.TEXT_ALIGNMENT_CENTER?n+e/2:n+0;if(this._isMultiLine)for(k=
this._strings.length,h===cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM?p=a-2*b+g-a*k:h===cc.VERTICAL_TEXT_ALIGNMENT_CENTER&&(p=(a-2*b)/2+(g-a*k)/2),h=0;h<k;h++)r.push(-g+(a*h+b)+p);else h!==cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM&&(p=h===cc.VERTICAL_TEXT_ALIGNMENT_TOP?p-g:p-0.5*g),r.push(p);g={contextTransform:cc.p(m,f),xOffset:n,OffsetYArray:r};this._status.push(g)};a._drawTTFInCanvas=function(a){if(a){var b=this._status.pop();a.setTransform(1,0,0,1,b.contextTransform.x,b.contextTransform.y);this.drawLabels(a,b.xOffset,
b.OffsetYArray)}};a._checkWarp=function(a,b,e){var f=a[b],g=this._measure(f);if(g>e&&1<f.length){for(var h=e/g*f.length|0,k=f.substr(h),m=g-this._measure(k),n,p=0,r=0;m>e&&100>r++;)h*=e/m,h|=0,k=f.substr(h),m=g-this._measure(k);for(r=0;m<e&&100>r++;)k&&(p=(n=cc.LabelTTF._wordRex.exec(k))?n[0].length:1,n=k),h+=p,k=f.substr(h),m=g-this._measure(k);h-=p;0===h&&(h=1,n=n.substr(1));e=f.substr(0,h);cc.LabelTTF.wrapInspection&&cc.LabelTTF._symbolRex.test(n||k)&&(g=cc.LabelTTF._lastWordRex.exec(e),h-=g?g[0].length:
0,0===h&&(h=1),n=f.substr(h),e=f.substr(0,h));cc.LabelTTF._firsrEnglish.test(n)&&(g=cc.LabelTTF._lastEnglish.exec(e))&&e!==g[0]&&(h-=g[0].length,n=f.substr(h),e=f.substr(0,h));a[b]=n||k;a.splice(b,0,e)}};a.updateStatus=function(){var a=cc.Node._dirtyFlags;this._dirtyFlag&a.textDirty&&this._updateTexture();cc.Node.RenderCmd.prototype.updateStatus.call(this);this._dirtyFlag&a.transformDirty&&(this.transform(this.getParentRenderCmd(),!0),this._dirtyFlag^=this._dirtyFlag&cc.Node._dirtyFlags.transformDirty)};
a._syncStatus=function(a){var b=cc.Node._dirtyFlags,e=this._dirtyFlag;e&b.textDirty&&this._updateTexture();cc.Node.RenderCmd.prototype._syncStatus.call(this,a);(cc._renderType===cc.game.RENDER_TYPE_WEBGL||e&b.transformDirty)&&this.transform(a)};a.drawLabels=function(a,b,e){var f=this._node;if(f._shadowEnabled){var g=f._shadowOffset;a.shadowColor=this._shadowColorStr;a.shadowOffsetX=g.x;a.shadowOffsetY=-g.y;a.shadowBlur=f._shadowBlur}var g=f._hAlignment,h=f._vAlignment,k=f._strokeSize;a.font!==this._fontStyleStr&&
(a.font=this._fontStyleStr);a.fillStyle=this._customfillColorStr||this._fillColorStr;if(f=f._strokeEnabled)a.lineWidth=2*k,a.strokeStyle=this._strokeColorStr;a.textBaseline=cc.LabelTTF._textBaseline[h];a.textAlign=cc.LabelTTF._textAlign[g];g=this._strings.length;for(h=0;h<g;h++)k=this._strings[h],f&&a.strokeText(k,b,e[h]),a.fillText(k,b,e[h]);cc.g_NumberOfDraws++}})();
(function(){cc.LabelTTF.CacheRenderCmd=function(a){cc.LabelTTF.RenderCmd.call(this,a);cc._renderType!==cc.game.RENDER_TYPE_WEBGL&&(a=this._labelCanvas=document.createElement("canvas"),a.width=1,a.height=1,this._labelContext=a.getContext("2d"));this._texRect=cc.rect()};cc.LabelTTF.CacheRenderCmd.prototype=Object.create(cc.LabelTTF.RenderCmd.prototype);cc.inject(cc.LabelTTF.RenderCmd.prototype,cc.LabelTTF.CacheRenderCmd.prototype);var a=cc.LabelTTF.CacheRenderCmd.prototype;a.constructor=cc.LabelTTF.CacheRenderCmd;
a._updateTexture=function(){this._dirtyFlag^=this._dirtyFlag&cc.Node._dirtyFlags.textDirty;var a=this._node;this._updateTTF();var c=this._texRect.width,d=this._texRect.height,e=this._labelCanvas,f=this._labelContext;cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(e=cc.labelTTFCanvas,f=cc.labelTTFContext);if(!a._texture&&0<a._string.length){var g=new cc.Texture2D;g.initWithElement(e);a.setTexture(g)}if(!a._texture&&0===a._string.length)return!0;f.font=this._fontStyleStr;g=e.width===c&&e.height===d;e.width=
this._texRect.width||1;e.height=this._texRect.height||1;g&&f.clearRect(0,0,c,d);this._saveStatus();this._drawTTFInCanvas(f);a._texture&&(a._texture._htmlElementObj=e,a._texture.handleLoadedTexture());a.setTextureRect(this._texRect);return!0};a._measureConfig=function(){cc._renderType===cc.game.RENDER_TYPE_WEBGL?cc.labelTTFContext.font=this._fontStyleStr:this._labelContext.font=this._fontStyleStr};a._measure=function(a){return cc._renderType===cc.game.RENDER_TYPE_WEBGL?cc.labelTTFContext.measureText(a).width:
this._labelContext.measureText(a).width}})();(function(){cc.LabelTTF.CacheCanvasRenderCmd=function(a){cc.Sprite.CanvasRenderCmd.call(this,a);cc.LabelTTF.CacheRenderCmd.call(this)};var a=cc.LabelTTF.CacheCanvasRenderCmd.prototype=Object.create(cc.Sprite.CanvasRenderCmd.prototype);cc.inject(cc.LabelTTF.CacheRenderCmd.prototype,a);a.constructor=cc.LabelTTF.CacheCanvasRenderCmd})();
(function(){cc.LabelTTF.CanvasRenderCmd=function(a){cc.Sprite.CanvasRenderCmd.call(this,a);cc.LabelTTF.RenderCmd.call(this)};cc.LabelTTF.CanvasRenderCmd.prototype=Object.create(cc.Sprite.CanvasRenderCmd.prototype);cc.inject(cc.LabelTTF.RenderCmd.prototype,cc.LabelTTF.CanvasRenderCmd.prototype);var a=cc.LabelTTF.CanvasRenderCmd.prototype;a.constructor=cc.LabelTTF.CanvasRenderCmd;a._measureConfig=function(){};a._measure=function(a){var c=cc._renderContext.getContext();c.font=this._fontStyleStr;return c.measureText(a).width};
a._updateTexture=function(){this._dirtyFlag^=this._dirtyFlag&cc.Node._dirtyFlags.textDirty;var a=this._node;cc.view.getDevicePixelRatio();this._updateTTF();if(0===a._string.length)return a.setTextureRect(this._texRect),!0;this._saveStatus();a.setTextureRect(this._texRect);return!0};a.rendering=function(a){var c=cc.view.getScaleX(),d=cc.view.getScaleY();a=a||cc._renderContext;var e=a.getContext();if(e){var f=this._node;a.computeRealOffsetY();if(!(0>=this._status.length)){var g=this._renderingIndex>=
this._status.length?this._renderingIndex-this._status.length:this._renderingIndex,h=this._status[g];this._renderingIndex=g+1;var k=f._offsetPosition.x,g=-f._offsetPosition.y-f._rect.height,m=this._displayedOpacity/255;a.setTransform(this._worldTransform,c,d);a.setCompositeOperation(this._blendFuncStr);a.setGlobalAlpha(m);a.save();f._flippedX&&(k=-k-f._rect.width,e.scale(-1,1));f._flippedY&&(g=f._offsetPosition.y,e.scale(1,-1));c=h.xOffset+h.contextTransform.x+k*c;f=[];k=this._strings.length;for(m=
0;m<k;m++)f.push(h.OffsetYArray[m]+h.contextTransform.y+g*d);this.drawLabels(e,c,f);a.restore()}}}})();cc.HashElement=cc.Class.extend({actions:null,target:null,actionIndex:0,currentAction:null,currentActionSalvaged:!1,paused:!1,hh:null,ctor:function(){this.actions=[];this.target=null;this.actionIndex=0;this.currentAction=null;this.paused=this.currentActionSalvaged=!1;this.hh=null}});
cc.ActionManager=cc.Class.extend({_hashTargets:null,_arrayTargets:null,_currentTarget:null,_currentTargetSalvaged:!1,_searchElementByTarget:function(a,b){for(var c=0;c<a.length;c++)if(b===a[c].target)return a[c];return null},ctor:function(){this._hashTargets={};this._arrayTargets=[];this._currentTarget=null;this._currentTargetSalvaged=!1},addAction:function(a,b,c){if(!a)throw Error("cc.ActionManager.addAction(): action must be non-null");if(!b)throw Error("cc.ActionManager.addAction(): action must be non-null");
var d=this._hashTargets[b.__instanceId];d||(d=new cc.HashElement,d.paused=c,d.target=b,this._hashTargets[b.__instanceId]=d,this._arrayTargets.push(d));this._actionAllocWithHashElement(d);d.actions.push(a);a.startWithTarget(b)},removeAllActions:function(){for(var a=this._arrayTargets,b=0;b<a.length;b++){var c=a[b];c&&this.removeAllActionsFromTarget(c.target,!0)}},removeAllActionsFromTarget:function(a,b){if(null!=a){var c=this._hashTargets[a.__instanceId];c&&(-1===c.actions.indexOf(c.currentAction)||
c.currentActionSalvaged||(c.currentActionSalvaged=!0),c.actions.length=0,this._currentTarget!==c||b?this._deleteHashElement(c):this._currentTargetSalvaged=!0)}},removeAction:function(a){if(null!=a){var b=a.getOriginalTarget();if(b=this._hashTargets[b.__instanceId])for(var c=0;c<b.actions.length;c++){if(b.actions[c]===a){b.actions.splice(c,1);break}}else cc.log(cc._LogInfos.ActionManager_removeAction)}},removeActionByTag:function(a,b){a===cc.ACTION_TAG_INVALID&&cc.log(cc._LogInfos.ActionManager_addAction);
cc.assert(b,cc._LogInfos.ActionManager_addAction);var c=this._hashTargets[b.__instanceId];if(c)for(var d=c.actions.length,e=0;e<d;++e){var f=c.actions[e];if(f&&f.getTag()===a&&f.getOriginalTarget()===b){this._removeActionAtIndex(e,c);break}}},getActionByTag:function(a,b){a===cc.ACTION_TAG_INVALID&&cc.log(cc._LogInfos.ActionManager_getActionByTag);var c=this._hashTargets[b.__instanceId];if(c){if(null!=c.actions)for(var d=0;d<c.actions.length;++d){var e=c.actions[d];if(e&&e.getTag()===a)return e}cc.log(cc._LogInfos.ActionManager_getActionByTag_2,
a)}return null},numberOfRunningActionsInTarget:function(a){return(a=this._hashTargets[a.__instanceId])?a.actions?a.actions.length:0:0},pauseTarget:function(a){(a=this._hashTargets[a.__instanceId])&&(a.paused=!0)},resumeTarget:function(a){(a=this._hashTargets[a.__instanceId])&&(a.paused=!1)},pauseAllRunningActions:function(){for(var a=[],b=this._arrayTargets,c=0;c<b.length;c++){var d=b[c];d&&!d.paused&&(d.paused=!0,a.push(d.target))}return a},resumeTargets:function(a){if(a)for(var b=0;b<a.length;b++)a[b]&&
this.resumeTarget(a[b])},purgeSharedManager:function(){cc.director.getScheduler().unscheduleUpdate(this)},_removeActionAtIndex:function(a,b){b.actions[a]!==b.currentAction||b.currentActionSalvaged||(b.currentActionSalvaged=!0);b.actions.splice(a,1);b.actionIndex>=a&&b.actionIndex--;0===b.actions.length&&(this._currentTarget===b?this._currentTargetSalvaged=!0:this._deleteHashElement(b))},_deleteHashElement:function(a){var b=!1;a&&(this._hashTargets[a.target.__instanceId]&&(delete this._hashTargets[a.target.__instanceId],
cc.arrayRemoveObject(this._arrayTargets,a),b=!0),a.actions=null,a.target=null);return b},_actionAllocWithHashElement:function(a){null==a.actions&&(a.actions=[])},update:function(a){for(var b=this._arrayTargets,c,d=0;d<b.length;d++){c=this._currentTarget=b[d];if(!c.paused)for(c.actionIndex=0;c.actionIndex<(c.actions?c.actions.length:0);c.actionIndex++)if(c.currentAction=c.actions[c.actionIndex],c.currentAction){c.currentActionSalvaged=!1;c.currentAction.step(a*(c.currentAction._speedMethod?c.currentAction._speed:
1));if(c.currentActionSalvaged)c.currentAction=null;else if(c.currentAction.isDone()){c.currentAction.stop();var e=c.currentAction;c.currentAction=null;this.removeAction(e)}c.currentAction=null}this._currentTargetSalvaged&&0===c.actions.length&&this._deleteHashElement(c)&&d--}}});cc.profiler=function(){var a=!1,b=!1,c=0,d=0,e=0,f=0,g=null,h=document.createElement("div"),k=document.createElement("div"),m=document.createElement("div"),n=document.createElement("div"),p=10,r=[0,10,20,30],s=[0,0,0,0],u=3,t=0,x=0;n.id="fps";n.style.position="absolute";n.style.padding="3px";n.style.textAlign="left";n.style.backgroundColor="rgb(0, 0, 34)";n.style.bottom=cc.DIRECTOR_STATS_POSITION.y+"0px";n.style.left=cc.DIRECTOR_STATS_POSITION.x+"px";n.style.width="45px";n.style.height="60px";for(var v=
[m,k,h],z=0;3>z;++z){var B=v[z].style;B.color="rgb(0, 255, 255)";B.font="bold 12px Helvetica, Arial";B.lineHeight="20px";B.width="100%";n.appendChild(v[z])}var C=function(){e=cc.director.getSecondsPerFrame();c++;f+=cc.director.getDeltaTime();if(f>cc.DIRECTOR_FPS_INTERVAL){d=c/f;f=c=0;if(A.onFrameRateChange){var b=d,g=r.length-1,n=g,v=0;t++;for(x+=b;0<=n;n--)if(b>=r[n]){s[n]++;break}if(t>=p){v=x/p;for(n=g;0<n;n--)if(b=s[n]/p,0.6<=b&&v>=r[n]){n!=u&&(u=n,A.onFrameRateChange&&A.onFrameRateChange(v.toFixed(2)));
break}x=t=_changeCount=0;for(n=g;0<n;n--)s[n]=0}}a&&(k.innerText=e.toFixed(3),h.innerText=d.toFixed(1),m.innerText=(0|cc.g_NumberOfDraws).toString())}},A={onFrameRateChange:null,getSecondsPerFrame:function(){return e},getFrameRate:function(){return d},setProfileDuration:function(a){!isNaN(a)&&0<a&&(p=a/cc.DIRECTOR_FPS_INTERVAL)},resumeProfiling:function(){cc.eventManager.addListener(g,1)},stopProfiling:function(){cc.eventManager.removeListener(g)},isShowingStats:function(){return a},showStats:function(){b||
this.init();null===n.parentElement&&cc.container.appendChild(n);a=!0},hideStats:function(){a=!1;n.parentElement===cc.container&&cc.container.removeChild(n)},init:function(){b||(g=cc.eventManager.addCustomListener(cc.Director.EVENT_AFTER_VISIT,C),b=!0)}};return A}();cc.math=cc.math||{};cc.math.EPSILON=0.015625;cc.math.square=function(a){return a*a};cc.math.almostEqual=function(a,b){return a+cc.math.EPSILON>b&&a-cc.math.EPSILON<b};(function(a){a.math.Vec2=function(a,b){void 0===b?(this.x=a.x,this.y=a.y):(this.x=a||0,this.y=b||0)};var b=a.math.Vec2.prototype;b.fill=function(a,b){this.x=a;this.y=b};b.length=function(){return Math.sqrt(a.math.square(this.x)+a.math.square(this.y))};b.lengthSq=function(){return a.math.square(this.x)+a.math.square(this.y)};b.normalize=function(){var a=1/this.length();this.x*=a;this.y*=a;return this};a.math.Vec2.add=function(a,b,e){a.x=b.x+e.x;a.y=b.y+e.y;return a};b.add=function(a){this.x+=a.x;this.y+=
a.y;return this};b.dot=function(a){return this.x*a.x+this.y*a.y};a.math.Vec2.subtract=function(a,b,e){a.x=b.x-e.x;a.y=b.y-e.y;return a};b.subtract=function(a){this.x-=a.x;this.y-=a.y;return this};b.transform=function(a){var b=this.x,e=this.y;this.x=b*a.mat[0]+e*a.mat[3]+a.mat[6];this.y=b*a.mat[1]+e*a.mat[4]+a.mat[7];return this};a.math.Vec2.scale=function(a,b,e){a.x=b.x*e;a.y=b.y*e;return a};b.scale=function(a){this.x*=a;this.y*=a;return this};b.equals=function(b){return this.x<b.x+a.math.EPSILON&&
this.x>b.x-a.math.EPSILON&&this.y<b.y+a.math.EPSILON&&this.y>b.y-a.math.EPSILON}})(cc);(function(a){a.math.Vec3=a.kmVec3=function(a,b,e){a&&void 0===b?(this.x=a.x,this.y=a.y,this.z=a.z):(this.x=a||0,this.y=b||0,this.z=e||0)};a.math.vec3=function(b,d,e){return new a.math.Vec3(b,d,e)};var b=a.math.Vec3.prototype;b.fill=function(a,b,e){a&&void 0===b?(this.x=a.x,this.y=a.y,this.z=a.z):(this.x=a,this.y=b,this.z=e);return this};b.length=function(){return Math.sqrt(a.math.square(this.x)+a.math.square(this.y)+a.math.square(this.z))};b.lengthSq=function(){return a.math.square(this.x)+a.math.square(this.y)+
a.math.square(this.z)};b.normalize=function(){var a=1/this.length();this.x*=a;this.y*=a;this.z*=a;return this};b.cross=function(a){var b=this.x,e=this.y,f=this.z;this.x=e*a.z-f*a.y;this.y=f*a.x-b*a.z;this.z=b*a.y-e*a.x;return this};b.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z};b.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this};b.subtract=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;return this};b.transform=function(a){var b=this.x,e=this.y,f=this.z;a=a.mat;this.x=b*
a[0]+e*a[4]+f*a[8]+a[12];this.y=b*a[1]+e*a[5]+f*a[9]+a[13];this.z=b*a[2]+e*a[6]+f*a[10]+a[14];return this};b.transformNormal=function(a){var b=this.x,e=this.y,f=this.z;a=a.mat;this.x=b*a[0]+e*a[4]+f*a[8];this.y=b*a[1]+e*a[5]+f*a[9];this.z=b*a[2]+e*a[6]+f*a[10];return this};b.transformCoord=function(b){var d=new a.math.Vec4(this.x,this.y,this.z,1);d.transform(b);this.x=d.x/d.w;this.y=d.y/d.w;this.z=d.z/d.w;return this};b.scale=function(a){this.x*=a;this.y*=a;this.z*=a;return this};b.equals=function(b){var d=
a.math.EPSILON;return this.x<b.x+d&&this.x>b.x-d&&this.y<b.y+d&&this.y>b.y-d&&this.z<b.z+d&&this.z>b.z-d};b.inverseTransform=function(b){b=b.mat;var d=new a.math.Vec3(this.x-b[12],this.y-b[13],this.z-b[14]);this.x=d.x*b[0]+d.y*b[1]+d.z*b[2];this.y=d.x*b[4]+d.y*b[5]+d.z*b[6];this.z=d.x*b[8]+d.y*b[9]+d.z*b[10];return this};b.inverseTransformNormal=function(a){var b=this.x,e=this.y,f=this.z;a=a.mat;this.x=b*a[0]+e*a[1]+f*a[2];this.y=b*a[4]+e*a[5]+f*a[6];this.z=b*a[8]+e*a[9]+f*a[10];return this};b.assignFrom=
function(a){if(!a)return this;this.x=a.x;this.y=a.y;this.z=a.z;return this};a.math.Vec3.zero=function(a){a.x=a.y=a.z=0;return a};b.toTypeArray=function(){var a=new Float32Array(3);a[0]=this.x;a[1]=this.y;a[2]=this.z;return a}})(cc);(function(a){a.math.Vec4=function(a,b,e,f){a&&void 0===b?(this.x=a.x,this.y=a.y,this.z=a.z,this.w=a.w):(this.x=a||0,this.y=b||0,this.z=e||0,this.w=f||0)};a.kmVec4=a.math.Vec4;var b=a.math.Vec4.prototype;b.fill=function(a,b,e,f){a&&void 0===b?(this.x=a.x,this.y=a.y,this.z=a.z,this.w=a.w):(this.x=a,this.y=b,this.z=e,this.w=f)};b.add=function(a){if(!a)return this;this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this};b.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w};b.length=
function(){return Math.sqrt(a.math.square(this.x)+a.math.square(this.y)+a.math.square(this.z)+a.math.square(this.w))};b.lengthSq=function(){return a.math.square(this.x)+a.math.square(this.y)+a.math.square(this.z)+a.math.square(this.w)};b.lerp=function(a,b){return this};b.normalize=function(){var a=1/this.length();this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this};b.scale=function(a){this.normalize();this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this};b.subtract=function(a){this.x-=a.x;this.y-=
a.y;this.z-=a.z;this.w-=a.w};b.transform=function(a){var b=this.x,e=this.y,f=this.z,g=this.w;a=a.mat;this.x=b*a[0]+e*a[4]+f*a[8]+g*a[12];this.y=b*a[1]+e*a[5]+f*a[9]+g*a[13];this.z=b*a[2]+e*a[6]+f*a[10]+g*a[14];this.w=b*a[3]+e*a[7]+f*a[11]+g*a[15];return this};a.math.Vec4.transformArray=function(b,d){for(var e=[],f=0;f<b.length;f++){var g=new a.math.Vec4(b[f]);g.transform(d);e.push(g)}return e};b.equals=function(b){var d=a.math.EPSILON;return this.x<b.x+d&&this.x>b.x-d&&this.y<b.y+d&&this.y>b.y-d&&
this.z<b.z+d&&this.z>b.z-d&&this.w<b.w+d&&this.w>b.w-d};b.assignFrom=function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=a.w;return this};b.toTypeArray=function(){var a=new Float32Array(4);a[0]=this.x;a[1]=this.y;a[2]=this.z;a[3]=this.w;return a}})(cc);(function(a){function b(b,d,e){d=new a.math.Vec2(d);d.subtract(b);e.x=-d.y;e.y=d.x;e.normalize()}a.math.Ray2=function(b,d){this.start=b||new a.math.Vec2;this.dir=d||new a.math.Vec2};a.math.Ray2.prototype.fill=function(a,b,e,f){this.start.x=a;this.start.y=b;this.dir.x=e;this.dir.y=f};a.math.Ray2.prototype.intersectLineSegment=function(b,d,e){var f=this.start.x,g=this.start.y,h=this.start.x+this.dir.x,k=this.start.y+this.dir.y,m=b.x,n=b.y,p=d.x,r=d.y,s=(r-n)*(h-f)-(p-m)*(k-g);if(s>-a.math.EPSILON&&
s<a.math.EPSILON)return!1;n=((p-m)*(g-n)-(r-n)*(f-m))/s;m=f+n*(h-f);n=g+n*(k-g);if(m<Math.min(b.x,d.x)-a.math.EPSILON||m>Math.max(b.x,d.x)+a.math.EPSILON||n<Math.min(b.y,d.y)-a.math.EPSILON||n>Math.max(b.y,d.y)+a.math.EPSILON||m<Math.min(f,h)-a.math.EPSILON||m>Math.max(f,h)+a.math.EPSILON||n<Math.min(g,k)-a.math.EPSILON||n>Math.max(g,k)+a.math.EPSILON)return!1;e.x=m;e.y=n;return!0};a.math.Ray2.prototype.intersectTriangle=function(c,d,e,f,g){var h=new a.math.Vec2,k=new a.math.Vec2,m=new a.math.Vec2,
n=1E4,p=!1,r;this.intersectLineSegment(c,d,h)&&(p=!0,r=h.subtract(this.start).length(),r<n&&(k.x=h.x,k.y=h.y,n=r,b(c,d,m)));this.intersectLineSegment(d,e,h)&&(p=!0,r=h.subtract(this.start).length(),r<n&&(k.x=h.x,k.y=h.y,n=r,b(d,e,m)));this.intersectLineSegment(e,c,h)&&(p=!0,r=h.subtract(this.start).length(),r<n&&(k.x=h.x,k.y=h.y,b(e,c,m)));p&&(f.x=k.x,f.y=k.y,g&&(g.x=m.x,g.y=m.y));return p}})(cc);window.Uint16Array=window.Uint16Array||window.Array;window.Float32Array=window.Float32Array||window.Array;
(function(a){a.math.Matrix3=function(a){this.mat=a&&a.mat?new Float32Array(a.mat):new Float32Array(9)};a.kmMat3=a.math.Matrix3;var b=a.math.Matrix3.prototype;b.fill=function(a){var b=this.mat;a=a.mat;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return this};b.adjugate=function(){var a=this.mat,b=a[0],c=a[1],g=a[2],h=a[3],k=a[4],m=a[5],n=a[6],p=a[7],r=a[8];a[0]=k*r-m*p;a[1]=g*p-c*r;a[2]=c*m-g*k;a[3]=m*n-h*r;a[4]=b*r-g*n;a[5]=g*h-b*m;a[6]=h*p-k*n;a[8]=b*
k-c*h;return this};b.identity=function(){var a=this.mat;a[1]=a[2]=a[3]=a[5]=a[6]=a[7]=0;a[0]=a[4]=a[8]=1;return this};var c=new a.math.Matrix3;b.inverse=function(a){if(0===a)return this;c.assignFrom(this);a=1/a;this.adjugate();this.multiplyScalar(a);return this};b.isIdentity=function(){var a=this.mat;return 1===a[0]&&0===a[1]&&0===a[2]&&0===a[3]&&1===a[4]&&0===a[5]&&0===a[6]&&0===a[7]&&1===a[8]};b.transpose=function(){var a=this.mat,b=a[1],c=a[2],g=a[5],h=a[6],k=a[7];a[1]=a[3];a[2]=h;a[3]=b;a[5]=
k;a[6]=c;a[7]=g;return this};b.determinant=function(){var a=this.mat,b=a[0]*a[4]*a[8]+a[1]*a[5]*a[6]+a[2]*a[3]*a[7];return b-=a[2]*a[4]*a[6]+a[0]*a[5]*a[7]+a[1]*a[3]*a[8]};b.multiply=function(a){var b=this.mat,c=a.mat;a=b[0];var g=b[1],h=b[2],k=b[3],m=b[4],n=b[5],p=b[6],r=b[7],s=b[8],u=c[0],t=c[1],x=c[2],v=c[3],z=c[4],B=c[5],C=c[6],A=c[7],c=c[8];b[0]=a*u+k*t+p*x;b[1]=g*u+m*t+r*x;b[2]=h*u+n*t+s*x;b[3]=h*u+n*t+s*x;b[4]=g*v+m*z+r*B;b[5]=h*v+n*z+s*B;b[6]=a*C+k*A+p*c;b[7]=g*C+m*A+r*c;b[8]=h*C+n*A+s*c;
return this};b.multiplyScalar=function(a){var b=this.mat;b[0]*=a;b[1]*=a;b[2]*=a;b[3]*=a;b[4]*=a;b[5]*=a;b[6]*=a;b[7]*=a;b[8]*=a;return this};a.math.Matrix3.rotationAxisAngle=function(b,c){var f=Math.cos(c),g=Math.sin(c),h=new a.math.Matrix3,k=h.mat;k[0]=f+b.x*b.x*(1-f);k[1]=b.z*g+b.y*b.x*(1-f);k[2]=-b.y*g+b.z*b.x*(1-f);k[3]=-b.z*g+b.x*b.y*(1-f);k[4]=f+b.y*b.y*(1-f);k[5]=b.x*g+b.z*b.y*(1-f);k[6]=b.y*g+b.x*b.z*(1-f);k[7]=-b.x*g+b.y*b.z*(1-f);k[8]=f+b.z*b.z*(1-f);return h};b.assignFrom=function(b){if(this===
b)return a.log("cc.math.Matrix3.assign(): current matrix equals matIn"),this;var c=this.mat;b=b.mat;c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];c[5]=b[5];c[6]=b[6];c[7]=b[7];c[8]=b[8];return this};b.equals=function(b){if(this===b)return!0;var c=a.math.EPSILON,f=this.mat;b=b.mat;for(var g=0;9>g;++g)if(!(f[g]+c>b[g]&&f[g]-c<b[g]))return!1;return!0};a.math.Matrix3.createByRotationX=function(b){var c=new a.math.Matrix3,f=c.mat;f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=Math.cos(b);f[5]=Math.sin(b);f[6]=0;
f[7]=-Math.sin(b);f[8]=Math.cos(b);return c};a.math.Matrix3.createByRotationY=function(b){var c=new a.math.Matrix3,f=c.mat;f[0]=Math.cos(b);f[1]=0;f[2]=-Math.sin(b);f[3]=0;f[4]=1;f[5]=0;f[6]=Math.sin(b);f[7]=0;f[8]=Math.cos(b);return c};a.math.Matrix3.createByRotationZ=function(b){var c=new a.math.Matrix3,f=c.mat;f[0]=Math.cos(b);f[1]=-Math.sin(b);f[2]=0;f[3]=Math.sin(b);f[4]=Math.cos(b);f[5]=0;f[6]=0;f[7]=0;f[8]=1;return c};a.math.Matrix3.createByRotation=function(b){var c=new a.math.Matrix3,f=c.mat;
f[0]=Math.cos(b);f[1]=Math.sin(b);f[2]=0;f[3]=-Math.sin(b);f[4]=Math.cos(b);f[5]=0;f[6]=0;f[7]=0;f[8]=1;return c};a.math.Matrix3.createByScale=function(b,c){var f=new a.math.Matrix3;f.identity();f.mat[0]=b;f.mat[4]=c;return f};a.math.Matrix3.createByTranslation=function(b,c){var f=new a.math.Matrix3;f.identity();f.mat[6]=b;f.mat[7]=c;return f};a.math.Matrix3.createByQuaternion=function(b){if(!b)return null;var c=new a.math.Matrix3,f=c.mat;f[0]=1-2*(b.y*b.y+b.z*b.z);f[1]=2*(b.x*b.y-b.w*b.z);f[2]=2*
(b.x*b.z+b.w*b.y);f[3]=2*(b.x*b.y+b.w*b.z);f[4]=1-2*(b.x*b.x+b.z*b.z);f[5]=2*(b.y*b.z-b.w*b.x);f[6]=2*(b.x*b.z-b.w*b.y);f[7]=2*(b.y*b.z+b.w*b.x);f[8]=1-2*(b.x*b.x+b.y*b.y);return c};b.rotationToAxisAngle=function(){return a.math.Quaternion.rotationMatrix(this).toAxisAndAngle()}})(cc);(function(a){a.math.Matrix4=function(a){this.mat=a&&a.mat?new Float32Array(a.mat):new Float32Array(16)};a.kmMat4=a.math.Matrix4;var b=a.math.Matrix4.prototype;b.fill=function(a){for(var b=this.mat,c=0;16>c;c++)b[c]=a[c];return this};a.kmMat4Identity=function(a){var b=a.mat;b[1]=b[2]=b[3]=b[4]=b[6]=b[7]=b[8]=b[9]=b[11]=b[12]=b[13]=b[14]=0;b[0]=b[5]=b[10]=b[15]=1;return a};b.identity=function(){var a=this.mat;a[1]=a[2]=a[3]=a[4]=a[6]=a[7]=a[8]=a[9]=a[11]=a[12]=a[13]=a[14]=0;a[0]=a[5]=a[10]=a[15]=1;
return this};b.get=function(a,b){return this.mat[a+4*b]};b.set=function(a,b,c){this.mat[a+4*b]=c};b.swap=function(a,b,c,d){var k=this.mat,m=k[a+4*b];k[a+4*b]=k[c+4*d];k[c+4*d]=m};a.math.Matrix4._gaussj=function(a,b){var c,d=0,k=0,m,n,p,r,s=[0,0,0,0],u=[0,0,0,0],t=[0,0,0,0];for(c=0;4>c;c++){for(m=r=0;4>m;m++)if(1!==t[m])for(n=0;4>n;n++)0===t[n]&&(p=Math.abs(a.get(m,n)),p>=r&&(r=p,k=m,d=n));++t[d];if(k!==d){for(m=0;4>m;m++)a.swap(k,m,d,m);for(m=0;4>m;m++)b.swap(k,m,d,m)}u[c]=k;s[c]=d;if(0===a.get(d,
d))return!1;n=1/a.get(d,d);a.set(d,d,1);for(m=0;4>m;m++)a.set(d,m,a.get(d,m)*n);for(m=0;4>m;m++)b.set(d,m,b.get(d,m)*n);for(n=0;4>n;n++)if(n!==d){p=a.get(n,d);a.set(n,d,0);for(m=0;4>m;m++)a.set(n,m,a.get(n,m)-a.get(d,m)*p);for(m=0;4>m;m++)b.set(n,m,a.get(n,m)-b.get(d,m)*p)}}for(m=3;0<=m;m--)if(u[m]!==s[m])for(n=0;4>n;n++)a.swap(n,u[m],n,s[m]);return!0};var c=(new a.math.Matrix4).identity();a.kmMat4Inverse=function(b,d){var g=new a.math.Matrix4(d),h=new a.math.Matrix4(c);if(!1===a.math.Matrix4._gaussj(g,
h))return null;b.assignFrom(g);return b};b.inverse=function(){var b=new a.math.Matrix4(this),d=new a.math.Matrix4(c);return!1===a.math.Matrix4._gaussj(b,d)?null:b};b.isIdentity=function(){var a=this.mat;return 1===a[0]&&0===a[1]&&0===a[2]&&0===a[3]&&0===a[4]&&1===a[5]&&0===a[6]&&0===a[7]&&0===a[8]&&0===a[9]&&1===a[10]&&0===a[11]&&0===a[12]&&0===a[13]&&0===a[14]&&1===a[15]};b.transpose=function(){var a=this.mat,b=a[1],c=a[2],d=a[3],k=a[6],m=a[7],n=a[8],p=a[9],r=a[11],s=a[12],u=a[13],t=a[14];a[1]=a[4];
a[2]=n;a[3]=s;a[4]=b;a[6]=p;a[7]=u;a[8]=c;a[9]=k;a[11]=t;a[12]=d;a[13]=m;a[14]=r;return this};a.kmMat4Multiply=function(a,b,c){var d=a.mat,k=b.mat,m=c.mat;c=k[0];b=k[1];var n=k[2],p=k[3],r=k[4],s=k[5],u=k[6],t=k[7],x=k[8],v=k[9],z=k[10],B=k[11],C=k[12],A=k[13],D=k[14],k=k[15],E=m[0],F=m[1],G=m[2],H=m[3],w=m[4],I=m[5],J=m[6],K=m[7],L=m[8],M=m[9],N=m[10],O=m[11],P=m[12],Q=m[13],R=m[14],m=m[15];d[0]=E*c+F*r+G*x+H*C;d[1]=E*b+F*s+G*v+H*A;d[2]=E*n+F*u+G*z+H*D;d[3]=E*p+F*t+G*B+H*k;d[4]=w*c+I*r+J*x+K*C;d[5]=
w*b+I*s+J*v+K*A;d[6]=w*n+I*u+J*z+K*D;d[7]=w*p+I*t+J*B+K*k;d[8]=L*c+M*r+N*x+O*C;d[9]=L*b+M*s+N*v+O*A;d[10]=L*n+M*u+N*z+O*D;d[11]=L*p+M*t+N*B+O*k;d[12]=P*c+Q*r+R*x+m*C;d[13]=P*b+Q*s+R*v+m*A;d[14]=P*n+Q*u+R*z+m*D;d[15]=P*p+Q*t+R*B+m*k;return a};b.multiply=function(a){var b=this.mat,c=a.mat;a=b[0];var d=b[1],k=b[2],m=b[3],n=b[4],p=b[5],r=b[6],s=b[7],u=b[8],t=b[9],x=b[10],v=b[11],z=b[12],B=b[13],C=b[14],A=b[15],D=c[0],E=c[1],F=c[2],G=c[3],H=c[4],w=c[5],I=c[6],J=c[7],K=c[8],L=c[9],M=c[10],N=c[11],O=c[12],
P=c[13],Q=c[14],c=c[15];b[0]=D*a+E*n+F*u+G*z;b[1]=D*d+E*p+F*t+G*B;b[2]=D*k+E*r+F*x+G*C;b[3]=D*m+E*s+F*v+G*A;b[4]=H*a+w*n+I*u+J*z;b[5]=H*d+w*p+I*t+J*B;b[6]=H*k+w*r+I*x+J*C;b[7]=H*m+w*s+I*v+J*A;b[8]=K*a+L*n+M*u+N*z;b[9]=K*d+L*p+M*t+N*B;b[10]=K*k+L*r+M*x+N*C;b[11]=K*m+L*s+M*v+N*A;b[12]=O*a+P*n+Q*u+c*z;b[13]=O*d+P*p+Q*t+c*B;b[14]=O*k+P*r+Q*x+c*C;b[15]=O*m+P*s+Q*v+c*A;return this};a.getMat4MultiplyValue=function(a,b){var c=a.mat,d=b.mat,k=new Float32Array(16);k[0]=c[0]*d[0]+c[4]*d[1]+c[8]*d[2]+c[12]*d[3];
k[1]=c[1]*d[0]+c[5]*d[1]+c[9]*d[2]+c[13]*d[3];k[2]=c[2]*d[0]+c[6]*d[1]+c[10]*d[2]+c[14]*d[3];k[3]=c[3]*d[0]+c[7]*d[1]+c[11]*d[2]+c[15]*d[3];k[4]=c[0]*d[4]+c[4]*d[5]+c[8]*d[6]+c[12]*d[7];k[5]=c[1]*d[4]+c[5]*d[5]+c[9]*d[6]+c[13]*d[7];k[6]=c[2]*d[4]+c[6]*d[5]+c[10]*d[6]+c[14]*d[7];k[7]=c[3]*d[4]+c[7]*d[5]+c[11]*d[6]+c[15]*d[7];k[8]=c[0]*d[8]+c[4]*d[9]+c[8]*d[10]+c[12]*d[11];k[9]=c[1]*d[8]+c[5]*d[9]+c[9]*d[10]+c[13]*d[11];k[10]=c[2]*d[8]+c[6]*d[9]+c[10]*d[10]+c[14]*d[11];k[11]=c[3]*d[8]+c[7]*d[9]+c[11]*
d[10]+c[15]*d[11];k[12]=c[0]*d[12]+c[4]*d[13]+c[8]*d[14]+c[12]*d[15];k[13]=c[1]*d[12]+c[5]*d[13]+c[9]*d[14]+c[13]*d[15];k[14]=c[2]*d[12]+c[6]*d[13]+c[10]*d[14]+c[14]*d[15];k[15]=c[3]*d[12]+c[7]*d[13]+c[11]*d[14]+c[15]*d[15];return k};a.kmMat4Assign=function(b,c){if(b===c)return a.log("cc.kmMat4Assign(): pOut equals pIn"),b;var d=b.mat,h=c.mat;d[0]=h[0];d[1]=h[1];d[2]=h[2];d[3]=h[3];d[4]=h[4];d[5]=h[5];d[6]=h[6];d[7]=h[7];d[8]=h[8];d[9]=h[9];d[10]=h[10];d[11]=h[11];d[12]=h[12];d[13]=h[13];d[14]=h[14];
d[15]=h[15];return b};b.assignFrom=function(b){if(this===b)return a.log("cc.mat.Matrix4.assignFrom(): mat4 equals current matrix"),this;var c=this.mat;b=b.mat;c[0]=b[0];c[1]=b[1];c[2]=b[2];c[3]=b[3];c[4]=b[4];c[5]=b[5];c[6]=b[6];c[7]=b[7];c[8]=b[8];c[9]=b[9];c[10]=b[10];c[11]=b[11];c[12]=b[12];c[13]=b[13];c[14]=b[14];c[15]=b[15];return this};b.equals=function(b){if(this===b)return a.log("cc.kmMat4AreEqual(): pMat1 and pMat2 are same object."),!0;var c=this.mat;b=b.mat;for(var d=a.math.EPSILON,h=0;16>
h;h++)if(!(c[h]+d>b[h]&&c[h]-d<b[h]))return!1;return!0};a.math.Matrix4.createByRotationX=function(b,c){c=c||new a.math.Matrix4;var d=c.mat;d[0]=1;d[3]=d[2]=d[1]=0;d[4]=0;d[5]=Math.cos(b);d[6]=Math.sin(b);d[7]=0;d[8]=0;d[9]=-Math.sin(b);d[10]=Math.cos(b);d[11]=0;d[14]=d[13]=d[12]=0;d[15]=1;return c};a.math.Matrix4.createByRotationY=function(b,c){c=c||new a.math.Matrix4;var d=c.mat;d[0]=Math.cos(b);d[1]=0;d[2]=-Math.sin(b);d[3]=0;d[7]=d[6]=d[4]=0;d[5]=1;d[8]=Math.sin(b);d[9]=0;d[10]=Math.cos(b);d[11]=
0;d[14]=d[13]=d[12]=0;d[15]=1;return c};a.math.Matrix4.createByRotationZ=function(b,c){c=c||new a.math.Matrix4;var d=c.mat;d[0]=Math.cos(b);d[1]=Math.sin(b);d[3]=d[2]=0;d[4]=-Math.sin(b);d[5]=Math.cos(b);d[7]=d[6]=0;d[11]=d[9]=d[8]=0;d[10]=1;d[14]=d[13]=d[12]=0;d[15]=1;return c};a.math.Matrix4.createByPitchYawRoll=function(b,c,d,h){h=h||new a.math.Matrix4;var k=Math.cos(b);b=Math.sin(b);var m=Math.cos(c);c=Math.sin(c);var n=Math.cos(d);d=Math.sin(d);var p=b*c,r=k*c,s=h.mat;s[0]=m*n;s[4]=m*d;s[8]=
-c;s[1]=p*n-k*d;s[5]=p*d+k*n;s[9]=b*m;s[2]=r*n+b*d;s[6]=r*d-b*n;s[10]=k*m;s[3]=s[7]=s[11]=0;s[15]=1;return h};a.math.Matrix4.createByQuaternion=function(b,c){c=c||new a.math.Matrix4;var d=c.mat;d[0]=1-2*(b.y*b.y+b.z*b.z);d[1]=2*(b.x*b.y+b.z*b.w);d[2]=2*(b.x*b.z-b.y*b.w);d[3]=0;d[4]=2*(b.x*b.y-b.z*b.w);d[5]=1-2*(b.x*b.x+b.z*b.z);d[6]=2*(b.z*b.y+b.x*b.w);d[7]=0;d[8]=2*(b.x*b.z+b.y*b.w);d[9]=2*(b.y*b.z-b.x*b.w);d[10]=1-2*(b.x*b.x+b.y*b.y);d[11]=0;d[14]=d[13]=d[12]=0;d[15]=1;return c};a.math.Matrix4.createByRotationTranslation=
function(b,c,d){d=d||new a.math.Matrix4;var h=d.mat;b=b.mat;h[0]=b[0];h[1]=b[1];h[2]=b[2];h[3]=0;h[4]=b[3];h[5]=b[4];h[6]=b[5];h[7]=0;h[8]=b[6];h[9]=b[7];h[10]=b[8];h[11]=0;h[12]=c.x;h[13]=c.y;h[14]=c.z;h[15]=1;return d};a.math.Matrix4.createByScale=function(b,c,d,h){h=h||new a.math.Matrix4;var k=h.mat;k[0]=b;k[5]=c;k[10]=d;k[15]=1;k[1]=k[2]=k[3]=k[4]=k[6]=k[7]=k[8]=k[9]=k[11]=k[12]=k[13]=k[14]=0;return h};a.kmMat4Translation=function(a,b,c,d){a.mat[0]=a.mat[5]=a.mat[10]=a.mat[15]=1;a.mat[1]=a.mat[2]=
a.mat[3]=a.mat[4]=a.mat[6]=a.mat[7]=a.mat[8]=a.mat[9]=a.mat[11]=0;a.mat[12]=b;a.mat[13]=c;a.mat[14]=d;return a};a.math.Matrix4.createByTranslation=function(b,c,d,h){h=h||new a.math.Matrix4;h.identity();h.mat[12]=b;h.mat[13]=c;h.mat[14]=d;return h};b.getUpVec3=function(){var b=this.mat;return(new a.math.Vec3(b[4],b[5],b[6])).normalize()};b.getRightVec3=function(){var b=this.mat;return(new a.math.Vec3(b[0],b[1],b[2])).normalize()};b.getForwardVec3=function(){var b=this.mat;return(new a.math.Vec3(b[8],
b[9],b[10])).normalize()};a.kmMat4PerspectiveProjection=function(b,c,d,h,k){var m=a.degreesToRadians(c/2);c=k-h;var n=Math.sin(m);if(0===c||0===n||0===d)return null;m=Math.cos(m)/n;b.identity();b.mat[0]=m/d;b.mat[5]=m;b.mat[10]=-(k+h)/c;b.mat[11]=-1;b.mat[14]=-2*h*k/c;b.mat[15]=0;return b};a.math.Matrix4.createPerspectiveProjection=function(b,c,d,h){var k=a.degreesToRadians(b/2);b=h-d;var m=Math.sin(k);if(0===b||0===m||0===c)return null;var k=Math.cos(k)/m,m=new a.math.Matrix4,n=m.mat;m.identity();
n[0]=k/c;n[5]=k;n[10]=-(h+d)/b;n[11]=-1;n[14]=-2*d*h/b;n[15]=0;return m};a.kmMat4OrthographicProjection=function(a,b,c,d,k,m,n){a.identity();a.mat[0]=2/(c-b);a.mat[5]=2/(k-d);a.mat[10]=-2/(n-m);a.mat[12]=-((c+b)/(c-b));a.mat[13]=-((k+d)/(k-d));a.mat[14]=-((n+m)/(n-m));return a};a.math.Matrix4.createOrthographicProjection=function(b,c,d,h,k,m){var n=new a.math.Matrix4,p=n.mat;n.identity();p[0]=2/(c-b);p[5]=2/(h-d);p[10]=-2/(m-k);p[12]=-((c+b)/(c-b));p[13]=-((h+d)/(h-d));p[14]=-((m+k)/(m-k));return n};
a.kmMat4LookAt=function(b,c,d,h){d=new a.math.Vec3(d);var k=new a.math.Vec3(h);d.subtract(c);d.normalize();k.normalize();h=new a.math.Vec3(d);h.cross(k);h.normalize();k=new a.math.Vec3(h);k.cross(d);h.normalize();b.identity();b.mat[0]=h.x;b.mat[4]=h.y;b.mat[8]=h.z;b.mat[1]=k.x;b.mat[5]=k.y;b.mat[9]=k.z;b.mat[2]=-d.x;b.mat[6]=-d.y;b.mat[10]=-d.z;c=a.math.Matrix4.createByTranslation(-c.x,-c.y,-c.z);b.multiply(c);return b};var d=new a.math.Matrix4;b.lookAt=function(b,c,g){c=new a.math.Vec3(c);var h=
new a.math.Vec3(g);g=this.mat;c.subtract(b);c.normalize();h.normalize();var k=new a.math.Vec3(c);k.cross(h);k.normalize();h=new a.math.Vec3(k);h.cross(c);k.normalize();this.identity();g[0]=k.x;g[4]=k.y;g[8]=k.z;g[1]=h.x;g[5]=h.y;g[9]=h.z;g[2]=-c.x;g[6]=-c.y;g[10]=-c.z;d=a.math.Matrix4.createByTranslation(-b.x,-b.y,-b.z,d);this.multiply(d);return this};a.kmMat4RotationAxisAngle=function(b,c,d){var h=Math.cos(d);d=Math.sin(d);c=new a.math.Vec3(c);c.normalize();b.mat[0]=h+c.x*c.x*(1-h);b.mat[1]=c.z*
d+c.y*c.x*(1-h);b.mat[2]=-c.y*d+c.z*c.x*(1-h);b.mat[3]=0;b.mat[4]=-c.z*d+c.x*c.y*(1-h);b.mat[5]=h+c.y*c.y*(1-h);b.mat[6]=c.x*d+c.z*c.y*(1-h);b.mat[7]=0;b.mat[8]=c.y*d+c.x*c.z*(1-h);b.mat[9]=-c.x*d+c.y*c.z*(1-h);b.mat[10]=h+c.z*c.z*(1-h);b.mat[11]=0;b.mat[12]=0;b.mat[13]=0;b.mat[14]=0;b.mat[15]=1;return b};a.math.Matrix4.createByAxisAndAngle=function(b,c,d){d=d||new a.math.Matrix4;var h=this.mat,k=Math.cos(c);c=Math.sin(c);b=new a.math.Vec3(b);b.normalize();h[0]=k+b.x*b.x*(1-k);h[1]=b.z*c+b.y*b.x*
(1-k);h[2]=-b.y*c+b.z*b.x*(1-k);h[3]=0;h[4]=-b.z*c+b.x*b.y*(1-k);h[5]=k+b.y*b.y*(1-k);h[6]=b.x*c+b.z*b.y*(1-k);h[7]=0;h[8]=b.y*c+b.x*b.z*(1-k);h[9]=-b.x*c+b.y*b.z*(1-k);h[10]=k+b.z*b.z*(1-k);h[11]=0;h[12]=h[13]=h[14]=0;h[15]=1;return d};b.extractRotation=function(){var b=new a.math.Matrix3,c=this.mat,d=b.mat;d[0]=c[0];d[1]=c[1];d[2]=c[2];d[3]=c[4];d[4]=c[5];d[5]=c[6];d[6]=c[8];d[7]=c[9];d[8]=c[10];return b};b.extractPlane=function(b){var c=new a.math.Plane,d=this.mat;switch(b){case a.math.Plane.RIGHT:c.a=
d[3]-d[0];c.b=d[7]-d[4];c.c=d[11]-d[8];c.d=d[15]-d[12];break;case a.math.Plane.LEFT:c.a=d[3]+d[0];c.b=d[7]+d[4];c.c=d[11]+d[8];c.d=d[15]+d[12];break;case a.math.Plane.BOTTOM:c.a=d[3]+d[1];c.b=d[7]+d[5];c.c=d[11]+d[9];c.d=d[15]+d[13];break;case a.math.Plane.TOP:c.a=d[3]-d[1];c.b=d[7]-d[5];c.c=d[11]-d[9];c.d=d[15]-d[13];break;case a.math.Plane.FAR:c.a=d[3]-d[2];c.b=d[7]-d[6];c.c=d[11]-d[10];c.d=d[15]-d[14];break;case a.math.Plane.NEAR:c.a=d[3]+d[2];c.b=d[7]+d[6];c.c=d[11]+d[10];c.d=d[15]+d[14];break;
default:a.log("cc.math.Matrix4.extractPlane: Invalid plane index")}b=Math.sqrt(c.a*c.a+c.b*c.b+c.c*c.c);c.a/=b;c.b/=b;c.c/=b;c.d/=b;return c};b.toAxisAndAngle=function(){var b=this.extractRotation();return a.math.Quaternion.rotationMatrix(b).toAxisAndAngle()}})(cc);(function(a){a.math.Plane=function(a,b,e,f){a&&void 0===b?(this.a=a.a,this.b=a.b,this.c=a.c,this.d=a.d):(this.a=a||0,this.b=b||0,this.c=e||0,this.d=f||0)};a.kmPlane=a.math.Plane;var b=a.math.Plane.prototype;a.math.Plane.LEFT=0;a.math.Plane.RIGHT=1;a.math.Plane.BOTTOM=2;a.math.Plane.TOP=3;a.math.Plane.NEAR=4;a.math.Plane.FAR=5;a.math.Plane.POINT_INFRONT_OF_PLANE=0;a.math.Plane.POINT_BEHIND_PLANE=1;a.math.Plane.POINT_ON_PLANE=2;b.dot=function(a){return this.a*a.x+this.b*a.y+this.c*a.z+this.d*a.w};b.dotCoord=
function(a){return this.a*a.x+this.b*a.y+this.c*a.z+this.d};b.dotNormal=function(a){return this.a*a.x+this.b*a.y+this.c*a.z};a.math.Plane.fromPointNormal=function(b,d){return new a.math.Plane(d.x,d.y,d.z,-d.dot(b))};a.math.Plane.fromPoints=function(b,d,e){d=new a.math.Vec3(d);e=new a.math.Vec3(e);var f=new a.math.Plane;d.subtract(b);e.subtract(b);d.cross(e);d.normalize();f.a=d.x;f.b=d.y;f.c=d.z;f.d=d.scale(-1).dot(b);return f};b.normalize=function(){var b=new a.math.Vec3(this.a,this.b,this.c),d=1/
b.length();b.normalize();this.a=b.x;this.b=b.y;this.c=b.z;this.d*=d;return this};b.classifyPoint=function(b){b=this.a*b.x+this.b*b.y+this.c*b.z+this.d;return 0.001<b?a.math.Plane.POINT_INFRONT_OF_PLANE:-0.001>b?a.math.Plane.POINT_BEHIND_PLANE:a.math.Plane.POINT_ON_PLANE}})(cc);(function(a){a.math.Quaternion=function(a,b,e,f){a&&void 0===b?(this.x=a.x,this.y=a.y,this.z=a.z,this.w=a.w):(this.x=a||0,this.y=b||0,this.z=e||0,this.w=f||0)};a.kmQuaternion=a.math.Quaternion;var b=a.math.Quaternion.prototype;b.conjugate=function(a){this.x=-a.x;this.y=-a.y;this.z=-a.z;this.w=a.w;return this};b.dot=function(a){return this.w*a.w+this.x*a.x+this.y*a.y+this.z*a.z};b.exponential=function(){return this};b.identity=function(){this.z=this.y=this.x=0;this.w=1;return this};b.inverse=function(){var b=
this.length();if(Math.abs(b)>a.math.EPSILON)return this.w=this.z=this.y=this.x=0,this;this.conjugate(this).scale(1/b);return this};b.isIdentity=function(){return 0===this.x&&0===this.y&&0===this.z&&1===this.w};b.length=function(){return Math.sqrt(this.lengthSq())};b.lengthSq=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w};b.multiply=function(a){var b=this.x,e=this.y,f=this.z,g=this.w;this.w=g*a.w-b*a.x-e*a.y-f*a.z;this.x=g*a.x+b*a.w+e*a.z-f*a.y;this.y=g*a.y+e*a.w+f*a.x-
b*a.z;this.z=g*a.z+f*a.w+b*a.y-e*a.x;return this};b.normalize=function(){var b=this.length();if(Math.abs(b)<=a.math.EPSILON)throw Error("current quaternion is an invalid value");this.scale(1/b);return this};b.rotationAxis=function(a,b){var e=0.5*b,f=Math.sin(e);this.w=Math.cos(e);this.x=a.x*f;this.y=a.y*f;this.z=a.z*f;return this};a.math.Quaternion.rotationMatrix=function(b){if(!b)return null;var d,e,f;d=[];e=b.mat;b=0;d[0]=e[0];d[1]=e[3];d[2]=e[6];d[4]=e[1];d[5]=e[4];d[6]=e[7];d[8]=e[2];d[9]=e[5];
d[10]=e[8];d[15]=1;var g=d[0];b=g[0]+g[5]+g[10]+1;b>a.math.EPSILON?(b=2*Math.sqrt(b),d=(g[9]-g[6])/b,e=(g[2]-g[8])/b,f=(g[4]-g[1])/b,b*=0.25):g[0]>g[5]&&g[0]>g[10]?(b=2*Math.sqrt(1+g[0]-g[5]-g[10]),d=0.25*b,e=(g[4]+g[1])/b,f=(g[2]+g[8])/b,b=(g[9]-g[6])/b):g[5]>g[10]?(b=2*Math.sqrt(1+g[5]-g[0]-g[10]),d=(g[4]+g[1])/b,e=0.25*b,f=(g[9]+g[6])/b,b=(g[2]-g[8])/b):(b=2*Math.sqrt(1+g[10]-g[0]-g[5]),d=(g[2]+g[8])/b,e=(g[9]+g[6])/b,f=0.25*b,b=(g[4]-g[1])/b);return new a.math.Quaternion(d,e,f,b)};a.math.Quaternion.rotationYawPitchRoll=
function(b,d,e){var f,g,h,k,m;f=a.degreesToRadians(d)/2;g=a.degreesToRadians(b)/2;h=a.degreesToRadians(e)/2;e=Math.cos(f);b=Math.cos(g);d=Math.cos(h);f=Math.sin(f);g=Math.sin(g);h=Math.sin(h);k=b*d;m=g*h;var n=new a.math.Quaternion;n.w=e*k+f*m;n.x=f*k-e*m;n.y=e*g*d+f*b*h;n.z=e*b*h-f*g*d;n.normalize();return n};b.slerp=function(b,d){if(this.x===b.x&&this.y===b.y&&this.z===b.z&&this.w===b.w)return this;var e=this.dot(b),f=Math.acos(e),g=Math.sqrt(1-a.math.square(e)),e=Math.sin(d*f)/g,f=Math.sin((1-
d)*f)/g,g=new a.math.Quaternion(b);this.scale(f);g.scale(e);this.add(g);return this};b.toAxisAndAngle=function(){var b,d,e=new a.math.Vec3;b=Math.acos(this.w);d=Math.sqrt(a.math.square(this.x)+a.math.square(this.y)+a.math.square(this.z));d>-a.math.EPSILON&&d<a.math.EPSILON||d<2*Math.PI+a.math.EPSILON&&d>2*Math.PI-a.math.EPSILON?(b=0,e.x=0,e.y=0,e.z=1):(b*=2,e.x=this.x/d,e.y=this.y/d,e.z=this.z/d,e.normalize());return{axis:e,angle:b}};b.scale=function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this};
b.assignFrom=function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=a.w;return this};b.add=function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this};a.math.Quaternion.rotationBetweenVec3=function(b,d,e){var f=new a.math.Vec3(b),g=new a.math.Vec3(d);f.normalize();g.normalize();var h=f.dot(g);d=new a.math.Quaternion;if(1<=h)return d.identity(),d;-0.999999>h?Math.abs(e.lengthSq())<a.math.EPSILON?d.rotationAxis(e,Math.PI):(f=new a.math.Vec3(1,0,0),f.cross(b),Math.abs(f.lengthSq())<a.math.EPSILON&&
(f.fill(0,1,0),f.cross(b)),f.normalize(),d.rotationAxis(f,Math.PI)):(b=Math.sqrt(2*(1+h)),e=1/b,f.cross(g),d.x=f.x*e,d.y=f.y*e,d.z=f.z*e,d.w=0.5*b,d.normalize());return d};b.multiplyVec3=function(b){var d=this.x,e=this.y,f=this.z,g=new a.math.Vec3(b),h=new a.math.Vec3(d,e,f),d=new a.math.Vec3(d,e,f);h.cross(b);d.cross(h);h.scale(2*q.w);d.scale(2);g.add(h);g.add(d);return g}})(cc);cc.math.AABB=function(a,b){this.min=a||new cc.math.Vec3;this.max=b||new cc.math.Vec3};cc.math.AABB.prototype.containsPoint=function(a){return a.x>=this.min.x&&a.x<=this.max.x&&a.y>=this.min.y&&a.y<=this.max.y&&a.z>=this.min.z&&a.z<=this.max.z};cc.math.AABB.containsPoint=function(a,b){return a.x>=b.min.x&&a.x<=b.max.x&&a.y>=b.min.y&&a.y<=b.max.y&&a.z>=b.min.z&&a.z<=b.max.z};cc.math.AABB.prototype.assignFrom=function(a){this.min.assignFrom(a.min);this.max.assignFrom(a.max)};
cc.math.AABB.assign=function(a,b){a.min.assignFrom(b.min);a.max.assignFrom(b.max);return a};(function(a){a.math.Matrix4Stack=function(a,b){this.top=a;this.stack=b||[]};a.km_mat4_stack=a.math.Matrix4Stack;var b=a.math.Matrix4Stack.prototype;b.initialize=function(){this.stack.length=0;this.top=null};a.km_mat4_stack_push=function(b,d){b.stack.push(b.top);b.top=new a.math.Matrix4(d)};a.km_mat4_stack_pop=function(a,b){a.top=a.stack.pop()};a.km_mat4_stack_release=function(a){a.stack=null;a.top=null};b.push=function(b){b=b||this.top;this.stack.push(this.top);this.top=new a.math.Matrix4(b)};b.pop=
function(){this.top=this.stack.pop()};b.release=function(){this._matrixPool=this.top=this.stack=null};b._getFromPool=function(b){var d=this._matrixPool;if(0===d.length)return new a.math.Matrix4(b);d=d.pop();d.assignFrom(b);return d};b._putInPool=function(a){this._matrixPool.push(a)}})(cc);(function(a){a.KM_GL_MODELVIEW=5888;a.KM_GL_PROJECTION=5889;a.KM_GL_TEXTURE=5890;a.modelview_matrix_stack=new a.math.Matrix4Stack;a.projection_matrix_stack=new a.math.Matrix4Stack;a.texture_matrix_stack=new a.math.Matrix4Stack;a.current_stack=null;a.lazyInitialize=function(){var b=new a.math.Matrix4;a.modelview_matrix_stack.initialize();a.projection_matrix_stack.initialize();a.texture_matrix_stack.initialize();a.current_stack=a.modelview_matrix_stack;a.initialized=!0;b.identity();a.modelview_matrix_stack.push(b);
a.projection_matrix_stack.push(b);a.texture_matrix_stack.push(b)};a.lazyInitialize();a.kmGLFreeAll=function(){a.modelview_matrix_stack.release();a.modelview_matrix_stack=null;a.projection_matrix_stack.release();a.projection_matrix_stack=null;a.texture_matrix_stack.release();a.texture_matrix_stack=null;a.initialized=!1;a.current_stack=null};a.kmGLPushMatrix=function(){a.current_stack.push(a.current_stack.top)};a.kmGLPushMatrixWitMat4=function(b){a.current_stack.stack.push(a.current_stack.top);b.assignFrom(a.current_stack.top);
a.current_stack.top=b};a.kmGLPopMatrix=function(){a.current_stack.top=a.current_stack.stack.pop()};a.kmGLMatrixMode=function(b){switch(b){case a.KM_GL_MODELVIEW:a.current_stack=a.modelview_matrix_stack;break;case a.KM_GL_PROJECTION:a.current_stack=a.projection_matrix_stack;break;case a.KM_GL_TEXTURE:a.current_stack=a.texture_matrix_stack;break;default:throw Error("Invalid matrix mode specified");}};a.kmGLLoadIdentity=function(){a.current_stack.top.identity()};a.kmGLLoadMatrix=function(b){a.current_stack.top.assignFrom(b)};
a.kmGLMultMatrix=function(b){a.current_stack.top.multiply(b)};var b=new a.math.Matrix4;a.kmGLTranslatef=function(c,e,f){c=a.math.Matrix4.createByTranslation(c,e,f,b);a.current_stack.top.multiply(c)};var c=new a.math.Vec3;a.kmGLRotatef=function(d,e,f,g){c.fill(e,f,g);d=a.math.Matrix4.createByAxisAndAngle(c,a.degreesToRadians(d),b);a.current_stack.top.multiply(d)};a.kmGLScalef=function(c,e,f){c=a.math.Matrix4.createByScale(c,e,f,b);a.current_stack.top.multiply(c)};a.kmGLGetMatrix=function(b,c){switch(b){case a.KM_GL_MODELVIEW:c.assignFrom(a.modelview_matrix_stack.top);
break;case a.KM_GL_PROJECTION:c.assignFrom(a.projection_matrix_stack.top);break;case a.KM_GL_TEXTURE:c.assignFrom(a.texture_matrix_stack.top);break;default:throw Error("Invalid matrix mode specified");}}})(cc);cc.ACTION_TAG_INVALID=-1;
cc.Action=cc.Class.extend({originalTarget:null,target:null,tag:cc.ACTION_TAG_INVALID,ctor:function(){this.target=this.originalTarget=null;this.tag=cc.ACTION_TAG_INVALID},copy:function(){cc.log("copy is deprecated. Please use clone instead.");return this.clone()},clone:function(){var a=new cc.Action;a.originalTarget=null;a.target=null;a.tag=this.tag;return a},isDone:function(){return!0},startWithTarget:function(a){this.target=this.originalTarget=a},stop:function(){this.target=null},step:function(a){cc.log("[Action step]. override me")},
update:function(a){cc.log("[Action update]. override me")},getTarget:function(){return this.target},setTarget:function(a){this.target=a},getOriginalTarget:function(){return this.originalTarget},setOriginalTarget:function(a){this.originalTarget=a},getTag:function(){return this.tag},setTag:function(a){this.tag=a},retain:function(){},release:function(){}});cc.action=function(){return new cc.Action};cc.Action.create=cc.action;
cc.FiniteTimeAction=cc.Action.extend({_duration:0,ctor:function(){cc.Action.prototype.ctor.call(this);this._duration=0},getDuration:function(){return this._duration*(this._timesForRepeat||1)},setDuration:function(a){this._duration=a},reverse:function(){cc.log("cocos2d: FiniteTimeAction#reverse: Implement me");return null},clone:function(){return new cc.FiniteTimeAction}});
cc.Speed=cc.Action.extend({_speed:0,_innerAction:null,ctor:function(a,b){cc.Action.prototype.ctor.call(this);this._speed=0;this._innerAction=null;a&&this.initWithAction(a,b)},getSpeed:function(){return this._speed},setSpeed:function(a){this._speed=a},initWithAction:function(a,b){if(!a)throw Error("cc.Speed.initWithAction(): action must be non nil");this._innerAction=a;this._speed=b;return!0},clone:function(){var a=new cc.Speed;a.initWithAction(this._innerAction.clone(),this._speed);return a},startWithTarget:function(a){cc.Action.prototype.startWithTarget.call(this,
a);this._innerAction.startWithTarget(a)},stop:function(){this._innerAction.stop();cc.Action.prototype.stop.call(this)},step:function(a){this._innerAction.step(a*this._speed)},isDone:function(){return this._innerAction.isDone()},reverse:function(){return new cc.Speed(this._innerAction.reverse(),this._speed)},setInnerAction:function(a){this._innerAction!==a&&(this._innerAction=a)},getInnerAction:function(){return this._innerAction}});cc.speed=function(a,b){return new cc.Speed(a,b)};
cc.Speed.create=cc.speed;
cc.Follow=cc.Action.extend({_followedNode:null,_boundarySet:!1,_boundaryFullyCovered:!1,_halfScreenSize:null,_fullScreenSize:null,_worldRect:null,leftBoundary:0,rightBoundary:0,topBoundary:0,bottomBoundary:0,ctor:function(a,b){cc.Action.prototype.ctor.call(this);this._followedNode=null;this._boundaryFullyCovered=this._boundarySet=!1;this._fullScreenSize=this._halfScreenSize=null;this.bottomBoundary=this.topBoundary=this.rightBoundary=this.leftBoundary=0;this._worldRect=cc.rect(0,0,0,0);a&&(b?this.initWithTarget(a,
b):this.initWithTarget(a))},clone:function(){var a=new cc.Follow,b=this._worldRect,b=new cc.Rect(b.x,b.y,b.width,b.height);a.initWithTarget(this._followedNode,b);return a},isBoundarySet:function(){return this._boundarySet},setBoudarySet:function(a){this._boundarySet=a},initWithTarget:function(a,b){if(!a)throw Error("cc.Follow.initWithAction(): followedNode must be non nil");b=b||cc.rect(0,0,0,0);this._followedNode=a;this._worldRect=b;this._boundarySet=!cc._rectEqualToZero(b);this._boundaryFullyCovered=
!1;var c=cc.director.getWinSize();this._fullScreenSize=cc.p(c.width,c.height);this._halfScreenSize=cc.pMult(this._fullScreenSize,0.5);this._boundarySet&&(this.leftBoundary=-(b.x+b.width-this._fullScreenSize.x),this.rightBoundary=-b.x,this.topBoundary=-b.y,this.bottomBoundary=-(b.y+b.height-this._fullScreenSize.y),this.rightBoundary<this.leftBoundary&&(this.rightBoundary=this.leftBoundary=(this.leftBoundary+this.rightBoundary)/2),this.topBoundary<this.bottomBoundary&&(this.topBoundary=this.bottomBoundary=
(this.topBoundary+this.bottomBoundary)/2),this.topBoundary===this.bottomBoundary&&this.leftBoundary===this.rightBoundary&&(this._boundaryFullyCovered=!0));return!0},step:function(a){a=this._followedNode.x;var b=this._followedNode.y;a=this._halfScreenSize.x-a;b=this._halfScreenSize.y-b;this.target._renderCmd._dirtyFlag=0;this._boundarySet?this._boundaryFullyCovered||this.target.setPosition(cc.clampf(a,this.leftBoundary,this.rightBoundary),cc.clampf(b,this.bottomBoundary,this.topBoundary)):this.target.setPosition(a,
b)},isDone:function(){return!this._followedNode.running},stop:function(){this.target=null;cc.Action.prototype.stop.call(this)}});cc.follow=function(a,b){return new cc.Follow(a,b)};cc.Follow.create=cc.follow;cc.ActionInterval=cc.FiniteTimeAction.extend({_elapsed:0,_firstTick:!1,_easeList:null,_timesForRepeat:1,_repeatForever:!1,_repeatMethod:!1,_speed:1,_speedMethod:!1,ctor:function(a){this._timesForRepeat=this._speed=1;this._repeatForever=!1;this.MAX_VALUE=2;this._speedMethod=this._repeatMethod=!1;cc.FiniteTimeAction.prototype.ctor.call(this);void 0!==a&&this.initWithDuration(a)},getElapsed:function(){return this._elapsed},initWithDuration:function(a){this._duration=0===a?cc.FLT_EPSILON:a;this._elapsed=
0;return this._firstTick=!0},isDone:function(){return this._elapsed>=this._duration},_cloneDecoration:function(a){a._repeatForever=this._repeatForever;a._speed=this._speed;a._timesForRepeat=this._timesForRepeat;a._easeList=this._easeList;a._speedMethod=this._speedMethod;a._repeatMethod=this._repeatMethod},_reverseEaseList:function(a){if(this._easeList){a._easeList=[];for(var b=0;b<this._easeList.length;b++)a._easeList.push(this._easeList[b].reverse())}},clone:function(){var a=new cc.ActionInterval(this._duration);
this._cloneDecoration(a);return a},easing:function(a){this._easeList?this._easeList.length=0:this._easeList=[];for(var b=0;b<arguments.length;b++)this._easeList.push(arguments[b]);return this},_computeEaseTime:function(a){var b=this._easeList;if(!b||0===b.length)return a;for(var c=0,d=b.length;c<d;c++)a=b[c].easing(a);return a},step:function(a){this._firstTick?(this._firstTick=!1,this._elapsed=0):this._elapsed+=a;a=this._elapsed/(1.192092896E-7<this._duration?this._duration:1.192092896E-7);a=1>a?
a:1;this.update(0<a?a:0);this._repeatMethod&&1<this._timesForRepeat&&this.isDone()&&(this._repeatForever||this._timesForRepeat--,this.startWithTarget(this.target),this.step(this._elapsed-this._duration))},startWithTarget:function(a){cc.Action.prototype.startWithTarget.call(this,a);this._elapsed=0;this._firstTick=!0},reverse:function(){cc.log("cc.IntervalAction: reverse not implemented.");return null},setAmplitudeRate:function(a){cc.log("cc.ActionInterval.setAmplitudeRate(): it should be overridden in subclass.")},
getAmplitudeRate:function(){cc.log("cc.ActionInterval.getAmplitudeRate(): it should be overridden in subclass.");return 0},speed:function(a){if(0>=a)return cc.log("The speed parameter error"),this;this._speedMethod=!0;this._speed*=a;return this},getSpeed:function(){return this._speed},setSpeed:function(a){this._speed=a;return this},repeat:function(a){a=Math.round(a);if(isNaN(a)||1>a)return cc.log("The repeat parameter error"),this;this._repeatMethod=!0;this._timesForRepeat*=a;return this},repeatForever:function(){this._repeatMethod=
!0;this._timesForRepeat=this.MAX_VALUE;this._repeatForever=!0;return this}});cc.actionInterval=function(a){return new cc.ActionInterval(a)};cc.ActionInterval.create=cc.actionInterval;
cc.Sequence=cc.ActionInterval.extend({_actions:null,_split:null,_last:0,ctor:function(a){cc.ActionInterval.prototype.ctor.call(this);this._actions=[];var b=a instanceof Array?a:arguments,c=b.length-1;0<=c&&null==b[c]&&cc.log("parameters should not be ending with null in Javascript");if(0<=c){for(var d=b[0],e=1;e<c;e++)b[e]&&(d=cc.Sequence._actionOneTwo(d,b[e]));this.initWithTwoActions(d,b[c])}},initWithTwoActions:function(a,b){if(!a||!b)throw Error("cc.Sequence.initWithTwoActions(): arguments must all be non nil");
this.initWithDuration(a._duration+b._duration);this._actions[0]=a;this._actions[1]=b;return!0},clone:function(){var a=new cc.Sequence;this._cloneDecoration(a);a.initWithTwoActions(this._actions[0].clone(),this._actions[1].clone());return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);this._split=this._actions[0]._duration/this._duration;this._last=-1},stop:function(){-1!==this._last&&this._actions[this._last].stop();cc.Action.prototype.stop.call(this)},update:function(a){var b=
0,c=this._split,d=this._actions,e=this._last;a=this._computeEaseTime(a);a<c?(a=0!==c?a/c:1,0===b&&1===e&&(d[1].update(0),d[1].stop())):(b=1,a=1===c?1:(a-c)/(1-c),-1===e&&(d[0].startWithTarget(this.target),d[0].update(1),d[0].stop()),e||(d[0].update(1),d[0].stop()));d=d[b];e===b&&d.isDone()||(e!==b&&d.startWithTarget(this.target),a*=d._timesForRepeat,d.update(1<a?a%1:a),this._last=b)},reverse:function(){var a=cc.Sequence._actionOneTwo(this._actions[1].reverse(),this._actions[0].reverse());this._cloneDecoration(a);
this._reverseEaseList(a);return a}});cc.sequence=function(a){var b=a instanceof Array?a:arguments;0<b.length&&null==b[b.length-1]&&cc.log("parameters should not be ending with null in Javascript");for(var c,d,e,f;b&&0<b.length;)for(d=Array.prototype.shift.call(b),f=d._timesForRepeat||1,d._repeatMethod=!1,d._timesForRepeat=1,e=0,c||(c=d,e=1),e;e<f;e++)c=cc.Sequence._actionOneTwo(c,d);return c};cc.Sequence.create=cc.sequence;
cc.Sequence._actionOneTwo=function(a,b){var c=new cc.Sequence;c.initWithTwoActions(a,b);return c};
cc.Repeat=cc.ActionInterval.extend({_times:0,_total:0,_nextDt:0,_actionInstant:!1,_innerAction:null,ctor:function(a,b){cc.ActionInterval.prototype.ctor.call(this);void 0!==b&&this.initWithAction(a,b)},initWithAction:function(a,b){return this.initWithDuration(a._duration*b)?(this._times=b,this._innerAction=a,a instanceof cc.ActionInstant&&(this._actionInstant=!0,this._times-=1),this._total=0,!0):!1},clone:function(){var a=new cc.Repeat;this._cloneDecoration(a);a.initWithAction(this._innerAction.clone(),
this._times);return a},startWithTarget:function(a){this._total=0;this._nextDt=this._innerAction._duration/this._duration;cc.ActionInterval.prototype.startWithTarget.call(this,a);this._innerAction.startWithTarget(a)},stop:function(){this._innerAction.stop();cc.Action.prototype.stop.call(this)},update:function(a){a=this._computeEaseTime(a);var b=this._innerAction,c=this._duration,d=this._times,e=this._nextDt;if(a>=e){for(;a>e&&this._total<d;)b.update(1),this._total++,b.stop(),b.startWithTarget(this.target),
this._nextDt=e+=b._duration/c;1<=a&&this._total<d&&this._total++;this._actionInstant||(this._total===d?(b.update(1),b.stop()):b.update(a-(e-b._duration/c)))}else b.update(a*d%1)},isDone:function(){return this._total===this._times},reverse:function(){var a=new cc.Repeat(this._innerAction.reverse(),this._times);this._cloneDecoration(a);this._reverseEaseList(a);return a},setInnerAction:function(a){this._innerAction!==a&&(this._innerAction=a)},getInnerAction:function(){return this._innerAction}});
cc.repeat=function(a,b){return new cc.Repeat(a,b)};cc.Repeat.create=cc.repeat;
cc.RepeatForever=cc.ActionInterval.extend({_innerAction:null,ctor:function(a){cc.ActionInterval.prototype.ctor.call(this);this._innerAction=null;a&&this.initWithAction(a)},initWithAction:function(a){if(!a)throw Error("cc.RepeatForever.initWithAction(): action must be non null");this._innerAction=a;return!0},clone:function(){var a=new cc.RepeatForever;this._cloneDecoration(a);a.initWithAction(this._innerAction.clone());return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,
a);this._innerAction.startWithTarget(a)},step:function(a){var b=this._innerAction;b.step(a);b.isDone()&&(b.startWithTarget(this.target),b.step(b.getElapsed()-b._duration))},isDone:function(){return!1},reverse:function(){var a=new cc.RepeatForever(this._innerAction.reverse());this._cloneDecoration(a);this._reverseEaseList(a);return a},setInnerAction:function(a){this._innerAction!==a&&(this._innerAction=a)},getInnerAction:function(){return this._innerAction}});cc.repeatForever=function(a){return new cc.RepeatForever(a)};
cc.RepeatForever.create=cc.repeatForever;
cc.Spawn=cc.ActionInterval.extend({_one:null,_two:null,ctor:function(a){cc.ActionInterval.prototype.ctor.call(this);this._two=this._one=null;var b=a instanceof Array?a:arguments,c=b.length-1;0<=c&&null==b[c]&&cc.log("parameters should not be ending with null in Javascript");if(0<=c){for(var d=b[0],e=1;e<c;e++)b[e]&&(d=cc.Spawn._actionOneTwo(d,b[e]));this.initWithTwoActions(d,b[c])}},initWithTwoActions:function(a,b){if(!a||!b)throw Error("cc.Spawn.initWithTwoActions(): arguments must all be non null");var c=
!1,d=a._duration,e=b._duration;this.initWithDuration(Math.max(d,e))&&(this._one=a,this._two=b,d>e?this._two=cc.Sequence._actionOneTwo(b,cc.delayTime(d-e)):d<e&&(this._one=cc.Sequence._actionOneTwo(a,cc.delayTime(e-d))),c=!0);return c},clone:function(){var a=new cc.Spawn;this._cloneDecoration(a);a.initWithTwoActions(this._one.clone(),this._two.clone());return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);this._one.startWithTarget(a);this._two.startWithTarget(a)},
stop:function(){this._one.stop();this._two.stop();cc.Action.prototype.stop.call(this)},update:function(a){a=this._computeEaseTime(a);this._one&&this._one.update(a);this._two&&this._two.update(a)},reverse:function(){var a=cc.Spawn._actionOneTwo(this._one.reverse(),this._two.reverse());this._cloneDecoration(a);this._reverseEaseList(a);return a}});
cc.spawn=function(a){var b=a instanceof Array?a:arguments;0<b.length&&null==b[b.length-1]&&cc.log("parameters should not be ending with null in Javascript");for(var c=b[0],d=1;d<b.length;d++)null!=b[d]&&(c=cc.Spawn._actionOneTwo(c,b[d]));return c};cc.Spawn.create=cc.spawn;cc.Spawn._actionOneTwo=function(a,b){var c=new cc.Spawn;c.initWithTwoActions(a,b);return c};
cc.RotateTo=cc.ActionInterval.extend({_dstAngleX:0,_startAngleX:0,_diffAngleX:0,_dstAngleY:0,_startAngleY:0,_diffAngleY:0,ctor:function(a,b,c){cc.ActionInterval.prototype.ctor.call(this);void 0!==b&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){return cc.ActionInterval.prototype.initWithDuration.call(this,a)?(this._dstAngleX=b||0,this._dstAngleY=c||this._dstAngleX,!0):!1},clone:function(){var a=new cc.RotateTo;this._cloneDecoration(a);a.initWithDuration(this._duration,this._dstAngleX,
this._dstAngleY);return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);var b=a.rotationX%360,c=this._dstAngleX-b;180<c&&(c-=360);-180>c&&(c+=360);this._startAngleX=b;this._diffAngleX=c;this._startAngleY=a.rotationY%360;a=this._dstAngleY-this._startAngleY;180<a&&(a-=360);-180>a&&(a+=360);this._diffAngleY=a},reverse:function(){cc.log("cc.RotateTo.reverse(): it should be overridden in subclass.")},update:function(a){a=this._computeEaseTime(a);this.target&&(this.target.rotationX=
this._startAngleX+this._diffAngleX*a,this.target.rotationY=this._startAngleY+this._diffAngleY*a)}});cc.rotateTo=function(a,b,c){return new cc.RotateTo(a,b,c)};cc.RotateTo.create=cc.rotateTo;
cc.RotateBy=cc.ActionInterval.extend({_angleX:0,_startAngleX:0,_angleY:0,_startAngleY:0,ctor:function(a,b,c){cc.ActionInterval.prototype.ctor.call(this);void 0!==b&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){return cc.ActionInterval.prototype.initWithDuration.call(this,a)?(this._angleX=b||0,this._angleY=c||this._angleX,!0):!1},clone:function(){var a=new cc.RotateBy;this._cloneDecoration(a);a.initWithDuration(this._duration,this._angleX,this._angleY);return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,
a);this._startAngleX=a.rotationX;this._startAngleY=a.rotationY},update:function(a){a=this._computeEaseTime(a);this.target&&(this.target.rotationX=this._startAngleX+this._angleX*a,this.target.rotationY=this._startAngleY+this._angleY*a)},reverse:function(){var a=new cc.RotateBy(this._duration,-this._angleX,-this._angleY);this._cloneDecoration(a);this._reverseEaseList(a);return a}});cc.rotateBy=function(a,b,c){return new cc.RotateBy(a,b,c)};cc.RotateBy.create=cc.rotateBy;
cc.MoveBy=cc.ActionInterval.extend({_positionDelta:null,_startPosition:null,_previousPosition:null,ctor:function(a,b,c){cc.ActionInterval.prototype.ctor.call(this);this._positionDelta=cc.p(0,0);this._startPosition=cc.p(0,0);this._previousPosition=cc.p(0,0);void 0!==b&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){return cc.ActionInterval.prototype.initWithDuration.call(this,a)?(void 0!==b.x&&(c=b.y,b=b.x),this._positionDelta.x=b,this._positionDelta.y=c,!0):!1},clone:function(){var a=
new cc.MoveBy;this._cloneDecoration(a);a.initWithDuration(this._duration,this._positionDelta);return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);var b=a.getPositionX();a=a.getPositionY();this._previousPosition.x=b;this._previousPosition.y=a;this._startPosition.x=b;this._startPosition.y=a},update:function(a){a=this._computeEaseTime(a);if(this.target){var b=this._positionDelta.x*a;a*=this._positionDelta.y;var c=this._startPosition;if(cc.ENABLE_STACKABLE_ACTIONS){var d=
this.target.getPositionX(),e=this.target.getPositionY(),f=this._previousPosition;c.x=c.x+d-f.x;c.y=c.y+e-f.y;b+=c.x;a+=c.y;f.x=b;f.y=a;this.target.setPosition(b,a)}else this.target.setPosition(c.x+b,c.y+a)}},reverse:function(){var a=new cc.MoveBy(this._duration,cc.p(-this._positionDelta.x,-this._positionDelta.y));this._cloneDecoration(a);this._reverseEaseList(a);return a}});cc.moveBy=function(a,b,c){return new cc.MoveBy(a,b,c)};cc.MoveBy.create=cc.moveBy;
cc.MoveTo=cc.MoveBy.extend({_endPosition:null,ctor:function(a,b,c){cc.MoveBy.prototype.ctor.call(this);this._endPosition=cc.p(0,0);void 0!==b&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){return cc.MoveBy.prototype.initWithDuration.call(this,a,b,c)?(void 0!==b.x&&(c=b.y,b=b.x),this._endPosition.x=b,this._endPosition.y=c,!0):!1},clone:function(){var a=new cc.MoveTo;this._cloneDecoration(a);a.initWithDuration(this._duration,this._endPosition);return a},startWithTarget:function(a){cc.MoveBy.prototype.startWithTarget.call(this,
a);this._positionDelta.x=this._endPosition.x-a.getPositionX();this._positionDelta.y=this._endPosition.y-a.getPositionY()}});cc.moveTo=function(a,b,c){return new cc.MoveTo(a,b,c)};cc.MoveTo.create=cc.moveTo;
cc.SkewTo=cc.ActionInterval.extend({_skewX:0,_skewY:0,_startSkewX:0,_startSkewY:0,_endSkewX:0,_endSkewY:0,_deltaX:0,_deltaY:0,ctor:function(a,b,c){cc.ActionInterval.prototype.ctor.call(this);void 0!==c&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){var d=!1;cc.ActionInterval.prototype.initWithDuration.call(this,a)&&(this._endSkewX=b,this._endSkewY=c,d=!0);return d},clone:function(){var a=new cc.SkewTo;this._cloneDecoration(a);a.initWithDuration(this._duration,this._endSkewX,this._endSkewY);
return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);this._startSkewX=a.skewX%180;this._deltaX=this._endSkewX-this._startSkewX;180<this._deltaX&&(this._deltaX-=360);-180>this._deltaX&&(this._deltaX+=360);this._startSkewY=a.skewY%360;this._deltaY=this._endSkewY-this._startSkewY;180<this._deltaY&&(this._deltaY-=360);-180>this._deltaY&&(this._deltaY+=360)},update:function(a){a=this._computeEaseTime(a);this.target.skewX=this._startSkewX+this._deltaX*a;this.target.skewY=
this._startSkewY+this._deltaY*a}});cc.skewTo=function(a,b,c){return new cc.SkewTo(a,b,c)};cc.SkewTo.create=cc.skewTo;
cc.SkewBy=cc.SkewTo.extend({ctor:function(a,b,c){cc.SkewTo.prototype.ctor.call(this);void 0!==c&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){var d=!1;cc.SkewTo.prototype.initWithDuration.call(this,a,b,c)&&(this._skewX=b,this._skewY=c,d=!0);return d},clone:function(){var a=new cc.SkewBy;this._cloneDecoration(a);a.initWithDuration(this._duration,this._skewX,this._skewY);return a},startWithTarget:function(a){cc.SkewTo.prototype.startWithTarget.call(this,a);this._deltaX=this._skewX;
this._deltaY=this._skewY;this._endSkewX=this._startSkewX+this._deltaX;this._endSkewY=this._startSkewY+this._deltaY},reverse:function(){var a=new cc.SkewBy(this._duration,-this._skewX,-this._skewY);this._cloneDecoration(a);this._reverseEaseList(a);return a}});cc.skewBy=function(a,b,c){return new cc.SkewBy(a,b,c)};cc.SkewBy.create=cc.skewBy;
cc.JumpBy=cc.ActionInterval.extend({_startPosition:null,_delta:null,_height:0,_jumps:0,_previousPosition:null,ctor:function(a,b,c,d,e){cc.ActionInterval.prototype.ctor.call(this);this._startPosition=cc.p(0,0);this._previousPosition=cc.p(0,0);this._delta=cc.p(0,0);void 0!==d&&this.initWithDuration(a,b,c,d,e)},initWithDuration:function(a,b,c,d,e){return cc.ActionInterval.prototype.initWithDuration.call(this,a)?(void 0===e&&(e=d,d=c,c=b.y,b=b.x),this._delta.x=b,this._delta.y=c,this._height=d,this._jumps=
e,!0):!1},clone:function(){var a=new cc.JumpBy;this._cloneDecoration(a);a.initWithDuration(this._duration,this._delta,this._height,this._jumps);return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);var b=a.getPositionX();a=a.getPositionY();this._previousPosition.x=b;this._previousPosition.y=a;this._startPosition.x=b;this._startPosition.y=a},update:function(a){a=this._computeEaseTime(a);if(this.target){var b=a*this._jumps%1,b=4*this._height*b*(1-b),b=b+this._delta.y*
a;a*=this._delta.x;var c=this._startPosition;if(cc.ENABLE_STACKABLE_ACTIONS){var d=this.target.getPositionX(),e=this.target.getPositionY(),f=this._previousPosition;c.x=c.x+d-f.x;c.y=c.y+e-f.y;a+=c.x;b+=c.y;f.x=a;f.y=b;this.target.setPosition(a,b)}else this.target.setPosition(c.x+a,c.y+b)}},reverse:function(){var a=new cc.JumpBy(this._duration,cc.p(-this._delta.x,-this._delta.y),this._height,this._jumps);this._cloneDecoration(a);this._reverseEaseList(a);return a}});
cc.jumpBy=function(a,b,c,d,e){return new cc.JumpBy(a,b,c,d,e)};cc.JumpBy.create=cc.jumpBy;
cc.JumpTo=cc.JumpBy.extend({_endPosition:null,ctor:function(a,b,c,d,e){cc.JumpBy.prototype.ctor.call(this);this._endPosition=cc.p(0,0);void 0!==d&&this.initWithDuration(a,b,c,d,e)},initWithDuration:function(a,b,c,d,e){return cc.JumpBy.prototype.initWithDuration.call(this,a,b,c,d,e)?(void 0===e&&(c=b.y,b=b.x),this._endPosition.x=b,this._endPosition.y=c,!0):!1},startWithTarget:function(a){cc.JumpBy.prototype.startWithTarget.call(this,a);this._delta.x=this._endPosition.x-this._startPosition.x;this._delta.y=
this._endPosition.y-this._startPosition.y},clone:function(){var a=new cc.JumpTo;this._cloneDecoration(a);a.initWithDuration(this._duration,this._endPosition,this._height,this._jumps);return a}});cc.jumpTo=function(a,b,c,d,e){return new cc.JumpTo(a,b,c,d,e)};cc.JumpTo.create=cc.jumpTo;cc.bezierAt=function(a,b,c,d,e){return Math.pow(1-e,3)*a+3*e*Math.pow(1-e,2)*b+3*Math.pow(e,2)*(1-e)*c+Math.pow(e,3)*d};
cc.BezierBy=cc.ActionInterval.extend({_config:null,_startPosition:null,_previousPosition:null,ctor:function(a,b){cc.ActionInterval.prototype.ctor.call(this);this._config=[];this._startPosition=cc.p(0,0);this._previousPosition=cc.p(0,0);b&&this.initWithDuration(a,b)},initWithDuration:function(a,b){return cc.ActionInterval.prototype.initWithDuration.call(this,a)?(this._config=b,!0):!1},clone:function(){var a=new cc.BezierBy;this._cloneDecoration(a);for(var b=[],c=0;c<this._config.length;c++){var d=
this._config[c];b.push(cc.p(d.x,d.y))}a.initWithDuration(this._duration,b);return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);var b=a.getPositionX();a=a.getPositionY();this._previousPosition.x=b;this._previousPosition.y=a;this._startPosition.x=b;this._startPosition.y=a},update:function(a){a=this._computeEaseTime(a);if(this.target){var b=this._config,c=b[0].y,d=b[1].y,e=b[2].y,b=cc.bezierAt(0,b[0].x,b[1].x,b[2].x,a);a=cc.bezierAt(0,c,d,e,a);c=this._startPosition;
if(cc.ENABLE_STACKABLE_ACTIONS){var d=this.target.getPositionX(),e=this.target.getPositionY(),f=this._previousPosition;c.x=c.x+d-f.x;c.y=c.y+e-f.y;b+=c.x;a+=c.y;f.x=b;f.y=a;this.target.setPosition(b,a)}else this.target.setPosition(c.x+b,c.y+a)}},reverse:function(){var a=this._config,a=[cc.pAdd(a[1],cc.pNeg(a[2])),cc.pAdd(a[0],cc.pNeg(a[2])),cc.pNeg(a[2])],a=new cc.BezierBy(this._duration,a);this._cloneDecoration(a);this._reverseEaseList(a);return a}});
cc.bezierBy=function(a,b){return new cc.BezierBy(a,b)};cc.BezierBy.create=cc.bezierBy;
cc.BezierTo=cc.BezierBy.extend({_toConfig:null,ctor:function(a,b){cc.BezierBy.prototype.ctor.call(this);this._toConfig=[];b&&this.initWithDuration(a,b)},initWithDuration:function(a,b){return cc.ActionInterval.prototype.initWithDuration.call(this,a)?(this._toConfig=b,!0):!1},clone:function(){var a=new cc.BezierTo;this._cloneDecoration(a);a.initWithDuration(this._duration,this._toConfig);return a},startWithTarget:function(a){cc.BezierBy.prototype.startWithTarget.call(this,a);a=this._startPosition;var b=
this._toConfig,c=this._config;c[0]=cc.pSub(b[0],a);c[1]=cc.pSub(b[1],a);c[2]=cc.pSub(b[2],a)}});cc.bezierTo=function(a,b){return new cc.BezierTo(a,b)};cc.BezierTo.create=cc.bezierTo;
cc.ScaleTo=cc.ActionInterval.extend({_scaleX:1,_scaleY:1,_startScaleX:1,_startScaleY:1,_endScaleX:0,_endScaleY:0,_deltaX:0,_deltaY:0,ctor:function(a,b,c){cc.ActionInterval.prototype.ctor.call(this);void 0!==b&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){return cc.ActionInterval.prototype.initWithDuration.call(this,a)?(this._endScaleX=b,this._endScaleY=null!=c?c:b,!0):!1},clone:function(){var a=new cc.ScaleTo;this._cloneDecoration(a);a.initWithDuration(this._duration,this._endScaleX,
this._endScaleY);return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);this._startScaleX=a.scaleX;this._startScaleY=a.scaleY;this._deltaX=this._endScaleX-this._startScaleX;this._deltaY=this._endScaleY-this._startScaleY},update:function(a){a=this._computeEaseTime(a);this.target&&(this.target.scaleX=this._startScaleX+this._deltaX*a,this.target.scaleY=this._startScaleY+this._deltaY*a)}});cc.scaleTo=function(a,b,c){return new cc.ScaleTo(a,b,c)};
cc.ScaleTo.create=cc.scaleTo;
cc.ScaleBy=cc.ScaleTo.extend({startWithTarget:function(a){cc.ScaleTo.prototype.startWithTarget.call(this,a);this._deltaX=this._startScaleX*this._endScaleX-this._startScaleX;this._deltaY=this._startScaleY*this._endScaleY-this._startScaleY},reverse:function(){var a=new cc.ScaleBy(this._duration,1/this._endScaleX,1/this._endScaleY);this._cloneDecoration(a);this._reverseEaseList(a);return a},clone:function(){var a=new cc.ScaleBy;this._cloneDecoration(a);a.initWithDuration(this._duration,this._endScaleX,
this._endScaleY);return a}});cc.scaleBy=function(a,b,c){return new cc.ScaleBy(a,b,c)};cc.ScaleBy.create=cc.scaleBy;
cc.Blink=cc.ActionInterval.extend({_times:0,_originalState:!1,ctor:function(a,b){cc.ActionInterval.prototype.ctor.call(this);void 0!==b&&this.initWithDuration(a,b)},initWithDuration:function(a,b){return cc.ActionInterval.prototype.initWithDuration.call(this,a)?(this._times=b,!0):!1},clone:function(){var a=new cc.Blink;this._cloneDecoration(a);a.initWithDuration(this._duration,this._times);return a},update:function(a){a=this._computeEaseTime(a);if(this.target&&!this.isDone()){var b=1/this._times;this.target.visible=
a%b>b/2}},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);this._originalState=a.visible},stop:function(){this.target.visible=this._originalState;cc.ActionInterval.prototype.stop.call(this)},reverse:function(){var a=new cc.Blink(this._duration,this._times);this._cloneDecoration(a);this._reverseEaseList(a);return a}});cc.blink=function(a,b){return new cc.Blink(a,b)};cc.Blink.create=cc.blink;
cc.FadeTo=cc.ActionInterval.extend({_toOpacity:0,_fromOpacity:0,ctor:function(a,b){cc.ActionInterval.prototype.ctor.call(this);void 0!==b&&this.initWithDuration(a,b)},initWithDuration:function(a,b){return cc.ActionInterval.prototype.initWithDuration.call(this,a)?(this._toOpacity=b,!0):!1},clone:function(){var a=new cc.FadeTo;this._cloneDecoration(a);a.initWithDuration(this._duration,this._toOpacity);return a},update:function(a){a=this._computeEaseTime(a);var b=void 0!==this._fromOpacity?this._fromOpacity:
255;this.target.opacity=b+(this._toOpacity-b)*a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);this._fromOpacity=a.opacity}});cc.fadeTo=function(a,b){return new cc.FadeTo(a,b)};cc.FadeTo.create=cc.fadeTo;
cc.FadeIn=cc.FadeTo.extend({_reverseAction:null,ctor:function(a){cc.FadeTo.prototype.ctor.call(this);null==a&&(a=0);this.initWithDuration(a,255)},reverse:function(){var a=new cc.FadeOut;a.initWithDuration(this._duration,0);this._cloneDecoration(a);this._reverseEaseList(a);return a},clone:function(){var a=new cc.FadeIn;this._cloneDecoration(a);a.initWithDuration(this._duration,this._toOpacity);return a},startWithTarget:function(a){this._reverseAction&&(this._toOpacity=this._reverseAction._fromOpacity);
cc.FadeTo.prototype.startWithTarget.call(this,a)}});cc.fadeIn=function(a){return new cc.FadeIn(a)};cc.FadeIn.create=cc.fadeIn;
cc.FadeOut=cc.FadeTo.extend({ctor:function(a){cc.FadeTo.prototype.ctor.call(this);null==a&&(a=0);this.initWithDuration(a,0)},reverse:function(){var a=new cc.FadeIn;a._reverseAction=this;a.initWithDuration(this._duration,255);this._cloneDecoration(a);this._reverseEaseList(a);return a},clone:function(){var a=new cc.FadeOut;this._cloneDecoration(a);a.initWithDuration(this._duration,this._toOpacity);return a}});cc.fadeOut=function(a){return new cc.FadeOut(a)};cc.FadeOut.create=cc.fadeOut;
cc.TintTo=cc.ActionInterval.extend({_to:null,_from:null,ctor:function(a,b,c,d){cc.ActionInterval.prototype.ctor.call(this);this._to=cc.color(0,0,0);this._from=cc.color(0,0,0);void 0!==d&&this.initWithDuration(a,b,c,d)},initWithDuration:function(a,b,c,d){return cc.ActionInterval.prototype.initWithDuration.call(this,a)?(this._to=cc.color(b,c,d),!0):!1},clone:function(){var a=new cc.TintTo;this._cloneDecoration(a);var b=this._to;a.initWithDuration(this._duration,b.r,b.g,b.b);return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,
a);this._from=this.target.color},update:function(a){a=this._computeEaseTime(a);var b=this._from,c=this._to;b&&this.target.setColor(cc.color(b.r+(c.r-b.r)*a,b.g+(c.g-b.g)*a,b.b+(c.b-b.b)*a))}});cc.tintTo=function(a,b,c,d){return new cc.TintTo(a,b,c,d)};cc.TintTo.create=cc.tintTo;
cc.TintBy=cc.ActionInterval.extend({_deltaR:0,_deltaG:0,_deltaB:0,_fromR:0,_fromG:0,_fromB:0,ctor:function(a,b,c,d){cc.ActionInterval.prototype.ctor.call(this);void 0!==d&&this.initWithDuration(a,b,c,d)},initWithDuration:function(a,b,c,d){return cc.ActionInterval.prototype.initWithDuration.call(this,a)?(this._deltaR=b,this._deltaG=c,this._deltaB=d,!0):!1},clone:function(){var a=new cc.TintBy;this._cloneDecoration(a);a.initWithDuration(this._duration,this._deltaR,this._deltaG,this._deltaB);return a},
startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);a=a.color;this._fromR=a.r;this._fromG=a.g;this._fromB=a.b},update:function(a){a=this._computeEaseTime(a);this.target.color=cc.color(this._fromR+this._deltaR*a,this._fromG+this._deltaG*a,this._fromB+this._deltaB*a)},reverse:function(){var a=new cc.TintBy(this._duration,-this._deltaR,-this._deltaG,-this._deltaB);this._cloneDecoration(a);this._reverseEaseList(a);return a}});
cc.tintBy=function(a,b,c,d){return new cc.TintBy(a,b,c,d)};cc.TintBy.create=cc.tintBy;cc.DelayTime=cc.ActionInterval.extend({update:function(a){},reverse:function(){var a=new cc.DelayTime(this._duration);this._cloneDecoration(a);this._reverseEaseList(a);return a},clone:function(){var a=new cc.DelayTime;this._cloneDecoration(a);a.initWithDuration(this._duration);return a}});cc.delayTime=function(a){return new cc.DelayTime(a)};cc.DelayTime.create=cc.delayTime;
cc.ReverseTime=cc.ActionInterval.extend({_other:null,ctor:function(a){cc.ActionInterval.prototype.ctor.call(this);this._other=null;a&&this.initWithAction(a)},initWithAction:function(a){if(!a)throw Error("cc.ReverseTime.initWithAction(): action must be non null");if(a===this._other)throw Error("cc.ReverseTime.initWithAction(): the action was already passed in.");return cc.ActionInterval.prototype.initWithDuration.call(this,a._duration)?(this._other=a,!0):!1},clone:function(){var a=new cc.ReverseTime;
this._cloneDecoration(a);a.initWithAction(this._other.clone());return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);this._other.startWithTarget(a)},update:function(a){a=this._computeEaseTime(a);this._other&&this._other.update(1-a)},reverse:function(){return this._other.clone()},stop:function(){this._other.stop();cc.Action.prototype.stop.call(this)}});cc.reverseTime=function(a){return new cc.ReverseTime(a)};cc.ReverseTime.create=cc.reverseTime;
cc.Animate=cc.ActionInterval.extend({_animation:null,_nextFrame:0,_origFrame:null,_executedLoops:0,_splitTimes:null,_currFrameIndex:0,ctor:function(a){cc.ActionInterval.prototype.ctor.call(this);this._splitTimes=[];a&&this.initWithAnimation(a)},getAnimation:function(){return this._animation},setAnimation:function(a){this._animation=a},getCurrentFrameIndex:function(){return this._currFrameIndex},initWithAnimation:function(a){if(!a)throw Error("cc.Animate.initWithAnimation(): animation must be non-NULL");
var b=a.getDuration();if(this.initWithDuration(b*a.getLoops())){this._nextFrame=0;this.setAnimation(a);this._origFrame=null;this._executedLoops=0;var c=this._splitTimes,d=c.length=0,e=b/a.getTotalDelayUnits();a=a.getFrames();cc.arrayVerifyType(a,cc.AnimationFrame);for(var f=0;f<a.length;f++){var g=d*e/b,d=d+a[f].getDelayUnits();c.push(g)}return!0}return!1},clone:function(){var a=new cc.Animate;this._cloneDecoration(a);a.initWithAnimation(this._animation.clone());return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,
a);this._animation.getRestoreOriginalFrame()&&(this._origFrame=a.displayFrame());this._executedLoops=this._nextFrame=0},update:function(a){a=this._computeEaseTime(a);1>a&&(a*=this._animation.getLoops(),(0|a)>this._executedLoops&&(this._nextFrame=0,this._executedLoops++),a%=1);for(var b=this._animation.getFrames(),c=b.length,d=this._splitTimes,e=this._nextFrame;e<c;e++)if(d[e]<=a)_currFrameIndex=e,this.target.setSpriteFrame(b[_currFrameIndex].getSpriteFrame()),this._nextFrame=e+1;else break},reverse:function(){var a=
this._animation,b=a.getFrames(),c=[];cc.arrayVerifyType(b,cc.AnimationFrame);if(0<b.length)for(var d=b.length-1;0<=d;d--){var e=b[d];if(!e)break;c.push(e.clone())}b=new cc.Animation(c,a.getDelayPerUnit(),a.getLoops());b.setRestoreOriginalFrame(a.getRestoreOriginalFrame());a=new cc.Animate(b);this._cloneDecoration(a);this._reverseEaseList(a);return a},stop:function(){this._animation.getRestoreOriginalFrame()&&this.target&&this.target.setSpriteFrame(this._origFrame);cc.Action.prototype.stop.call(this)}});
cc.animate=function(a){return new cc.Animate(a)};cc.Animate.create=cc.animate;
cc.TargetedAction=cc.ActionInterval.extend({_action:null,_forcedTarget:null,ctor:function(a,b){cc.ActionInterval.prototype.ctor.call(this);b&&this.initWithTarget(a,b)},initWithTarget:function(a,b){return this.initWithDuration(b._duration)?(this._forcedTarget=a,this._action=b,!0):!1},clone:function(){var a=new cc.TargetedAction;this._cloneDecoration(a);a.initWithTarget(this._forcedTarget,this._action.clone());return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);
this._action.startWithTarget(this._forcedTarget)},stop:function(){this._action.stop()},update:function(a){a=this._computeEaseTime(a);this._action.update(a)},getForcedTarget:function(){return this._forcedTarget},setForcedTarget:function(a){this._forcedTarget!==a&&(this._forcedTarget=a)}});cc.targetedAction=function(a,b){return new cc.TargetedAction(a,b)};cc.TargetedAction.create=cc.targetedAction;
cc.SizeTo=cc.ActionInterval.extend({m_fDstSize:null,m_fStartSize:null,ctor:function(a,b,c){cc.ActionInterval.prototype.ctor.call(this);this.m_fDstSize=cc.size(0,0);this.m_fStartSize=cc.size(0,0);this.initWithSize(a,b,c)},initWithSize:function(a,b,c){return this.initWithDuration(a)?(this.m_fDstSize.width=b,this.m_fDstSize.height=c,!0):!1},startWithTarget:function(a){cc.Action.prototype.startWithTarget.call(this,a);this.m_fStartSize=a.getContentSize()},update:function(a){a=this._computeEaseTime(a);
this.target&&this.target.setContentSize(cc.size(this.m_fStartSize.width+(this.m_fDstSize.width-this.m_fStartSize.width)*a,this.m_fStartSize.height+(this.m_fDstSize.height-this.m_fStartSize.height)*a))},clone:function(){var a=new cc.SizeTo;a.initWithSize(this._duration,this.m_fDstSize.width,this.m_fDstSize.height);return a}});cc.sizeTo=function(a,b,c){return new cc.SizeTo(a,b,c)};cc.SizeTo.create=cc.sizeTo;cc.ActionInstant=cc.FiniteTimeAction.extend({isDone:function(){return!0},step:function(a){this.update(1)},update:function(a){},reverse:function(){return this.clone()},clone:function(){return new cc.ActionInstant}});cc.Show=cc.ActionInstant.extend({update:function(a){this.target.visible=!0},reverse:function(){return new cc.Hide},clone:function(){return new cc.Show}});cc.show=function(){return new cc.Show};cc.Show.create=cc.show;
cc.Hide=cc.ActionInstant.extend({isRelease:!1,ctor:function(a){cc.ActionInstant.prototype.ctor.call(this);this.isRelease=a},update:function(a){this.target.visible=!1;this.isRelease&&this.target.removeFromParent()},reverse:function(){return new cc.Show},clone:function(){return new cc.Hide}});cc.hide=function(a){return new cc.Hide(a)};cc.Hide.create=cc.hide;
cc.ToggleVisibility=cc.ActionInstant.extend({update:function(a){this.target.visible=!this.target.visible},reverse:function(){return new cc.ToggleVisibility},clone:function(){return new cc.ToggleVisibility}});cc.toggleVisibility=function(){return new cc.ToggleVisibility};cc.ToggleVisibility.create=cc.toggleVisibility;
cc.RemoveSelf=cc.ActionInstant.extend({_isNeedCleanUp:!0,ctor:function(a){cc.FiniteTimeAction.prototype.ctor.call(this);void 0!==a&&this.init(a)},update:function(a){this.target.removeFromParent(this._isNeedCleanUp)},init:function(a){this._isNeedCleanUp=a;return!0},reverse:function(){return new cc.RemoveSelf(this._isNeedCleanUp)},clone:function(){return new cc.RemoveSelf(this._isNeedCleanUp)}});cc.removeSelf=function(a){return new cc.RemoveSelf(a)};cc.RemoveSelf.create=cc.removeSelf;
cc.FlipX=cc.ActionInstant.extend({_flippedX:!1,ctor:function(a){cc.FiniteTimeAction.prototype.ctor.call(this);this._flippedX=!1;void 0!==a&&this.initWithFlipX(a)},initWithFlipX:function(a){this._flippedX=a;return!0},update:function(a){this.target.flippedX=this._flippedX},reverse:function(){return new cc.FlipX(!this._flippedX)},clone:function(){var a=new cc.FlipX;a.initWithFlipX(this._flippedX);return a}});cc.flipX=function(a){return new cc.FlipX(a)};cc.FlipX.create=cc.flipX;
cc.FlipY=cc.ActionInstant.extend({_flippedY:!1,ctor:function(a){cc.FiniteTimeAction.prototype.ctor.call(this);this._flippedY=!1;void 0!==a&&this.initWithFlipY(a)},initWithFlipY:function(a){this._flippedY=a;return!0},update:function(a){this.target.flippedY=this._flippedY},reverse:function(){return new cc.FlipY(!this._flippedY)},clone:function(){var a=new cc.FlipY;a.initWithFlipY(this._flippedY);return a}});cc.flipY=function(a){return new cc.FlipY(a)};cc.FlipY.create=cc.flipY;
cc.Place=cc.ActionInstant.extend({_x:0,_y:0,ctor:function(a,b){cc.FiniteTimeAction.prototype.ctor.call(this);this._y=this._x=0;void 0!==a&&(void 0!==a.x&&(b=a.y,a=a.x),this.initWithPosition(a,b))},initWithPosition:function(a,b){this._x=a;this._y=b;return!0},update:function(a){this.target.setPosition(this._x,this._y)},clone:function(){var a=new cc.Place;a.initWithPosition(this._x,this._y);return a}});cc.place=function(a,b){return new cc.Place(a,b)};cc.Place.create=cc.place;
cc.CallFunc=cc.ActionInstant.extend({_selectorTarget:null,_function:null,_data:null,ctor:function(a,b,c){cc.FiniteTimeAction.prototype.ctor.call(this);this.initWithFunction(a,b,c)},initWithFunction:function(a,b,c){a&&(this._function=a);b&&(this._selectorTarget=b);void 0!==c&&(this._data=c);return!0},execute:function(){this._function&&this._function.call(this._selectorTarget,this.target,this._data)},update:function(a){this.execute()},getTargetCallback:function(){return this._selectorTarget},setTargetCallback:function(a){a!==
this._selectorTarget&&(this._selectorTarget&&(this._selectorTarget=null),this._selectorTarget=a)},clone:function(){var a=new cc.CallFunc;a.initWithFunction(this._function,this._selectorTarget,this._data);return a}});cc.callFunc=function(a,b,c){return new cc.CallFunc(a,b,c)};cc.CallFunc.create=cc.callFunc;cc.ReZorder=cc.ActionInstant.extend({m_zOrder:0,initWithZorder:function(a){this.m_zOrder=a;return!0},update:function(a){this.target.setZOrder(this.m_zOrder)}});
cc.reZorder=function(a){var b=new cc.ReZorder;b.initWithZorder(a);return b};cc.ReZorder.create=cc.reZorder;cc.ActionEase=cc.ActionInterval.extend({_inner:null,ctor:function(a){cc.ActionInterval.prototype.ctor.call(this);a&&this.initWithAction(a)},initWithAction:function(a){if(!a)throw Error("cc.ActionEase.initWithAction(): action must be non nil");return this.initWithDuration(a.getDuration())?(this._inner=a,!0):!1},clone:function(){var a=new cc.ActionEase;a.initWithAction(this._inner.clone());return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);this._inner.startWithTarget(this.target)},
stop:function(){this._inner.stop();cc.ActionInterval.prototype.stop.call(this)},update:function(a){this._inner.update(a)},reverse:function(){return new cc.ActionEase(this._inner.reverse())},getInnerAction:function(){return this._inner}});cc.actionEase=function(a){return new cc.ActionEase(a)};cc.ActionEase.create=cc.actionEase;
cc.EaseRateAction=cc.ActionEase.extend({_rate:0,ctor:function(a,b){cc.ActionEase.prototype.ctor.call(this);void 0!==b&&this.initWithAction(a,b)},setRate:function(a){this._rate=a},getRate:function(){return this._rate},initWithAction:function(a,b){return cc.ActionEase.prototype.initWithAction.call(this,a)?(this._rate=b,!0):!1},clone:function(){var a=new cc.EaseRateAction;a.initWithAction(this._inner.clone(),this._rate);return a},reverse:function(){return new cc.EaseRateAction(this._inner.reverse(),
1/this._rate)}});cc.easeRateAction=function(a,b){return new cc.EaseRateAction(a,b)};cc.EaseRateAction.create=cc.easeRateAction;cc.EaseIn=cc.EaseRateAction.extend({update:function(a){this._inner.update(Math.pow(a,this._rate))},reverse:function(){return new cc.EaseIn(this._inner.reverse(),1/this._rate)},clone:function(){var a=new cc.EaseIn;a.initWithAction(this._inner.clone(),this._rate);return a}});cc.EaseIn.create=function(a,b){return new cc.EaseIn(a,b)};
cc.easeIn=function(a){return{_rate:a,easing:function(a){return Math.pow(a,this._rate)},reverse:function(){return cc.easeIn(1/this._rate)}}};cc.EaseOut=cc.EaseRateAction.extend({update:function(a){this._inner.update(Math.pow(a,1/this._rate))},reverse:function(){return new cc.EaseOut(this._inner.reverse(),1/this._rate)},clone:function(){var a=new cc.EaseOut;a.initWithAction(this._inner.clone(),this._rate);return a}});cc.EaseOut.create=function(a,b){return new cc.EaseOut(a,b)};
cc.easeOut=function(a){return{_rate:a,easing:function(a){return Math.pow(a,1/this._rate)},reverse:function(){return cc.easeOut(1/this._rate)}}};cc.EaseInOut=cc.EaseRateAction.extend({update:function(a){a*=2;1>a?this._inner.update(0.5*Math.pow(a,this._rate)):this._inner.update(1-0.5*Math.pow(2-a,this._rate))},clone:function(){var a=new cc.EaseInOut;a.initWithAction(this._inner.clone(),this._rate);return a},reverse:function(){return new cc.EaseInOut(this._inner.reverse(),this._rate)}});
cc.EaseInOut.create=function(a,b){return new cc.EaseInOut(a,b)};cc.easeInOut=function(a){return{_rate:a,easing:function(a){a*=2;return 1>a?0.5*Math.pow(a,this._rate):1-0.5*Math.pow(2-a,this._rate)},reverse:function(){return cc.easeInOut(this._rate)}}};
cc.EaseExponentialIn=cc.ActionEase.extend({update:function(a){this._inner.update(0===a?0:Math.pow(2,10*(a-1)))},reverse:function(){return new cc.EaseExponentialOut(this._inner.reverse())},clone:function(){var a=new cc.EaseExponentialIn;a.initWithAction(this._inner.clone());return a}});cc.EaseExponentialIn.create=function(a){return new cc.EaseExponentialIn(a)};cc._easeExponentialInObj={easing:function(a){return 0===a?0:Math.pow(2,10*(a-1))},reverse:function(){return cc._easeExponentialOutObj}};
cc.easeExponentialIn=function(){return cc._easeExponentialInObj};cc.EaseExponentialOut=cc.ActionEase.extend({update:function(a){this._inner.update(1===a?1:-Math.pow(2,-10*a)+1)},reverse:function(){return new cc.EaseExponentialIn(this._inner.reverse())},clone:function(){var a=new cc.EaseExponentialOut;a.initWithAction(this._inner.clone());return a}});cc.EaseExponentialOut.create=function(a){return new cc.EaseExponentialOut(a)};
cc._easeExponentialOutObj={easing:function(a){return 1===a?1:-Math.pow(2,-10*a)+1},reverse:function(){return cc._easeExponentialInObj}};cc.easeExponentialOut=function(){return cc._easeExponentialOutObj};
cc.EaseExponentialInOut=cc.ActionEase.extend({update:function(a){1!==a&&0!==a&&(a*=2,a=1>a?0.5*Math.pow(2,10*(a-1)):0.5*(-Math.pow(2,-10*(a-1))+2));this._inner.update(a)},reverse:function(){return new cc.EaseExponentialInOut(this._inner.reverse())},clone:function(){var a=new cc.EaseExponentialInOut;a.initWithAction(this._inner.clone());return a}});cc.EaseExponentialInOut.create=function(a){return new cc.EaseExponentialInOut(a)};
cc._easeExponentialInOutObj={easing:function(a){return 1!==a&&0!==a?(a*=2,1>a?0.5*Math.pow(2,10*(a-1)):0.5*(-Math.pow(2,-10*(a-1))+2)):a},reverse:function(){return cc._easeExponentialInOutObj}};cc.easeExponentialInOut=function(){return cc._easeExponentialInOutObj};
cc.EaseSineIn=cc.ActionEase.extend({update:function(a){a=0===a||1===a?a:-1*Math.cos(a*Math.PI/2)+1;this._inner.update(a)},reverse:function(){return new cc.EaseSineOut(this._inner.reverse())},clone:function(){var a=new cc.EaseSineIn;a.initWithAction(this._inner.clone());return a}});cc.EaseSineIn.create=function(a){return new cc.EaseSineIn(a)};cc._easeSineInObj={easing:function(a){return 0===a||1===a?a:-1*Math.cos(a*Math.PI/2)+1},reverse:function(){return cc._easeSineOutObj}};cc.easeSineIn=function(){return cc._easeSineInObj};
cc.EaseSineOut=cc.ActionEase.extend({update:function(a){a=0===a||1===a?a:Math.sin(a*Math.PI/2);this._inner.update(a)},reverse:function(){return new cc.EaseSineIn(this._inner.reverse())},clone:function(){var a=new cc.EaseSineOut;a.initWithAction(this._inner.clone());return a}});cc.EaseSineOut.create=function(a){return new cc.EaseSineOut(a)};cc._easeSineOutObj={easing:function(a){return 0===a||1===a?a:Math.sin(a*Math.PI/2)},reverse:function(){return cc._easeSineInObj}};cc.easeSineOut=function(){return cc._easeSineOutObj};
cc.EaseSineInOut=cc.ActionEase.extend({update:function(a){a=0===a||1===a?a:-0.5*(Math.cos(Math.PI*a)-1);this._inner.update(a)},clone:function(){var a=new cc.EaseSineInOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseSineInOut(this._inner.reverse())}});cc.EaseSineInOut.create=function(a){return new cc.EaseSineInOut(a)};cc._easeSineInOutObj={easing:function(a){return 0===a||1===a?a:-0.5*(Math.cos(Math.PI*a)-1)},reverse:function(){return cc._easeSineInOutObj}};
cc.easeSineInOut=function(){return cc._easeSineInOutObj};
cc.EaseElastic=cc.ActionEase.extend({_period:0.3,ctor:function(a,b){cc.ActionEase.prototype.ctor.call(this);a&&this.initWithAction(a,b)},getPeriod:function(){return this._period},setPeriod:function(a){this._period=a},initWithAction:function(a,b){cc.ActionEase.prototype.initWithAction.call(this,a);this._period=null==b?0.3:b;return!0},reverse:function(){cc.log("cc.EaseElastic.reverse(): it should be overridden in subclass.");return null},clone:function(){var a=new cc.EaseElastic;a.initWithAction(this._inner.clone(),
this._period);return a}});cc.EaseElastic.create=function(a,b){return new cc.EaseElastic(a,b)};cc.EaseElasticIn=cc.EaseElastic.extend({update:function(a){var b=0;0===a||1===a?b=a:(b=this._period/4,a-=1,b=-Math.pow(2,10*a)*Math.sin((a-b)*Math.PI*2/this._period));this._inner.update(b)},reverse:function(){return new cc.EaseElasticOut(this._inner.reverse(),this._period)},clone:function(){var a=new cc.EaseElasticIn;a.initWithAction(this._inner.clone(),this._period);return a}});
cc.EaseElasticIn.create=function(a,b){return new cc.EaseElasticIn(a,b)};cc._easeElasticInObj={easing:function(a){if(0===a||1===a)return a;a-=1;return-Math.pow(2,10*a)*Math.sin((a-0.075)*Math.PI*2/0.3)},reverse:function(){return cc._easeElasticOutObj}};cc.easeElasticIn=function(a){return a&&0.3!==a?{_period:a,easing:function(a){if(0===a||1===a)return a;a-=1;return-Math.pow(2,10*a)*Math.sin((a-this._period/4)*Math.PI*2/this._period)},reverse:function(){return cc.easeElasticOut(this._period)}}:cc._easeElasticInObj};
cc.EaseElasticOut=cc.EaseElastic.extend({update:function(a){var b=0;0===a||1===a?b=a:(b=this._period/4,b=Math.pow(2,-10*a)*Math.sin((a-b)*Math.PI*2/this._period)+1);this._inner.update(b)},reverse:function(){return new cc.EaseElasticIn(this._inner.reverse(),this._period)},clone:function(){var a=new cc.EaseElasticOut;a.initWithAction(this._inner.clone(),this._period);return a}});cc.EaseElasticOut.create=function(a,b){return new cc.EaseElasticOut(a,b)};
cc._easeElasticOutObj={easing:function(a){return 0===a||1===a?a:Math.pow(2,-10*a)*Math.sin((a-0.075)*Math.PI*2/0.3)+1},reverse:function(){return cc._easeElasticInObj}};cc.easeElasticOut=function(a){return a&&0.3!==a?{_period:a,easing:function(a){return 0===a||1===a?a:Math.pow(2,-10*a)*Math.sin((a-this._period/4)*Math.PI*2/this._period)+1},reverse:function(){return cc.easeElasticIn(this._period)}}:cc._easeElasticOutObj};
cc.EaseElasticInOut=cc.EaseElastic.extend({update:function(a){var b=0,b=this._period;if(0===a||1===a)b=a;else{b||(b=this._period=0.3*1.5);var c=b/4;a=2*a-1;b=0>a?-0.5*Math.pow(2,10*a)*Math.sin((a-c)*Math.PI*2/b):Math.pow(2,-10*a)*Math.sin((a-c)*Math.PI*2/b)*0.5+1}this._inner.update(b)},reverse:function(){return new cc.EaseElasticInOut(this._inner.reverse(),this._period)},clone:function(){var a=new cc.EaseElasticInOut;a.initWithAction(this._inner.clone(),this._period);return a}});
cc.EaseElasticInOut.create=function(a,b){return new cc.EaseElasticInOut(a,b)};cc.easeElasticInOut=function(a){return{_period:a||0.3,easing:function(a){var c=0,c=this._period;if(0===a||1===a)c=a;else{c||(c=this._period=0.3*1.5);var d=c/4;a=2*a-1;c=0>a?-0.5*Math.pow(2,10*a)*Math.sin((a-d)*Math.PI*2/c):Math.pow(2,-10*a)*Math.sin((a-d)*Math.PI*2/c)*0.5+1}return c},reverse:function(){return cc.easeElasticInOut(this._period)}}};
cc.EaseBounce=cc.ActionEase.extend({bounceTime:function(a){if(a<1/2.75)return 7.5625*a*a;if(a<2/2.75)return a-=1.5/2.75,7.5625*a*a+0.75;if(a<2.5/2.75)return a-=2.25/2.75,7.5625*a*a+0.9375;a-=2.625/2.75;return 7.5625*a*a+0.984375},clone:function(){var a=new cc.EaseBounce;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseBounce(this._inner.reverse())}});cc.EaseBounce.create=function(a){return new cc.EaseBounce(a)};
cc.EaseBounceIn=cc.EaseBounce.extend({update:function(a){a=1-this.bounceTime(1-a);this._inner.update(a)},reverse:function(){return new cc.EaseBounceOut(this._inner.reverse())},clone:function(){var a=new cc.EaseBounceIn;a.initWithAction(this._inner.clone());return a}});cc.EaseBounceIn.create=function(a){return new cc.EaseBounceIn(a)};
cc._bounceTime=function(a){if(a<1/2.75)return 7.5625*a*a;if(a<2/2.75)return a-=1.5/2.75,7.5625*a*a+0.75;if(a<2.5/2.75)return a-=2.25/2.75,7.5625*a*a+0.9375;a-=2.625/2.75;return 7.5625*a*a+0.984375};cc._easeBounceInObj={easing:function(a){return 1-cc._bounceTime(1-a)},reverse:function(){return cc._easeBounceOutObj}};cc.easeBounceIn=function(){return cc._easeBounceInObj};
cc.EaseBounceOut=cc.EaseBounce.extend({update:function(a){a=this.bounceTime(a);this._inner.update(a)},reverse:function(){return new cc.EaseBounceIn(this._inner.reverse())},clone:function(){var a=new cc.EaseBounceOut;a.initWithAction(this._inner.clone());return a}});cc.EaseBounceOut.create=function(a){return new cc.EaseBounceOut(a)};cc._easeBounceOutObj={easing:function(a){return cc._bounceTime(a)},reverse:function(){return cc._easeBounceInObj}};cc.easeBounceOut=function(){return cc._easeBounceOutObj};
cc.EaseBounceInOut=cc.EaseBounce.extend({update:function(a){var b=0,b=0.5>a?0.5*(1-this.bounceTime(1-2*a)):0.5*this.bounceTime(2*a-1)+0.5;this._inner.update(b)},clone:function(){var a=new cc.EaseBounceInOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseBounceInOut(this._inner.reverse())}});cc.EaseBounceInOut.create=function(a){return new cc.EaseBounceInOut(a)};
cc._easeBounceInOutObj={easing:function(a){return a=0.5>a?0.5*(1-cc._bounceTime(1-2*a)):0.5*cc._bounceTime(2*a-1)+0.5},reverse:function(){return cc._easeBounceInOutObj}};cc.easeBounceInOut=function(){return cc._easeBounceInOutObj};cc.EaseBackIn=cc.ActionEase.extend({update:function(a){this._inner.update(0===a||1===a?a:a*a*(2.70158*a-1.70158))},reverse:function(){return new cc.EaseBackOut(this._inner.reverse())},clone:function(){var a=new cc.EaseBackIn;a.initWithAction(this._inner.clone());return a}});
cc.EaseBackIn.create=function(a){return new cc.EaseBackIn(a)};cc._easeBackInObj={easing:function(a){return 0===a||1===a?a:a*a*(2.70158*a-1.70158)},reverse:function(){return cc._easeBackOutObj}};cc.easeBackIn=function(){return cc._easeBackInObj};
cc.EaseBackOut=cc.ActionEase.extend({update:function(a){a-=1;this._inner.update(a*a*(2.70158*a+1.70158)+1)},reverse:function(){return new cc.EaseBackIn(this._inner.reverse())},clone:function(){var a=new cc.EaseBackOut;a.initWithAction(this._inner.clone());return a}});cc.EaseBackOut.create=function(a){return new cc.EaseBackOut(a)};cc._easeBackOutObj={easing:function(a){a-=1;return a*a*(2.70158*a+1.70158)+1},reverse:function(){return cc._easeBackInObj}};cc.easeBackOut=function(){return cc._easeBackOutObj};
cc.EaseBackInOut=cc.ActionEase.extend({update:function(a){a*=2;1>a?this._inner.update(a*a*(3.5949095*a-2.5949095)/2):(a-=2,this._inner.update(a*a*(3.5949095*a+2.5949095)/2+1))},clone:function(){var a=new cc.EaseBackInOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseBackInOut(this._inner.reverse())}});cc.EaseBackInOut.create=function(a){return new cc.EaseBackInOut(a)};
cc._easeBackInOutObj={easing:function(a){a*=2;if(1>a)return a*a*(3.5949095*a-2.5949095)/2;a-=2;return a*a*(3.5949095*a+2.5949095)/2+1},reverse:function(){return cc._easeBackInOutObj}};cc.easeBackInOut=function(){return cc._easeBackInOutObj};
cc.EaseBezierAction=cc.ActionEase.extend({_p0:null,_p1:null,_p2:null,_p3:null,ctor:function(a){cc.ActionEase.prototype.ctor.call(this,a)},_updateTime:function(a,b,c,d,e){return Math.pow(1-e,3)*a+3*e*Math.pow(1-e,2)*b+3*Math.pow(e,2)*(1-e)*c+Math.pow(e,3)*d},update:function(a){a=this._updateTime(this._p0,this._p1,this._p2,this._p3,a);this._inner.update(a)},clone:function(){var a=new cc.EaseBezierAction;a.initWithAction(this._inner.clone());a.setBezierParamer(this._p0,this._p1,this._p2,this._p3);return a},
reverse:function(){var a=new cc.EaseBezierAction(this._inner.reverse());a.setBezierParamer(this._p3,this._p2,this._p1,this._p0);return a},setBezierParamer:function(a,b,c,d){this._p0=a||0;this._p1=b||0;this._p2=c||0;this._p3=d||0}});cc.EaseBezierAction.create=function(a){return new cc.EaseBezierAction(a)};cc.easeBezierAction=function(a,b,c,d){return{easing:function(e){return cc.EaseBezierAction.prototype._updateTime(a,b,c,d,e)},reverse:function(){return cc.easeBezierAction(d,c,b,a)}}};
cc.EaseQuadraticActionIn=cc.ActionEase.extend({_updateTime:function(a){return Math.pow(a,2)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuadraticActionIn;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseQuadraticActionIn(this._inner.reverse())}});cc.EaseQuadraticActionIn.create=function(a){return new cc.EaseQuadraticActionIn(a)};cc._easeQuadraticActionIn={easing:cc.EaseQuadraticActionIn.prototype._updateTime,reverse:function(){return cc._easeQuadraticActionIn}};
cc.easeQuadraticActionIn=function(){return cc._easeQuadraticActionIn};cc.EaseQuadraticActionOut=cc.ActionEase.extend({_updateTime:function(a){return-a*(a-2)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuadraticActionOut;a.initWithAction();return a},reverse:function(){return new cc.EaseQuadraticActionOut(this._inner.reverse())}});cc.EaseQuadraticActionOut.create=function(a){return new cc.EaseQuadraticActionOut(a)};
cc._easeQuadraticActionOut={easing:cc.EaseQuadraticActionOut.prototype._updateTime,reverse:function(){return cc._easeQuadraticActionOut}};cc.easeQuadraticActionOut=function(){return cc._easeQuadraticActionOut};
cc.EaseQuadraticActionInOut=cc.ActionEase.extend({_updateTime:function(a){var b=a;a*=2;1>a?b=a*a*0.5:(--a,b=-0.5*(a*(a-2)-1));return b},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuadraticActionInOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseQuadraticActionInOut(this._inner.reverse())}});cc.EaseQuadraticActionInOut.create=function(a){return new cc.EaseQuadraticActionInOut(a)};
cc._easeQuadraticActionInOut={easing:cc.EaseQuadraticActionInOut.prototype._updateTime,reverse:function(){return cc._easeQuadraticActionInOut}};cc.easeQuadraticActionInOut=function(){return cc._easeQuadraticActionInOut};cc.EaseQuarticActionIn=cc.ActionEase.extend({_updateTime:function(a){return a*a*a*a},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuarticActionIn;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseQuarticActionIn(this._inner.reverse())}});
cc.EaseQuarticActionIn.create=function(a){return new cc.EaseQuarticActionIn(a)};cc._easeQuarticActionIn={easing:cc.EaseQuarticActionIn.prototype._updateTime,reverse:function(){return cc._easeQuarticActionIn}};cc.easeQuarticActionIn=function(){return cc._easeQuarticActionIn};
cc.EaseQuarticActionOut=cc.ActionEase.extend({_updateTime:function(a){a-=1;return-(a*a*a*a-1)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuarticActionOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseQuarticActionOut(this._inner.reverse())}});cc.EaseQuarticActionOut.create=function(a){return new cc.EaseQuarticActionOut(a)};cc._easeQuarticActionOut={easing:cc.EaseQuarticActionOut.prototype._updateTime,reverse:function(){return cc._easeQuarticActionOut}};
cc.easeQuarticActionOut=function(){return cc._easeQuarticActionOut};cc.EaseQuarticActionInOut=cc.ActionEase.extend({_updateTime:function(a){a*=2;if(1>a)return 0.5*a*a*a*a;a-=2;return-0.5*(a*a*a*a-2)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuarticActionInOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseQuarticActionInOut(this._inner.reverse())}});cc.EaseQuarticActionInOut.create=function(a){return new cc.EaseQuarticActionInOut(a)};
cc._easeQuarticActionInOut={easing:cc.EaseQuarticActionInOut.prototype._updateTime,reverse:function(){return cc._easeQuarticActionInOut}};cc.easeQuarticActionInOut=function(){return cc._easeQuarticActionInOut};cc.EaseQuinticActionIn=cc.ActionEase.extend({_updateTime:function(a){return a*a*a*a*a},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuinticActionIn;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseQuinticActionIn(this._inner.reverse())}});
cc.EaseQuinticActionIn.create=function(a){return new cc.EaseQuinticActionIn(a)};cc._easeQuinticActionIn={easing:cc.EaseQuinticActionIn.prototype._updateTime,reverse:function(){return cc._easeQuinticActionIn}};cc.easeQuinticActionIn=function(){return cc._easeQuinticActionIn};
cc.EaseQuinticActionOut=cc.ActionEase.extend({_updateTime:function(a){a-=1;return a*a*a*a*a+1},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuinticActionOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseQuinticActionOut(this._inner.reverse())}});cc.EaseQuinticActionOut.create=function(a){return new cc.EaseQuinticActionOut(a)};cc._easeQuinticActionOut={easing:cc.EaseQuinticActionOut.prototype._updateTime,reverse:function(){return cc._easeQuinticActionOut}};
cc.easeQuinticActionOut=function(){return cc._easeQuinticActionOut};cc.EaseQuinticActionInOut=cc.ActionEase.extend({_updateTime:function(a){a*=2;if(1>a)return 0.5*a*a*a*a*a;a-=2;return 0.5*(a*a*a*a*a+2)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuinticActionInOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseQuinticActionInOut(this._inner.reverse())}});cc.EaseQuinticActionInOut.create=function(a){return new cc.EaseQuinticActionInOut(a)};
cc._easeQuinticActionInOut={easing:cc.EaseQuinticActionInOut.prototype._updateTime,reverse:function(){return cc._easeQuinticActionInOut}};cc.easeQuinticActionInOut=function(){return cc._easeQuinticActionInOut};cc.EaseCircleActionIn=cc.ActionEase.extend({_updateTime:function(a){return-1*(Math.sqrt(1-a*a)-1)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseCircleActionIn;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseCircleActionIn(this._inner.reverse())}});
cc.EaseCircleActionIn.create=function(a){return new cc.EaseCircleActionIn(a)};cc._easeCircleActionIn={easing:cc.EaseCircleActionIn.prototype._updateTime,reverse:function(){return cc._easeCircleActionIn}};cc.easeCircleActionIn=function(){return cc._easeCircleActionIn};
cc.EaseCircleActionOut=cc.ActionEase.extend({_updateTime:function(a){a-=1;return Math.sqrt(1-a*a)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseCircleActionOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseCircleActionOut(this._inner.reverse())}});cc.EaseCircleActionOut.create=function(a){return new cc.EaseCircleActionOut(a)};cc._easeCircleActionOut={easing:cc.EaseCircleActionOut.prototype._updateTime,reverse:function(){return cc._easeCircleActionOut}};
cc.easeCircleActionOut=function(){return cc._easeCircleActionOut};cc.EaseCircleActionInOut=cc.ActionEase.extend({_updateTime:function(a){a*=2;if(1>a)return-0.5*(Math.sqrt(1-a*a)-1);a-=2;return 0.5*(Math.sqrt(1-a*a)+1)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseCircleActionInOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseCircleActionInOut(this._inner.reverse())}});cc.EaseCircleActionInOut.create=function(a){return new cc.EaseCircleActionInOut(a)};
cc._easeCircleActionInOut={easing:cc.EaseCircleActionInOut.prototype._updateTime,reverse:function(){return cc._easeCircleActionInOut}};cc.easeCircleActionInOut=function(){return cc._easeCircleActionInOut};cc.EaseCubicActionIn=cc.ActionEase.extend({_updateTime:function(a){return a*a*a},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseCubicActionIn;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseCubicActionIn(this._inner.reverse())}});
cc.EaseCubicActionIn.create=function(a){return new cc.EaseCubicActionIn(a)};cc._easeCubicActionIn={easing:cc.EaseCubicActionIn.prototype._updateTime,reverse:function(){return cc._easeCubicActionIn}};cc.easeCubicActionIn=function(){return cc._easeCubicActionIn};
cc.EaseCubicActionOut=cc.ActionEase.extend({_updateTime:function(a){a-=1;return a*a*a+1},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseCubicActionOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseCubicActionOut(this._inner.reverse())}});cc.EaseCubicActionOut.create=function(a){return new cc.EaseCubicActionOut(a)};cc._easeCubicActionOut={easing:cc.EaseCubicActionOut.prototype._updateTime,reverse:function(){return cc._easeCubicActionOut}};
cc.easeCubicActionOut=function(){return cc._easeCubicActionOut};cc.EaseCubicActionInOut=cc.ActionEase.extend({_updateTime:function(a){a*=2;if(1>a)return 0.5*a*a*a;a-=2;return 0.5*(a*a*a+2)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseCubicActionInOut;a.initWithAction(this._inner.clone());return a},reverse:function(){return new cc.EaseCubicActionInOut(this._inner.reverse())}});cc.EaseCubicActionInOut.create=function(a){return new cc.EaseCubicActionInOut(a)};
cc._easeCubicActionInOut={easing:cc.EaseCubicActionInOut.prototype._updateTime,reverse:function(){return cc._easeCubicActionInOut}};cc.easeCubicActionInOut=function(){return cc._easeCubicActionInOut};cc.cardinalSplineAt=function(a,b,c,d,e,f){var g=f*f,h=g*f,k=(1-e)/2;e=k*(-h+2*g-f);var m=k*(-h+g)+(2*h-3*g+1);f=k*(h-2*g+f)+(-2*h+3*g);g=k*(h-g);return cc.p(a.x*e+b.x*m+c.x*f+d.x*g,a.y*e+b.y*m+c.y*f+d.y*g)};cc.reverseControlPoints=function(a){for(var b=[],c=a.length-1;0<=c;c--)b.push(cc.p(a[c].x,a[c].y));return b};cc.cloneControlPoints=function(a){for(var b=[],c=0;c<a.length;c++)b.push(cc.p(a[c].x,a[c].y));return b};cc.copyControlPoints=cc.cloneControlPoints;
cc.getControlPointAt=function(a,b){var c=Math.min(a.length-1,Math.max(b,0));return a[c]};cc.reverseControlPointsInline=function(a){for(var b=a.length,c=0|b/2,d=0;d<c;++d){var e=a[d];a[d]=a[b-d-1];a[b-d-1]=e}};
cc.CardinalSplineTo=cc.ActionInterval.extend({_points:null,_deltaT:0,_tension:0,_previousPosition:null,_accumulatedDiff:null,ctor:function(a,b,c){cc.ActionInterval.prototype.ctor.call(this);this._points=[];void 0!==c&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){if(!b||0===b.length)throw Error("Invalid configuration. It must at least have one control point");return cc.ActionInterval.prototype.initWithDuration.call(this,a)?(this.setPoints(b),this._tension=c,!0):!1},clone:function(){var a=
new cc.CardinalSplineTo;a.initWithDuration(this._duration,cc.copyControlPoints(this._points),this._tension);return a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);this._deltaT=1/(this._points.length-1);this._previousPosition=cc.p(this.target.getPositionX(),this.target.getPositionY());this._accumulatedDiff=cc.p(0,0)},update:function(a){a=this._computeEaseTime(a);var b,c=this._points;if(1===a)b=c.length-1,a=1;else{var d=this._deltaT;b=0|a/d;a=(a-d*b)/d}b=cc.cardinalSplineAt(cc.getControlPointAt(c,
b-1),cc.getControlPointAt(c,b-0),cc.getControlPointAt(c,b+1),cc.getControlPointAt(c,b+2),this._tension,a);cc.ENABLE_STACKABLE_ACTIONS&&(c=this.target.getPositionX()-this._previousPosition.x,a=this.target.getPositionY()-this._previousPosition.y,0!==c||0!==a)&&(d=this._accumulatedDiff,c=d.x+c,a=d.y+a,d.x=c,d.y=a,b.x+=c,b.y+=a);this.updatePosition(b)},reverse:function(){var a=cc.reverseControlPoints(this._points);return cc.cardinalSplineTo(this._duration,a,this._tension)},updatePosition:function(a){this.target.setPosition(a);
this._previousPosition=a},getPoints:function(){return this._points},setPoints:function(a){this._points=a}});cc.cardinalSplineTo=function(a,b,c){return new cc.CardinalSplineTo(a,b,c)};cc.CardinalSplineTo.create=cc.cardinalSplineTo;
cc.CardinalSplineBy=cc.CardinalSplineTo.extend({_startPosition:null,ctor:function(a,b,c){cc.CardinalSplineTo.prototype.ctor.call(this);this._startPosition=cc.p(0,0);void 0!==c&&this.initWithDuration(a,b,c)},startWithTarget:function(a){cc.CardinalSplineTo.prototype.startWithTarget.call(this,a);this._startPosition.x=a.getPositionX();this._startPosition.y=a.getPositionY()},reverse:function(){for(var a=this._points.slice(),b,c=a[0],d=1;d<a.length;++d)b=a[d],a[d]=cc.pSub(b,c),c=b;a=cc.reverseControlPoints(a);
c=a[a.length-1];a.pop();c.x=-c.x;c.y=-c.y;a.unshift(c);for(d=1;d<a.length;++d)b=a[d],b.x=-b.x,b.y=-b.y,b.x+=c.x,b.y+=c.y,c=a[d]=b;return cc.cardinalSplineBy(this._duration,a,this._tension)},updatePosition:function(a){var b=this._startPosition,c=a.x+b.x;a=a.y+b.y;this._previousPosition.x=c;this._previousPosition.y=a;this.target.setPosition(c,a)},clone:function(){var a=new cc.CardinalSplineBy;a.initWithDuration(this._duration,cc.copyControlPoints(this._points),this._tension);return a}});
cc.cardinalSplineBy=function(a,b,c){return new cc.CardinalSplineBy(a,b,c)};cc.CardinalSplineBy.create=cc.cardinalSplineBy;cc.CatmullRomTo=cc.CardinalSplineTo.extend({ctor:function(a,b){b&&this.initWithDuration(a,b)},initWithDuration:function(a,b){return cc.CardinalSplineTo.prototype.initWithDuration.call(this,a,b,0.5)},clone:function(){var a=new cc.CatmullRomTo;a.initWithDuration(this._duration,cc.copyControlPoints(this._points));return a}});
cc.catmullRomTo=function(a,b){return new cc.CatmullRomTo(a,b)};cc.CatmullRomTo.create=cc.catmullRomTo;cc.CatmullRomBy=cc.CardinalSplineBy.extend({ctor:function(a,b){cc.CardinalSplineBy.prototype.ctor.call(this);b&&this.initWithDuration(a,b)},initWithDuration:function(a,b){return cc.CardinalSplineTo.prototype.initWithDuration.call(this,a,b,0.5)},clone:function(){var a=new cc.CatmullRomBy;a.initWithDuration(this._duration,cc.copyControlPoints(this._points));return a}});
cc.catmullRomBy=function(a,b){return new cc.CatmullRomBy(a,b)};cc.CatmullRomBy.create=cc.catmullRomBy;cc.ActionTweenDelegate=cc.Class.extend({updateTweenAction:function(a,b){}});
cc.ActionTween=cc.ActionInterval.extend({key:"",from:0,to:0,delta:0,ctor:function(a,b,c,d){cc.ActionInterval.prototype.ctor.call(this);this.key="";void 0!==d&&this.initWithDuration(a,b,c,d)},initWithDuration:function(a,b,c,d){return cc.ActionInterval.prototype.initWithDuration.call(this,a)?(this.key=b,this.to=d,this.from=c,!0):!1},startWithTarget:function(a){if(!a||!a.updateTweenAction)throw Error("cc.ActionTween.startWithTarget(): target must be non-null, and target must implement updateTweenAction function");cc.ActionInterval.prototype.startWithTarget.call(this,
a);this.delta=this.to-this.from},update:function(a){this.target.updateTweenAction(this.to-this.delta*(1-a),this.key)},reverse:function(){return new cc.ActionTween(this.duration,this.key,this.to,this.from)},clone:function(){var a=new cc.ActionTween;a.initWithDuration(this._duration,this.key,this.from,this.to);return a}});cc.actionTween=function(a,b,c,d){return new cc.ActionTween(a,b,c,d)};cc.ActionTween.create=cc.actionTween;var data=data||{};var wxConfig={configMd5_low:"1faa23457f420492a52af21c50cc1e4d",configMd5_high:"1bf49f3c84477768f479e94a38d40e6e",configMd5:null,useCodeCacheRes:!1};wxConfig.saveCodeCacheRes=!wxConfig.useCodeCacheRes;wxConfig.cdnUrl="https://image.hlxxx.qq.com/pro/online/";wxConfig.isTestServer=!0;wxConfig.projectConfig={debugMode:0,showFPS:!1,frameRate:60,noCache:!1,id:"gameCanvas",renderMode:0,contentScaleFactor:1,unionCCB:!0,unionJson:!0,unionFnt:!0,unionPlist:!0,unionMini:!0};wxConfig.codeCacheRes={"res/data/meta.json":"meta"};
wxConfig.model=cc.sys.wxSystemInfo.model.toUpperCase();wxConfig.isSpecialModel="BLN-AL40"==wxConfig.model;wxConfig.isIPhoneX=0==wxConfig.model.indexOf("IPHONE X");
wxConfig.initQualityLevel=function(){var a=this.model;if((cc.sys.os==cc.sys.OS_DEV?cc.sys.OS_IOS:cc.sys.os)==cc.sys.OS_IOS){this.qualityLevel=1;if(0==a.indexOf("IPHONE 4")||0==a.indexOf("IPHONE 5")||0==a.indexOf("IPHONE 6"))this.qualityLevel=0;0==a.indexOf("IPHONE 6S")&&(this.qualityLevel=1)}else this.qualityLevel=0,DeviceHelper.HighDeviceDic[a]&&(this.qualityLevel=1);0==this.qualityLevel?(this.configMd5=this.configMd5_low,wxConfig.projectConfig.contentScaleFactor=0.8,wxConfig.projectConfig.frameRate=
30,wx.setStorageSync("Smooth",!1),console.log("wxConfig.qualityLevel \x3d low, model \x3d",a)):(this.configMd5=this.configMd5_high,wxConfig.projectConfig.contentScaleFactor=1,wxConfig.projectConfig.frameRate=60,wx.setStorageSync("Smooth",!0),console.log("wxConfig.qualityLevel \x3d high, model \x3d",a))};var wxfileUtil={resMd5:{},userDataPath:"wxfile://usr/",getDownloadUrl:function(a){return wxfileUtil.userDataPath+a},getFilePath:function(a){var b=a.lastIndexOf("/");return 0<b?a.slice(0,b):""},getFileName:function(a){var b=a.lastIndexOf("/");return 0<=b?a.slice(b+1):a},getWxFilePath:function(a){return wxfileUtil.userDataPath+a},isLocalPathExists:function(a){return!0},isLocalFileExists:function(a){return!0},isResUrl:function(a){return 0==a.indexOf("res/")},isResChanged:function(a){return!1},updateResMd5:function(a){},
_createdPath:{},mkdir:function(a){},_mkdir:function(a,b,c){},mkdirForResUrl:function(a){},writeFile:function(a,b,c,d){},writeFileWithText:function(a,b,c,d){},_checkedFile:{},checkResExists:function(a,b,c){return!0},getPortraitResPath:function(a){return"portrait/"+a},getWxPortraitPath:function(a){return this.getWxFilePath(this.getPortraitResPath(a))},_portraitUpdateTime:864E5,updatePortraitDownloadTime:function(a){},checkPortraitExists:function(a,b,c){return!0},useWxRequest:!1,getResponseText:function(a){},
downloadTxt:function(a,b,c,d){},downloadBinary:function(a,b,c,d){},downloadFileFromRemoteUrl:function(a,b,c){},downloadAndSaveTempRes:function(a,b){}};var wxResManager={preCache:{},init:function(){},_queue:{},getQueue:function(a,b){var c=this._queue[a];c?c.push(b):(c=[b],this._queue[a]=c);return c},executeQueue:function(a,b){var c=this._queue[a],d;for(d in c){var e=c[d];e.apply(e,b)}delete this._queue[a]},removeQueue:function(a){delete this._queue[a]},delayedDownload:!0};function _wxTraceLoad(a){console.warn(a)}
wxResManager.combineStringAndArraybuffer=function(a,b){for(var c=a.length,d=c+b.byteLength,e=new Uint8Array(d),f=0,g=0,f=0;f<c;f++)e[f]=a.charCodeAt(f)&255;for(var h=new Uint8Array(b),f=c;f<d;f++,g++)e[f]=h[g];return e.buffer};
wxResManager.loadImg=function(a,b,c){_wxTraceLoad("wxResManager.loadImg : "+a);wxfileUtil.isResUrl(a)?(console.log("load image from local disk :",a),c(wxfileUtil.getWxFilePath(a))):b&&0==a.indexOf("https://wx.qlogo.cn")?wxResManager.loadPortrait(a,null,function(a){c(a)}):(console.log("set img src \x3d remoteUrl :",a),c(a))};
wxResManager.loadAudio=function(a,b,c){wxfileUtil.isResUrl(a)?1<wxResManager.getQueue(a,c).length||(console.log("load audio from local disk :",a),wxResManager.executeQueue(a,[a,wxfileUtil.getWxFilePath(a),!0])):(console.log("set audio src \x3d remoteUrl :",a),c(a,a,!1))};wxResManager.loadTxt=function(a,b,c){console.error("wxResManager.loadTxt is invalid in sub")};wxResManager.loadJson=function(a,b){console.error("wxResManager.loadJson is invalid in sub")};wxResManager.loadBinary=function(a,b){console.error("wxResManager.loadBinary is invalid in sub")};
wxResManager.loadPortrait=function(a,b,c){1<wxResManager.getQueue(a,c).length||(b&&""!=b||(b=CryptoJS.MD5(a).toString()),b=wxfileUtil.getPortraitResPath(b),console.log("load portrait from local disk :",b),wxResManager.executeQueue(a,[wxfileUtil.getWxFilePath(b)]))};wxResManager.downloadResource=function(a,b){console.error("wxResManager.downloadResource is invalid in sub")};wxResManager.downloadAndSaveTempRes=function(a,b){console.error("wxResManager.downloadAndSaveTempRes is invalid in sub")};wxResManager.init();var wxAsyncAction_LoadRes=1,wxAsyncAction_WriteFile=2,wxAsyncAction_DownloadRes=3,wxAsyncState_Prepare=1,wxAsyncState_Processing=2,wxAsyncState_Success=3,wxAsyncState_Fail=4;function WxAsyncPool(a){this._isProcessing=!1;this._concurrentMax=a||0;this._defaultAction=wxAsyncAction_LoadRes;this._batchList=[];this._normalList=[];this._cb=this._processingTaskList=null;this._cbResult=!0}WxAsyncPool.prototype.setConcurrentCount=function(a){this._concurrentMax=a;this._isProcessing&&this.flow()};
WxAsyncPool.prototype.setDefaultAction=function(a){this._defaultAction=a};WxAsyncPool.prototype.setCallback=function(a){this._cb=a};WxAsyncPool.prototype.makeTask=function(a){if("string"==typeof a)return{url:a,action:this._defaultAction,state:1};if("object"==typeof a)return a};WxAsyncPool.prototype.addBatch=function(a){if(0!=a.length){for(var b=Array(a.length),c=0;c<b.length;c++)b[c]=this.makeTask(a[c]);this._batchList.push(b);this._isProcessing&&this.flow()}};
WxAsyncPool.prototype.add=function(a,b,c,d,e){c=c||wxAsyncAction_LoadRes;if(c==wxAsyncAction_LoadRes)this._normalList.push(this.makeTask(b));else if(c==wxAsyncAction_WriteFile)e=e||wxfileUtil.getWxFilePath(b),this._normalList.push({url:b,data:d,filePath:e,action:2,state:1});else if(c==wxAsyncAction_DownloadRes)this._normalList.push({url:b,action:3,state:1});else return;console.warn("WxAsyncPool.add ",b,", action\x3d",c,", isPorcessing\x3d",this._isProcessing);a&&this._isProcessing&&this.flow()};
WxAsyncPool.prototype.start=function(){this._isProcessing||(this._isProcessing=!0,this.flow())};WxAsyncPool.prototype.stop=function(){this._isProcessing=!1};WxAsyncPool.prototype.clear=function(){this._batchList=[];this._normalList=[];this._processingTaskList=null};WxAsyncPool.prototype.remove=function(a){};
WxAsyncPool.prototype._isCurrentTaskListFinished=function(){var a=this._processingTaskList;if(!a||0==a.length)return!0;for(var b in a){var c=a[b].state;if(1==c||2==c)return!1}this._processingTaskList=null;a==this._normalList&&(this._normalList=[],console.log("WxAsyncPool : clear normal list"));return!0};WxAsyncPool.prototype._getNextTaskList=function(){return this._processingTaskList=0<this._batchList.length?this._batchList.shift():0<this._normalList.length?this._normalList:null};
WxAsyncPool.prototype._getTask=function(){var a=this._processingTaskList,b;for(b in a){var c=a[b];if(1==c.state)return c.startTime=(new Date).getTime(),c}return null};WxAsyncPool.prototype._endTask=function(a,b,c){var d=1==a.action?"load":"write";b?(a.state=3,c||console.warn("WxAsyncPool :",d,a.url," success")):(a.state=4,c||console.error("WxAsyncPool :",d,a.url," fail : ",a.errMsg));this._cb&&!b&&(this._cbResult=!1);this._isProcessing&&this.flow()};
WxAsyncPool.prototype.flow=function(){if(this._isProcessing)if(this._isCurrentTaskListFinished()&&!this._getNextTaskList())this._cb&&(this.stop(),this._cb(this._cbResult));else{var a=this._processingTaskList.length;0<this._concurrentMax&&(a=this._concurrentMax-this._processingTaskList.length);if(!(0>=a))for(var b=this._getTask();a&&b;)b.state=2,b.action==wxAsyncAction_LoadRes?this.processLoadRes(b):b.action==wxAsyncAction_WriteFile?this.processWriteFile(b):b.action==wxAsyncAction_DownloadRes&&this.processDownloadRes(b),
a--,b=this._getTask()}};WxAsyncPool.prototype.isAudioRes=function(a){return"mp3"==a||"ogg"==a||"wav"==a||"mp4"==a||"m4a"==a};
WxAsyncPool.prototype.processLoadRes=function(a){var b=a.url,c=cc.path.extname(b),d=cc.loader.getLoader(c),e=this;if(d){var f=this.isAudioRes(c);!f&&cc.loader.getRes(b)?(console.warn("WxAsyncPool.processLoadRes : skip",a.url),e._endTask(a,!0,!0)):d.load(b,b,null,function(c,d){c?(f||(cc.loader.cache[b]=null,delete cc.loader.cache[b]),a.errMsg=c,e._endTask(a,!1)):(f||(cc.loader.cache[b]=d),e._endTask(a,!0))})}else a.errMsg="no loader for "+b,e._endTask(a,!1)};
WxAsyncPool.prototype.processWriteFile=function(a){var b=this;wxfileUtil.writeFile(a.url,a.data,function(){b._endTask(a,!0)},function(){b._endTask(a,!1)})};WxAsyncPool.prototype.processDownloadRes=function(a){var b=this;wxResManager.downloadResource(a.url,function(c){c?b._endTask(a,!0):b._endTask(a,!1)})};WxAsyncPool.batchDownload=function(a,b){var c=new WxAsyncPool;c.setDefaultAction(wxAsyncAction_DownloadRes);c.setCallback(b);c.addBatch(a);c.start()};var wxAsyncPool=new WxAsyncPool;_G=this;var cw=cw||{};cw.__instanceId=ClassManager.getNewInstanceId();var kCCShaderType_Gray=cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY,kCCShaderType_CircleClip=cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_CIRCLECLIP;cw.init=function(){UI_V_ORIG=cc.director.getVisibleOrigin();UI_V_SIZE=cc.director.getVisibleSize();UI_W_SIZE=cc.director.getWinSize();UI_SCREEN_SCALE=UI_V_SIZE.height/1280;display.init()};cw.Enum=function(a){return cc.Enum(a)};cw.List=function(a){return a};
cw.ArrayList=function(a){for(var b={},c=0;c<a.length/2;++c)b[a[2*c]]=a[2*c+1];return b};cw.Class=function(a){return cc.Class.extend(a)};cw.Class.extend=function(a,b){if(a)return a.extend(b);cw.assert(!1,"extend error parent is null"+b)};ccp=cc.p;printf=cc.log;cw.assert=function(a,b){a||printf(b)};assert=cw.assert;
cw.clone=function(a){var b;switch(typeof a){case "undefined":break;case "string":b=a+"";break;case "number":b=a-0;break;case "boolean":b=a;break;case "object":if(null===a)b=null;else if(a instanceof Array){b=[];for(var c=0,d=a.length;c<d;c++)b.push(cw.clone(a[c]))}else for(c in b={},a)b[c]=cw.clone(a[c]);break;default:b=a}return b};cw.addA2O=function(a,b,c){for(var d in a)b[a[d]]=c||a[d]};cw.addL2O=function(a,b){for(var c in a)b[c]=a[c]};cw.addA2A=function(a,b){for(var c=0;c<a.length;++c)b.push(a[c])};
function handler(a,b){return b?function(){return b.apply(a,arguments)}:null}function loadccb(a,b,c,d,e,f,g){(b=cc.BuilderReader.load(a,b,e,f,g,c))||console.error(("loadccb :",a,"failed!"));return b}var Utils=cw.Class({});Utils.__instanceId=ClassManager.getNewInstanceId();Utils.Enum=function(a){for(var b={},c=0;c<a.length;++c)b[a[c]]=c;return b};Utils.cancelDelayCall=function(a){a&&cc.director.getScheduler().unschedule(a,this)};
Utils.delayCall=function(a,b,c){b=b||1;c=c||!1;var d=function(){a&&a();c||Utils.cancelDelayCall(d)};cc.director.getScheduler().schedule(d,this,b);return d};
Utils.registerTouch=function(a,b,c){a.touchListener=cc.eventManager.addListener({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:c,onTouchBegan:function(b,c){return a.ccTouchBegan(b,c)},onTouchMoved:function(b,c){a.ccTouchMoved&&a.ccTouchMoved(b,c)},onTouchEnded:function(b,c){a.ccTouchEnded&&a.ccTouchEnded(b,c)},onTouchCancelled:function(b,c){a.ccTouchCancelled&&a.ccTouchCancelled(b,c)}},a)};
Utils.unregisterTouch=function(a){a.touchListener&&(cc.eventManager.removeListener(a.touchListener),a.touchListener=null)};Utils.registerKeypad=function(a,b,c){a.keypadListener=cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,swallowTouches:c,onKeyReleased:function(b,c){if(a.onKeyReleased)return a.onKeyReleased(b,c)}},a)};Utils.unregisterKeypad=function(a){a.keypadListener&&(cc.eventManager.removeListener(a.keypadListener),a.keypadListener=null)};
Utils.parseDateStrToOSTime=function(a){return(new Date(a)).getTime()/1E3};Utils.startTime=(new Date).getTime();Utils.printCostTime=function(a,b){b&&(Utils.startTime=(new Date).getTime());var c=(new Date).getTime();printf("------",a,c-Utils.startTime);Utils.startTime=c};Utils.formatSecToHHMMSS=function(a,b){var c=Math.floor(a/60),d=a-60*c,e=Math.floor(c/60),c=c-60*e;return b&&0==e?string.format("%02d:%02d",c,d):string.format("%02d:%02d:%02d",e,c,d)};Utils.countUseList={};
Utils.countUse=function(a){this.countUseList[a]||(this.countUseList[a]=0);this.countUseList[a]+=1;printf("-----",a,this.countUseList[a])};Utils.traceTouch=function(){};var PlistDataParser=function(a){this.text=a;this.currentIndex=a=a.indexOf("\x3cd")+6;try{this.data=PlistNodeDataParser.parseDict(this,a)}catch(b){console.error(b),this.data=null}},PlistNodeDataParser={parseDict:function(a,b){for(var c={},d=a.text.indexOf("\x3c",b),e=a.text.charAt(d+1),f="k"==e?d+5:-1;-1<f;){f=this.parseKey(a,f);d=a.currentIndex;d=a.text.indexOf("\x3c",d);e=a.text.charAt(d+1);if("d"==e)d+=6,d=this.parseDict(a,d);else if("a"==e)d+=7,d=this.parseArray(a,d);else if("s"==e)d+=8,d=this.parseString(a,
d);else if("f"==e)d+=8,d=this.parseFalse(a,d);else if("t"==e)d+=7,d=this.parseTrue(a,d);else if("r"==e)d+=6,d=this.parseReal(a,d);else if("i"==e)d+=9,d=this.parseInteger(a,d);else throw"PlistNodeDataParser.parseDict : invalid charFlag :"+e;c[f]=d;d=a.currentIndex;d=a.text.indexOf("\x3c",d);e=a.text.charAt(d+1);f="k"==e?d+5:-1}if("/"!=e||"d"!=a.text.charAt(d+2))throw"PlistNodeDataParser.parseDict : invalid dict end :"+e+","+a.text.charAt(d+2);a.currentIndex=d+7;return c},parseArray:function(a,b){var c=
[],d=null,e;do{d=a.text.indexOf("\x3c",d||b);e=a.text.charAt(d+1);if("d"==e)e=d+6,d=this.parseDict(a,e);else if("a"==e)e=d+7,d=this.parseArray(a,e);else if("s"==e)e=d+8,d=this.parseString(a,e);else if("f"==e)e=d+8,d=this.parseFalse(a,e);else if("t"==e)e=d+7,d=this.parseTrue(a,e);else if("r"==e)e=d+6,d=this.parseReal(a,e);else if("i"==e)e=d+9,d=this.parseInteger(a,e);else{if("/"!=e||"a"!=a.text.charAt(d+2))throw"PlistNodeDataParser.parseArray : invalid array end :"+e+","+a.text.charAt(d+2);a.currentIndex=
d+8;return c}c.push(d);d=a.currentIndex}while(-1<e)},parseString:function(a,b){var c=a.text.indexOf("\x3c/s",b);a.currentIndex=c+9;return a.text.slice(b,c).trim()},parseFalse:function(a,b){a.currentIndex=b;return!1},parseTrue:function(a,b){a.currentIndex=b;return!0},parseReal:function(a,b){var c=a.text.indexOf("\x3c/r",b);a.currentIndex=c+7;return parseFloat(a.text.slice(b,c).trim())},parseInteger:function(a,b){var c=a.text.indexOf("\x3c/i",b);a.currentIndex=c+10;return parseInt(a.text.slice(b,c).trim(),
10)},parseKey:function(a,b){var c=a.text.indexOf("\x3c/k",b);a.currentIndex=c+6;return a.text.slice(b,c).trim()}};Utf8String=cc.Class.extend({m_asciiStr:"",m_indexArray:[],ctor:function(a){this.initWithStr(a||"")},initWithStr:function(a){this.m_asciiStr=a;this.resetIndexArray()},resetIndexArray:function(){this.m_indexArray=[];for(var a=this.m_asciiStr,b=0,c=0;c<a.length;)b=a.charAt(c),128!=(192&b)&&this.m_indexArray.push(c),++c},length:function(){return this.m_indexArray.length},isAsciiChar:function(a){return 255>this.m_asciiStr.charCodeAt(a)},getAsciiStr:function(a){a=a||0;var b=0;this.m_indexArray.length>a&&
(b=this.m_indexArray[a]);return this.m_asciiStr.slice(b)},getAsciiChar:function(a){return this.m_asciiStr[a]},substr:function(a,b){return b&&a+b<this.m_indexArray.length?this.m_asciiStr.substr(this.m_indexArray[a],this.m_indexArray[a+b]-this.m_indexArray[a]):this.m_asciiStr.substr(this.m_indexArray[a])},getAsciiIndex:function(a){return this.m_indexArray[a]},getAsciiLength:function(){return this.m_asciiStr.length},assign:function(a){this.m_asciiStr=a;this.resetIndexArray()},append:function(a){this.m_asciiStr+=
a;this.resetIndexArray()},deleteChars:function(a){a>=this.m_asciiStr.length&&(a=this.m_asciiStr.length);this.m_asciiStr=this.m_asciiStr.slice(0,this.m_asciiStr.length-a);this.resetIndexArray()},find:function(a,b){for(var c=this.m_indexArray.length,d=b;d<c;d++)if(this.m_asciiStr[this.m_indexArray[d]]==a)return d;return-1},split:function(a){for(var b=[],c=0,d=0;0<=c;)c=this.find(a,c),0<=c&&(c!=d&&b.push(this.substr(d,c-d)),d=c+=1);b.push(this.substr(d,length()-d));return b}});
Utf8String.strLen=function(a){for(var b=0,c=0,d=0;d<a.length;)c=a.charAt(d),128!=(192&c)&&++b,++d;return b};BUTTON_ZOOM_IN_SCALE=1.1;BUTTON_ZOOM_OUT_SCALE=0.85;BUTTON_DIM_COLOR=180;BUTTON_ACTION_TAG=98765;
ButtonDelegate=cc.Class.extend({m_bSelected:!1,m_bEnabled:!0,m_bTouchEnabled:!1,m_bTouchDownType:0,m_isMoveNotSwallowTouch:!1,m_bTvSelectHold:!1,m_isLongClickEnable:!1,m_longClickInterval:1,m_longClickDt:0.12,isTouchEnabled:function(){return this.m_bTouchEnabled},setTouchEnabled:function(a){this.m_bTouchEnabled=a},getTouchDownType:function(){return this.m_bTouchDownType},setTouchDownType:function(a){this.m_bTouchDownType=a},activate:function(a){},setSelected:function(a){this.m_bSelected=a},isSelected:function(){return this.m_bSelected},
isEnabled:function(){return this.m_bEnabled},setEnabled:function(a){this.m_bEnabled=a},isTvSelectHold:function(){return this.m_bTvSelectHold},setTvSelectHold:function(a){this.m_bTvSelectHold=a},setLongClickEnable:function(a){this.m_isLongClickEnable=a},setLongClickInterval:function(a){this.m_longClickInterval=a},setLongClickDt:function(a){this.m_longClickDt=a},setMoveNotSwallowTouch:function(a){this.m_isMoveNotSwallowTouch=a},selectedShow:function(a){}});BUTTON_ZOOM_IN_SCALE=1.1;BUTTON_ZOOM_OUT_SCALE=0.85;BUTTON_DIM_COLOR=180;
ButtonDelegateNode=cc.Node.extend({m_bSelected:!1,m_bEnabled:!0,m_bTouchEnabled:!1,m_bTouchDownType:0,m_isMoveNotSwallowTouch:!1,m_bTvSelectHold:!1,m_isLongClickEnable:!1,m_longClickInterval:1,m_longClickDt:0.12,isTouchEnabled:function(){return this.m_bTouchEnabled},setTouchEnabled:function(a){this.m_bTouchEnabled=a},getTouchDownType:function(){return this.m_bTouchDownType},setTouchDownType:function(a){this.m_bTouchDownType=a},activate:function(a){},setSelected:function(a){this.m_bSelected=a},isSelected:function(){return this.m_bSelected},
isEnabled:function(){return this.m_bEnabled},setEnabled:function(a,b){this.m_bEnabled=a;this.m_tips=b},isTvSelectHold:function(){return this.m_bTvSelectHold},setTvSelectHold:function(a){this.m_bTvSelectHold=a},setLongClickEnable:function(a){this.m_isLongClickEnable=a},setLongClickInterval:function(a){this.m_longClickInterval=a},setLongClickDt:function(a){this.m_longClickDt=a},setMoveNotSwallowTouch:function(a){this.m_isMoveNotSwallowTouch=a},selectedShow:function(a){}});BUTTON_ZOOM_IN_SCALE=1.1;BUTTON_ZOOM_OUT_SCALE=0.85;BUTTON_DIM_COLOR=180;
ButtonDelegateSprite=cc.Sprite.extend({m_bSelected:!1,m_bEnabled:!0,m_bTouchEnabled:!1,m_bTouchDownType:0,m_isMoveNotSwallowTouch:!1,m_bTvSelectHold:!1,m_isLongClickEnable:!1,m_longClickInterval:1,m_longClickDt:0.12,isTouchEnabled:function(){return this.m_bTouchEnabled},setTouchEnabled:function(a){this.m_bTouchEnabled=a},getTouchDownType:function(){return this.m_bTouchDownType},setTouchDownType:function(a){this.m_bTouchDownType=a},activate:function(a){},setSelected:function(a){this.m_bSelected=a},
isSelected:function(){return this.m_bSelected},isEnabled:function(){return this.m_bEnabled},setEnabled:function(a,b){this.m_bEnabled=a;this.m_tips=b},isTvSelectHold:function(){return this.m_bTvSelectHold},setTvSelectHold:function(a){this.m_bTvSelectHold=a},setLongClickEnable:function(a){this.m_isLongClickEnable=a},setLongClickInterval:function(a){this.m_longClickInterval=a},setLongClickDt:function(a){this.m_longClickDt=a},setMoveNotSwallowTouch:function(a){this.m_isMoveNotSwallowTouch=a},selectedShow:function(a){}});ButtonHelper=cc.Class.extend({});ButtonHelper.s_hasButtonTouched=!1;ButtonHelper.s_curButtonWeak=null;ButtonHelper.s_curButtonMask=null;ButtonHelper.s_tvTouchType=0;ButtonHelper.s_tvTouchColor=cc.color(255,255,255);ButtonHelper.s_isTouchDownClick=!1;ButtonHelper.s_nScriptButtonDisabledHandler=null;
ButtonHelper.moveArrowDir=function(a,b,c){var d=DisplayHelper.sharedInstance().getScreenSize(),e=ccp(0,d.height);Math.abs(b)>Math.abs(c)?(e.x=0<b?0:d.width,e.y=0.5*d.height):0<c?(e.x=0.5*d.width,e.y=0):(e.x=0.5*d.width,e.y=d.height);d=this.s_curButtonWeak;d instanceof cc.Node&&(e=d.getContentSize(),e=d.convertToWorldSpace(ccp(0.5*e.width,0.5*e.height)));if(a=CCNodeUtils.genNearestButton(a,e,b,c,this.s_curButtonWeak))this.s_curButtonWeak&&this.s_curButtonWeak.selectedShow(!1),a.selectedShow(!0),this.s_curButtonWeak=
a};ButtonHelper.s_isLocked=!1;ButtonHelper.moveArrowMotionDir=function(a,b,c){var d=Math.abs(b),e=Math.abs(c);0.25>d&&0.25>e?this.s_isLocked=!1:!this.s_isLocked&&(0.5<d||0.5<e)&&(this.moveArrowDir(a,b,c),this.s_isLocked=!0)};ButtonHelper.moveArrowTo=function(a){this.clearButtonArrow();a&&(a.selectedShow(!0),this.s_curButtonWeak=a)};ButtonHelper.clearButtonArrow=function(){this.s_curButtonWeak&&(this.s_curButtonWeak.selectedShow(!1),this.s_curButtonWeak=null)};
ButtonHelper.selectArrowButton=function(){var a=this.s_curButtonWeak;this.s_curButtonWeak&&this.s_curButtonWeak.isEnabled()&&(!a||a.isVisibleInParents())&&(a=this.s_curButtonWeak,this.s_curButtonWeak.isTvSelectHold()||(this.s_curButtonWeak.selectedShow(!1),this.s_curButtonWeak=null),a.activate("click"))};ButtonHelper.removeSelectButton=function(a){a==this.s_curButtonWeak&&(this.s_curButtonWeak=null)};
ButtonHelper.getCurSelectButton=function(){return this.s_curButtonWeak instanceof cc.Node?this.s_curButtonWeak:null};ButtonHelper.setTVTouchType=function(a){this.s_tvTouchType=a};ButtonHelper.getTVTouchType=function(){return this.s_tvTouchType};ButtonHelper.setTouchDownClick=function(a){this.s_isTouchDownClick=a};ButtonHelper.isTouchDownClick=function(){return this.s_isTouchDownClick};
ButtonHelper.setTVTouchColor=function(a,b,c){this.s_tvTouchColor.r=a;this.s_tvTouchColor.g=b;this.s_tvTouchColor.b=c};ButtonHelper.registerButtonDisabledListener=function(a){this.unregisterButtonDisabledListener();this.s_nScriptButtonDisabledHandler=a};ButtonHelper.unregisterButtonDisabledListener=function(){this.s_nScriptButtonDisabledHandler=null};ButtonHelper.notifyButtonDisabled=function(a,b){this.s_nScriptButtonDisabledHandler&&this.s_nScriptButtonDisabledHandler(b,a)};ButtonNode=ButtonDelegateNode.extend({m_nScriptTapHandler:null,m_owner:null,m_startTouchScreenPoint:ccp(0,0),m_isTouchCancel:!1,m_baseScaleX:1,m_baseScaleY:1,m_lockOtherTouch:!1,m_touchDownClickWhenTouchBegan:!1,m_isTouchDown:!1,m_isLongTouch:!1,m_touchTime:0,m_lastLongClickTime:0,ctor:function(){this._super();this.m_startTouchScreenPoint=ccp(0,0)},registerTouch:function(a,b){Utils.registerTouch(this,a,b)},unregisterTouch:function(){Utils.unregisterTouch(this)},onEnter:function(){this.m_bTouchEnabled&&
this.registerTouch(0,!this.m_isMoveNotSwallowTouch);this._super()},onExit:function(){this.m_bTouchEnabled&&this.unregisterTouch();this.m_lockOtherTouch&&(ButtonHelper.s_hasButtonTouched=this.m_lockOtherTouch=!1);this._super()},ccTouchBegan:function(a,b){if(ButtonHelper.s_hasButtonTouched)return!1;var c=this.convertTouchToNodeSpace(a);if(!this.isVisibleInParents(c))return!1;if(this.isInRect(a)){if(this.isEnabled()){if(ButtonHelper.isTouchDownClick())return this.activate("click"),this.m_touchDownClickWhenTouchBegan=
!0;this.m_touchDownClickWhenTouchBegan=!1;this.selected(!0)}ButtonHelper.s_hasButtonTouched=this.m_lockOtherTouch=!0;this.m_isTouchCancel=!1;this.m_isTouchDown=!0;this.m_startTouchScreenPoint=a.getLocationInView();return!0}},ccTouchEnded:function(a,b){this.m_isTouchDown=ButtonHelper.s_hasButtonTouched=this.m_lockOtherTouch=!1;this.m_lastLongClickTime=this.m_touchTime=0;this.m_isTouchCancel||(this.selected(!1),this.m_isLongTouch||!this.isInRect(a)||!this.isVisible()||ButtonHelper.isTouchDownClick()||
this.m_touchDownClickWhenTouchBegan||this.activate("click"));this.m_isLongTouch=!1},ccTouchCancelled:function(a,b){this.m_isLongTouch=this.m_isTouchDown=ButtonHelper.s_hasButtonTouched=this.m_lockOtherTouch=!1;this.m_lastLongClickTime=this.m_touchTime=0;this.selected(!1)},ccTouchMoved:function(a,b){if(!this.m_isTouchCancel&&!ButtonHelper.isTouchDownClick()&&!this.m_touchDownClickWhenTouchBegan&&this.m_bEnabled){var c=a.getLocationInView();this.m_isMoveNotSwallowTouch&&10<cc.pDistance(this.m_startTouchScreenPoint,
c)?(this.m_isTouchCancel=!0,this.selected(!1)):this.isEnabled()&&(this.isInRect(a)?(this.m_isTouchDown=!0,this.selected(!0)):(this.m_isTouchDown=!1,this.selected(!1)))}},initWithTarget:function(){this.ignoreAnchorPointForPosition(!1);this.setAnchorPoint(ccp(0.5,0.5));this.setSelected(!1);this.setEnabled(!0);this.setTouchEnabled(!0);this.schedule(this.tick);return!0},rect:function(){return cc.rect(this._position.x-this._contentSize.width*this._anchorPoint.x,this._position.y-this._contentSize.height*
this._anchorPoint.y,this._contentSize.width,this._contentSize.height)},isInRect:function(a){a=this.convertTouchToNodeSpace(a);var b=this.rect();b.x=0;b.y=0;return cc.rectContainsPoint(b,a)},setCallback:function(a,b){this.cancelCallback();this.m_nScriptTapHandler=a;this.m_owner=b},cancelCallback:function(){this.m_owner=this.m_nScriptTapHandler=null},getScriptTapHandler:function(){return this.m_nScriptTapHandler},setNodeScale:function(a,b){this.m_baseScaleX=a;this.m_baseScaleY=b;this.setScale(a,b)},
setTouchEnabled:function(a){this.m_bTouchEnabled!=a&&(this.m_bTouchEnabled=a,this._running&&(a?this.registerTouch(0,!this.m_isMoveNotSwallowTouch):this.unregisterTouch()))},activate:function(a){this.m_bEnabled?this.m_nScriptTapHandler&&this.m_nScriptTapHandler.call(this.m_owner,this.getTag(),this,a):this.m_tips&&ButtonHelper.notifyButtonDisabled(this,this.m_tips)},selected:function(a){a&&!this.m_bSelected?(this.m_bSelected=!0,this.stopActionByTag(BUTTON_ACTION_TAG),this.setScaleX(this.m_baseScaleX),
this.setScaleY(this.m_baseScaleY),0==this.m_bTouchDownType?(a=cc.scaleTo(0.1,this.m_baseScaleX*BUTTON_ZOOM_IN_SCALE,this.m_baseScaleY*BUTTON_ZOOM_IN_SCALE),a.setTag(BUTTON_ACTION_TAG),this.runAction(a)):1==this.m_bTouchDownType?(a=cc.scaleTo(0.1,this.m_baseScaleX*BUTTON_ZOOM_OUT_SCALE,this.m_baseScaleY*BUTTON_ZOOM_OUT_SCALE),a.setTag(BUTTON_ACTION_TAG),this.runAction(a)):2==this.m_bTouchDownType&&(a=cc.tintTo(0.1,BUTTON_DIM_COLOR,BUTTON_DIM_COLOR,BUTTON_DIM_COLOR),a.setTag(BUTTON_ACTION_TAG),this.runAction(a))):
!a&&this.m_bSelected&&(this.m_bSelected=!1,this.stopActionByTag(BUTTON_ACTION_TAG),0==this.m_bTouchDownType?(a=cc.scaleTo(0.1,this.m_baseScaleX,this.m_baseScaleY),a.setTag(BUTTON_ACTION_TAG),this.runAction(a)):1==this.m_bTouchDownType?(a=cc.scaleTo(0.1,this.m_baseScaleX,this.m_baseScaleY),a.setTag(BUTTON_ACTION_TAG),this.runAction(a)):2==this.m_bTouchDownType&&(a=cc.tintTo(0.1,255,255,255),a.setTag(BUTTON_ACTION_TAG),this.runAction(a)))},setMoveNotSwallowTouch:function(a){this._super(a);this.setTouchEnabled(!1);
this.setTouchEnabled(!0)},selectedShow:function(a){ButtonHelper.s_curButtonMask&&ButtonHelper.s_curButtonMask.removeFromParent();this.stopActionByTag(BUTTON_ACTION_TAG);this.setScaleX(this.m_baseScaleX);this.setScaleY(this.m_baseScaleY);var b=ButtonHelper.s_tvTouchType;if(1==b){var c=ButtonHelper.s_curButtonMask;if(null==c){var d=GetAssetsPath("bg_tv_rect.png");0<d.length&&(c=cc.Scale9Sprite.create(d))?(c.retain(),c.setAnchorPoint(ccp(0.5,0.5)),c.setZOrder(-1E3),c.setColor(ButtonHelper.s_tvTouchColor),
ButtonHelper.s_curButtonMask=c):b=0}c&&a&&(d=this.getContentSize(),c.setPosition(ccp(0.5*d.width,0.5*d.height)),c.setPreferredSize(cc.size(d.width+30,d.height+30)),this.addChild(c))}else 2==b&&this.selected(a);0==b&&a&&(a=cc.scaleTo(0.4,1.2*this.m_baseScaleX,1.2*this.m_baseScaleY),b=cc.scaleTo(0.4,this.m_baseScaleX,this.m_baseScaleY),a=cc.sequence(a,b),a=cc.repeatForever(a),a.setTag(BUTTON_ACTION_TAG),this.runAction(a))},tick:function(a){this.m_isTouchDown&&!this.m_isTouchCancel&&this.isVisible()&&
(this.m_touchTime+=a,this.m_isLongClickEnable&&this.m_touchTime>=this.m_longClickInterval&&(this.m_isLongTouch=!0,this.m_touchTime-a<this.m_longClickInterval?(this.activate("lclick"),this.m_lastLongClickTime=0):(this.m_lastLongClickTime+=a,this.m_lastLongClickTime>this.m_longClickDt&&(this.m_lastLongClickTime=0,this.activate("lclick2")))))}});ButtonNode.create=function(){var a=new ButtonNode;a.initWithTarget();return a};ButtonSprite=ButtonDelegateSprite.extend({m_nScriptTapHandler:null,m_owner:null,m_startTouchScreenPoint:ccp(0,0),m_isTouchCancel:!1,m_baseScaleX:1,m_baseScaleY:1,m_lockOtherTouch:!1,m_touchDownClickWhenTouchBegan:!1,m_isTouchDown:!1,m_isLongTouch:!1,m_touchTime:0,m_lastLongClickTime:0,ctor:function(){this._super();this.m_startTouchScreenPoint=ccp(0,0)},registerTouch:function(a,b){Utils.registerTouch(this,a,b)},unregisterTouch:function(){Utils.unregisterTouch(this)},onEnter:function(){this.m_bTouchEnabled&&
this.registerTouch(0,!this.m_isMoveNotSwallowTouch);this._super()},onExit:function(){this.m_bTouchEnabled&&this.unregisterTouch();this.m_lockOtherTouch&&(ButtonHelper.s_hasButtonTouched=this.m_lockOtherTouch=!1);this._super()},ccTouchBegan:function(a,b){if(ButtonHelper.s_hasButtonTouched)return!1;var c=this.convertTouchToNodeSpace(a);if(!this.isVisibleInParents(c))return!1;if(this.isInRect(a)){if(this.isEnabled()){if(ButtonHelper.isTouchDownClick())return this.activate("click"),this.m_touchDownClickWhenTouchBegan=
!0;this.m_touchDownClickWhenTouchBegan=!1;this.selected(!0)}ButtonHelper.s_hasButtonTouched=this.m_lockOtherTouch=!0;this.m_isTouchCancel=!1;this.m_isTouchDown=!0;this.m_startTouchScreenPoint=a.getLocationInView();return!0}},ccTouchEnded:function(a,b){Utils.traceTouch("ButtonSprite : ccTouchEnded, this.m_isTouchCancel\x3d",this.m_isTouchCancel);this.m_isTouchDown=ButtonHelper.s_hasButtonTouched=this.m_lockOtherTouch=!1;this.m_lastLongClickTime=this.m_touchTime=0;if(!this.m_isTouchCancel){var c=!this.m_isLongTouch&&
this.isInRect(a)&&this.isVisible()&&!ButtonHelper.isTouchDownClick()&&!this.m_touchDownClickWhenTouchBegan;this.selected(!1);c&&(Utils.traceTouch("start activate ",this.activate),this.activate("click"))}this.m_isLongTouch=!1},ccTouchCancelled:function(a,b){this.m_isLongTouch=this.m_isTouchDown=ButtonHelper.s_hasButtonTouched=this.m_lockOtherTouch=!1;this.m_lastLongClickTime=this.m_touchTime=0;this.selected(!1)},ccTouchMoved:function(a,b){if(!this.m_isTouchCancel&&!ButtonHelper.isTouchDownClick()&&
!this.m_touchDownClickWhenTouchBegan&&this.m_bEnabled){var c=a.getLocationInView();this.m_isMoveNotSwallowTouch&&10<cc.pDistance(this.m_startTouchScreenPoint,c)?(this.m_isTouchCancel=!0,this.selected(!1)):this.isEnabled()&&(this.isInRect(a)?(this.m_isTouchDown=!0,this.selected(!0)):(this.m_isTouchDown=!1,this.selected(!1)))}},initWithTarget:function(){this.ignoreAnchorPointForPosition(!1);this.setAnchorPoint(ccp(0.5,0.5));this.setSelected(!1);this.setEnabled(!0);this.setTouchEnabled(!0);this.schedule(this.tick);
return!0},rect:function(){return cc.rect(this._position.x-this._contentSize.width*this._anchorPoint.x,this._position.y-this._contentSize.height*this._anchorPoint.y,this._contentSize.width,this._contentSize.height)},isInRect:function(a){a=this.convertTouchToNodeSpace(a);var b=this.rect();b.x=0;b.y=0;return cc.rectContainsPoint(b,a)},setCallback:function(a,b){this.cancelCallback();this.m_nScriptTapHandler=a;this.m_owner=b},cancelCallback:function(){this.m_owner=this.m_nScriptTapHandler=null},getScriptTapHandler:function(){return this.m_nScriptTapHandler},
setNodeScale:function(a,b){this.m_baseScaleX=a;this.m_baseScaleY=b||a;this.setScale(a,b)},setTouchEnabled:function(a){this.m_bTouchEnabled!=a&&(this.m_bTouchEnabled=a,this._running&&(a?this.registerTouch(0,!this.m_isMoveNotSwallowTouch):this.unregisterTouch()))},activate:function(a){Utils.traceTouch("ButtonSprite : activate :",a);this.m_bEnabled?this.m_nScriptTapHandler&&this.m_nScriptTapHandler.call(this.m_owner,this.getTag(),this,a):this.m_tips&&ButtonHelper.notifyButtonDisabled(this,this.m_tips)},
selected:function(a){Utils.traceTouch(a,this.m_bSelected);a&&!this.m_bSelected?(this.m_bSelected=!0,this.stopActionByTag(BUTTON_ACTION_TAG),this.setScaleX(this.m_baseScaleX),this.setScaleY(this.m_baseScaleY),0==this.m_bTouchDownType?(a=cc.scaleTo(0.1,this.m_baseScaleX*BUTTON_ZOOM_IN_SCALE,this.m_baseScaleY*BUTTON_ZOOM_IN_SCALE),a.setTag(BUTTON_ACTION_TAG),this.runAction(a)):1==this.m_bTouchDownType?(a=cc.scaleTo(0.1,this.m_baseScaleX*BUTTON_ZOOM_OUT_SCALE,this.m_baseScaleY*BUTTON_ZOOM_OUT_SCALE),
a.setTag(BUTTON_ACTION_TAG),this.runAction(a)):2==this.m_bTouchDownType&&(a=cc.tintTo(0.1,BUTTON_DIM_COLOR,BUTTON_DIM_COLOR,BUTTON_DIM_COLOR),a.setTag(BUTTON_ACTION_TAG),this.runAction(a))):!a&&this.m_bSelected&&(this.m_bSelected=!1,this.stopActionByTag(BUTTON_ACTION_TAG),0==this.m_bTouchDownType?(a=cc.scaleTo(0.1,this.m_baseScaleX,this.m_baseScaleY),a.setTag(BUTTON_ACTION_TAG),this.runAction(a)):1==this.m_bTouchDownType?(a=cc.scaleTo(0.1,this.m_baseScaleX,this.m_baseScaleY),a.setTag(BUTTON_ACTION_TAG),
this.runAction(a)):2==this.m_bTouchDownType&&(a=cc.tintTo(0.1,255,255,255),a.setTag(BUTTON_ACTION_TAG),this.runAction(a)))},setEnabled:function(a,b){this.m_bEnabled!=a&&(a?this.setShaderProgramByKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR):this.setShaderProgramByKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR_GRAY));this._super(a,b)},setMoveNotSwallowTouch:function(a){this._super(a);this.setTouchEnabled(!1);this.setTouchEnabled(!0)},selectedShow:function(a){ButtonHelper.s_curButtonMask&&ButtonHelper.s_curButtonMask.removeFromParent();
this.stopActionByTag(BUTTON_ACTION_TAG);this.setScaleX(this.m_baseScaleX);this.setScaleY(this.m_baseScaleY);var b=ButtonHelper.s_tvTouchType;if(1==b){var c=ButtonHelper.s_curButtonMask;if(null==c){var d=GetAssetsPath("bg_tv_rect.png");0<d.length&&(c=cc.Scale9Sprite.create(d))?(c.retain(),c.setAnchorPoint(ccp(0.5,0.5)),c.setZOrder(-1E3),c.setColor(ButtonHelper.s_tvTouchColor),ButtonHelper.s_curButtonMask=c):b=0}c&&a&&(d=this.getContentSize(),c.setPosition(ccp(0.5*d.width,0.5*d.height)),c.setPreferredSize(cc.size(d.width+
30,d.height+30)),this.addChild(c))}else 2==b&&this.selected(a);0==b&&a&&(a=cc.scaleTo(0.4,1.2*this.m_baseScaleX,1.2*this.m_baseScaleY),b=cc.scaleTo(0.4,this.m_baseScaleX,this.m_baseScaleY),a=cc.sequence(a,b),a=cc.repeatForever(a),a.setTag(BUTTON_ACTION_TAG),this.runAction(a))},tick:function(a){this.m_isTouchDown&&!this.m_isTouchCancel&&this.isVisible()&&(this.m_touchTime+=a,this.m_isLongClickEnable&&this.m_touchTime>=this.m_longClickInterval&&(this.m_isLongTouch=!0,this.m_touchTime-a<this.m_longClickInterval?
(this.activate("lclick"),this.m_lastLongClickTime=0):(this.m_lastLongClickTime+=a,this.m_lastLongClickTime>this.m_longClickDt&&(this.m_lastLongClickTime=0,this.activate("lclick2")))))}});ButtonSprite.create=function(){var a=new ButtonSprite;a.initWithTarget();return a};ClipView=cc.Node.extend({m_nodeVisibleDeep:0,m_gapWidth:0,m_gapHeight:0,_clippingToBounds:!0,_tmpViewRect:null,_parentScissorRect:null,_scissorRestored:!1,ctor:function(){this._super();this._tmpViewRect=new cc.Rect(0,0,0,0);this._parentScissorRect=new cc.Rect(0,0,0,0)},init:function(){this.scheduleUpdate()},update:function(a){a=this._getViewRect();this.updateNodeVisible(ccp(a.x,a.y),ccp(a.x+a.width,a.y+a.height))},setGapWidth:function(a){this.m_gapWidth=a},getGapWidth:function(){return this.m_gapWidth},
setGapHeight:function(a){this.m_gapHeight=a},getGapHeight:function(){return this.m_gapHeight},setNodeVisibleDeep:function(a){this.m_nodeVisibleDeep=a},getNodeVisibleDeep:function(){return this.m_nodeVisibleDeep},isVisibleInParents:function(a){return a&&(0>a.x||a.x>this._contentSize.width||0>a.y||a.y>this._contentSize.height)?!1:this._super(a)},visit:function(){this._visible&&this._super()},updateNodeVisible:function(a,b){this.makeNodeVisible(this,a,b,1)},makeNodeVisible:function(a,b,c,d){if(0<=this.m_nodeVisibleDeep&&
d>this.m_nodeVisibleDeep)return!1;var e=!1;a=a.getChildren();for(var f=0;f<a.length;++f){var g=a[f],h=g.getContentSize(),k=g.convertToWorldSpace(ccp(0,0)),h=g.convertToWorldSpace(ccp(h.width,h.height)),m=!1;g instanceof ClipView||(m=this.makeNodeVisible(g,b,c,d+1));(h.y<b.y-this.m_gapHeight||k.y>c.y+this.m_gapHeight||h.x<b.x-this.m_gapWidth||k.x>c.x+this.m_gapWidth)&&!m?(k=g.isOriVisible(),g.setVisible(!1),g.setOriVisible(k)):(g.setVisible(g.isOriVisible()),e=!0)}return e},_createRenderCmd:function(){return cc._renderType===
cc.game.RENDER_TYPE_CANVAS?new cw.ClipViewCanvasRenderCmd(this):new cw.ClipViewWebGLRenderCmd(this)},_getViewRect:function(){for(var a=this.convertToWorldSpace(cc.p(0,0)),b=this._contentSize,c=this.getScaleX(),d=this.getScaleY(),e=this._parent;null!=e;e=e.getParent())c*=e.getScaleX(),d*=e.getScaleY();0>c&&(a.x+=b.width*c,c=-c);0>d&&(a.y+=b.height*d,d=-d);e=this._tmpViewRect;e.x=a.x;e.y=a.y;e.width=b.width*c;e.height=b.height*d;return e}});ClipView.create=function(){return new ClipView};(function(){cw.ClipViewCanvasRenderCmd=function(a){cc.Node.CanvasRenderCmd.call(this,a);this._needDraw=!1;this.startCmd=new cc.CustomRenderCmd(this,this._startCmd);this.startCmd._canUseDirtyRegion=!0;this.endCmd=new cc.CustomRenderCmd(this,this._endCmd);this.endCmd._canUseDirtyRegion=!0};var a=cw.ClipViewCanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);a.constructor=cw.ClipViewCanvasRenderCmd;a._startCmd=function(a,c,d){var e=this._node,f=a||cc._renderContext;a=f.getContext();
f.save();e._clippingToBounds&&(this._scissorRestored=!1,f.setTransform(this._worldTransform,c,d),d=e.getScaleX(),c=e.getScaleY(),d*=e._contentSize.width,e=e._contentSize.height*c,a.beginPath(),a.rect(0,0,d,-e),a.closePath(),a.clip())};a._endCmd=function(a){a=a||cc._renderContext;a.restore()};a.visit=function(a){var c=this._node;if(c._visible){var d=c._children;this._syncStatus(a);cc.renderer.pushRenderCommand(this.startCmd);if(d&&0<d.length)for(a=d.length,c.sortAllChildren(),c=0;c<a;c++)d[c]._renderCmd.visit(this);
cc.renderer.pushRenderCommand(this.endCmd);this._dirtyFlag=0}}})();kLayoutNode_TypeHorizonalLeft=0;kLayoutNode_TypeHorizonalRight=1;kLayoutNode_TypeHorizonalMiddle=2;kLayoutNode_TypeHorizonalScale=3;kLayoutNode_TypeHorizonalLeftScale=4;kLayoutNode_TypeHorizonalRightScale=5;kLayoutNode_TypeHorizonalMiddleScale=6;
LayoutNode=cc.Node.extend({m_layoutType:0,init:function(){this._super();this.scheduleUpdate();return!0},setLayoutType:function(a){this.m_layoutType=a},update:function(a){switch(this.m_layoutType){case kLayoutNode_TypeHorizonalLeft:this.layoutHorizonalLeft();break;case kLayoutNode_TypeHorizonalRight:this.layoutHorizonalRight();break;case kLayoutNode_TypeHorizonalMiddle:this.layoutHorizonalMiddle();break;case kLayoutNode_TypeHorizonalScale:this.layoutHorizonalScale();break;case kLayoutNode_TypeHorizonalLeftScale:this.layoutHorizonalLeftScale();
break;case kLayoutNode_TypeHorizonalRightScale:this.layoutHorizonalRightScale();break;case kLayoutNode_TypeHorizonalMiddleScale:this.layoutHorizonalMiddleScale()}},layoutHorizonalLeft:function(){var a=this.getChildren();if(a)for(var b=0,c=0;c<a.length;++c){var d=a[c],e=d.getScaleX(),f=d.getAnchorPoint().x*d.getContentSize().width,g=d.getPositionX()-f*e;0.01<Math.abs(g-b)&&d.setPositionX(b+f*e);b+=d.getContentSize().width*e}},layoutHorizonalRight:function(){var a=this.getChildren();if(a)for(var b=
this.getContentSize().width,c=0;c<a.length;++c){var d=a[c],e=d.getScaleX(),f=d.getAnchorPoint().x*d.getContentSize().width,g=d.getPositionX()+f*e;0.01<Math.abs(g-b)&&d.setPositionX(b-f*e);b-=d.getContentSize().width*e}},layoutHorizonalMiddle:function(){var a=this.getChildren();if(a){for(var b=0,c=0;c<a.length;++c)var d=a[c],b=b+d.getContentSize().width*d.getScaleX();b=0.5*(this.getContentSize().width-b);for(c=0;c<a.length;++c){var d=a[c],e=d.getScaleX(),f=d.getAnchorPoint().x*d.getContentSize().width,
g=d.getPositionX()-f*e;0.01<Math.abs(g-b)&&d.setPositionX(b+f*e);b+=d.getContentSize().width*e}}},layoutHorizonalScale:function(){var a=this.getChildren();if(a){for(var b=0,c=0;c<a.length;++c)var d=a[c],b=b+d.getContentSize().width;for(var e=0,b=this.getContentSize().width/b,c=0;c<a.length;++c){d=a[c];0.01<Math.abs(d.getScale()-b)&&d.setScale(b);var f=d.getAnchorPoint().x*d.getContentSize().width,g=d.getPositionX()-f*b;0.01<Math.abs(g-e)&&d.setPositionX(e+f*b);e+=d.getContentSize().width*b}}},layoutHorizonalLeftScale:function(){var a=
this.getChildren();if(a){for(var b=0,c=0;c<a.length;++c)var d=a[c],b=b+d.getContentSize().width;var e=0,b=this.getContentSize().width/b;1<b&&(b=1);for(c=0;c<a.length;++c){d=a[c];0.01<Math.abs(d.getScale()-b)&&d.setScale(b);var f=d.getAnchorPoint().x*d.getContentSize().width,g=d.getPositionX()-f*b;0.01<Math.abs(g-e)&&d.setPositionX(e+f*b);e+=d.getContentSize().width*b}}},layoutHorizonalRightScale:function(){var a=getChildren();if(a){for(var b=0,c=0;c<a.length;++c)var d=a[c],b=b+d.getContentSize().width;
var e=getContentSize().width,b=e/b;1<b&&(b=1);for(c=0;c<a.length;++c){d=a[c];0.01<Math.abs(d.getScale()-b)&&d.setScale(b);var f=d.getAnchorPoint().x*d.getContentSize().width,g=d.getPositionX()+f*b;0.01<Math.abs(g-e)&&d.setPositionX(e-f*b);e-=d.getContentSize().width*b}}},layoutHorizonalMiddleScale:function(){var a=this.getChildren();if(a){for(var b=0,c=0;c<a.length;++c)var d=a[c],b=b+d.getContentSize().width;var e=0.5*(this.getContentSize().width-b),b=this.getContentSize().width/b;1<b?b=1:e=0;for(c=
0;c<a.length;++c){d=a[c];0.01<Math.abs(d.getScale()-b)&&d.setScale(b);var f=d.getAnchorPoint().x*d.getContentSize().width,g=d.getPositionX()-f*b;0.01<Math.abs(g-e)&&d.setPositionX(e+f*b);e+=d.getContentSize().width*b}}}});LayoutNode.create=function(){var a=new LayoutNode;a.init();return a};kScrollVertical=0;kScrollHorizontal=1;
var ClipScrollView=ClipView.extend({m_bgNode:null,m_curTouchId:-1,m_direction:0,m_curtime:0,m_t:0,m_t1:0,m_aFactor:1,m_dis:0,m_isMoveNotSwallowTouch:!1,m_previousLocation:null,m_previousLocation1:null,m_beganLocation:null,m_touchDownClickWhenTouchBegan:!1,m_bTouchEnabled:!1,ctor:function(){this._super();this.m_previousLocation=ccp(0,0);this.m_previousLocation1=ccp(0,0);this.m_beganLocation=ccp(0,0)},initView:function(){this.m_dis=30;this.setContainer(cc.Node.create());this.setTouchEnabled(!0)},setTouchEnabled:function(a){this.m_bTouchEnabled!=
a&&(this.m_bTouchEnabled=a,this.isRunning()&&(a?Utils.registerTouch(this,0,!this.m_isMoveNotSwallowTouch):Utils.unregisterTouch(this)))},onEnter:function(){this.m_bTouchEnabled&&Utils.registerTouch(this,0,!this.m_isMoveNotSwallowTouch);this._super()},onExit:function(){this.m_bTouchEnabled&&Utils.unregisterTouch(this);this._super()},setContainer:function(a){this.m_bgNode&&(this.m_bgNode.removeFromParent(),this.m_bgNode=null);a&&(this.m_bgNode=a,this.addChild(this.m_bgNode));this.updateContainerPos()},
getContainer:function(){return this.m_bgNode},setContentSize:function(a){this._super(a);this.updateContainerPos()},update:function(a){this._super(a);this.m_curtime+=a},setDirection:function(a){this.m_direction!=a&&(this.m_direction=a,this.updateContainerPos())},setMoveNotSwallowTouch:function(a){this.m_isMoveNotSwallowTouch=a},moveToPercent:function(a,b){var c=this.getContentSize();this.m_bgNode.stopAllActions();if(this.m_direction==kScrollHorizontal){var d=this.m_bgNode.getContentSize().width*this.m_bgNode.getScaleX(),
e=a*d-0.5*c.width;0>e?e=0:e>d-c.width&&(e=d-c.width);0<b?(c=cc.moveTo(b,ccp(-e,this.m_bgNode.getPositionY())),d=cc.callFunc(this.slideToRightPosition,this),this.m_bgNode.runAction(cc.sequence(c,d))):(this.m_bgNode.setPositionX(-e),this.slideToRightPosition())}else d=this.m_bgNode.getContentSize().height*this.m_bgNode.getScaleY(),e=a*d+0.5*c.height,e<c.height?e=c.height:e>d&&(e=d),0<b?(c=cc.moveTo(b,ccp(this.m_bgNode.getPositionX(),e)),d=cc.callFunc(this.slideToRightPosition,this),this.m_bgNode.runAction(cc.sequence(c,
d))):(this.m_bgNode.setPositionY(e),this.slideToRightPosition())},moveToWorldXY:function(a,b,c){a=this.m_bgNode.convertToNodeSpace(ccp(a,b));this.m_direction==kScrollHorizontal?this.moveToPercent(a.x/this.m_bgNode.getContentWidth(),c):this.moveToPercent(1-a.y/this.m_bgNode.getContentHeight(),c)},getPercent:function(){var a=0,b=0,a=this.getContentSize(),b=this.m_bgNode.getContentSize();if(this.m_direction==kScrollHorizontal)var c=b.width*this.m_bgNode.getScaleX(),b=c/a.width,a=1>=b?0:-this.m_bgNode.getPositionX()/
(c-a.width);else c=b.height*this.m_bgNode.getScaleY(),b=c/a.height,a=1>=b?0:(this.m_bgNode.getPositionY()-a.height)/(c-a.height);return[a,b]},moveByPage:function(a){this.m_bgNode.stopAllActions();var b=2500*this.m_aFactor,c=0,c=0;this.m_direction==kScrollHorizontal?(c=this.getContentSize().height*Math.abs(a),c=Math.sqrt(2*b*c),0<a&&(c=-c)):(c=this.getContentSize().width*Math.abs(a),c=Math.sqrt(2*b*c),0>a&&(c=-c));this.accelerate(c)},setMoveMaxDis:function(a){this.m_dis=a},setSpeedFactor:function(a){this.m_aFactor=
a},updateContainerPos:function(){if(this.m_bgNode){var a=this.getContentSize(),b=this.m_bgNode.getContentSize();this.m_direction==kScrollHorizontal?(0<b.height&&this.m_bgNode.setScale(a.height/b.height),this.m_bgNode.ignoreAnchorPointForPosition(!1),this.m_bgNode.setAnchorPoint(ccp(0,0)),this.m_bgNode.setPosition(0,0)):(0<b.width&&this.m_bgNode.setScale(a.width/b.width),this.m_bgNode.ignoreAnchorPointForPosition(!1),this.m_bgNode.setAnchorPoint(ccp(0,1)),this.m_bgNode.setPosition(0,a.height))}},ccTouchBegan:function(a,
b){var c=this.convertToNodeSpace(a.getLocation());if(!this.isVisibleInParents(c)||0<=this.m_curTouchId)return!1;this.m_curTouchId=a.getID();this.m_bgNode.stopAllActions();if(this.isInRect(c)){if(ButtonHelper.isTouchDownClick())return this.processClickOperation(a),this.m_touchDownClickWhenTouchBegan=!0;this.m_touchDownClickWhenTouchBegan=!1;this.m_beganLocation=this.m_previousLocation=this.m_previousLocation1=c;this.m_t=this.m_curtime;return!0}this.m_curTouchId=-1;return!1},ccTouchMoved:function(a,
b){if(a.getID()==this.m_curTouchId&&!ButtonHelper.isTouchDownClick()&&!this.m_touchDownClickWhenTouchBegan){var c=this.getContentSize(),d=this.convertToNodeSpace(a.getLocation());if(this.m_direction==kScrollHorizontal){var e=d.x-this.m_previousLocation.x,e=this.m_bgNode.getPositionX()+e;if(e>this.m_dis)e=this.m_dis;else{var f=this.m_bgNode.getContentSize().width*this.m_bgNode.getScaleX();f>=c.width?e<c.width-f-this.m_dis&&(e=c.width-f-this.m_dis):e<-this.m_dis&&(e=-this.m_dis)}this.m_bgNode.setPositionX(e)}else e=
d.y-this.m_previousLocation.y,e=this.m_bgNode.getPositionY()+e,e<c.height-this.m_dis?e=c.height-this.m_dis:(f=this.m_bgNode.getContentSize().height*this.m_bgNode.getScaleY(),f>=c.height?e>f+this.m_dis&&(e=f+this.m_dis):e>this.m_dis+c.height&&(e=this.m_dis+c.height)),this.m_bgNode.setPositionY(e);this.m_previousLocation1=this.m_previousLocation;this.m_previousLocation=d;this.m_t!=this.m_curtime&&(this.m_t1=this.m_t,this.m_t=this.m_curtime)}},ccTouchEnded:function(a,b){if(a.getID()==this.m_curTouchId&&
(this.m_curTouchId=-1,!ButtonHelper.isTouchDownClick()&&!this.m_touchDownClickWhenTouchBegan)){var c=this.getContentSize(),d=this.convertToNodeSpace(a.getLocation());if(10>=cc.pDistance(d,this.m_beganLocation))this.processClickOperation(a);else if(this.m_direction==kScrollHorizontal){var e=d.x-this.m_previousLocation1.x,f=this.m_curtime-this.m_t1,d=0;0!=f&&(d=e/f);DebugFlag||(2500<d?d=2500:-2500>d&&(d=-2500));f=this.m_bgNode.getContentSize().width*this.m_bgNode.getScaleX();0<this.m_bgNode.getPosition().x?
this.slideToRightPosition():this.m_bgNode.getPosition().x+f<c.width?this.slideToRightPosition():this.accelerate(d)}else e=d.y-this.m_previousLocation1.y,f=this.m_curtime-this.m_t1,d=0,0!=f&&(d=e/f),DebugFlag||(2500<d?d=2500:-2500>d&&(d=-2500)),f=this.m_bgNode.getContentSize().height*this.m_bgNode.getScaleY(),this.m_bgNode.getPosition().y<c.height?this.slideToRightPosition():this.m_bgNode.getPosition().y>f?this.slideToRightPosition():this.accelerate(d)}},ccTouchCancelled:function(a,b){this.ccTouchEnded(a,
b)},processClickOperation:function(a){this.slideToRightPosition()},slideToRightPosition:function(){this.m_bgNode.stopAllActions();var a=this.getContentSize();if(this.m_direction==kScrollHorizontal){var b=this.m_bgNode.getContentSize().width*this.m_bgNode.getScaleX();0<this.m_bgNode.getPosition().x?(a=cc.moveTo(0.2,ccp(0,this.m_bgNode.getPosition().y)),this.m_bgNode.runAction(a)):this.m_bgNode.getPosition().x+b<a.width&&b>a.width?(a=cc.moveTo(0.2,ccp(a.width-b,this.m_bgNode.getPosition().y)),this.m_bgNode.runAction(a)):
this.m_bgNode.getPosition().x+b<a.width&&b<=a.width&&(a=cc.moveTo(0.2,ccp(0,this.m_bgNode.getPosition().y)),this.m_bgNode.runAction(a))}else b=this.m_bgNode.getContentSize().height*this.m_bgNode.getScaleY(),this.m_bgNode.getPosition().y<a.height?(a=cc.moveTo(0.2,ccp(this.m_bgNode.getPosition().x,a.height)),this.m_bgNode.runAction(a)):this.m_bgNode.getPosition().y>b&&b>a.height?(a=cc.moveTo(0.2,ccp(this.m_bgNode.getPosition().x,b)),this.m_bgNode.runAction(a)):this.m_bgNode.getPosition().y>a.height&&
b<=a.height&&(a=cc.moveTo(0.2,ccp(this.m_bgNode.getPosition().x,a.height)),this.m_bgNode.runAction(a))},accelerate:function(a){var b=this.getContentSize(),c=1200*this.m_aFactor,d=Math.abs(a)/Math.abs(c);if(this.m_direction==kScrollHorizontal){var e=this.m_bgNode.getContentSize().width*this.m_bgNode.getScaleX(),f=0,g=this.m_dis;e>=b.width?f=b.width-e-this.m_dis:e<=b.width&&(f=-this.m_dis);b=0;b=0>a?this.m_bgNode.getPosition().x-f:g-this.m_bgNode.getPosition().x;b=d*d-2*b/Math.abs(c);0<b&&(d-=Math.sqrt(b),
0>d&&(d=0));c=CEMoveAccelerateX.create(d,a,c,f,g)}else e=this.m_bgNode.getContentSize().height*this.m_bgNode.getScaleY(),f=b.height-this.m_dis,g=0,e>=b.height?g=e+this.m_dis:e<=b.height&&(g=b.height+this.m_dis),b=0>a?this.m_bgNode.getPosition().y-f:g-this.m_bgNode.getPosition().y,b=d*d-2*b/Math.abs(c),0<b&&(d-=Math.sqrt(b),0>d&&(d=0)),c=CEMoveAccelerateY.create(d,a,c,f,g);a=cc.callFunc(this.slideToRightPosition,this);a=cc.sequence(c,a);this.m_bgNode.runAction(a)},isInRect:function(a){var b=this.getContentSize(),
b=cc.rect(0,0,b.width,b.height);return cc.rectContainsPoint(b,a)?!0:!1},calculateV:function(a,b,c,d,e,f){a-=c;if(0>=a)return 0;d=(d-f)/a;2E3<d?d=2E3+0.5*(d-2E3):-2E3>d&&(d=-2E3+0.5*(d+2E3));3E3<d?d=3E3:-3E3>d&&(d=-3E3);return d}});ClipScrollView.create=function(){var a=new ClipScrollView;a.init();a.initView();return a};kScrollVertical=0;kScrollHorizontal=1;
var LoopScrollView=ClipScrollView.extend({m_firstNodeIdx:0,getNearestWorldXY:function(a,b){var c=ccp(0,0),d=this.m_bgNode.getContentSize();d.width*=this.m_bgNode.getScale();d.height*=this.m_bgNode.getScale();if(this.m_direction==kScrollHorizontal){var e=0.5*d.width,f=0.5*DisplayHelper.sharedInstance().getWindowWidth(),f=a-f;c.x=f>e?a-d.width:f<-e?a+d.width:a;c.y=b}else e=0.5*d.height,f=0.5*DisplayHelper.sharedInstance().getWindowHeight(),f=b-f,c.y=f>e?b-d.height:f<-e?b+d.height:b,c.x=a;return c},
ccTouchMoved:function(a,b){if(a.getID()==this.m_curTouchId&&!ButtonHelper.isTouchDownClick()&&!this.m_touchDownClickWhenTouchBegan){this.getContentSize();var c=this.convertToNodeSpace(a.getLocation());if(this.m_direction==kScrollHorizontal){var d=c.x-this.m_previousLocation.x,d=this.m_bgNode.getPositionX()+d;this.m_bgNode.setPositionX(d)}else d=c.y-this.m_previousLocation.y,d=this.m_bgNode.getPositionY()+d,this.m_bgNode.setPositionY(d);this.m_previousLocation1=this.m_previousLocation;this.m_previousLocation=
c;this.m_t!=this.m_curtime&&(this.m_t1=this.m_t,this.m_t=this.m_curtime)}},ccTouchEnded:function(a,b){if(a.getID()==this.m_curTouchId&&(this.m_curTouchId=-1,!ButtonHelper.isTouchDownClick()&&!this.m_touchDownClickWhenTouchBegan)){this.getContentSize();var c=this.convertToNodeSpace(a.getLocation());if(this.m_direction==kScrollHorizontal)var d=c.x-this.m_previousLocation1.x,c=this.m_curtime-this.m_t1,e=0;else d=c.y-this.m_previousLocation1.y,c=this.m_curtime-this.m_t1,e=0;0!=c&&(e=d/c);this.accelerate(e)}},
accelerate:function(a){this.getContentSize();var b=1200*this.m_aFactor;a=this.m_direction==kScrollHorizontal?CEMoveAccelerateX.create2(a,b,-999999,999999):CEMoveAccelerateY.create2(a,b,-999999,999999);this.m_bgNode.runAction(a)},moveToPercent:function(a,b){var c=this.getContentSize();this.m_bgNode.stopAllActions();if(this.m_direction==kScrollHorizontal){var d=this.m_bgNode.getContentSize().width*this.m_bgNode.getScaleX(),c=a*d-0.5*c.width;0<b?(c=cc.moveTo(b,ccp(-c,this.m_bgNode.getPositionY())),this.m_bgNode.runAction(c)):
this.m_bgNode.setPositionX(-c)}else 0<b?(c=cc.moveTo(b,ccp(this.m_bgNode.getPositionX(),y)),this.m_bgNode.runAction(c)):this.m_bgNode.setPositionY(y)},update:function(a){this._super(a);a=this.getContentSize();var b=this.m_bgNode.getChildrenCount(),c=this.m_firstNodeIdx,d=this.m_firstNodeIdx+b-1;d>=b&&(d-=b);c=this.m_bgNode.getChildByIdx(c);d=this.m_bgNode.getChildByIdx(d);if(this.m_direction==kScrollHorizontal){var e=c.getPositionX()-c.getAnchorPoint().x*c.getContentWidth();0<e+this.m_bgNode.getPositionX()?
(d.setPositionX(e-(d.getContentWidth()-d.getAnchorPoint().x*d.getContentWidth())),this.m_firstNodeIdx-=1,0>this.m_firstNodeIdx&&(this.m_firstNodeIdx=b-1)):(d=d.getPositionX()+d.getContentWidth()-d.getAnchorPoint().x*d.getContentWidth(),d+this.m_bgNode.getPositionX()<a.width&&(c.setPositionX(d+c.getAnchorPoint().x*c.getContentWidth()),this.m_firstNodeIdx+=1,this.m_firstNodeIdx>=b&&(this.m_firstNodeIdx=0)))}}});LoopScrollView.create=function(){var a=new LoopScrollView;a.init();a.initView();return a};ListGridView=ClipScrollView.extend({m_countPerRow:1,m_selectIndex:1,m_maxItem:0,m_nScriptListener:null,m_owner:null,m_touchIndex:0,m_rowPosYList:null,m_rowHeightList:null,m_preloadPage:-1,m_preloadDt:0,m_preloadInteval:0,m_nPreloadListener:0,ctor:function(){this._super();this.m_rowPosYList=[];this.m_rowHeightList=[]},setContentSize:function(a){this.m_bgNode.setContentSize(a);this._super(a);this.m_direction==kScrollHorizontal?this.m_bgNode.setPosition(0,0):this.m_bgNode.setPosition(0,a.height);this.updateItemPosAndSlideRightPos()},
update:function(a){this._super(a);0>this.m_preloadPage||(this.m_preloadDt+=a,this.m_preloadDt>=this.m_preloadInteval&&(this.m_preloadDt=0,this.checkPreloadPage(this.m_preloadPage)))},checkPreloadPage:function(a){var b=this.getContentSize(),c=this.m_bgNode.getContentSize();if(this.m_direction==kScrollHorizontal){var d=this.m_bgNode.getPositionX()+this.m_bgNode.getContentWidth()*this.m_bgNode.getScaleX();a=b.width*(1+a)-d;if(0<a)return this.callBackPreload(a),this.m_bgNode.getContentWidth()>c.width}else if(a=
this.m_bgNode.getPositionY()-this.m_bgNode.getContentHeight()*this.m_bgNode.getScaleY()+b.height*a,0<a)return this.callBackPreload(a),this.m_bgNode.getContentHeight()>c.height;return!1},setCountPerRow:function(a){this.m_countPerRow=a},updateItemPosAndSlideRightPos:function(){this.updateItemPos();this.slideToRightPosition()},updateItemPos:function(){var a=this.getContentSize(),b=this.m_rowPosYList.length;if(this.m_bgNode&&0<b)if(this.m_direction==kScrollHorizontal){for(var c=this.m_rowPosYList[b-1]+
this.m_rowHeightList[b-1],d=a.height/this.m_countPerRow,a=this.m_bgNode.getChildren(),b=0;b<a.length;++b){var e=a[b],f=this.m_countPerRow-b%this.m_countPerRow-1;e.setPosition(ccp(this.m_rowPosYList[b],(f+0.5)*d))}this.m_bgNode.setContentSize(cc.size(c,this.m_bgNode.getContentSize().height))}else{c=this.m_rowPosYList[b-1]+this.m_rowHeightList[b-1];d=a.width/this.m_countPerRow;a=this.m_bgNode.getChildren();for(b=0;b<a.length;++b){var e=a[b],g=this.m_rowPosYList[b],f=b%this.m_countPerRow;e.setPosition(ccp((f+
0.5)*d,c-g))}this.m_bgNode.setContentSize(cc.size(this.m_bgNode.getContentSize().width,c))}},addItem:function(a){this.m_maxItem++;var b=this.getContentSize(),c=a.getContentSize();a.ignoreAnchorPointForPosition(!1);this.m_direction==kScrollHorizontal?(a.setScale(b.height/(c.height*this.m_countPerRow)),b=0,this.m_rowPosYList.length>=this.m_countPerRow&&(b=this.m_rowPosYList.length,b=this.m_rowPosYList[b-this.m_countPerRow]+this.m_rowHeightList[b-this.m_countPerRow]),this.m_rowPosYList.push(b),this.m_rowHeightList.push(c.width*
a.getScaleX()),a.setAnchorPoint(ccp(0,0.5))):(a.setScale(b.width/(c.width*this.m_countPerRow)),b=0,this.m_rowPosYList.length>=this.m_countPerRow&&(b=this.m_rowPosYList.length,b=this.m_rowPosYList[b-this.m_countPerRow]+this.m_rowHeightList[b-this.m_countPerRow]),this.m_rowPosYList.push(b),this.m_rowHeightList.push(c.height*a.getScaleY()),a.setAnchorPoint(ccp(0.5,1)));this.m_bgNode.addChild(a);this.updateItemPos()},removeAllItems:function(a){if(a)for(a=this.m_bgNode.getChildrenCount();0<a;a--)this.removeItem(a,
!0);else this.m_bgNode.removeAllChildren();this.m_maxItem=0;this.m_selectIndex=1;this.m_rowPosYList=[];this.m_rowHeightList=[];this.m_bgNode.stopAllActions();this.m_direction==kScrollHorizontal?(this.m_bgNode.setPosition(ccp(0,0)),this.m_bgNode.setContentWidth(0)):(this.m_bgNode.setPosition(ccp(0,this.getContentSize().height)),this.m_bgNode.setContentHeight(0))},removeItem:function(a,b){if(!(0>=a||a>this.m_bgNode.getChildrenCount())){var c=this.m_bgNode.getChildren()[a-1];a<this.m_selectIndex?this.m_selectIndex-=
1:a==this.m_selectIndex&&(this.m_selectIndex=1);this.m_bgNode.removeChild(c);this.m_maxItem--;this.updatePosAndHeightList();if(b){var d=this.getContentSize(),e=this.m_bgNode.getContentSize(),c=this.m_bgNode.getChildren(),f=this.m_bgNode.getChildrenCount()-1;if(this.m_direction==kScrollHorizontal)for(e=d.height/this.m_countPerRow,d=0;d<c.length;++d){var g=c[d],h=this.m_rowPosYList[d],k=d%this.m_countPerRow;g.stopAllActions();var m=cc.delayTime(0.2),k=cc.moveTo(0.2,ccp(h,(k+0.5)*e));if(d==f){var n=
cc.callFunc(this.updateItemPosAndSlideRightPos,this),m=cc.sequence(m,k,n);g.runAction(m)}else g.runAction(cc.sequence(m,k))}else for(h=d.width/this.m_countPerRow,d=0;d<c.length;++d)g=c[d],n=this.m_rowPosYList[d],k=d%this.m_countPerRow,g.stopAllActions(),m=cc.delayTime(0.2),k=cc.moveTo(0.2,ccp((k+0.5)*h,e.height-n)),d==f?(n=cc.callFunc(this.updateItemPosAndSlideRightPos,this),m=cc.sequence(m,k,n),g.runAction(m)):g.runAction(cc.sequence(m,k))}else this.updateItemPosAndSlideRightPos()}},getItemCount:function(){return this.m_maxItem},
getPositionByNode:function(a){return 1+CCNodeUtils.getChildIdxOfNode(this.m_bgNode,a)},updatePosAndHeightList:function(){this.m_rowPosYList=[];this.m_rowHeightList=[];for(var a=this.m_bgNode.getChildren(),b=0;b<a.length;++b){var c=a[b],d=c.getContentSize();b>=this.m_countPerRow?this.m_rowPosYList.push(this.m_rowPosYList[b-this.m_countPerRow]+this.m_rowHeightList[b-this.m_countPerRow]):this.m_rowPosYList.push(0);this.m_direction==kScrollHorizontal?this.m_rowHeightList.push(d.width*c.getScaleX()):this.m_rowHeightList.push(d.height*
c.getScaleY())}},getTouchItem:function(a){var b=this.m_bgNode.getPosition();if(this.m_direction==kScrollHorizontal){var c=this.getContentSize().height/this.m_countPerRow,d=a.x-b.x,b=this.getContentSize().height-a.y,e=this.m_rowPosYList.length;if(0<e)for(var f=0;f<e;f++){var g=f%this.m_countPerRow;if(d>=this.m_rowPosYList[f]&&d<this.m_rowPosYList[f]+this.m_rowHeightList[f]&&b>=g*c&&b<(g+1)*c)return f}}else if(c=this.getContentSize().width/this.m_countPerRow,b=b.y-a.y,e=this.m_rowPosYList.length,0<
e)for(f=0;f<e;f++)if(g=f%this.m_countPerRow,b>=this.m_rowPosYList[f]&&b<this.m_rowPosYList[f]+this.m_rowHeightList[f]&&a.x>=g*c&&a.x<(g+1)*c)return f;return-1},processClickOperation:function(a){this._super(a);a=this.convertToNodeSpace(a.getLocation());this.callBackItem(this.getTouchItem(a))},updateNodeVisible:function(a,b){for(var c=this.getContentSize(),d=this.m_bgNode.getPosition(),e=this.m_bgNode.getChildren(),f=0;f<e.length;++f){var g=e[f];if(this.m_direction==kScrollHorizontal){var h=this.m_rowPosYList[f]+
d.x,k=this.m_gapWidth*this.m_rowHeightList[f];h+this.m_rowHeightList[f]<-k||h>c.width+k?g.setVisible(!1):g.setVisible(!0)}else{var h=-this.m_rowPosYList[f]+d.y,m=h-this.m_rowHeightList[f],k=this.m_gapHeight*this.m_rowHeightList[f];h<-k||m>c.height+k?g.setVisible(!1):g.setVisible(!0)}}},registerScriptListener:function(a,b){this.unregisterScriptListener();this.m_nScriptListener=a;this.m_owner=b},unregisterScriptListener:function(){this.m_owner=this.m_nScriptListener=null},registerPreloadListener:function(a,
b,c){this.m_preloadPage=a;this.m_preloadInteval=b;this.unregisterPreloadListener();this.m_nPreloadListener=c},unregisterPreloadListener:function(){this.m_nPreloadListener=null},callBackItem:function(a){if(0<=a&&a<this.m_bgNode.getChildrenCount()){var b=this.m_selectIndex;this.m_selectIndex=a;if(this.m_nScriptListener){var c=this.m_bgNode.getChildren()[a].getTag();this.m_nScriptListener.call(this.m_owner,a,c,b)}}},callBackPreload:function(a){this.m_nPreloadListener&&this.m_nPreloadListener(a)},setSelect:function(a){0<
a&&a<=this.m_maxItem&&(this.m_selectIndex=this.m_touchIndex=a,this.callBackItem(this.m_selectIndex))},getSelect:function(){return this.m_selectIndex},getSelectNode:function(){return this.getListItem(this.m_selectIndex)},getListItem:function(a){return 0>=a||a>this.m_bgNode.getChildrenCount()?null:this.m_bgNode.getChildren()[a-1]},moveListItemTo:function(a,b){if(!(0>=a)){for(var c=null;!(c=this.getListItem(a))&&this.checkPreloadPage(99999999););if(c){for(var d=this.getContentSize(),d=cc.size(0.5*d.width,
0.5*d.height),e=this.m_bgNode.getContentSize();this.checkPreloadPage(99999999);)if(this.m_direction==kScrollHorizontal){if(this.m_bgNode.getContentWidth()-e.width>=d.width)break}else if(this.m_bgNode.getContentHeight()-e.height>=d.height)break;d=0;d=this.m_direction==kScrollHorizontal?(c.getPositionX()+c.getContentSize().width*c.getScaleX()*0.5)/this.m_bgNode.getContentSize().width:1-(c.getPositionY()-c.getContentSize().height*c.getScaleY()*0.5)/this.m_bgNode.getContentSize().height;this.moveToPercent(d,
b)}}}});ListGridView.create=function(){var a=new ListGridView;a.init();a.initView();return a};ListGridReuseView=ClipScrollView.extend({m_countPerRow:1,m_rowHeight:0,m_totalCount:0,m_nScriptListener:0,m_nPreloadListener:0,m_cellStartIdx:-1,m_reusedNodeList:null,m_cellNodeIdxList:null,ctor:function(){this._super();this.m_cellNodeIdxList=[];this.m_reusedNodeList=[]},initView:function(){this._super()},setContentSize:function(a){this._super(a);this.m_direction==kScrollHorizontal?(this.m_bgNode.setPosition(0,0),this.m_bgNode.setContentSize(cc.size(0,a.height))):(this.m_bgNode.setContentSize(cc.size(a.width,
0)),this.m_bgNode.setPosition(0,a.height))},update:function(a){this._super(a);this.checkPreloadPage()},checkPreloadPage:function(){if(!(0>=this.m_rowHeight)){this.getContentSize();var a=this.getVisibleItemRange(),b=a[0],c=a[1],d=this.m_cellStartIdx,a=this.m_cellStartIdx+a[2]-1;0>a&&(a=0);a>=this.m_totalCount&&(a=this.m_totalCount-1);if(!(0>b)){for(var e=b;e<=c;e++)if(0>d||e<d||e>a){var f=-1,g=null,h=d-2;0>h&&(h=0);var k=a+2;k>=this.m_totalCount&&(k=this.m_totalCount-1);if(0<=this.m_cellNodeIdxList[e])f=
this.m_cellNodeIdxList[e],g=this.m_reusedNodeList[f];else if(0<=d)for(;h<=k;h++)if((h<b||h>c)&&0<=this.m_cellNodeIdxList[h]){f=this.m_cellNodeIdxList[h];g=this.m_reusedNodeList[f];this.m_cellNodeIdxList[h]=-1;this.m_cellNodeIdxList[e]=f;break}this.callBackPreload(e,f,g);if(0>f){f=this.m_reusedNodeList.length-1;if(0>f){printf("list reuse idx is -1");return}g=this.m_reusedNodeList[f]}this.m_direction==kScrollHorizontal?(f=(e/this.m_countPerRow+0.5)*this.m_rowHeight,k=(this.m_countPerRow-1-e%this.m_countPerRow+
0.5)*this.m_bgNode.getContentHeight()/this.m_countPerRow):(f=(e%this.m_countPerRow+0.5)*this.m_bgNode.getContentWidth()/this.m_countPerRow,k=this.m_bgNode.getContentHeight()-(e/this.m_countPerRow+0.5)*this.m_rowHeight);g.setPosition(f,k)}this.m_cellStartIdx=b}}},getVisibleItemRange:function(a,b,c){b=this.getContentSize();a=c=0;this.m_direction==kScrollHorizontal?(a=parseInt(parseInt(b.width)/parseInt(this.m_rowHeight)+2)*this.m_countPerRow,b=this.m_bgNode.getPositionX(),c=parseInt(parseInt(-b)/parseInt(this.m_rowHeight))*
this.m_countPerRow):(a=parseInt(parseInt(b.height)/parseInt(this.m_rowHeight)+2)*this.m_countPerRow,c=this.m_bgNode.getPositionY(),c=parseInt(parseInt(c-b.height)/parseInt(this.m_rowHeight))*this.m_countPerRow);b=c+a-1;0>c&&(c=0);c>=this.m_totalCount&&(c=this.m_totalCount-1);0>b&&(b=0);b>=this.m_totalCount&&(b=this.m_totalCount-1);return[c,b,a]},addItem:function(a,b){this.m_reusedNodeList.push(b);this.m_cellNodeIdxList[a-1]=this.m_reusedNodeList.length-1;b.ignoreAnchorPointForPosition(!1);b.setAnchorPoint(ccp(0.5,
0.5));this.m_bgNode.addChild(b)},refreshItem:function(a){a-=1;if(!(a>=this.m_totalCount)){var b=this.getVisibleItemRange(),c=b[0],b=b[1];if(0<=a){if(!(a<c||a>b)&&(c=this.m_cellNodeIdxList[a],0<=c)){var d=this.m_reusedNodeList[c];this.callBackPreload(a,c,d)}}else for(a=c;a<=b;a++)c=this.m_cellNodeIdxList[a],0<=c&&(d=this.m_reusedNodeList[c],this.callBackPreload(a,c,d))}},getReuseIdx:function(a){a-=1;if(a>=this.m_totalCount)return 0;var b=this.getVisibleItemRange(),c=b[0],b=b[1];return 0<=a?a<c||a>
b?0:this.m_cellNodeIdxList[a]+1:0},setRowHeight:function(a){this.m_rowHeight=a;a=(this.m_totalCount+this.m_countPerRow-1)/this.m_countPerRow;this.m_direction==kScrollHorizontal?this.m_bgNode.setContentWidth(this.m_rowHeight*a):this.m_bgNode.setContentHeight(this.m_rowHeight*a)},setCountPerRow:function(a){this.m_countPerRow=a},setTotalCount:function(a){this.m_totalCount=a;var b=this.m_cellNodeIdxList.length;for(this.m_cellNodeIdxList.length=a;b<a;++b)this.m_cellNodeIdxList[b]=-1;this.setRowHeight(this.m_rowHeight)},
getPositionByNode:function(a){return 1+CCNodeUtils.getChildIdxOfNode(this.m_bgNode,a)},processClickOperation:function(a){this._super(a)},updateNodeVisible:function(a,b){},registerPreloadListener:function(a){this.unregisterPreloadListener();this.m_nPreloadListener=a},unregisterPreloadListener:function(){this.m_nPreloadListener&&(this.m_nPreloadListener=null)},callBackPreload:function(a,b,c){this.m_nPreloadListener&&this.m_nPreloadListener(a+1,b+1,c)},getListItem:function(a){a=this.getReuseIdx(a);return 0>=
a?null:this.m_reusedNodeList[a-1]},moveListItemTo:function(a,b){var c=0,c=this.m_direction==kScrollHorizontal?a/this.m_countPerRow*this.m_rowHeight/this.m_bgNode.getContentWidth():a/this.m_countPerRow*this.m_rowHeight/this.m_bgNode.getContentHeight();this.moveToPercent(c,b)}});ListGridReuseView.create=function(){var a=new ListGridReuseView;a.init();a.initView();return a};ListSelectView=ClipScrollView.extend({m_isNotifyWhenSlideStop:!1,m_iCurrent:1,m_rowHeight:0,m_idxWhenSlideStop:1,m_nScriptListener:null,m_galleryEnable:!1,m_galleryMode:0,m_galleryScaleStep:0.5,m_galleryLastPos:ccp(0.123456,-0.654321),ctor:function(){this._super();this.m_galleryLastPos=ccp(0.123456,-0.654321)},setContentSize:function(a){this.m_bgNode.setContentSize(a);this._super(a);this.m_direction==kScrollHorizontal?this.m_bgNode.setPosition(0,0):this.m_bgNode.setPosition(0,a.height);this.updateItemPos()},
getSelect:function(){return this.m_iCurrent},getPositionByNode:function(a){return 1+CCNodeUtils.getChildIdxOfNode(this.m_bgNode,a)},getSelectNode:function(){return this.getListItem(this.m_iCurrent)},getListItem:function(a){return 0>=a||a>this.m_bgNode.getChildrenCount()?null:this.m_bgNode.getChildren()[a-1]},setRowHeight:function(a){this.m_rowHeight=a;this.updateItemPos()},updateItemPos:function(){var a=this.getContentSize();if(this.m_bgNode)if(this.m_direction==kScrollHorizontal){var b=this.m_rowHeight*
(this.m_bgNode.getChildrenCount()-1)+a.width,c=0.5*a.width;this.m_bgNode.setContentSize(cc.size(b,this.m_bgNode.getContentSize().height));for(var b=this.m_bgNode.getChildren(),d=0;d<b.length;++d){var e=b[d];e.setPosition(ccp(c+this.m_rowHeight*d,a.height/2))}}else{var f=this.m_rowHeight*(this.m_bgNode.getChildrenCount()-1)+a.height,c=0.5*a.height;this.m_bgNode.setContentSize(cc.size(this.m_bgNode.getContentSize().width,f));b=this.m_bgNode.getChildren();for(d=0;d<b.length;++d)e=b[d],e.setPosition(ccp(a.width/
2,f-c-this.m_rowHeight*d))}},addItem:function(a){this.getContentSize();0>=this.m_rowHeight&&(this.m_rowHeight=this.m_direction==kScrollHorizontal?a.getContentSize().width*a.getScaleX():a.getContentSize().height*a.getScaleY());a.ignoreAnchorPointForPosition(!1);a.setAnchorPoint(ccp(0.5,0.5));this.m_bgNode.addChild(a);this.updateItemPos()},removeAllItems:function(){this.m_rowHeight=0;this.m_bgNode.removeAllChildren();this.m_direction==kScrollHorizontal?this.m_bgNode.setPositionX(0):this.m_bgNode.setPositionY(this.getContentSize().height)},
getItemCount:function(){return this.m_bgNode.getChildrenCount()},moveToPre:function(){this.moveListItemTo(this.m_iCurrent-1,0.5)},moveToNext:function(){this.moveListItemTo(this.m_iCurrent+1,0.5)},moveListItemTo:function(a,b){var c=this.getContentSize(),d=this.m_bgNode.getContentSize(),e=0,e=this.m_direction==kScrollHorizontal?((a-1)*this.m_rowHeight+0.5*c.width)/d.width:((a-1)*this.m_rowHeight+0.5*c.height)/d.height;this.moveToPercent(e,b);this.m_isNotifyWhenSlideStop?(this.m_idxWhenSlideStop=a,this.m_bgNode.runAction(cc.sequence([cc.delayTime(b),
cc.callFunc(this.moveActionEnd,this)]))):this.callBackItem(a)},moveActionEnd:function(){this.m_isNotifyWhenSlideStop&&this.callBackItem(this.m_idxWhenSlideStop)},slideToRightPosition:function(){if(!(0>=this.m_rowHeight)){var a=this.getContentSize(),b=0;if(this.m_direction==kScrollHorizontal){var a=-this.m_bgNode.getPosition().x,b=Math.floor(a/this.m_rowHeight)+1,c=a-(b-1)*this.m_rowHeight,b=c>this.m_rowHeight/2?b+1:b;b>this.getItemCount()&&(b=this.getItemCount());1>b&&(b=1);a=ccp(this.m_rowHeight*
(1-b),this.m_bgNode.getPosition().y)}else c=this.m_bgNode.getPosition().y-a.height,b=Math.floor(c/this.m_rowHeight)+1,c-=(b-1)*this.m_rowHeight,b=c>this.m_rowHeight/2?b+1:b,b>this.getItemCount()&&(b=this.getItemCount()),1>b&&(b=1),a=ccp(this.m_bgNode.getPosition().x,a.height+this.m_rowHeight*(b-1));this.m_bgNode.stopAllActions();a=cc.moveTo(0.2,a);b!=this.m_iCurrent?this.m_isNotifyWhenSlideStop?(this.m_idxWhenSlideStop=b,this.m_bgNode.runAction(cc.sequence([a,cc.delayTime(0.1),cc.callFunc(this.moveActionEnd,
this)]))):(this.m_bgNode.runAction(a),this.callBackItem(b)):this.m_bgNode.runAction(a)}},updateNodeVisible:function(a,b){var c=this.getContentSize(),d=this.m_bgNode.getPosition(),e=!1;if(this.m_galleryMode){if(this.m_galleryLastPos.x!=d.x||this.m_galleryLastPos.y!=d.y)e=!0;this.m_galleryLastPos=d}for(var f=this.m_bgNode.getChildren(),g=0;g<f.length;++g){var h=f[g];if(this.m_direction==kScrollHorizontal){var k=(g-0.5)*this.m_rowHeight+d.x+0.5*c.width,m=this.m_gapWidth*this.m_rowHeight;if(k+this.m_rowHeight<
-m||k>c.width+m)h.setVisible(!1);else if(h.setVisible(!0),e)if(m=0.5*c.width,k=Math.abs(d.x+h.getPositionX()-m),2==this.m_galleryMode){var n=1+Math.sin(k/m*Math.PI/2-Math.PI/2);h.setScale(1-this.m_galleryScaleStep+this.m_galleryScaleStep*(m-k)/m);h.setAnchorPoint(ccp(0.5,0.5+n))}else h.setScale(1-this.m_galleryScaleStep+this.m_galleryScaleStep*(m-k)/m),h.setAnchorPoint(ccp(0.5,0.5+0.2*k/m))}else k=(0.5-g)*this.m_rowHeight+d.y-0.5*c.height,n=k-this.m_rowHeight,m=this.m_gapHeight*this.m_rowHeight,k<
-m||n>c.height+m?h.setVisible(!1):(h.setVisible(!0),e&&(m=0.5*c.height,k=Math.abs(d.y-this.m_bgNode.getContentSize().height+h.getPositionY()-m),h.setScale(1-this.m_galleryScaleStep+this.m_galleryScaleStep*(m-k)/m)))}},registerScriptListener:function(a){this.unregisterScriptListener();this.m_nScriptListener=a},unregisterScriptListener:function(){this.m_nScriptListener&&(this.m_nScriptListener=null)},processClickOperation:function(a){if(0>=this.m_bgNode.getChildrenCount())this.slideToRightPosition();
else{a=this.m_bgNode.convertToNodeSpace(a.getLocation());for(var b=0,c=this.m_bgNode.getChildren(),d=0;d<c.length;++d){var e=c[d],f=e.getPosition(),g=e.getContentSize(),h=e.getAnchorPoint();h.x*=g.width;h.y*=g.height;var e=f.x-h.x,k=e+g.width,f=f.y-h.y,g=f+g.height;if(a.x>e&&a.x<k&&a.y>f&&a.y<g){b=d+1;break}}0<b&&b!=this.m_iCurrent?this.moveListItemTo(b,0.5):this.slideToRightPosition()}},setNotifyWhenSlideStop:function(a){this.m_isNotifyWhenSlideStop=a},setGalleryMode:function(a){this.m_galleryMode=
a},setGalleryScaleStep:function(a){this.m_galleryScaleStep=a},callBackItem:function(a){if(0<a&&a<=this.m_bgNode.getChildrenCount()){var b=this.m_iCurrent;this.m_iCurrent=a;if(this.m_nScriptListener){var c=this.m_bgNode.getChildren()[a-1].getTag();this.m_nScriptListener(a,c,b)}}}});ListSelectView.create=function(){var a=new ListSelectView;a.init();a.initView();return a};ListBoxView=ListGridView.extend({addItem:function(a,b){var c=cc.Node.create(),d=a.getContentSize(),e=b.getContentSize(),f=d.width*a.getScaleX(),d=d.height*a.getScaleY(),e=+e.height*b.getScaleY();c.setContentSize(cc.size(f,d+e));c.addChild(a);c.addChild(b);a.setAnchorPoint(ccp(0,0));b.setAnchorPoint(ccp(0,0));a.setPositionY(e);this._super(c)},getSelectTitleNode:function(){return this.getListTitleItem(this.m_selectIndex)},getSelectContentNode:function(){return this.getListContentItem(this.m_selectIndex)},
getListTitleItem:function(a){return 0>=a||a>this.m_bgNode.getChildrenCount()?null:this.m_bgNode.getChildren()[a-1].getChildren()[0]},getListContentItem:function(a){return 0>=a||a>this.m_bgNode.getChildrenCount()?null:this.m_bgNode.getChildren()[a-1].getChildren()[1]},switchItemExpand:function(a){this.setItemExpand(a,!this.isItemExpand(a))},setAllItemExpand:function(a){for(var b=this.m_bgNode.getChildrenCount(),c=0;c<b;c++){var d=this.m_bgNode.getChildren()[c],e=d.getChildren()[0],f=d.getChildren()[1],
g=e.getContentSize(),h=f.getContentSize(),g=g.height*e.getScaleY(),h=h.height*f.getScaleY();a?(e.setPositionY(h),d.setContentSize(cc.size(d.getContentSize().width,g+h))):(e.setPositionY(0),d.setContentSize(cc.size(d.getContentSize().width,g)));f.setVisible(a)}this.updatePosAndHeightList();this.updateItemPosAndSlideRightPos()},setItemExpand:function(a,b){if(!(0>=a||a>this.m_bgNode.getChildrenCount())){var c=this.m_bgNode.getChildren()[a-1],d=c.getChildren()[0],e=c.getChildren()[1],f=d.getContentSize(),
g=e.getContentSize(),f=f.height*d.getScaleY(),g=g.height*e.getScaleY();b?(d.setPositionY(g),c.setContentSize(cc.size(c.getContentSize().width,f+g))):(d.setPositionY(0),c.setContentSize(cc.size(c.getContentSize().width,f)));e.setVisible(b);this.updatePosAndHeightList();this.updateItemPosAndSlideRightPos()}},isItemExpand:function(a){return 0>=a||a>this.m_bgNode.getChildrenCount()?!1:this.m_bgNode.getChildren()[a-1].getChildren()[1].isVisible()}});
ListBoxView.create=function(){var a=new ListBoxView;a.init();a.initView();return a};ListSpinView=ClipView.extend({m_nScriptListener:null,m_bgNode:null,m_itemHeight:0,m_showCount:0,m_resultArray:[],m_scrollCount:0,m_randomMode:!1,m_speedFactor:0,m_spriteArray:[],m_stopMoreCount:0,m_endScrollCount:0,m_isStartPlay:!1,m_isScrolling:!1,m_isStopping:!1,initView:function(){this.m_nScriptListener=0;this.m_showCount=1;this.m_resultArray=[];this.m_spriteArray=[];this.m_scrollCount=0;this.m_randomMode=!0;this.m_speedFactor=1;this.m_gapHeight=this.m_itemHeight=0;this.m_stopMoreCount=10;this.m_endScrollCount=
0;this.m_isStopping=this.m_isScrolling=this.m_isStartPlay=!1;this.m_bgNode=cc.Node.create();this.m_bgNode.setAnchorPoint(ccp(0.5,1));this.addChild(this.m_bgNode);this.schedule(this.tick)},setContentSize:function(a){this._super(a);this.m_bgNode.setContentSize(cc.size(a.width,0));this.m_bgNode.setPosition(0.5*a.width,0)},addSprite:function(a,b){0>=this.m_itemHeight&&(this.m_itemHeight=a.getContentSize().height*a.getScaleY(),this.m_gapHeight=this.m_itemHeight*b,this.m_itemHeight+=this.m_gapHeight);a.setAnchorPoint(ccp(0.5,
1));this.m_spriteArray.push(a)},addSpriteFrameName:function(a,b){this.addSprite(cc.Sprite.createWithSpriteFrameName(a),b)},addSpriteFrameFile:function(a,b){this.addSprite(cc.Sprite.create(a),b)},setResultIdx:function(a,b){b=b||0;b>=this.m_showCount&&(b=0);this.m_resultArray.length<this.m_showCount&&(this.m_resultArray.length=this.m_showCount);this.m_resultArray[b]=a},removeAllSprite:function(){this.m_spriteArray=[];this.m_bgNode.removeAllChildren();this.m_bgNode.setPositionY(0)},reset:function(){this.m_endScrollCount=
this.m_scrollCount=0;this.m_isStopping=!1;this.m_bgNode.removeAllChildren();this.m_bgNode.setPositionY(0);this.fillTailSprites()},start:function(){if(!this.m_isScrolling){this.m_isScrolling=!0;this.m_bgNode.stopAllActions();var a=this.getContentSize().height*this.m_speedFactor,b=0.15*a+this.m_bgNode.getPositionY(),a=CEMoveAccelerateY.create(2*b/a,0,-(a*a*0.5/b),-999999,999999),b=cc.callFunc(this.moveStartCallback,this),a=cc.sequence(a,b);this.m_bgNode.runAction(a);this.m_isStartPlay=!0}},moveStartCallback:function(){var a=
-this.getContentSize().height*this.m_speedFactor,a=cc.repeatForever(cc.moveBy(1,ccp(0,a)));this.m_bgNode.runAction(a)},stop:function(){if(!this.m_isStopping&&this.m_isStartPlay){this.m_isStopping=!0;this.m_isStartPlay=!1;this.m_bgNode.stopAllActions();this.m_endScrollCount=this.m_scrollCount+this.m_stopMoreCount;var a=this.getContentSize().height*this.m_speedFactor,b=this.m_endScrollCount*this.m_itemHeight+0.5*this.m_gapHeight+this.m_bgNode.getPositionY(),a=CEMoveAccelerateY.create(2*b/a,-a,a*a*0.5/
b,-999999,999999),b=cc.callFunc(this.moveEndCallback,this),a=cc.sequence(a,b);this.m_bgNode.runAction(a)}},moveEndCallback:function(){this.m_isScrolling=this.m_isStopping=!1;if(this.m_nScriptListener){for(var a=this.m_resultArray.length,b=[],c=0;c<a;c++)b.push(this.m_resultArray[c]);this.m_nScriptListener(b)}},fillTailSprites:function(){var a=this.getContentSize(),b=0;do{var c=this.getNextSprite(),b=0.5*(a.height-(this.m_showCount-2)*this.m_itemHeight)+this.m_scrollCount*this.m_itemHeight;c.setPosition(ccp(a.width/
2,b));this.m_bgNode.addChild(c);this.m_scrollCount++}while(b+this.m_bgNode.getPositionY()<a.height)},removeHeadSprites:function(){this.getContentSize();for(var a=this.m_bgNode.getChildren();!(0>=a.length);){var b=a[0];if(0>b.getPositionY()+this.m_bgNode.getPositionY())b.removeFromParent();else break}},getNextSprite:function(){if(0>=this.m_spriteArray.length)return null;var a=null,b=!1;0<this.m_endScrollCount&&this.m_scrollCount>=this.m_endScrollCount&&this.m_scrollCount<this.m_endScrollCount+this.m_showCount&&
(b=this.m_resultArray[this.m_scrollCount-this.m_endScrollCount],0<b&&(a=this.m_spriteArray[b-1]),b=!0);if(!a){var c=0,c=this.m_randomMode?Math.random2(0,this.m_spriteArray.length):this.m_scrollCount%this.m_spriteArray.length,a=this.m_spriteArray[c];b&&(this.m_resultArray[this.m_scrollCount-this.m_endScrollCount]=c)}b=cc.Sprite.createWithSpriteFrame(a.displayFrame());b.setAnchorPoint(a.getAnchorPoint());b.setTag(a.getTag());b.setScale(a.getScale());b.setColor(a.getColor());return b},tick:function(a){a=
this.getContentSize();var b=this.m_bgNode.getPositionY(),c=this.m_bgNode.getChildren();c&&0<c.length&&(c[c.length-1].getPositionY()+b<=a.height&&this.fillTailSprites(),0>c[0].getPositionY()+b&&this.removeHeadSprites())},registerScriptListener:function(a){this.unregisterScriptListener();this.m_nScriptListener=a},unregisterScriptListener:function(){this.m_nScriptListener&&(this.m_nScriptListener=null)},setShowCount:function(a){this.m_showCount=a;this.m_resultArray.length=a},getShowCount:function(){return this.m_showCount},
setRandomMode:function(a){this.m_randomMode=a},isRandomMode:function(){return this.m_randomMode},setSpeedFactor:function(a){this.m_speedFactor=a},getSpeedFactor:function(){return this.m_speedFactor}});ListSpinView.create=function(){var a=new ListSpinView;a.init();a.initView();return a};PAGE_MOVE_ACT_TAG=8E3;
PageView=ClipView.extend({pageSize:0,curPage:0,callBackPage:0,beganLocation:ccp(0,0),preLocation:ccp(0,0),preNode:null,curNode:null,nextNode:null,isMoved:!1,isScroll:!1,isLoopScroll:!1,m_nScriptListener:null,m_owner:null,m_moveInterval:0,curtime:0,preMoveTime:0,touchTime:0,m_curTouchId:0,m_bTouchEnabled:!0,ctor:function(){this._super();this.callBackPage=this.curPage=this.pageSize=0;this.nextNode=this.curNode=this.preNode=null;this.isScroll=this.isMoved=!1;this.m_nScriptListener=0;this.isLoopScroll=
!1;this.touchTime=this.preMoveTime=this.m_moveInterval=this.curtime=0;this.m_curTouchId=-1;this.m_bTouchEnabled=!0},initView:function(){this.callBackPage=this.curPage=this.pageSize=0;this.m_moveInterval=0.2},onEnter:function(){this.m_bTouchEnabled&&Utils.registerTouch(this,0,!0);this._super()},onExit:function(){this.m_bTouchEnabled&&Utils.unregisterTouch(this);this._super()},update:function(a){this._super(a);this.curtime+=a},setPageSize:function(a){this.pageSize=a},setPageView:function(a,b){if(0>=
b||b>this.pageSize)return!1;this.removeChildByTag(b);this.addChild(a);a.setTag(b);a.setVisible(!1);a.ignoreAnchorPointForPosition(!1);a.setAnchorPoint(ccp(0.5,0.5));return!0},removeAllView:function(){this.removeAllChildren();this.callBackPage=this.curPage=this.pageSize=0},getCurPage:function(){return this.curPage},getNextPage:function(){var a=0;return a=this.curPage==this.pageSize?this.isLoopScroll?1:0:this.curPage+1},getPageSize:function(){return this.pageSize},getPrePage:function(){var a=0;return a=
1==this.curPage?this.isLoopScroll?this.pageSize:0:this.curPage-1},delayCallback:function(){this.scheduleOnce(this.prepareUpdateView,0)},ensurePageExist:function(a){null==this.getChildByTag(a)&&this.m_nScriptListener&&this.m_nScriptListener.call(this.owner,"page",a);return this.getChildByTag(a)},prepareUpdateView:function(a){this.updateView()},updateView:function(){this.isScroll=!1;var a=this.getContentSize(),b=this.getPrePage();0<b?(b=this.ensurePageExist(b),null!=b&&(b.stopActionByTag(PAGE_MOVE_ACT_TAG),
b.setPosition(ccp(-0.5*a.width,a.height/2))),this.preNode=b):this.preNode=null;b=this.ensurePageExist(this.curPage);null!=b&&(b.stopActionByTag(PAGE_MOVE_ACT_TAG),b.setPosition(ccp(0.5*a.width,a.height/2)));this.curNode=b;b=this.getNextPage();0<b?(b=this.ensurePageExist(b),null!=b&&(b.stopActionByTag(PAGE_MOVE_ACT_TAG),b.setPosition(ccp(1.5*a.width,a.height/2))),this.nextNode=b):this.nextNode=null;for(a=0;a<this.getChildrenCount();a++)b=this.getChildren()[a],b.getTag()!=this.curPage?b.setVisible(!1):
b.setVisible(!0);this.m_nScriptListener&&this.callBackPage!=this.curPage&&(this.callBackPage=this.curPage,this.m_nScriptListener.call(this.owner,"select",this.curPage))},moveToPage:function(a,b){if(!(0>=a||a>this.pageSize))if(b=0,0>=b||0>this.curPage)this.curPage=a,this.updateView();else if(!this.isScroll&&!this.isMoved&&this.curPage!=a){var c=this.getContentSize(),d=-0.5*c.width,e=1.5*c.width;a<this.curPage&&(d=1.5*c.width,e=-0.5*c.width);var f=cc.moveTo(this.m_moveInterval,ccp(d,c.height/2)).easing(cc.easeIn(b)),
d=cc.moveTo(this.m_moveInterval,ccp(0.5*c.width,c.height/2)).easing(cc.easeIn(b));if(this.curNode){var g=cc.callFunc(this.delayCallback,this),f=cc.sequence(f,g);f.setTag(PAGE_MOVE_ACT_TAG);this.curNode.runAction(f)}if(f=this.ensurePageExist(a))f.setPosition(e,c.height/2),d.setTag(PAGE_MOVE_ACT_TAG),f.runAction(d),f.setVisible(!0);this.curPage=a;this.isScroll=!0}},moveBackLeft:function(){var a=this.getContentSize(),b=cc.moveTo(this.m_moveInterval,ccp(0.5*a.width,a.height/2)).easing(cc.easeIn(0.8)),
a=cc.moveTo(this.m_moveInterval,ccp(-0.5*a.width,a.height/2)).easing(cc.easeIn(0.8)),c=cc.callFunc(this.delayCallback,this),b=cc.sequence(b,c);a.setTag(PAGE_MOVE_ACT_TAG);b.setTag(PAGE_MOVE_ACT_TAG);this.preNode&&this.preNode.runAction(a);this.curNode.runAction(b);this.isScroll=!0},moveBackRight:function(){var a=this.getContentSize(),b=cc.moveTo(this.m_moveInterval,ccp(0.5*a.width,a.height/2)).easing(cc.easeIn(0.8)),a=cc.moveTo(this.m_moveInterval,ccp(1.5*a.width,a.height/2)).easing(cc.easeIn(0.8)),
c=cc.callFunc(this.delayCallback,this),b=cc.sequence(b,c);a.setTag(PAGE_MOVE_ACT_TAG);b.setTag(PAGE_MOVE_ACT_TAG);this.curNode.runAction(b);this.nextNode&&this.nextNode.runAction(a);this.isScroll=!0},moveToNext:function(){if(!this.isScroll&&!this.isMoved){var a=this.getNextPage();if(!(0>=a)){var b=this.getContentSize(),c=cc.moveTo(this.m_moveInterval,ccp(-0.5*b.width,b.height/2)).easing(cc.easeIn(0.8)),b=cc.moveTo(this.m_moveInterval,ccp(0.5*b.width,b.height/2)).easing(cc.easeIn(0.8));if(this.curNode){var d=
cc.callFunc(this.delayCallback,this),c=cc.sequence(c,d);c.setTag(PAGE_MOVE_ACT_TAG);this.curNode.runAction(c)}this.nextNode&&(b.setTag(PAGE_MOVE_ACT_TAG),this.nextNode.runAction(b),this.nextNode.setVisible(!0));this.curPage=a;this.isScroll=!0}}},moveToPre:function(){if(!this.isScroll&&!this.isMoved){var a=this.getPrePage();if(!(0>=a)){var b=this.getContentSize(),c=cc.moveTo(this.m_moveInterval,ccp(0.5*b.width,b.height/2)).easing(cc.easeIn(0.8)),b=cc.moveTo(this.m_moveInterval,ccp(1.5*b.width,b.height/
2)).easing(cc.easeIn(0.8));if(this.curNode){var d=cc.callFunc(this.delayCallback,this),b=cc.sequence(b,d);b.setTag(PAGE_MOVE_ACT_TAG);this.curNode.runAction(b)}this.preNode&&(c.setTag(PAGE_MOVE_ACT_TAG),this.preNode.runAction(c),this.preNode.setVisible(!0));this.curPage=a;this.isScroll=!0}}},isInRect:function(a){var b=this.getContentSize(),b=cc.rect(0,0,b.width,b.height);return cc.rectContainsPoint(b,a)?!0:!1},isTouchEnabled:function(){return this.m_bTouchEnabled},setTouchEnabled:function(a){this.m_bTouchEnabled!=
a&&(this.m_bTouchEnabled=a,this._running&&(a?Utils.registerTouch(this,0,!0):Utils.unregisterTouch(this)))},ccTouchBegan:function(a,b){var c=this.convertToNodeSpace(a.getLocation());if(!this.isVisibleInParents(c)||1>=this.pageSize||this.isScroll||0<=this.m_curTouchId)return!1;this.m_curTouchId=a.getID();this.isMoved=!1;return this.isInRect(c)?(this.touchTime=this.preMoveTime=this.curtime,this.preNode&&this.preNode.stopActionByTag(PAGE_MOVE_ACT_TAG),this.nextNode&&this.nextNode.stopActionByTag(PAGE_MOVE_ACT_TAG),
this.curNode.stopActionByTag(PAGE_MOVE_ACT_TAG),this.beganLocation=this.preLocation=c,!0):!1},ccTouchMoved:function(a,b){if(!(1>=this.pageSize)&&a.getID()==this.m_curTouchId){var c=this.getContentSize(),d=this.convertToNodeSpace(a.getLocation());if(this.isInRect(d)){var e=d.x-this.beganLocation.x;this.isLoopScroll||(1==this.curPage&&0<e?e=0:this.curPage==this.pageSize&&0>e&&(e=0));this.curNode.setPositionX(0.5*c.width+e);this.preNode!=this.nextNode?(this.preNode&&this.preNode.setPositionX(-0.5*c.width+
e),this.nextNode&&this.nextNode.setPositionX(1.5*c.width+e)):this.preNode&&(0<e?this.preNode.setPositionX(-0.5*c.width+e):this.preNode.setPositionX(1.5*c.width+e));this.preNode&&(e=this.preNode.getPositionX(),this.preNode.setVisible(e<1.5*c.width&&e>-0.5*c.width));this.nextNode&&(e=this.nextNode.getPositionX(),this.nextNode.setVisible(e<1.5*c.width&&e>-0.5*c.width));this.isMoved=!0;this.preMoveTime!=this.curtime&&(0.1<this.curtime-this.preMoveTime&&(this.touchTime=this.curtime),this.preMoveTime=this.curtime,
this.preLocation=d)}}},ccTouchEnded:function(a,b){if(a.getID()==this.m_curTouchId){this.m_curTouchId=-1;var c=this.getContentSize();if(!(1>=this.pageSize))if(this.isMoved){this.isMoved=!1;var d=this.preLocation.x-this.beganLocation.x,e=this.preMoveTime-this.touchTime,f=0;0!=e&&(f=d/e);1E3<f||this.preLocation.x-this.beganLocation.x>c.width/4?this.preNode&&this.moveToPre():-1E3>f||this.preLocation.x-this.beganLocation.x<c.width/-4?this.nextNode&&this.moveToNext():0<this.preLocation.x-this.beganLocation.x?
this.moveBackLeft():this.moveBackRight()}else this.updateView()}},ccTouchCancelled:function(a,b){this.ccTouchEnded(a,b)},registerScriptListener:function(a,b){this.unregisterScriptListener();this.m_nScriptListener=a;this.m_owner=b},unregisterScriptListener:function(){this.m_owner=this.m_nScriptListener=null},getPageNode:function(a){return this.getChildByTag(a)},updateNodeVisible:function(a,b){},setLoopScroll:function(a){this.isLoopScroll=a}});
PageView.create=function(){var a=new PageView;a.init();a.initView();return a};UrlCachedSprite=cc.Sprite.extend({m_nScriptListener:null,m_owner:null,m_isForce:!1,m_url:"",m_defaultSpritePath:"",m_cachPath:"",m_originSize:null,initWithUrl:function(a){a&&(0==a.indexOf("https://wx.qlogo.cn")?this.m_url=a.substr(0,a.length-1)+"96":this.m_url=a);this.m_cachPath="cach_img"},setOriginContentSize:function(a,b){this.m_originSize=cc.size(a,b)},setUrl:function(a){a?0==a.indexOf("https://wx.qlogo.cn")?this.m_url=a.substr(0,a.length-1)+"96":this.m_url=a:this.m_url=""},startLoad:function(a){this.m_url&&
0<this.m_url.length&&(this.m_isForce=a,cc.textureCache.addImage(this.m_url,function(a){a instanceof cc.Texture2D&&(this.initWithFile(this.m_url),this.m_originSize&&(this.setScaleX(this.m_originSize.width/this.getContentWidth()),this.setScaleY(this.m_originSize.height/this.getContentHeight())))},this))},startLoadWhenVisible:function(a){this.m_isForce=a;this.scheduleUpdate()},update:function(a){this.isVisibleInParents()&&(this.unscheduleUpdate(),this.startLoad(this.m_isForce))},registerScriptListener:function(a,
b){this.unregisterScriptListener();this.m_nScriptListener=a;this.m_owner=b},unregisterScriptListener:function(){this.owner=this.m_nScriptListener=null},setDisplayFrame:function(a){var b=this.getContentSize(),c=this.getScaleX(),d=this.getScaleY();this._super(a);var e=a.getOriginalSize();a.isRotated()?(a=b.width*c/e.height,b=b.height*d/e.width):(a=b.width*c/e.width,b=b.height*d/e.height);this.setScaleX(a);this.setScaleY(b)},setDisplayFrameFile:function(a){var b=this.getContentSize(),c=this.getScaleX(),
d=this.getScaleY();this._super(a);a=this.getContentSize();d=b.height*d/a.height;this.setScaleX(b.width*c/a.width);this.setScaleY(d)}});UrlCachedSprite.create=function(a){var b=new UrlCachedSprite;b.init();b.initWithUrl(a);return b};ShortLabel=cc.LabelTTF.extend({m_content:"",getContent:function(){return this.m_content},setDimensions:function(a){this._super(a);0<this.m_content.length&&this.setString(this.getShortText(this.m_content,this.getFontName(),this.getFontSize(),a.width))},setString:function(a){this.m_content=a;cc.LabelTTF.prototype.setString.call(this,this.getShortText(a,this.getFontName(),this.getFontSize(),this.getDimensions().width))},getShortText:function(a,b,c,d){if(0>=d)return a;var e=new Utf8String(a);if(CCLabelTTFUtils.calculateStringSize(a,
b,c).width<=d||2>=e.length())return a;a=CCLabelTTFUtils.calculateStringSize("...",b,c);if(a.width>=d)return"...";for(var f=e.length(),g="",h=0;h<f;h++){var k=e.substr(0,h+1);if(CCLabelTTFUtils.calculateStringSize(k,b,c).width>d-a.width){g=e.substr(0,h);break}}return g+"..."}});ShortLabel.create=function(a,b,c){a=a||"";b=b||MainFont;c=c||MainFontSize;var d=new ShortLabel;d.initWithString(a,b,c,cc.size(0,0),cc.TEXT_ALIGNMENT_CENTER,cc.VERTICAL_TEXT_ALIGNMENT_TOP);return d};ccui={};
ccui.Scale9Sprite=cc.Scale9Sprite=cc.Node.extend({_spriteRect:null,_capInsetsInternal:null,_positionsAreDirty:!1,_scale9Image:null,_topLeft:null,_top:null,_topRight:null,_left:null,_centre:null,_right:null,_bottomLeft:null,_bottom:null,_bottomRight:null,_scale9Enabled:!0,_brightState:0,_renderers:null,_opacityModifyRGB:!1,_originalSize:null,_preferredSize:null,_opacity:0,_color:null,_capInsets:null,_insetLeft:0,_insetTop:0,_insetRight:0,_insetBottom:0,_spriteFrameRotated:!1,_textureLoaded:!1,_className:"Scale9Sprite",
_flippedX:!1,_flippedY:!1,textureLoaded:function(){return this._textureLoaded},addLoadedEventListener:function(a,b){this.addEventListener("load",a,b)},_updateCapInset:function(){var a;a=this._insetLeft;var b=this._insetTop,c=this._insetRight,d=this._spriteRect,e=this._insetBottom;a=0===a&&0===b&&0===c&&0===e?cc.rect(0,0,0,0):cc.rect(a,b,d.width-a-c,d.height-b-e);this.setCapInsets(a)},_updatePositions:function(){if(this._topLeft&&this._topRight&&this._bottomRight&&this._bottomLeft&&this._centre){var a=
this._contentSize,b=this._topLeft,c=this._topRight,d=this._bottomRight,e=this._bottomLeft,f=this._left,g=this._right,h=this._top,k=this._bottom,m=this._centre,n=this._centre.getContentSize(),p=b.getContentSize(),r=e.getContentSize(),s=a.width-p.width-c.getContentSize().width,a=a.height-p.height-d.getContentSize().height,s=s/n.width,a=a/n.height,p=n.width*s,u=n.height*a,t=r.width,r=r.height,x=cc.p(0,0);if(cc._renderType===cc.game.RENDER_TYPE_WEBGL){var v=Math.round(p);p!==v&&(p=v,s=p/n.width);v=Math.round(u);
u!==v&&(u=v,a=u/n.height)}m.setScaleX(s);m.setScaleY(a);e.setAnchorPoint(1,1);e.setPosition(t,r);d.setAnchorPoint(0,1);d.setPosition(t+p,r);b.setAnchorPoint(1,0);b.setPosition(t,r+u);c.setAnchorPoint(0,0);c.setPosition(t+p,r+u);f.setAnchorPoint(1,0.5);f.setPosition(t,r+u/2+x.y);f.setScaleY(a);g.setAnchorPoint(0,0.5);g.setPosition(t+p,r+u/2+x.y);g.setScaleY(a);h.setAnchorPoint(0.5,0);h.setPosition(t+p/2+x.x,r+u);h.setScaleX(s);k.setAnchorPoint(0.5,1);k.setPosition(t+p/2+x.x,r);k.setScaleX(s);m.setAnchorPoint(0.5,
0.5);m.setPosition(t+p/2+x.x,r+u/2+x.y);m.setScaleX(s);m.setScaleY(a)}},ctor:function(a,b,c){cc.Node.prototype.ctor.call(this);this._loader=new cc.Sprite.LoadManager;this._spriteRect=cc.rect(0,0,0,0);this._capInsetsInternal=cc.rect(0,0,0,0);this._originalSize=cc.size(0,0);this._preferredSize=cc.size(0,0);this._capInsets=cc.rect(0,0,0,0);this._renderers=[];if(void 0!==a)if(a instanceof cc.SpriteFrame)this.initWithSpriteFrame(a,b);else{var d=cc.spriteFrameCache.getSpriteFrame(a);d?this.initWithSpriteFrame(d,
b):this.initWithFile(a,b,c)}else this.init(),this.setCascadeColorEnabled(!0),this.setCascadeOpacityEnabled(!0),this.setAnchorPoint(0.5,0.5),this._positionsAreDirty=!0},getSprite:function(){return this._scale9Image},getOriginalSize:function(){return cc.size(this._originalSize)},getPreferredSize:function(){return cc.size(this._preferredSize)},_getPreferredWidth:function(){return this._preferredSize.width},_getPreferredHeight:function(){return this._preferredSize.height},_asyncSetPreferredSize:function(){this.removeEventListener("load",
this._asyncSetPreferredSize,this);0==this._cachePreferredSize.width&&(this._cachePreferredSize.width=this._contentSize.width);0==this._cachePreferredSize.height&&(this._cachePreferredSize.height=this._contentSize.height);this.setPreferredSize(this._cachePreferredSize);this._cachePreferredSize=null},setPreferredSize:function(a){if(a){if(!this._textureLoaded)return this._cachePreferredSize=a,this.removeEventListener("load",this._asyncSetPreferredSize,this),this.addEventListener("load",this._asyncSetPreferredSize,
this),!1;a=cc.size(a.width,a.height);a.width<this._originalSize.width&&(a.width=this._originalSize.width);a<this._originalSize.height&&(a=this._originalSize.height);this.setContentSize(a);this._preferredSize=a;this._positionsAreDirty&&(this._updatePositions(),this._positionsAreDirty=!1,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.cacheDirty))}},_setPreferredWidth:function(a){this._setWidth(a);this._preferredSize.width=a},_setPreferredHeight:function(a){this._setHeight(a);this._preferredSize.height=
a},setContentWidth:function(a){this.setPreferredSize(cc.size(a,this._contentSize.height))},setContentHeight:function(a){this.setPreferredSize(cc.size(this._contentSize.width,a))},setOpacity:function(a){cc.Node.prototype.setOpacity.call(this,a);this._scale9Enabled||this._scale9Image&&this._scale9Image.setOpacity(a);this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.cacheDirty)},setColor:function(a){this._color=a;if(this._scale9Enabled)for(var b=this._renderers,c=0;c<b.length;c++){var d=b[c];d&&d.setColor(a)}else this._scale9Image&&
this._scale9Image.setColor(a);this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.cacheDirty)},getColor:function(){return this._color||cc.color.WHITE},getCapInsets:function(){return cc.rect(this._capInsets)},_asyncSetCapInsets:function(){this.removeEventListener("load",this._asyncSetCapInsets,this);this._updateCapInset()},setCapInsets:function(a){var b=this._contentSize,c=b.width,b=b.height;if(!this._textureLoaded)return this.removeEventListener("load",this._asyncSetCapInsets,this),this.addEventListener("load",
this._asyncSetCapInsets,this),!1;this.updateWithSprite(this._scale9Image,this._spriteRect,this._spriteFrameRotated,this._offset,this._originalSize,a);this.setContentSize(c,b)},getInsetLeft:function(){return this._insetLeft},setInsetLeft:function(a){this._insetLeft=a;this._updateCapInset()},getInsetTop:function(){return this._insetTop},setInsetTop:function(a){this._insetTop=a;this._updateCapInset()},getInsetRight:function(){return this._insetRight},setInsetRight:function(a){this._insetRight=a;this._updateCapInset()},
getInsetBottom:function(){return this._insetBottom},setInsetBottom:function(a){this._insetBottom=a;this._updateCapInset()},setInset:function(a,b,c,d){this._insetLeft=a;this._insetTop=b;this._insetRight=c;this._insetBottom=d;this._updateCapInset()},setChildVisible:function(a,b){this._centre&&this._topLeft.setVisible(a)},setContentSize:function(a,b){cc.Node.prototype.setContentSize.call(this,a,b);this._positionsAreDirty=!0},setAnchorPoint:function(a,b){cc.Node.prototype.setAnchorPoint.call(this,a,b);
!this._scale9Enabled&&this._scale9Image&&(this._scale9Image.setAnchorPoint(a,b),this._positionsAreDirty=!0)},_setWidth:function(a){cc.Node.prototype._setWidth.call(this,a);this._positionsAreDirty=!0},_setHeight:function(a){cc.Node.prototype._setHeight.call(this,a);this._positionsAreDirty=!0},init:function(){return this.initWithBatchNode(null,cc.rect(0,0,0,0),!1,cc.rect(0,0,0,0))},initWithBatchNode:function(a,b,c,d){if(!a)return!1;void 0===d&&(d=c,c=!1);this.updateWithBatchNode(a,b,c,d);this.setCascadeColorEnabled(!0);
this.setCascadeOpacityEnabled(!0);this.setAnchorPoint(0.5,0.5);return this._positionsAreDirty=!0},initWithFile:function(a,b,c){a instanceof cc.Rect?(c=a=b,b=cc.rect(0,0,0,0)):(b=b||cc.rect(0,0,0,0),c=c||cc.rect(0,0,0,0));if(!a)throw Error("ccui.Scale9Sprite.initWithFile(): file should be non-null");var d=cc.textureCache.getTextureForKey(a);d&&d.isLoaded()||(d=cc.textureCache.addImage(a));var e=d.isLoaded();this._textureLoaded=e;this._loader.clear();return e?this.initWithBatchNode(new cc.SpriteBatchNode(a,
9),b,!1,c):(this._loader.once(d,function(){this.initWithFile(a,b,c);this.dispatchEvent("load")},this),!1)},initWithSpriteFrame:function(a,b){if(!a||!a.getTexture())throw Error("ccui.Scale9Sprite.initWithSpriteFrame(): spriteFrame should be non-null and its texture should be non-null");b=b||cc.rect(0,0,0,0);var c=a.getTexture(),d=this._textureLoaded=c.isLoaded();this._loader.clear();if(!d)return this._loader.once(c,function(){this.initWithSpriteFrame(a,b);this.dispatchEvent("load")},this),!1;c=new cc.SpriteBatchNode(a.getTexture(),
9);this.initWithBatchNode(c,a.getRect(),cc._renderType===cc.game.RENDER_TYPE_WEBGL&&a.isRotated(),b);return!0},initWithSpriteFrameName:function(a,b){if(!a)throw Error("ccui.Scale9Sprite.initWithSpriteFrameName(): spriteFrameName should be non-null");b=b||cc.rect(0,0,0,0);var c=cc.spriteFrameCache.getSpriteFrame(a);return null==c?(cc.log("ccui.Scale9Sprite.initWithSpriteFrameName(): can't find the sprite frame by spriteFrameName"),!1):this.initWithSpriteFrame(c,b)},resizableSpriteWithCapInsets:function(a){var b=
new ccui.Scale9Sprite;return b&&b.initWithBatchNode(this._scale9Image,this._spriteRect,!1,a)?b:null},setOpacityModifyRGB:function(a){if(this._scale9Image){this._opacityModifyRGB=a;var b=this._scale9Image.getChildren();if(b)for(var c=0,d=b.length;c<d;c++)b[c].setOpacityModifyRGB(a);this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.cacheDirty)}},isOpacityModifyRGB:function(){return this._opacityModifyRGB},createSlicedSprites:function(){var a=this._originalSize.width,b=this._originalSize.height,c=this._spriteRect,
d=Math.floor(this._offset.x+(a-c.width)/2),e=Math.floor(this._offset.y+(b-c.height)/2),f=c.x,g=c.y,h=this._capInsetsInternal,k=this._scale9Image.getTexture(),m=this._spriteFrameRotated,n=cc.rect(c.x,c.y,c.width,c.height);cc._rectEqualToZero(h)&&(h=cc.rect((a-2)/2,(b-2)/2,2,2));this._spriteFrameRotated?(f-=e,g-=d):(f-=d,g-=e);var c=cc.rect(f,g,a,b),p=h.x,r=h.width,s=c.width-(p+r),u=h.y,t=h.height,x=c.height-(u+t),v=0,z=0,h=c=cc.rect(v+0.5|0,z+0.5|0,p+0.5|0,u+0.5|0),v=v+p,a=cc.rect(v+0.5|0,z+0.5|0,
r+0.5|0,u+0.5|0),b=cc.rect(v+r+0.5|0,z+0.5|0,s+0.5|0,u+0.5|0),v=0,z=0+u,d=cc.rect(v+0.5|0,z+0.5|0,p+0.5|0,t+0.5|0),v=v+p,f=e=cc.rect(v+0.5|0,z+0.5|0,r+0.5|0,t+0.5|0),v=v+r,g=cc.rect(v+0.5|0,z+0.5|0,s+0.5|0,t+0.5|0),v=0,z=0+u+t,u=cc.rect(v+0.5|0,z+0.5|0,p+0.5|0,x+0.5|0),v=v+p,p=cc.rect(v+0.5|0,z+0.5|0,r+0.5|0,x+0.5|0),v=v+r,s=r=cc.rect(v+0.5|0,z+0.5|0,s+0.5|0,x+0.5|0),x=c,v=e,z=r,t=f,B=s,C=u,A=b,D=h,E=g,F=d,G=p,H=a,w=cc.affineTransformMakeIdentity();m?(w=cc.affineTransformTranslate(w,n.height+n.x,
n.y),w=cc.affineTransformRotate(w,1.57079633),c=cc.rectApplyAffineTransform(c,w),e=cc.rectApplyAffineTransform(e,w),r=cc.rectApplyAffineTransform(r,w),f=cc.rectApplyAffineTransform(f,w),s=cc.rectApplyAffineTransform(s,w),u=cc.rectApplyAffineTransform(u,w),b=cc.rectApplyAffineTransform(b,w),h=cc.rectApplyAffineTransform(h,w),g=cc.rectApplyAffineTransform(g,w),d=cc.rectApplyAffineTransform(d,w),p=cc.rectApplyAffineTransform(p,w),a=cc.rectApplyAffineTransform(a,w),x.x=c.x,v.x=e.x,z.x=r.x,t.x=f.x,B.x=
s.x,C.x=u.x,A.x=b.x,D.x=h.x,E.x=g.x,F.x=d.x,G.x=p.x,H.x=a.x,x.y=c.y,v.y=e.y,z.y=r.y,t.y=f.y,B.y=s.y,C.y=u.y,A.y=b.y,D.y=h.y,E.y=g.y,F.y=d.y,G.y=p.y,H.y=a.y):(w=cc.affineTransformTranslate(w,n.x,n.y),cc.rectApplyAffineTransform(x,w),cc.rectApplyAffineTransform(v,w),cc.rectApplyAffineTransform(z,w),t=cc.rectApplyAffineTransform(t,w),B=cc.rectApplyAffineTransform(B,w),C=cc.rectApplyAffineTransform(C,w),A=cc.rectApplyAffineTransform(A,w),D=cc.rectApplyAffineTransform(D,w),E=cc.rectApplyAffineTransform(E,
w),F=cc.rectApplyAffineTransform(F,w),G=cc.rectApplyAffineTransform(G,w),H=cc.rectApplyAffineTransform(H,w));this._centre||(this._centre=new cc.Sprite);this._centre.initWithTexture(k,t,m);0<t.width&&0<t.height&&this._renderers.push(this._centre);this._top||(this._top=new cc.Sprite);this._top.initWithTexture(k,H,m);0<H.width&&0<H.height&&this._renderers.push(this._top);this._bottom||(this._bottom=new cc.Sprite);this._bottom.initWithTexture(k,G,m);0<G.width&&0<G.height&&this._renderers.push(this._bottom);
this._left||(this._left=new cc.Sprite);this._left.initWithTexture(k,F,m);0<F.width&&0<F.height&&this._renderers.push(this._left);this._right||(this._right=new cc.Sprite);this._right.initWithTexture(k,E,m);0<E.width&&0<E.height&&this._renderers.push(this._right);this._topLeft||(this._topLeft=new cc.Sprite);this._topLeft.initWithTexture(k,D,m);0<D.width&&0<D.height&&this._renderers.push(this._topLeft);this._topRight||(this._topRight=new cc.Sprite);this._topRight.initWithTexture(k,A,m);0<A.width&&0<
A.height&&this._renderers.push(this._topRight);this._bottomLeft||(this._bottomLeft=new cc.Sprite);this._bottomLeft.initWithTexture(k,C,m);0<C.width&&0<C.height&&this._renderers.push(this._bottomLeft);this._bottomRight||(this._bottomRight=new cc.Sprite);this._bottomRight.initWithTexture(k,B,m);0<B.width&&0<B.height&&this._renderers.push(this._bottomRight)},updateWithSprite:function(a,b,c,d,e,f){if(!a)return!1;this._loader.clear();this._textureLoaded=a._textureLoaded;if(!a._textureLoaded)return this._loader.once(a,
function(){this.updateWithSprite(a,b,c,d,e,f);this.dispatchEvent("load")},this),!1;this._scale9Image!=a&&this._scale9Image&&this._scale9Image._renderCmd.detachFromParent(!0);this._scale9Image=a;if(!this._scale9Image)return!1;var g=this._scale9Image.getTexture();this._textureLoaded=g&&g.isLoaded();var h=a.getSpriteFrame();cc._renderType===cc.game.RENDER_TYPE_CANVAS&&h&&g._htmlElementObj instanceof window.HTMLCanvasElement&&(c=!1,b={x:0,y:0,height:b.height,width:b.width});for(var h=this._renderers,
k=0;k<h.length;k++)h[k]._renderCmd.detachFromParent(!0);h=this.getOpacity();k=this.getColor();this._renderers.length=0;var m=b,n=e;cc._rectEqualToZero(m)&&(m=g.getContentSize(),m=cc.rect(0,0,m.width,m.height));0===n.width&&0===n.height&&(n=cc.size(m.width,m.height));this._capInsets=f;this._spriteRect=m;this._offset=d;this._spriteFrameRotated=c;this._preferredSize=this._originalSize=n;this._capInsetsInternal=f;this._scale9Enabled?this.createSlicedSprites():this._scale9Image.initWithTexture(g,this._spriteRect,
this._spriteFrameRotated);this.setState(this._brightState);this.setContentSize(n);this.setOpacity(h);this.setColor(k);return!0},updateWithBatchNode:function(a,b,c,d){if(!a)return!1;var e=a.getTexture();this._loader.clear();if(!(this._textureLoaded=e.isLoaded()))return this._loader.once(e,function(){this.updateWithBatchNode(a,b,c,d);this.dispatchEvent("load")},this),!1;var e=new cc.Sprite(e),f=cc.p(0,0),g=cc.size(b.width,b.height);return this.updateWithSprite(e,b,c,f,g,d)},setSpriteFrame:function(a,
b){var c=a.getTexture();this._textureLoaded=c._textureLoaded;this._loader.clear();if(!c._textureLoaded)return this._loader.once(c,function(){this.setSpriteFrame(a,b);this.dispatchEvent("load")},this),!1;c=new cc.Sprite(a.getTexture());this.updateWithSprite(c,a.getRect(),a.isRotated(),a.getOffset(),a.getOriginalSize(),b||cc.rect());b&&(this._insetLeft=b.x,this._insetTop=b.y,this._insetRight=this._originalSize.width-this._insetLeft-b.width,this._insetBottom=this._originalSize.height-this._insetTop-
b.height)},setState:function(a){if(a===ccui.Scale9Sprite.state.NORMAL||a===ccui.Scale9Sprite.state.GRAY)this._brightState=a,this._renderCmd.setState(a)},setScale9Enabled:function(a){if(this._scale9Enabled!==a){this._scale9Enabled=a;a=this._renderers;for(var b=0;b<a.length;b++)a[b]._renderCmd.detachFromParent(!0);this._renderers.length=0;cc.Node.transformDirty=!0;this._scale9Enabled&&this._scale9Image&&this.updateWithSprite(this._scale9Image,this._spriteRect,this._spriteFrameRotated,this._offset,this._originalSize,
this._capInsets);this._positionsAreDirty=!0}},_setRenderersPosition:function(){this._positionsAreDirty&&(this._updatePositions(),this._adjustScale9ImagePosition(),this._positionsAreDirty=!1)},_adjustScale9ImagePosition:function(){var a=this._scale9Image,b=this._contentSize;a&&(a.x=b.width*a.getAnchorPoint().x,a.y=b.height*a.getAnchorPoint().y)},_adjustScale9ImageScale:function(){var a=this._scale9Image,b=this._contentSize;a&&a.setScale(b.width/a.width,b.height/a.height)},setFlippedX:function(a){var b=
this.getScaleX();this._flippedX=a;this.setScaleX(b);this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.cacheDirty)},isFlippedX:function(){return this._flippedX},setFlippedY:function(a){var b=this.getScaleY();this._flippedY=a;this.setScaleY(b);this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.cacheDirty)},isFlippedY:function(){return this._flippedY},setScaleX:function(a){this._flippedX&&(a*=-1);cc.Node.prototype.setScaleX.call(this,a);this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.cacheDirty)},setScaleY:function(a){this._flippedY&&
(a*=-1);cc.Node.prototype.setScaleY.call(this,a);this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.cacheDirty)},setScale:function(a,b){void 0===b&&(b=a);this.setScaleX(a);this.setScaleY(b)},getScaleX:function(){var a=cc.Node.prototype.getScaleX.call(this);this._flippedX&&(a*=-1);return a},getScaleY:function(){var a=cc.Node.prototype.getScaleY.call(this);this._flippedY&&(a*=-1);return a},getScale:function(){this.getScaleX()!==this.getScaleY()&&cc.log("Scale9Sprite#scale. ScaleX !\x3d ScaleY. Don't know which one to return");
return this.getScaleX()},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new ccui.Scale9Sprite.CanvasRenderCmd(this):new ccui.Scale9Sprite.WebGLRenderCmd(this)}});_p=ccui.Scale9Sprite.prototype;cc.EventHelper.prototype.apply(_p);cc.defineGetterSetter(_p,"preferredSize",_p.getPreferredSize,_p.setPreferredSize);cc.defineGetterSetter(_p,"capInsets",_p.getCapInsets,_p.setCapInsets);cc.defineGetterSetter(_p,"insetLeft",_p.getInsetLeft,_p.setInsetLeft);
cc.defineGetterSetter(_p,"insetTop",_p.getInsetTop,_p.setInsetTop);cc.defineGetterSetter(_p,"insetRight",_p.getInsetRight,_p.setInsetRight);cc.defineGetterSetter(_p,"insetBottom",_p.getInsetBottom,_p.setInsetBottom);_p=null;ccui.Scale9Sprite.create=function(a,b,c){return new ccui.Scale9Sprite(a,b,c)};ccui.Scale9Sprite.createWithSpriteFrame=function(a,b){return new ccui.Scale9Sprite(a,b)};ccui.Scale9Sprite.createWithSpriteFrameName=function(a,b){return new ccui.Scale9Sprite(a,b)};
ccui.Scale9Sprite.POSITIONS_CENTRE=0;ccui.Scale9Sprite.POSITIONS_TOP=1;ccui.Scale9Sprite.POSITIONS_LEFT=2;ccui.Scale9Sprite.POSITIONS_RIGHT=3;ccui.Scale9Sprite.POSITIONS_BOTTOM=4;ccui.Scale9Sprite.POSITIONS_TOPRIGHT=5;ccui.Scale9Sprite.POSITIONS_TOPLEFT=6;ccui.Scale9Sprite.POSITIONS_BOTTOMRIGHT=7;ccui.Scale9Sprite.state={NORMAL:0,GRAY:1};(function(){ccui.Scale9Sprite.CanvasRenderCmd=function(a){cc.Node.CanvasRenderCmd.call(this,a);this._cachedParent=null;this._cacheDirty=!1;this._state=ccui.Scale9Sprite.state.NORMAL;a=this._node;var c=this._cacheCanvas=document.createElement("canvas");c.width=1;c.height=1;this._cacheContext=new cc.CanvasContextWrapper(c.getContext("2d"));var d=this._cacheTexture=new cc.Texture2D;d.initWithElement(c);d.handleLoadedTexture();this._cacheSprite=new cc.Sprite(d);this._cacheSprite.setAnchorPoint(0,0);a.addChild(this._cacheSprite)};
var a=ccui.Scale9Sprite.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);a.constructor=ccui.Scale9Sprite.CanvasRenderCmd;a.visit=function(a){var c=this._node;c._visible&&(c._positionsAreDirty&&(c._updatePositions(),c._positionsAreDirty=!1),this.originVisit(a))};a.transform=function(a){var c=this._node;cc.Node.CanvasRenderCmd.prototype.transform.call(this,a);c._positionsAreDirty&&(c._updatePositions(),c._positionsAreDirty=!1);a=c._children;for(c=0;c<a.length;c++)a[c].transform(this,
!0)};a._updateDisplayColor=function(a){cc.Node.CanvasRenderCmd.prototype._updateDisplayColor.call(this,a);var c=this._node;if(c){var d=c._renderers;if(c._scale9Enabled)for(var c=d.length,e=0;e<c;e++){var f=d[e];if(f)f._renderCmd._updateDisplayColor(a),f._renderCmd._updateColor();else break}else c._scale9Image&&(c._scale9Image._renderCmd._updateDisplayColor(a),c._scale9Image._renderCmd._updateColor())}};a.updateStatus=function(){var a=cc.Node._dirtyFlags,c=this._dirtyFlag;cc.Node.RenderCmd.prototype.updateStatus.call(this);
c&a.cacheDirty&&(this._cacheScale9Sprite(),this._dirtyFlag^=this._dirtyFlag&a.cacheDirty)};a._syncStatus=function(a){var c=cc.Node._dirtyFlags,d=this._dirtyFlag;cc.Node.RenderCmd.prototype._syncStatus.call(this,a);d&c.cacheDirty&&(this._cacheScale9Sprite(),this._dirtyFlag^=this._dirtyFlag&c.cacheDirty)};a._cacheScale9Sprite=function(){var a=this._node;if(a._scale9Image){var c=cc.contentScaleFactor(),d=a._contentSize,e=cc.size(d.width*c,d.height*c),f=this._cacheCanvas,g=this._cacheContext,h=g.getContext(),
k=!1;if(f.width!==e.width||f.height!==e.height)f.width=e.width,f.height=e.height,k=!0;cc.renderer._turnToCacheMode(a.__instanceId);if(a._scale9Enabled){f=a._renderers;a._setRenderersPosition();for(var m=f.length,n=0;n<m;n++){var p=f[n];if(p)p=p._renderCmd,p.updateStatus(),cc.renderer.pushRenderCommand(p);else break}}else p=a._scale9Image._renderCmd,a._adjustScale9ImagePosition(),a._adjustScale9ImageScale(),p.updateStatus(),cc.renderer.pushRenderCommand(a._scale9Image._renderCmd);(f=a._scale9Image.getTexture())&&
this._state===ccui.Scale9Sprite.state.GRAY&&f._switchToGray(!0);h.setTransform(1,0,0,1,0,0);h.clearRect(0,0,e.width,e.height);cc.renderer._renderingToCacheCanvas(g,a.__instanceId,c,c);cc.renderer._turnToNormalMode();f&&this._state===ccui.Scale9Sprite.state.GRAY&&f._switchToGray(!1);k&&this._cacheSprite.setTextureRect(cc.rect(0,0,d.width,d.height));this._cacheSprite.getParent()||a.addChild(this._cacheSprite,-1);this._cacheSprite._renderCmd._updateColor()}};a.setState=function(a){this._node._scale9Image&&
(this._state=a,this.setDirtyFlag(cc.Node._dirtyFlags.cacheDirty))}})();CCLabelTTFUtils=cc.Class.extend({});
CCLabelTTFUtils.calculateStringSize=function(a,b,c,d){d=d||0;d=0>d?0:d;var e=cc.LabelTTF.__getFontHeightByDiv(b,c),f=null,g=cc.view.getDevicePixelRatio();d*=g;var h=[],f=c*g;this.cacheLabel||(this.cacheLabel=cc.LabelTTF.create(""));cc._renderType===cc.game.RENDER_TYPE_WEBGL?cc.labelTTFContext&&(cc.labelTTFContext.font="normal normal "+f+"px '"+b+"'"):this.cacheLabel._renderCmd._labelContext&&(this.cacheLabel._renderCmd._labelContext.font="normal normal "+f+"px '"+b+"'");var k=!1;if(0!==d)for(f=a.split("\n"),
b=0;b<f.length;b++)this._checkWarp(f,b,d);else for(f=a.split("\n"),b=0,c=f.length;b<c;b++)h.push(this._measure(f[b]));1<f.length&&(k=!0);a=0===d?k?cc.size(Math.ceil(Math.max.apply(Math,h)),Math.ceil(e*g*f.length)):cc.size(Math.ceil(this._measure(a)),Math.ceil(e*g)):k?cc.size(Math.ceil(d),Math.ceil(e*g*f.length)):cc.size(Math.ceil(d),Math.ceil(e*g));return cc.size(a.width/g,a.height/g)};CCLabelTTFUtils._measure=function(a){return this.cacheLabel._renderCmd._measure(a)};
CCLabelTTFUtils._checkWarp=function(a,b,c){var d=a[b],e=this._measure(d);if(e>c&&1<d.length){for(var f=c/e*d.length|0,g=d.substr(f),h=e-this._measure(g),k,m=0,n=0;h>c&&100>n++;)f*=c/h,f|=0,g=d.substr(f),h=e-this._measure(g);for(n=0;h<c&&100>n++;)g&&(m=(k=cc.LabelTTF._wordRex.exec(g))?k[0].length:1,k=g),f+=m,g=d.substr(f),h=e-this._measure(g);f-=m;0===f&&(f=1,k=k.substr(1));c=d.substr(0,f);cc.LabelTTF.wrapInspection&&cc.LabelTTF._symbolRex.test(k||g)&&(e=cc.LabelTTF._lastWordRex.exec(c),f-=e?e[0].length:
0,0===f&&(f=1),k=d.substr(f),c=d.substr(0,f));cc.LabelTTF._firsrEnglish.test(k)&&(e=cc.LabelTTF._lastEnglish.exec(c))&&c!==e[0]&&(f-=e[0].length,k=d.substr(f),c=d.substr(0,f));a[b]=k||g;a.splice(b,0,c)}};CCLabelTTFUtils.calculateStringLastLineSize=function(a,b,c,d){return cc.size(0,0)};"undefined"!=typeof sharedCanvas&&(sharedCanvas.setAttribute=function(){},sharedCanvas.style={},sharedCanvas.style.width=1,sharedCanvas.style.height=1);cc.game.onStart=function(){cc.view.enableRetina(!0)};cc.game._runMainLoop=function(){};cc.game.run();
//@ sourceMappingURL=sourcemap 
 			});
 		define("src/subContext/subutils.js", function(require, module, exports){ 			
(function(){subutils={},subutils.drawImage=function(a,b,c){console.log("--drawImage",a,b,c);var d=sharedCanvas.getContext("2d");d.clearRect(0,0,b,c);var e=new Image;e.src=a,e.onload=function(){console.log(e),d.drawImage(e,0,0,b,c)}},subutils.drawTTF=function(a,b,c){c*=2,console.log("--drawTTF",a,b,c);var d=sharedCanvas.getContext("2d");d.clearRect(0,0,b,c),d.font="24px Arial",d.fillText("sssssssssssssssssssssss",0,c)},subutils.loadimage=function(){},subutils.random=function(a,b){var c=Math.round;return null==a?Math.random():null==b?c(Math.random()*a):c(Math.random()*(b-a)+a)}})(); 
 			});
 		define("src/subContext/weapp-adapter-subcontext.js", function(require, module, exports){ 			
(function(){(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p='',b(0)})([function(a,b,c){'use strict';var d=c(1),e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(d),f=GameGlobal;GameGlobal.__isAdapterInjected||(GameGlobal.__isAdapterInjected=!0,function(){e.addEventListener=function(a,b){e.document.addEventListener(a,b)},e.removeEventListener=function(a,b){e.document.removeEventListener(a,b)},e.canvas&&(e.canvas.addEventListener=e.addEventListener,e.canvas.removeEventListener=e.removeEventListener),f.sharedCanvas&&(sharedCanvas.addEventListener=e.addEventListener,sharedCanvas.removeEventListener=e.removeEventListener);var a=wx.getSystemInfoSync(),b=a.platform;if('undefined'==typeof __devtoolssubcontext&&'devtools'===b){for(var c in e){var d=Object.getOwnPropertyDescriptor(f,c);d&&!0!==d.configurable||Object.defineProperty(window,c,{value:e[c]})}for(var g in e.document){var h=Object.getOwnPropertyDescriptor(f.document,g);h&&!0!==h.configurable||Object.defineProperty(f.document,g,{value:e.document[g]})}window.parent=window}else{for(var i in e)f[i]=e[i];f.window=e,window=f,window.top=window.parent=window}}())},function(a,b,c){'use strict';function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,'__esModule',{value:!0}),b.cancelAnimationFrame=b.requestAnimationFrame=b.clearInterval=b.clearTimeout=b.setInterval=b.setTimeout=b.canvas=b.location=b.localStorage=b.HTMLElement=b.FileReader=b.Audio=b.Image=b.WebSocket=b.XMLHttpRequest=b.navigator=b.document=void 0;var e=c(2);Object.keys(e).forEach(function(a){'default'===a||'__esModule'===a||Object.defineProperty(b,a,{enumerable:!0,get:function(){return e[a]}})});var f=c(3);Object.keys(f).forEach(function(a){'default'===a||'__esModule'===a||Object.defineProperty(b,a,{enumerable:!0,get:function(){return f[a]}})});var g=c(9),h=d(g),i=c(17),j=c(10),k=d(j),l=c(18),m=d(l),n=c(19),o=d(n),p=c(20),q=d(p),r=c(11),s=d(r),t=c(12),u=d(t),v=c(21),w=d(v),x=c(4),y=d(x),z=c(22),A=d(z),B=c(23),C=d(B);b.document=k.default,b.navigator=m.default,b.XMLHttpRequest=o.default,b.WebSocket=q.default,b.Image=s.default,b.Audio=u.default,b.FileReader=w.default,b.HTMLElement=y.default,b.localStorage=A.default,b.location=C.default;var D=(0,i.isSubContext)()?void 0:new h.default;b.canvas=D,b.setTimeout=setTimeout,b.setInterval=setInterval,b.clearTimeout=clearTimeout,b.clearInterval=clearInterval,b.requestAnimationFrame=requestAnimationFrame,b.cancelAnimationFrame=cancelAnimationFrame},function(a,b){'use strict';Object.defineProperty(b,'__esModule',{value:!0});var c=wx.getSystemInfoSync(),d=c.screenWidth,e=c.screenHeight,f=c.devicePixelRatio,g=b.innerWidth=d,h=b.innerHeight=e;b.devicePixelRatio=f;var i=b.screen={availWidth:g,availHeight:h},j=b.performance={now:function(){return Date.now()/1e3}},k=b.ontouchstart=null,l=b.ontouchmove=null,m=b.ontouchend=null},function(a,b,c){'use strict';function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function e(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function f(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,'__esModule',{value:!0}),b.HTMLCanvasElement=b.HTMLImageElement=void 0;var g=c(4),h=function(a){return a&&a.__esModule?a:{default:a}}(g),i=b.HTMLImageElement=function(a){function b(){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,'img'))}return f(b,a),b}(h.default),j=b.HTMLCanvasElement=function(a){function b(){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,'canvas'))}return f(b,a),b}(h.default)},function(a,b,c){'use strict';function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function e(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function f(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,'__esModule',{value:!0});var g=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(5),i=function(a){return a&&a.__esModule?a:{default:a}}(h),j=c(8),k=c(2),l=function(a){function b(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'';d(this,b);var c=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.className='',c.childern=[],c.style={width:k.innerWidth+'px',height:k.innerHeight+'px'},c.insertBefore=j.noop,c.innerHTML='',c.tagName=a.toUpperCase(),c}var c=Number.isNaN;return f(b,a),g(b,[{key:'setAttribute',value:function(a,b){this[a]=b}},{key:'getAttribute',value:function(a){return this[a]}},{key:'getBoundingClientRect',value:function(){return{top:0,left:0,width:k.innerWidth,height:k.innerHeight}}},{key:'focus',value:function(){}},{key:'clientWidth',get:function(){var a=parseInt(this.style.fontSize,10)*this.innerHTML.length;return c(a)?0:a}},{key:'clientHeight',get:function(){var a=parseInt(this.style.fontSize,10);return c(a)?0:a}}]),b}(i.default);b.default=l},function(a,b,c){'use strict';function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function e(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function f(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,'__esModule',{value:!0});var g=c(6),h=function(a){return a&&a.__esModule?a:{default:a}}(g),i=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.className='',a.children=[],a}return f(b,a),b}(h.default);b.default=i},function(a,b,c){'use strict';function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function e(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function f(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,'__esModule',{value:!0});var g=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(7),i=function(a){return a&&a.__esModule?a:{default:a}}(h),j=function(a){function b(){d(this,b);var a=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return a.childNodes=[],a}return f(b,a),g(b,[{key:'appendChild',value:function(a){if(a instanceof b)this.childNodes.push(a);else throw new TypeError('Failed to executed \'appendChild\' on \'Node\': parameter 1 is not of type \'Node\'.')}},{key:'cloneNode',value:function(){var a=Object.create(this);return Object.assign(a,this),a}},{key:'removeChild',value:function(a){var b=this.childNodes.findIndex(function(b){return b===a});return-1<b?this.childNodes.splice(b,1):null}}]),b}(i.default);b.default=j},function(a,b){'use strict';function c(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(b,'__esModule',{value:!0});var d=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=new WeakMap,f=function(){function a(){c(this,a),e.set(this,{})}return d(a,[{key:'addEventListener',value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},d=e.get(this);d||(d={},e.set(this,d)),d[a]||(d[a]=[]),d[a].push(b),c.capture&&console.warn('EventTarget.addEventListener: options.capture is not implemented.'),c.once&&console.warn('EventTarget.addEventListener: options.once is not implemented.'),c.passive&&console.warn('EventTarget.addEventListener: options.passive is not implemented.')}},{key:'removeEventListener',value:function(a,b){var c=e.get(this)[a];if(c&&0<c.length)for(var d=c.length;d--;0<d)if(c[d]===b){c.splice(d,1);break}}},{key:'dispatchEvent',value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=e.get(this)[a.type];if(b)for(var c=0;c<b.length;c++)b[c](a)}}]),a}();b.default=f},function(a,b){'use strict';Object.defineProperty(b,'__esModule',{value:!0}),b.noop=function(){},b.isSubContext=function(){return'undefined'!=typeof GameGlobal&&!0===GameGlobal.__isSubContext}},function(a,b,c){'use strict';function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,'__esModule',{value:!0}),b.default=function(){var a=wx.createCanvas();a.type='canvas',a.__proto__.__proto__=new g.default('canvas');a.getContext;return a.getBoundingClientRect=function(){var a={top:0,left:0,width:window.innerWidth,height:window.innerHeight};return a},a};var e=c(3),f=c(4),g=d(f),h=c(10),i=d(h)},function(a,b,c){'use strict';function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,'__esModule',{value:!0});var e=c(1),f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(e),g=c(4),h=d(g),i=c(11),j=d(i),k=c(12),l=d(k),m=c(9),n=d(m);c(15);var o={},p={readyState:'complete',visibilityState:'visible',documentElement:f,hidden:!1,style:{},location:f.location,ontouchstart:null,ontouchmove:null,ontouchend:null,head:new h.default('head'),body:new h.default('body'),createElement:function(a){if('canvas'===a)return new n.default;return'audio'===a?new l.default:'img'===a?new j.default:new h.default(a)},getElementById:function(a){return a===f.canvas.id?f.canvas:null},getElementsByTagName:function(a){if('head'===a)return[p.head];return'body'===a?[p.body]:'canvas'===a?[f.canvas]:[]},querySelector:function(a){if('head'===a)return p.head;return'body'===a?p.body:'canvas'===a?f.canvas:a==='#'+f.canvas.id?f.canvas:null},querySelectorAll:function(a){if('head'===a)return[p.head];return'body'===a?[p.body]:'canvas'===a?[f.canvas]:[]},addEventListener:function(a,b){o[a]||(o[a]=[]),o[a].push(b)},removeEventListener:function(a,b){var c=o[a];if(c&&0<c.length)for(var d=c.length;d--;0<d)if(c[d]===b){c.splice(d,1);break}},dispatchEvent:function(a){var b=o[a.type];if(b)for(var c=0;c<b.length;c++)b[c](a)}};b.default=p},function(a,b){'use strict';Object.defineProperty(b,'__esModule',{value:!0}),b.default=function(){var a=wx.createImage();return a}},function(a,b,c){'use strict';function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function e(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function f(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,'__esModule',{value:!0});var g=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(13),i=function(a){return a&&a.__esModule?a:{default:a}}(h),j=c(8),k=0,l=2,m=4,n=new WeakMap,o=new WeakMap,p=new WeakMap,q=new WeakMap,r=function(a){function b(a){d(this,b);var c=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));if(c.HAVE_NOTHING=k,c.HAVE_METADATA=1,c.HAVE_CURRENT_DATA=l,c.HAVE_FUTURE_DATA=3,c.HAVE_ENOUGH_DATA=m,c.readyState=k,(0,j.isSubContext)())return console.warn('HTMLAudioElement is not supported in SubContext.'),e(c);o.set(c,'');var f=wx.createInnerAudioContext();return n.set(c,f),f.onCanplay(function(){c.dispatchEvent({type:'load'}),c.dispatchEvent({type:'loadend'}),c.dispatchEvent({type:'canplay'}),c.dispatchEvent({type:'canplaythrough'}),c.dispatchEvent({type:'loadedmetadata'}),c.readyState=l}),f.onPlay(function(){c.dispatchEvent({type:'play'})}),f.onPause(function(){c.dispatchEvent({type:'pause'})}),f.onEnded(function(){c.dispatchEvent({type:'ended'}),c.readyState=m}),f.onError(function(){c.dispatchEvent({type:'error'})}),a&&(n.get(c).src=a),c}return f(b,a),g(b,[{key:'load',value:function(){console.warn('HTMLAudioElement.load() is not implemented.')}},{key:'play',value:function(){(0,j.isSubContext)()||n.get(this).play()}},{key:'pause',value:function(){(0,j.isSubContext)()||n.get(this).pause()}},{key:'canPlayType',value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'';return'string'==typeof a?-1<a.indexOf('audio/mpeg')||a.indexOf('audio/mp4')?'probably':'':''}},{key:'cloneNode',value:function(){var a=new b;return(0,j.isSubContext)()||(a.loop=n.get(this).loop,a.autoplay=n.get(this).loop,a.src=this.src),a}},{key:'currentTime',get:function(){return(0,j.isSubContext)()?0:n.get(this).currentTime},set:function(a){(0,j.isSubContext)()||n.get(this).seek(a)}},{key:'src',get:function(){return o.get(this)},set:function(a){o.set(this,a),(0,j.isSubContext)()||(n.get(this).src=a)}},{key:'loop',get:function(){return!(0,j.isSubContext)()&&n.get(this).loop},set:function(a){(0,j.isSubContext)()||(n.get(this).loop=a)}},{key:'autoplay',get:function(){return!(0,j.isSubContext)()&&n.get(this).autoplay},set:function(a){(0,j.isSubContext)()||(n.get(this).autoplay=a)}},{key:'paused',get:function(){return!(0,j.isSubContext)()&&n.get(this).paused}}]),b}(i.default);b.default=r},function(a,b,c){'use strict';function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function e(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function f(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,'__esModule',{value:!0});var g=c(14),h=function(a){return a&&a.__esModule?a:{default:a}}(g),i=function(a){function b(){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,'audio'))}return f(b,a),b}(h.default);b.default=i},function(a,b,c){'use strict';function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function e(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function f(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,'__esModule',{value:!0});var g=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=c(4),i=function(a){return a&&a.__esModule?a:{default:a}}(h),j=function(a){function b(a){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return f(b,a),g(b,[{key:'addTextTrack',value:function(){}},{key:'captureStream',value:function(){}},{key:'fastSeek',value:function(){}},{key:'load',value:function(){}},{key:'pause',value:function(){}},{key:'play',value:function(){}}]),b}(i.default);b.default=j},function(a,b,c){'use strict';c(16)},function(a,b,c){'use strict';function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function e(a){return function(b){var c=new k(a);c.touches=b.touches,c.targetTouches=Array.prototype.slice.call(b.touches),c.changedTouches=b.changedTouches,c.timeStamp=b.timeStamp,i.default.dispatchEvent(c)}}var f=c(1),g=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(f),h=c(10),i=function(a){return a&&a.__esModule?a:{default:a}}(h),j=c(8),k=function a(b){d(this,a),this.target=g.canvas,this.currentTarget=g.canvas,this.touches=[],this.targetTouches=[],this.changedTouches=[],this.preventDefault=j.noop,this.stopPropagation=j.noop,this.type=b};wx.onTouchStart(e('touchstart')),wx.onTouchMove(e('touchmove')),wx.onTouchEnd(e('touchend')),wx.onTouchCancel(e('touchcancel'))},function(a,b){'use strict';Object.defineProperty(b,'__esModule',{value:!0}),b.noop=function(){},b.isSubContext=function(){return'undefined'!=typeof GameGlobal&&!0===GameGlobal.__isSubContext}},function(a,b,c){'use strict';Object.defineProperty(b,'__esModule',{value:!0});var d=c(8),e=wx.getSystemInfoSync(),f=e.platform,g={platform:f,language:'zh-cn',appVersion:'5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1',userAgent:'Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E8301 MicroMessenger/6.6.0 MiniGame NetType/WIFI Language/zh_CN',onLine:!0,geolocation:{getCurrentPosition:d.noop,watchPosition:d.noop,clearWatch:d.noop}};b.default=g},function(a,b){'use strict';function c(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function d(a){if('function'==typeof this['on'+a]){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];this['on'+a].apply(this,c)}}function e(a){this.readyState=a,d.call(this,'readystatechange')}Object.defineProperty(b,'__esModule',{value:!0});var f=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=new WeakMap,h=new WeakMap,i=new WeakMap,j=new WeakMap,k=new WeakMap,l=function(){function a(){c(this,a),this.onabort=null,this.onerror=null,this.onload=null,this.onloadstart=null,this.onprogress=null,this.ontimeout=null,this.onloadend=null,this.onreadystatechange=null,this.readyState=0,this.response=null,this.responseText=null,this.responseType='',this.responseXML=null,this.status=0,this.statusText='',this.upload={},this.withCredentials=!1,i.set(this,{"content-type":'application/x-www-form-urlencoded'}),j.set(this,{})}return f(a,[{key:'abort',value:function(){var a=k.get(this);a&&a.abort()}},{key:'getAllResponseHeaders',value:function(){var a=j.get(this);return Object.keys(a).map(function(b){return b+': '+a[b]}).join('\n')}},{key:'getResponseHeader',value:function(a){return j.get(this)[a]}},{key:'open',value:function(b,c){h.set(this,b),g.set(this,c),e.call(this,a.OPENED)}},{key:'overrideMimeType',value:function(){}},{key:'send',value:function(){var b=this,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:'';if(this.readyState!==a.OPENED)throw new Error('Failed to execute \'send\' on \'XMLHttpRequest\': The object\'s state must be OPENED.');else wx.request({data:c,url:g.get(this),method:h.get(this),header:i.get(this),responseType:this.responseType,success:function(c){var f=c.data,g=c.statusCode,h=c.header;if('string'!=typeof f&&!(f instanceof ArrayBuffer))try{f=JSON.stringify(f)}catch(a){f=f}if(b.status=g,j.set(b,h),d.call(b,'loadstart'),e.call(b,a.HEADERS_RECEIVED),e.call(b,a.LOADING),b.response=f,f instanceof ArrayBuffer){b.responseText='';for(var k=new Uint8Array(f),l=k.byteLength,m=0;m<l;m++)b.responseText+=String.fromCharCode(k[m])}else b.responseText=f;e.call(b,a.DONE),d.call(b,'load'),d.call(b,'loadend')},fail:function(a){var c=a.errMsg;-1===c.indexOf('abort')?d.call(b,'error',c):d.call(b,'abort'),d.call(b,'loadend')}})}},{key:'setRequestHeader',value:function(a,b){var c=i.get(this);c[a]=b,i.set(this,c)}}]),a}();l.UNSEND=0,l.OPENED=1,l.HEADERS_RECEIVED=2,l.LOADING=3,l.DONE=4,b.default=l},function(a,b,c){'use strict';function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(b,'__esModule',{value:!0});var e=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(8),g=new WeakMap,h=function(){function a(b){var c=this,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(d(this,a),this.binaryType='',this.bufferedAmount=0,this.extensions='',this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this.protocol='',this.readyState=3,(0,f.isSubContext)())throw new Error('WebSocket is not supported in SubContext.');if('string'!=typeof b||!/(^ws:\/\/)|(^wss:\/\/)/.test(b))throw new TypeError('Failed to construct \'WebSocket\': The URL \''+b+'\' is invalid');this.url=b,this.readyState=a.CONNECTING;var h=wx.connectSocket({url:b,protocols:Array.isArray(e)?e:[e]});return g.set(this,h),h.onClose(function(b){c.readyState=a.CLOSED,'function'==typeof c.onclose&&c.onclose(b)}),h.onMessage(function(a){'function'==typeof c.onmessage&&c.onmessage(a)}),h.onOpen(function(){c.readyState=a.OPEN,'function'==typeof c.onopen&&c.onopen()}),h.onError(function(a){'function'==typeof c.onerror&&c.onerror(new Error(a.errMsg))}),this}return e(a,[{key:'close',value:function(b,c){this.readyState=a.CLOSING;var d=g.get(this);d.close({code:b,reason:c})}},{key:'send',value:function(a){if('string'!=typeof a&&!(a instanceof ArrayBuffer))throw new TypeError('Failed to send message: The data '+a+' is invalid');var b=g.get(this);b.send({data:a})}}]),a}();h.CONNECTING=0,h.OPEN=1,h.CLOSING=2,h.CLOSED=3,b.default=h},function(a,b,c){'use strict';function d(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}Object.defineProperty(b,'__esModule',{value:!0});var e=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(8),g=function(){function a(){d(this,a)}return e(a,[{key:'construct',value:function(){if((0,f.isSubContext)())throw new Error('FileReader is not supported in SubContext.')}}]),a}();b.default=g},function(a,b,c){'use strict';Object.defineProperty(b,'__esModule',{value:!0});var d=c(8),e={get length(){var a=wx.getStorageInfoSync(),b=a.keys;return b.length},key:function(a){var b=wx.getStorageInfoSync(),c=b.keys;return c[a]},getItem:function(a){return wx.getStorageSync(a)},setItem:function(a,b){return wx.setStorageSync(a,b)},removeItem:function(a){wx.removeStorageSync(a)},clear:function(){wx.clearStorageSync()}},f={},g={get length(){var a=Object.keys(f);return a.length},key:function(a){var b=Object.keys(f);return b[a]},getItem:function(a){return f[a]},setItem:function(a,b){f[a]=b},removeItem:function(a){delete f[a]},clear:function(){f={}}},h=(0,d.isSubContext)()?g:e;b.default=h},function(a,b){'use strict';Object.defineProperty(b,'__esModule',{value:!0});b.default={href:'game.js',reload:function(){}}}])})(); 
 			});
 		define("src/subContext/sub.js", function(require, module, exports){ 			
(function(){require('./weapp-adapter-subcontext.js'),require('./sub_mini.js'),require('./subutils.js'),require('./FriendRankSubLayer.js'),require('./FriendPKSubLayer.js'),require('./GroupRankListItem.js'),require('./GroupRankSubScene.js'),sub={},sub.postMessage=function(a,b,c){console.log('-------postMessage',a,c),wx.postMessage({content:a,openId:b,action:'invite'})},sub.createHead=function(a,b){var c=UrlCachedSprite.create();return c.setSpriteFrame('gRank_head_0.png'),c.setScale(sub.contentScale*b/96),c.setUrl(a),c.startLoadWhenVisible(!1),c},sub.isMe=function(a){return sub.selfData&&a&&sub.selfData.nickName==a.nickName&&sub.selfData.avatarUrl==a.avatarUrl},sub.playerTitleName=['\u6D88\u9664\u5C0F\u767D','\u6D88\u9664\u840C\u65B0','\u6D88\u9664\u65B0\u661F','\u6D88\u9664\u80FD\u624B','\u6D88\u9664\u8FBE\u4EBA','\u6D88\u9664\u5723\u624B','\u6D88\u9664\u5927\u795E','\u6D88\u9664\u738B\u8005'],sub.getTitleName=function(a){if(17000<a)return this.playerTitleName[7];return 13000<a?this.playerTitleName[6]:1e4<a?this.playerTitleName[5]:7e3<a?this.playerTitleName[4]:5e3<a?this.playerTitleName[3]:3e3<a?this.playerTitleName[2]:1500<a?this.playerTitleName[1]:this.playerTitleName[0]},sub.logicDataBuff=function(a){if(a)for(var b,c=0;c<a.length;++c)b=a[c],b.data=JSON.parse(b.buffer||'{}'),b.data.comScore=b.data.comScore||0},sub.getFriendInfo=function(a){if(this.friends)for(var b,c=0;c<this.friends.length;++c)if(b=this.friends[c],b.openId==a)return b;if(this.groups)for(var b,c=0;c<this.groups.length;++c)if(b=this.groups[c],b.openId==a)return b;return null},sub.sortByRank=function(c,a){return c.data.rank<a.data.rank?1:c.data.rank==a.data.rank?0:-1},sub.sortByScore=function(c,a){return c.data.comScore<a.data.comScore?1:c.data.comScore==a.data.comScore?0:-1},sub.sortRankList=function(a,c){a.sort(function(d,a){if(2==c){var b=sub.sortByRank(d,a);return 0==b?sub.sortByScore(d,a):b}if(3==c){var b=sub.sortByScore(d,a);return 0==b?sub.sortByRank(d,a):b}return 0})},sub.runNoneScene=function(){var a=new cc.Scene.create;a.init(),cc.director.runScene(a)},sub.getFriendUserGameData=function(a){return this.friends?void(a&&a(this.friends)):void(sub.runNoneScene(),wx.getFriendUserGameData({success:function(b){console.log('wx.getFriendUserGameData success'),console.log(b.data),sub.friends=b.data,sub.logicDataBuff(b.data),a&&a(b.data)},fail:function(b){console.log('wx.getFriendUserGameData fail'),console.log(b.err_code),a&&a()}}))},sub.getGroupUserGameData=function(a){return this.groups?void(a&&a(this.groups)):void(sub.runNoneScene(),wx.getGroupUserGameData({success:function(b){console.log('getGroupUserGameData success'),console.log(b),sub.groups=b.data,sub.logicDataBuff(b.data),a&&a(b.data)},fail:function(b){console.log('getGroupUserGameData fail'),console.log('errMsg:',b.errMsg),console.log('errCode:',b.errCode),a&&a(!1)}}))},sub.openGroupRank=function(){this.getGroupUserGameData(function(a){console.log('--------\u6253\u5F00\u7FA4\u6392\u884C',a);var b=GroupRankSubScene.create();cc.director.getRunningScene()!=b&&cc.director.runScene(b)})},sub.openFriendRank=function(a){this.getFriendUserGameData(function(b){console.log('--------\u6253\u5F00\u597D\u53CB\u6392\u884C',b,a);var c=FriendRankSubLayer.create();cc.director.getRunningScene()!=c&&cc.director.runScene(c),c.showTab(b,a,sub.selfId)})},sub.openFriendPK=function(a){this.getFriendUserGameData(function(){console.log('--------\u6253\u5F00\u597D\u53CBPK',sub.openId,sub.selfId);var b=FriendPKSubLayer.create();cc.director.getRunningScene()!=b&&cc.director.runScene(b),b.showPK(sub.openId,sub.selfId,a)})},sub.initRes=function(a){if(a){if(a.cache)for(var b in a.cache)cc.loader.cache[b]=a.cache[b];if(a.res){for(var b in cc.loader.urlAliases=cc.loader.urlAliases||{},a.res)cc.loader.urlAliases[b]=a.res[b];console.log(cc.loader.urlAliases)}a.size&&cc.view.setDesignResolutionSize(a.size.width,a.size.height,cc.ResolutionPolicy.FIXED_HEIGHT),a.offest&&(cc.view.setTouchOffest(a.offest),cc.view.convertToLocationInView=function(b,c,d){var e=a.offest.x*d.width/720,f=a.offest.y*d.height/1280,g=720/d.width*(b-d.left-e),h=1280/d.height*(d.top+d.height-c-f);return this._isRotated?{x:this._viewPortRect.width-h,y:g}:{x:g,y:h}}),this.openId=a.openId,this.selfId=a.selfId}},wx.onMessage(function(a){if(90==a.id)return void cc.director.mainLoop();console.log('\u6536\u5230\u6D88\u606F',a),sub.initRes(a);99==a.id?(cc.game.pause(),sub.groups=null,sub.friends=null):cc.game.resume(),1==a.id?sub.openGroupRank():2==a.id?sub.openFriendRank(2):3==a.id?sub.openFriendRank(3):4==a.id?sub.openFriendPK(a.tab):97==a.id?(cc.director.setContentScaleFactor(a.scale),sub.contentScale=a.scale):98==a.id?(sub.selfData=a.data,sub.selfData.data={rank:0,comScore:0,newUser:!0}):100==a.id?subutils.drawImage(sub.groups[a.index].avatarUrl,a.size.width,a.size.height):101==a.id&&subutils.drawTTF(sub.groups[a.index].nickName,a.size.width,a.size.height)}),sub.runNoneScene(),cc.game.pause()})(); 
 			}); 	require("src/subContext/sub.js");
 	