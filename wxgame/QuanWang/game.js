	define("global/config.js", function(require, module, exports){ 			
"use strict";var e={sourcePath:"https://game.gtimg.cn/images/kofmy/cp/a20171001kof/kof-source/",sourceDomain:"https://game.gtimg.cn",urlPrefix:"https://app.ingame.qq.com/kof/wxgame/",urlDomain:"https://app.ingame.qq.com/",font:"Helvetica",dev:!1};module.exports=e; 
 			});
 		define("global/util.js", function(require, module, exports){ 			
"use strict";require("./config.js").urlPrefix;var e={fetch:function(e){return new Promise(function(r,t){wx.request({url:e,success:function(e){r(e.data)},fail:function(e){t(e)}})})},formatParam:function(e){var r=[];for(var t in e)!function(t){"[object Array]"===Object.prototype.toString.call(e[t])?e[t].forEach(function(e){r.push(t+"="+encodeURIComponent(e))}):r.push(t+"="+encodeURIComponent(e[t]))}(t);return r.join("&")},loadImage:function(e){var r=this;if(!e)return Promise.reject();if("string"==typeof e){var t=e;(e=wx.createImage()).src=t}else if(void 0!==e.length){var n=[].map.call(e,function(e){return r.loadImage(e).catch(function(e){return e})});return Promise.all(n).then(function(e){var r=e.filter(function(e){return e.width});return r.length===e.length?r:Promise.reject({loaded:r,errored:e.filter(function(e){return!e.width})})})}var o=new Promise(function(r,t){function n(){e.width?r(e):t(e),e.removeEventListener("load",n),e.removeEventListener("error",n)}e.width?r(e):e.complete?t(e):(e.addEventListener("load",n),e.addEventListener("error",n))});return o.image=e,o},preload:function(e){e.forEach(function(e){wx.createImage().src=e})},getEaseSpeed:function(e,r){var t=Math.abs(r-e),n=Math.sqrt(1.4*t);return n<1&&(n=1),n}};module.exports=e; 
 			});
 		define("lib/base64.js", function(require, module, exports){ 			
"use strict";var r={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeArrayBuffer:function(r){var e=r.length/4*3,t=new ArrayBuffer(e);return this.decode(r,t),t},removePaddingChars:function(r){return 64==this._keyStr.indexOf(r.charAt(r.length-1))?r.substring(0,r.length-1):r},decode:function(r,e){r=this.removePaddingChars(r),r=this.removePaddingChars(r);var t,n,i,a,h,d,s,c=parseInt(r.length/4*3,10),f=0,o=0;for(t=e?new Uint8Array(e):new Uint8Array(c),r=r.replace(/[^A-Za-z0-9\+\/\=]/g,""),f=0;f<c;f+=3)n=this._keyStr.indexOf(r.charAt(o++))<<2|(h=this._keyStr.indexOf(r.charAt(o++)))>>4,i=(15&h)<<4|(d=this._keyStr.indexOf(r.charAt(o++)))>>2,a=(3&d)<<6|(s=this._keyStr.indexOf(r.charAt(o++))),t[f]=n,64!=d&&(t[f+1]=i),64!=s&&(t[f+2]=a);return t}};module.exports=r; 
 			});
 		define("lib/easeljs-0.8.2.for.minapp.js", function(require, module, exports){ 			
"use strict";(t=t||{}).extend=function(t,e){function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},(t=t||{}).promote=function(t,e){var i=t.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(n){i[(e+="_")+"constructor"]=n.constructor;for(var s in n)i.hasOwnProperty(s)&&"function"==typeof n[s]&&(i[e+s]=n[s])}return t},(t=t||{}).indexOf=function(t,e){for(var i=0,n=t.length;i<n;i++)if(e===t[i])return i;return-1};t=t||{};!function(){function e(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var i=e.prototype;i.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},i.stopPropagation=function(){this.propagationStopped=!0},i.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},i.remove=function(){this.removed=!0},i.clone=function(){return new e(this.type,this.bubbles,this.cancelable)},i.set=function(t){for(var e in t)this[e]=t[e];return this},i.toString=function(){return"[Event (type="+this.type+")]"},t.Event=e}();t=t||{};!function(){function e(){this._listeners=null,this._captureListeners=null}var i=e.prototype;e.initialize=function(t){t.addEventListener=i.addEventListener,t.on=i.on,t.removeEventListener=t.off=i.removeEventListener,t.removeAllEventListeners=i.removeAllEventListeners,t.hasEventListener=i.hasEventListener,t.dispatchEvent=i.dispatchEvent,t._dispatchEvent=i._dispatchEvent,t.willTrigger=i.willTrigger},i.addEventListener=function(t,e,i){var n,s=(n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{})[t];return s&&this.removeEventListener(t,e,i),(s=n[t])?s.push(e):n[t]=[e],e},i.on=function(t,e,i,n,s,r){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,s),n&&t.remove()},r)},i.removeEventListener=function(t,e,i){var n=i?this._captureListeners:this._listeners;if(n){var s=n[t];if(s)for(var r=0,a=s.length;r<a;r++)if(s[r]==e){1==a?delete n[t]:s.splice(r,1);break}}},i.off=i.removeEventListener,i.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},i.dispatchEvent=function(e,i,n){if("string"==typeof e){var s=this._listeners;if(!(i||s&&s[e]))return!0;e=new t.Event(e,i,n)}else e.target&&e.clone&&(e=e.clone());try{e.target=this}catch(t){}if(e.bubbles&&this.parent){for(var r=this,a=[r];r.parent;)a.push(r=r.parent);var h,o=a.length;for(h=o-1;h>=0&&!e.propagationStopped;h--)a[h]._dispatchEvent(e,1+(0==h));for(h=1;h<o&&!e.propagationStopped;h++)a[h]._dispatchEvent(e,3)}else this._dispatchEvent(e,2);return!e.defaultPrevented},i.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},i.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},i.toString=function(){return"[EventDispatcher]"},i._dispatchEvent=function(t,e){var i,n=1==e?this._captureListeners:this._listeners;if(t&&n){var s=n[t.type];if(!s||!(i=s.length))return;try{t.currentTarget=this}catch(t){}try{t.eventPhase=e}catch(t){}t.removed=!1,s=s.slice();for(var r=0;r<i&&!t.immediatePropagationStopped;r++){var a=s[r];a.handleEvent?a.handleEvent(t):a(t),t.removed&&(this.off(t.type,a,1==e),t.removed=!1)}}},t.EventDispatcher=e}();t=t||{};!function(){function e(){throw"Ticker cannot be instantiated."}e.RAF_SYNCHED="synched",e.RAF="raf",e.TIMEOUT="timeout",e.useRAF=!1,e.timingMode=null,e.maxDelta=0,e.paused=!1,e.removeEventListener=null,e.removeAllEventListeners=null,e.dispatchEvent=null,e.hasEventListener=null,e._listeners=null,t.EventDispatcher.initialize(e),e._addEventListener=e.addEventListener,e.addEventListener=function(){return!e._inited&&e.init(),e._addEventListener.apply(e,arguments)},e._inited=!1,e._startTime=0,e._pausedTime=0,e._ticks=0,e._pausedTicks=0,e._interval=50,e._lastTime=0,e._times=null,e._tickTimes=null,e._timerId=null,e._raf=!0,e.setInterval=function(t){e._interval=t,e._inited&&e._setupTick()},e.getInterval=function(){return e._interval},e.setFPS=function(t){e.setInterval(1e3/t)},e.getFPS=function(){return 1e3/e._interval};try{Object.defineProperties(e,{interval:{get:e.getInterval,set:e.setInterval},framerate:{get:e.getFPS,set:e.setFPS}})}catch(t){console.log(t)}e.init=function(){e._inited||(e._inited=!0,e._times=[],e._tickTimes=[],e._startTime=e._getTime(),e._times.push(e._lastTime=0),e.interval=e._interval)},e.reset=function(){if(e._raf){var t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;t&&t(e._timerId)}else clearTimeout(e._timerId);e.removeAllEventListeners("tick"),e._timerId=e._times=e._tickTimes=null,e._startTime=e._lastTime=e._ticks=0,e._inited=!1},e.getMeasuredTickTime=function(t){var i=0,n=e._tickTimes;if(!n||n.length<1)return-1;t=Math.min(n.length,t||0|e.getFPS());for(var s=0;s<t;s++)i+=n[s];return i/t},e.getMeasuredFPS=function(t){var i=e._times;return!i||i.length<2?-1:(t=Math.min(i.length-1,t||0|e.getFPS()),1e3/((i[0]-i[t])/t))},e.setPaused=function(t){e.paused=t},e.getPaused=function(){return e.paused},e.getTime=function(t){return e._startTime?e._getTime()-(t?e._pausedTime:0):-1},e.getEventTime=function(t){return e._startTime?(e._lastTime||e._startTime)-(t?e._pausedTime:0):-1},e.getTicks=function(t){return e._ticks-(t?e._pausedTicks:0)},e._handleSynch=function(){e._timerId=null,e._setupTick(),e._getTime()-e._lastTime>=.97*(e._interval-1)&&e._tick()},e._handleRAF=function(){e._timerId=null,e._setupTick(),e._tick()},e._handleTimeout=function(){e._timerId=null,e._setupTick(),e._tick()},e._setupTick=function(){if(null==e._timerId){var t=e.timingMode||e.useRAF&&e.RAF_SYNCHED;if(t==e.RAF_SYNCHED||t==e.RAF){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(i)return e._timerId=i(t==e.RAF?e._handleRAF:e._handleSynch),void(e._raf=!0)}e._raf=!1,e._timerId=setTimeout(e._handleTimeout,e._interval)}},e._tick=function(){var i=e.paused,n=e._getTime(),s=n-e._lastTime;if(e._lastTime=n,e._ticks++,i&&(e._pausedTicks++,e._pausedTime+=s),e.hasEventListener("tick")){var r=new t.Event("tick"),a=e.maxDelta;r.delta=a&&s>a?a:s,r.paused=i,r.time=n,r.runTime=n-e._pausedTime,e.dispatchEvent(r)}for(e._tickTimes.unshift(e._getTime()-n);e._tickTimes.length>100;)e._tickTimes.pop();for(e._times.unshift(n);e._times.length>100;)e._times.pop()};var i=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);e._getTime=function(){return(i&&i.call(performance)||(new Date).getTime())-e._startTime},t.Ticker=e}();t=t||{};!function(){function e(){throw"UID cannot be instantiated"}e._nextID=0,e.get=function(){return e._nextID++},t.UID=e}();t=t||{};!function(){function e(t,e,i,n,s,r,a,h,o,l,c){this.Event_constructor(t,e,i),this.stageX=n,this.stageY=s,this.rawX=null==o?n:o,this.rawY=null==l?s:l,this.nativeEvent=r,this.pointerID=a,this.primary=!!h,this.relatedTarget=c}var i=t.extend(e,t.Event);i._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},i._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},i._get_isTouch=function(){return-1!==this.pointerID};try{Object.defineProperties(i,{localX:{get:i._get_localX},localY:{get:i._get_localY},isTouch:{get:i._get_isTouch}})}catch(t){}i.clone=function(){return new e(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},i.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},t.MouseEvent=t.promote(e,"Event")}();t=t||{};!function(){function e(t,e,i,n,s,r){this.setValues(t,e,i,n,s,r)}var i=e.prototype;e.DEG_TO_RAD=Math.PI/180,e.identity=null,i.setValues=function(t,e,i,n,s,r){return this.a=null==t?1:t,this.b=e||0,this.c=i||0,this.d=null==n?1:n,this.tx=s||0,this.ty=r||0,this},i.append=function(t,e,i,n,s,r){var a=this.a,h=this.b,o=this.c,l=this.d;return 1==t&&0==e&&0==i&&1==n||(this.a=a*t+o*e,this.b=h*t+l*e,this.c=a*i+o*n,this.d=h*i+l*n),this.tx=a*s+o*r+this.tx,this.ty=h*s+l*r+this.ty,this},i.prepend=function(t,e,i,n,s,r){var a=this.a,h=this.c,o=this.tx;return this.a=t*a+i*this.b,this.b=e*a+n*this.b,this.c=t*h+i*this.d,this.d=e*h+n*this.d,this.tx=t*o+i*this.ty+s,this.ty=e*o+n*this.ty+r,this},i.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty)},i.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty)},i.appendTransform=function(t,i,n,s,r,a,h,o,l){if(r%360)var c=r*e.DEG_TO_RAD,u=Math.cos(c),d=Math.sin(c);else u=1,d=0;return a||h?(a*=e.DEG_TO_RAD,h*=e.DEG_TO_RAD,this.append(Math.cos(h),Math.sin(h),-Math.sin(a),Math.cos(a),t,i),this.append(u*n,d*n,-d*s,u*s,0,0)):this.append(u*n,d*n,-d*s,u*s,t,i),(o||l)&&(this.tx-=o*this.a+l*this.c,this.ty-=o*this.b+l*this.d),this},i.prependTransform=function(t,i,n,s,r,a,h,o,l){if(r%360)var c=r*e.DEG_TO_RAD,u=Math.cos(c),d=Math.sin(c);else u=1,d=0;return(o||l)&&(this.tx-=o,this.ty-=l),a||h?(a*=e.DEG_TO_RAD,h*=e.DEG_TO_RAD,this.prepend(u*n,d*n,-d*s,u*s,0,0),this.prepend(Math.cos(h),Math.sin(h),-Math.sin(a),Math.cos(a),t,i)):this.prepend(u*n,d*n,-d*s,u*s,t,i),this},i.rotate=function(t){t*=e.DEG_TO_RAD;var i=Math.cos(t),n=Math.sin(t),s=this.a,r=this.b;return this.a=s*i+this.c*n,this.b=r*i+this.d*n,this.c=-s*n+this.c*i,this.d=-r*n+this.d*i,this},i.skew=function(t,i){return t*=e.DEG_TO_RAD,i*=e.DEG_TO_RAD,this.append(Math.cos(i),Math.sin(i),-Math.sin(t),Math.cos(t),0,0),this},i.scale=function(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this},i.translate=function(t,e){return this.tx+=this.a*t+this.c*e,this.ty+=this.b*t+this.d*e,this},i.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},i.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.tx,r=t*n-e*i;return this.a=n/r,this.b=-e/r,this.c=-i/r,this.d=t/r,this.tx=(i*this.ty-n*s)/r,this.ty=-(t*this.ty-e*s)/r,this},i.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},i.equals=function(t){return this.tx===t.tx&&this.ty===t.ty&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d},i.transformPoint=function(t,e,i){return i=i||{},i.x=t*this.a+e*this.c+this.tx,i.y=t*this.b+e*this.d+this.ty,i},i.decompose=function(t){null==t&&(t={}),t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var i=Math.atan2(-this.c,this.d),n=Math.atan2(this.b,this.a);return Math.abs(1-i/n)<1e-5?(t.rotation=n/e.DEG_TO_RAD,this.a<0&&this.d>=0&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=i/e.DEG_TO_RAD,t.skewY=n/e.DEG_TO_RAD),t},i.copy=function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)},i.clone=function(){return new e(this.a,this.b,this.c,this.d,this.tx,this.ty)},i.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},e.identity=new e,t.Matrix2D=e}();t=t||{};!function(){function e(t,e,i,n,s){this.setValues(t,e,i,n,s)}var i=e.prototype;i.setValues=function(e,i,n,s,r){return this.visible=null==e||!!e,this.alpha=null==i?1:i,this.shadow=n,this.compositeOperation=s,this.matrix=r||this.matrix&&this.matrix.identity()||new t.Matrix2D,this},i.append=function(t,e,i,n,s){return this.alpha*=e,this.shadow=i||this.shadow,this.compositeOperation=n||this.compositeOperation,this.visible=this.visible&&t,s&&this.matrix.appendMatrix(s),this},i.prepend=function(t,e,i,n,s){return this.alpha*=e,this.shadow=this.shadow||i,this.compositeOperation=this.compositeOperation||n,this.visible=this.visible&&t,s&&this.matrix.prependMatrix(s),this},i.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},i.clone=function(){return new e(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},t.DisplayProps=e}();t=t||{};!function(){function e(t,e){this.setValues(t,e)}var i=e.prototype;i.setValues=function(t,e){return this.x=t||0,this.y=e||0,this},i.copy=function(t){return this.x=t.x,this.y=t.y,this},i.clone=function(){return new e(this.x,this.y)},i.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},t.Point=e}();t=t||{};!function(){function e(t,e,i,n){this.setValues(t,e,i,n)}var i=e.prototype;i.setValues=function(t,e,i,n){return this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0,this},i.extend=function(t,e,i,n){return i=i||0,n=n||0,t+i>this.x+this.width&&(this.width=t+i-this.x),e+n>this.y+this.height&&(this.height=e+n-this.y),t<this.x&&(this.width+=this.x-t,this.x=t),e<this.y&&(this.height+=this.y-e,this.y=e),this},i.pad=function(t,e,i,n){return this.x-=e,this.y-=t,this.width+=e+n,this.height+=t+i,this},i.copy=function(t){return this.setValues(t.x,t.y,t.width,t.height)},i.contains=function(t,e,i,n){return i=i||0,n=n||0,t>=this.x&&t+i<=this.x+this.width&&e>=this.y&&e+n<=this.y+this.height},i.union=function(t){return this.clone().extend(t.x,t.y,t.width,t.height)},i.intersection=function(t){var i=t.x,n=t.y,s=i+t.width,r=n+t.height;return this.x>i&&(i=this.x),this.y>n&&(n=this.y),this.x+this.width<s&&(s=this.x+this.width),this.y+this.height<r&&(r=this.y+this.height),s<=i||r<=n?null:new e(i,n,s-i,r-n)},i.intersects=function(t){return t.x<=this.x+this.width&&this.x<=t.x+t.width&&t.y<=this.y+this.height&&this.y<=t.y+t.height},i.isEmpty=function(){return this.width<=0||this.height<=0},i.clone=function(){return new e(this.x,this.y,this.width,this.height)},i.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},t.Rectangle=e}();t=t||{};!function(){function e(t,e,i,n,s,r,a){t.addEventListener&&(this.target=t,this.overLabel=null==i?"over":i,this.outLabel=null==e?"out":e,this.downLabel=null==n?"down":n,this.play=s,this._isPressed=!1,this._isOver=!1,this._enabled=!1,t.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),r&&(a&&(r.actionsEnabled=!1,r.gotoAndStop&&r.gotoAndStop(a)),t.hitArea=r))}var i=e.prototype;i.setEnabled=function(t){if(t!=this._enabled){var e=this.target;this._enabled=t,t?(e.cursor="pointer",e.addEventListener("rollover",this),e.addEventListener("rollout",this),e.addEventListener("mousedown",this),e.addEventListener("pressup",this),e._reset&&(e.__reset=e._reset,e._reset=this._reset)):(e.cursor=null,e.removeEventListener("rollover",this),e.removeEventListener("rollout",this),e.removeEventListener("mousedown",this),e.removeEventListener("pressup",this),e.__reset&&(e._reset=e.__reset,delete e.__reset))}},i.getEnabled=function(){return this._enabled};try{Object.defineProperties(i,{enabled:{get:i.getEnabled,set:i.setEnabled}})}catch(t){}i.toString=function(){return"[ButtonHelper]"},i.handleEvent=function(t){var e,i=this.target,n=t.type;"mousedown"==n?(this._isPressed=!0,e=this.downLabel):"pressup"==n?(this._isPressed=!1,e=this._isOver?this.overLabel:this.outLabel):"rollover"==n?(this._isOver=!0,e=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,e=this._isPressed?this.overLabel:this.outLabel),this.play?i.gotoAndPlay&&i.gotoAndPlay(e):i.gotoAndStop&&i.gotoAndStop(e)},i._reset=function(){var t=this.paused;this.__reset(),this.paused=t},t.ButtonHelper=e}();t=t||{};!function(){function e(t,e,i,n){this.color=t||"black",this.offsetX=e||0,this.offsetY=i||0,this.blur=n||0}var i=e.prototype;e.identity=new e("transparent",0,0,0),i.toString=function(){return"[Shadow]"},i.clone=function(){return new e(this.color,this.offsetX,this.offsetY,this.blur)},t.Shadow=e}();t=t||{};!function(){function e(t){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(t)}var i=t.extend(e,t.EventDispatcher);i.getAnimations=function(){return this._animations.slice()};try{Object.defineProperties(i,{animations:{get:i.getAnimations}})}catch(t){}i.getNumFrames=function(t){if(null==t)return this._frames?this._frames.length:this._numFrames||0;var e=this._data[t];return null==e?0:e.frames.length},i.getAnimation=function(t){return this._data[t]},i.getFrame=function(t){var e;return this._frames&&(e=this._frames[t])?e:null},i.getFrameBounds=function(e,i){var n=this.getFrame(e);return n?(i||new t.Rectangle).setValues(-n.regX,-n.regY,n.rect.width,n.rect.height):null},i.toString=function(){return"[SpriteSheet]"},i.clone=function(){throw"SpriteSheet cannot be cloned."},i._parseData=function(e){var i,n,s,r;if(null!=e){if(this.framerate=e.framerate||0,e.images&&(n=e.images.length)>0)for(r=this._images=[],i=0;i<n;i++){var a=e.images[i];if("string"==typeof a){var h=a;(a=document.createElement("img")).src=h}r.push(a),a.getContext||a.naturalWidth||a.width||(this._loadCount++,this.complete=!1,function(t,e){a.onload=function(){t._handleImageLoad(e)}}(this,h),function(t,e){a.onerror=function(){t._handleImageError(e)}}(this,h))}if(null==e.frames);else if(Array.isArray(e.frames))for(this._frames=[],i=0,n=(r=e.frames).length;i<n;i++){var o=r[i];this._frames.push({image:this._images[o[4]?o[4]:0],rect:new t.Rectangle(o[0],o[1],o[2],o[3]),regX:o[5]||0,regY:o[6]||0})}else s=e.frames,this._frameWidth=s.width,this._frameHeight=s.height,this._regX=s.regX||0,this._regY=s.regY||0,this._spacing=s.spacing||0,this._margin=s.margin||0,this._numFrames=s.count,0==this._loadCount&&this._calculateFrames();if(this._animations=[],null!=(s=e.animations)){this._data={};var l;for(l in s){var c={name:l},u=s[l];if("number"==typeof u)r=c.frames=[u];else if(Array.isArray(u))if(1==u.length)c.frames=[u[0]];else for(c.speed=u[3],c.next=u[2],r=c.frames=[],i=u[0];i<=u[1];i++)r.push(i);else{c.speed=u.speed,c.next=u.next;var d=u.frames;r=c.frames="number"==typeof d?[d]:d.slice(0)}!0!==c.next&&void 0!==c.next||(c.next=l),(!1===c.next||r.length<2&&c.next==l)&&(c.next=null),c.speed||(c.speed=1),this._animations.push(l),this._data[l]=c}}}},i._handleImageLoad=function(t){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},i._handleImageError=function(e){var i=new t.Event("error");i.src=e,this.dispatchEvent(i),0==--this._loadCount&&this.dispatchEvent("complete")},i._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];var e=this._numFrames||1e5,i=0,n=this._frameWidth,s=this._frameHeight,r=this._spacing,a=this._margin;t:for(var h=0,o=this._images;h<o.length;h++)for(var l=o[h],c=l.width,u=l.height,d=a;d<=u-a-s;){for(var p=a;p<=c-a-n;){if(i>=e)break t;i++,this._frames.push({image:l,rect:new t.Rectangle(p,d,n,s),regX:this._regX,regY:this._regY}),p+=n+r}d+=s+r}this._numFrames=i}},t.SpriteSheet=t.promote(e,"EventDispatcher")}();t=t||{};!function(){function e(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var i=e.prototype,n=e;e.getRGB=function(t,e,i,n){return null!=t&&null==i&&(n=e,i=255&t,e=t>>8&255,t=t>>16&255),null==n?"rgb("+t+","+e+","+i+")":"rgba("+t+","+e+","+i+","+n+")"},e.getHSL=function(t,e,i,n){return null==n?"hsl("+t%360+","+e+"%,"+i+"%)":"hsla("+t%360+","+e+"%,"+i+"%,"+n+")"},e.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},e.STROKE_CAPS_MAP=["butt","round","square"],e.STROKE_JOINTS_MAP=["miter","round","bevel"];var s=t.createCanvas?t.createCanvas():document.createElement("canvas");s.getContext&&(e._ctx=s.getContext("2d"),s.width=s.height=1),i.getInstructions=function(){return this._updateInstructions(),this._instructions};try{Object.defineProperties(i,{instructions:{get:i.getInstructions}})}catch(t){}i.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},i.draw=function(t,e){this._updateInstructions();for(var i=this._instructions,n=this._storeIndex,s=i.length;n<s;n++)i[n].exec(t,e)},i.drawAsPath=function(t){this._updateInstructions();for(var e,i=this._instructions,n=this._storeIndex,s=i.length;n<s;n++)!1!==(e=i[n]).path&&e.exec(t)},i.moveTo=function(t,e){return this.append(new n.MoveTo(t,e),!0)},i.lineTo=function(t,e){return this.append(new n.LineTo(t,e))},i.arcTo=function(t,e,i,s,r){return this.append(new n.ArcTo(t,e,i,s,r))},i.arc=function(t,e,i,s,r,a){return this.append(new n.Arc(t,e,i,s,r,a))},i.quadraticCurveTo=function(t,e,i,s){return this.append(new n.QuadraticCurveTo(t,e,i,s))},i.bezierCurveTo=function(t,e,i,s,r,a){return this.append(new n.BezierCurveTo(t,e,i,s,r,a))},i.rect=function(t,e,i,s){return this.append(new n.Rect(t,e,i,s))},i.closePath=function(){return this._activeInstructions.length?this.append(new n.ClosePath):this},i.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},i.beginFill=function(t){return this._setFill(t?new n.Fill(t):null)},i.beginLinearGradientFill=function(t,e,i,s,r,a){return this._setFill((new n.Fill).linearGradient(t,e,i,s,r,a))},i.beginRadialGradientFill=function(t,e,i,s,r,a,h,o){return this._setFill((new n.Fill).radialGradient(t,e,i,s,r,a,h,o))},i.beginBitmapFill=function(t,e,i){return this._setFill(new n.Fill(null,i).bitmap(t,e))},i.endFill=function(){return this.beginFill()},i.setStrokeStyle=function(t,e,i,s,r){return this._updateInstructions(!0),this._strokeStyle=this.command=new n.StrokeStyle(t,e,i,s,r),this._stroke&&(this._stroke.ignoreScale=r),this._strokeIgnoreScale=r,this},i.setStrokeDash=function(t,e){return this._updateInstructions(!0),this._strokeDash=this.command=new n.StrokeDash(t,e),this},i.beginStroke=function(t){return this._setStroke(t?new n.Stroke(t):null)},i.beginLinearGradientStroke=function(t,e,i,s,r,a){return this._setStroke((new n.Stroke).linearGradient(t,e,i,s,r,a))},i.beginRadialGradientStroke=function(t,e,i,s,r,a,h,o){return this._setStroke((new n.Stroke).radialGradient(t,e,i,s,r,a,h,o))},i.beginBitmapStroke=function(t,e){return this._setStroke((new n.Stroke).bitmap(t,e))},i.endStroke=function(){return this.beginStroke()},i.curveTo=i.quadraticCurveTo,i.drawRect=i.rect,i.drawRoundRect=function(t,e,i,n,s){return this.drawRoundRectComplex(t,e,i,n,s,s,s,s)},i.drawRoundRectComplex=function(t,e,i,s,r,a,h,o){return this.append(new n.RoundRect(t,e,i,s,r,a,h,o))},i.drawCircle=function(t,e,i){return this.append(new n.Circle(t,e,i))},i.drawEllipse=function(t,e,i,s){return this.append(new n.Ellipse(t,e,i,s))},i.drawPolyStar=function(t,e,i,s,r,a){return this.append(new n.PolyStar(t,e,i,s,r,a))},i.append=function(t,e){return this._activeInstructions.push(t),this.command=t,e||(this._dirty=!0),this},i.decodePath=function(t){for(var i=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],n=[2,2,4,6,0],s=0,r=t.length,a=[],h=0,o=0,l=e.BASE_64;s<r;){var c=t.charAt(s),u=l[c],d=u>>3,p=i[d];if(!p||3&u)throw"bad path data (@"+s+"): "+c;var f=n[d];d||(h=o=0),a.length=0,s++;for(var _=2+(u>>2&1),m=0;m<f;m++){var g=l[t.charAt(s)],v=g>>5?-1:1;g=(31&g)<<6|l[t.charAt(s+1)],3==_&&(g=g<<6|l[t.charAt(s+2)]),g=v*g/10,m%2?h=g+=h:o=g+=o,a[m]=g,s+=_}p.apply(this,a)}return this},i.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},i.unstore=function(){return this._storeIndex=0,this},i.clone=function(){var t=new e;return t.command=this.command,t._stroke=this._stroke,t._strokeStyle=this._strokeStyle,t._strokeDash=this._strokeDash,t._strokeIgnoreScale=this._strokeIgnoreScale,t._fill=this._fill,t._instructions=this._instructions.slice(),t._commitIndex=this._commitIndex,t._activeInstructions=this._activeInstructions.slice(),t._dirty=this._dirty,t._storeIndex=this._storeIndex,t},i.toString=function(){return"[Graphics]"},i.mt=i.moveTo,i.lt=i.lineTo,i.at=i.arcTo,i.bt=i.bezierCurveTo,i.qt=i.quadraticCurveTo,i.a=i.arc,i.r=i.rect,i.cp=i.closePath,i.c=i.clear,i.f=i.beginFill,i.lf=i.beginLinearGradientFill,i.rf=i.beginRadialGradientFill,i.bf=i.beginBitmapFill,i.ef=i.endFill,i.ss=i.setStrokeStyle,i.sd=i.setStrokeDash,i.s=i.beginStroke,i.ls=i.beginLinearGradientStroke,i.rs=i.beginRadialGradientStroke,i.bs=i.beginBitmapStroke,i.es=i.endStroke,i.dr=i.drawRect,i.rr=i.drawRoundRect,i.rc=i.drawRoundRectComplex,i.dc=i.drawCircle,i.de=i.drawEllipse,i.dp=i.drawPolyStar,i.p=i.decodePath,i._updateInstructions=function(t){var i=this._instructions,n=this._activeInstructions,s=this._commitIndex;if(this._dirty&&n.length){i.length=s,i.push(e.beginCmd);var r=n.length,a=i.length;i.length=a+r;for(var h=0;h<r;h++)i[h+a]=n[h];this._fill&&i.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&(this._oldStrokeDash=this._strokeDash,i.push(this._strokeDash)),this._strokeStyle!==this._oldStrokeStyle&&(this._oldStrokeStyle=this._strokeStyle,i.push(this._strokeStyle)),i.push(this._stroke)),this._dirty=!1}t&&(n.length=0,this._commitIndex=i.length)},i._setFill=function(t){return this._updateInstructions(!0),this.command=this._fill=t,this},i._setStroke=function(t){return this._updateInstructions(!0),(this.command=this._stroke=t)&&(t.ignoreScale=this._strokeIgnoreScale),this},(n.LineTo=function(t,e){this.x=t,this.y=e}).prototype.exec=function(t){t.lineTo(this.x,this.y)},(n.MoveTo=function(t,e){this.x=t,this.y=e}).prototype.exec=function(t){t.moveTo(this.x,this.y)},(n.ArcTo=function(t,e,i,n,s){this.x1=t,this.y1=e,this.x2=i,this.y2=n,this.radius=s}).prototype.exec=function(t){t.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(n.Arc=function(t,e,i,n,s,r){this.x=t,this.y=e,this.radius=i,this.startAngle=n,this.endAngle=s,this.anticlockwise=!!r}).prototype.exec=function(t){t.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(n.QuadraticCurveTo=function(t,e,i,n){this.cpx=t,this.cpy=e,this.x=i,this.y=n}).prototype.exec=function(t){t.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(n.BezierCurveTo=function(t,e,i,n,s,r){this.cp1x=t,this.cp1y=e,this.cp2x=i,this.cp2y=n,this.x=s,this.y=r}).prototype.exec=function(t){t.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(n.Rect=function(t,e,i,n){this.x=t,this.y=e,this.w=i,this.h=n}).prototype.exec=function(t){t.rect(this.x,this.y,this.w,this.h)},(n.ClosePath=function(){}).prototype.exec=function(t){t.closePath()},(n.BeginPath=function(){}).prototype.exec=function(t){t.beginPath()},(i=(n.Fill=function(t,e){this.style=t,this.matrix=e}).prototype).exec=function(t){if(this.style){t.fillStyle=this.style;var e=this.matrix;e&&(t.save(),t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)),t.fill(),e&&t.restore()}},i.linearGradient=function(t,i,n,s,r,a){for(var h=this.style=e._ctx.createLinearGradient(n,s,r,a),o=0,l=t.length;o<l;o++)h.addColorStop(i[o],t[o]);return h.props={colors:t,ratios:i,x0:n,y0:s,x1:r,y1:a,type:"linear"},this},i.radialGradient=function(t,i,n,s,r,a,h,o){for(var l=this.style=e._ctx.createRadialGradient(n,s,r,a,h,o),c=0,u=t.length;c<u;c++)l.addColorStop(i[c],t[c]);return l.props={colors:t,ratios:i,x0:n,y0:s,r0:r,x1:a,y1:h,r1:o,type:"radial"},this},i.bitmap=function(t,i){return(t.naturalWidth||t.width||t.getContext||t.readyState>=2)&&((this.style=e._ctx.createPattern(t,i||"")).props={image:t,repetition:i,type:"bitmap"}),this},i.path=!1,(i=(n.Stroke=function(t,e){this.style=t,this.ignoreScale=e}).prototype).exec=function(t){this.style&&(t.strokeStyle=this.style,this.ignoreScale&&(t.save(),t.setTransform(1,0,0,1,0,0)),t.stroke(),this.ignoreScale&&t.restore())},i.linearGradient=n.Fill.prototype.linearGradient,i.radialGradient=n.Fill.prototype.radialGradient,i.bitmap=n.Fill.prototype.bitmap,i.path=!1,(i=(n.StrokeStyle=function(t,e,i,n,s){this.width=t,this.caps=e,this.joints=i,this.miterLimit=n,this.ignoreScale=s}).prototype).exec=function(t){t.lineWidth=null==this.width?"1":this.width,t.lineCap=null==this.caps?"butt":isNaN(this.caps)?this.caps:e.STROKE_CAPS_MAP[this.caps],t.lineJoin=null==this.joints?"miter":isNaN(this.joints)?this.joints:e.STROKE_JOINTS_MAP[this.joints],t.miterLimit=null==this.miterLimit?"10":this.miterLimit,t.ignoreScale=null!=this.ignoreScale&&this.ignoreScale},i.path=!1,(n.StrokeDash=function(t,e){this.segments=t,this.offset=e||0}).prototype.exec=function(t){t.setLineDash&&(t.setLineDash(this.segments||n.StrokeDash.EMPTY_SEGMENTS),t.lineDashOffset=this.offset||0)},n.StrokeDash.EMPTY_SEGMENTS=[],(n.RoundRect=function(t,e,i,n,s,r,a,h){this.x=t,this.y=e,this.w=i,this.h=n,this.radiusTL=s,this.radiusTR=r,this.radiusBR=a,this.radiusBL=h}).prototype.exec=function(t){var e=(o<l?o:l)/2,i=0,n=0,s=0,r=0,a=this.x,h=this.y,o=this.w,l=this.h,c=this.radiusTL,u=this.radiusTR,d=this.radiusBR,p=this.radiusBL;c<0&&(c*=i=-1),c>e&&(c=e),u<0&&(u*=n=-1),u>e&&(u=e),d<0&&(d*=s=-1),d>e&&(d=e),p<0&&(p*=r=-1),p>e&&(p=e),t.moveTo(a+o-u,h),t.arcTo(a+o+u*n,h-u*n,a+o,h+u,u),t.lineTo(a+o,h+l-d),t.arcTo(a+o+d*s,h+l+d*s,a+o-d,h+l,d),t.lineTo(a+p,h+l),t.arcTo(a-p*r,h+l+p*r,a,h+l-p,p),t.lineTo(a,h+c),t.arcTo(a-c*i,h-c*i,a+c,h,c),t.closePath()},(n.Circle=function(t,e,i){this.x=t,this.y=e,this.radius=i}).prototype.exec=function(t){t.arc(this.x,this.y,this.radius,0,2*Math.PI)},(n.Ellipse=function(t,e,i,n){this.x=t,this.y=e,this.w=i,this.h=n}).prototype.exec=function(t){var e=this.x,i=this.y,n=this.w,s=this.h,r=.5522848,a=n/2*r,h=s/2*r,o=e+n,l=i+s,c=e+n/2,u=i+s/2;t.moveTo(e,u),t.bezierCurveTo(e,u-h,c-a,i,c,i),t.bezierCurveTo(c+a,i,o,u-h,o,u),t.bezierCurveTo(o,u+h,c+a,l,c,l),t.bezierCurveTo(c-a,l,e,u+h,e,u)},(n.PolyStar=function(t,e,i,n,s,r){this.x=t,this.y=e,this.radius=i,this.sides=n,this.pointSize=s,this.angle=r}).prototype.exec=function(t){var e=this.x,i=this.y,n=this.radius,s=(this.angle||0)/180*Math.PI,r=this.sides,a=1-(this.pointSize||0),h=Math.PI/r;t.moveTo(e+Math.cos(s)*n,i+Math.sin(s)*n);for(var o=0;o<r;o++)s+=h,1!=a&&t.lineTo(e+Math.cos(s)*n*a,i+Math.sin(s)*n*a),s+=h,t.lineTo(e+Math.cos(s)*n,i+Math.sin(s)*n);t.closePath()},e.beginCmd=new n.BeginPath,t.Graphics=e}();t=t||{};!function(){function e(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.cacheID=0,this.id=t.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._cacheOffsetX=0,this._cacheOffsetY=0,this._filterOffsetX=0,this._filterOffsetY=0,this._cacheScale=1,this._cacheDataURLID=0,this._cacheDataURL=null,this._props=new t.DisplayProps,this._rectangle=new t.Rectangle,this._bounds=null}var i=t.extend(e,t.EventDispatcher);e._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],e.suppressCrossDomainErrors=!1,e._snapToPixelEnabled=!1;var n=t.createCanvas?t.createCanvas():document.createElement("canvas");n.getContext&&(e._hitTestCanvas=n,e._hitTestContext=n.getContext("2d"),n.width=n.height=1),e._nextCacheID=1,i.getStage=function(){for(var e=this,i=t.Stage;e.parent;)e=e.parent;return e instanceof i?e:null};try{Object.defineProperties(i,{stage:{get:i.getStage}})}catch(t){}i.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},i.draw=function(t,e){var i=this.cacheCanvas;if(e||!i)return!1;var n=this._cacheScale;return t.drawImage(i,this._cacheOffsetX+this._filterOffsetX,this._cacheOffsetY+this._filterOffsetY,i.width/n,i.height/n),!0},i.updateContext=function(t){var i=this,n=i.mask,s=i._props.matrix;n&&n.graphics&&!n.graphics.isEmpty()&&(n.getMatrix(s),t.transform(s.a,s.b,s.c,s.d,s.tx,s.ty),n.graphics.drawAsPath(t),t.clip(),s.invert(),t.transform(s.a,s.b,s.c,s.d,s.tx,s.ty)),this.getMatrix(s);var r=s.tx,a=s.ty;e._snapToPixelEnabled&&i.snapToPixel&&(r=r+(r<0?-.5:.5)|0,a=a+(a<0?-.5:.5)|0),t.transform(s.a,s.b,s.c,s.d,r,a),t.globalAlpha*=i.alpha,i.compositeOperation&&(t.globalCompositeOperation=i.compositeOperation),i.shadow&&this._applyShadow(t,i.shadow)},i.cache=function(e,i,n,s,r){r=r||1,this.cacheCanvas||(this.cacheCanvas=t.createCanvas?t.createCanvas():document.createElement("canvas")),this._cacheWidth=n,this._cacheHeight=s,this._cacheOffsetX=e,this._cacheOffsetY=i,this._cacheScale=r,this.updateCache()},i.updateCache=function(t){var i=this.cacheCanvas;if(!i)throw"cache() must be called before updateCache()";var n=this._cacheScale,s=this._cacheOffsetX*n,r=this._cacheOffsetY*n,a=this._cacheWidth,h=this._cacheHeight,o=i.getContext("2d"),l=this._getFilterBounds();s+=this._filterOffsetX=l.x,r+=this._filterOffsetY=l.y,a=Math.ceil(a*n)+l.width,h=Math.ceil(h*n)+l.height,a!=i.width||h!=i.height?(i.width=a,i.height=h):t||o.clearRect(0,0,a+1,h+1),o.save(),o.globalCompositeOperation=t,o.setTransform(n,0,0,n,-s,-r),this.draw(o,!0),this._applyFilters(),o.restore(),this.cacheID=e._nextCacheID++},i.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=this._filterOffsetX=this._filterOffsetY=0,this._cacheScale=1},i.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},i.localToGlobal=function(e,i,n){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(e,i,n||new t.Point)},i.globalToLocal=function(e,i,n){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(e,i,n||new t.Point)},i.localToLocal=function(t,e,i,n){return n=this.localToGlobal(t,e,n),i.globalToLocal(n.x,n.y,n)},i.setTransform=function(t,e,i,n,s,r,a,h,o){return this.x=t||0,this.y=e||0,this.scaleX=null==i?1:i,this.scaleY=null==n?1:n,this.rotation=s||0,this.skewX=r||0,this.skewY=a||0,this.regX=h||0,this.regY=o||0,this},i.getMatrix=function(e){var i=this,n=e&&e.identity()||new t.Matrix2D;return i.transformMatrix?n.copy(i.transformMatrix):n.appendTransform(i.x,i.y,i.scaleX,i.scaleY,i.rotation,i.skewX,i.skewY,i.regX,i.regY)},i.getConcatenatedMatrix=function(t){for(var e=this,i=this.getMatrix(t);e=e.parent;)i.prependMatrix(e.getMatrix(e._props.matrix));return i},i.getConcatenatedDisplayProps=function(e){e=e?e.identity():new t.DisplayProps;var i=this,n=i.getMatrix(e.matrix);do{e.prepend(i.visible,i.alpha,i.shadow,i.compositeOperation),i!=this&&n.prependMatrix(i.getMatrix(i._props.matrix))}while(i=i.parent);return e},i.hitTest=function(t,i){var n=e._hitTestContext;n.setTransform(1,0,0,1,-t,-i),this.draw(n);var s=this._testHit(n);return n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,2,2),s},i.set=function(t){for(var e in t)this[e]=t[e];return this},i.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var t=this.cacheCanvas;if(t){var e=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,t.width/e,t.height/e)}return null},i.getTransformedBounds=function(){return this._getBounds()},i.setBounds=function(e,i,n,s){null==e&&(this._bounds=e),this._bounds=(this._bounds||new t.Rectangle).setValues(e,i,n,s)},i.clone=function(){return this._cloneProps(new e)},i.toString=function(){return"[DisplayObject (name="+this.name+")]"},i._cloneProps=function(t){return t.alpha=this.alpha,t.mouseEnabled=this.mouseEnabled,t.tickEnabled=this.tickEnabled,t.name=this.name,t.regX=this.regX,t.regY=this.regY,t.rotation=this.rotation,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.shadow=this.shadow,t.skewX=this.skewX,t.skewY=this.skewY,t.visible=this.visible,t.x=this.x,t.y=this.y,t.compositeOperation=this.compositeOperation,t.snapToPixel=this.snapToPixel,t.filters=null==this.filters?null:this.filters.slice(0),t.mask=this.mask,t.hitArea=this.hitArea,t.cursor=this.cursor,t._bounds=this._bounds,t},i._applyShadow=function(t,e){e=e||Shadow.identity,t.shadowColor=e.color,t.shadowOffsetX=e.offsetX,t.shadowOffsetY=e.offsetY,t.shadowBlur=e.blur},i._tick=function(t){var e=this._listeners;e&&e.tick&&(t.target=null,t.propagationStopped=t.immediatePropagationStopped=!1,this.dispatchEvent(t))},i._testHit=function(t){try{var i=t.getImageData(0,0,1,1).data[3]>1}catch(t){if(!e.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return i},i._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var t=this.filters.length,e=this.cacheCanvas.getContext("2d"),i=this.cacheCanvas.width,n=this.cacheCanvas.height,s=0;s<t;s++)this.filters[s].applyFilter(e,0,0,i,n)},i._getFilterBounds=function(t){var e,i=this.filters,n=this._rectangle.setValues(0,0,0,0);if(!i||!(e=i.length))return n;for(var s=0;s<e;s++){var r=this.filters[s];r.getBounds&&r.getBounds(n)}return n},i._getBounds=function(t,e){return this._transformBounds(this.getBounds(),t,e)},i._transformBounds=function(t,e,i){if(!t)return t;var n=t.x,s=t.y,r=t.width,a=t.height,h=this._props.matrix;h=i?h.identity():this.getMatrix(h),(n||s)&&h.appendTransform(0,0,1,1,0,0,0,-n,-s),e&&h.prependMatrix(e);var o=r*h.a,l=r*h.b,c=a*h.c,u=a*h.d,d=h.tx,p=h.ty,f=d,_=d,m=p,g=p;return(n=o+d)<f?f=n:n>_&&(_=n),(n=o+c+d)<f?f=n:n>_&&(_=n),(n=c+d)<f?f=n:n>_&&(_=n),(s=l+p)<m?m=s:s>g&&(g=s),(s=l+u+p)<m?m=s:s>g&&(g=s),(s=u+p)<m?m=s:s>g&&(g=s),t.setValues(f,m,_-f,g-m)},i._hasMouseEventListener=function(){for(var t=e._MOUSE_EVENTS,i=0,n=t.length;i<n;i++)if(this.hasEventListener(t[i]))return!0;return!!this.cursor},t.DisplayObject=t.promote(e,"EventDispatcher")}();t=t||{};!function(){function e(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var i=t.extend(e,t.DisplayObject);i.getNumChildren=function(){return this.children.length};try{Object.defineProperties(i,{numChildren:{get:i.getNumChildren}})}catch(t){}i.initialize=e,i.isVisible=function(){var t=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},i.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;for(var i=this.children.slice(),n=0,s=i.length;n<s;n++){var r=i[n];r.isVisible()&&(t.save(),r.updateContext(t),r.draw(t),t.restore())}return!0},i.addChild=function(t){if(null==t)return t;var e=arguments.length;if(e>1){for(var i=0;i<e;i++)this.addChild(arguments[i]);return arguments[e-1]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t),t.dispatchEvent("added"),t},i.addChildAt=function(t,e){var i=arguments.length,n=arguments[i-1];if(n<0||n>this.children.length)return arguments[i-2];if(i>2){for(var s=0;s<i-1;s++)this.addChildAt(arguments[s],n+s);return arguments[i-2]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),t.dispatchEvent("added"),t},i.removeChild=function(e){var i=arguments.length;if(i>1){for(var n=!0,s=0;s<i;s++)n=n&&this.removeChild(arguments[s]);return n}return this.removeChildAt(t.indexOf(this.children,e))},i.removeChildAt=function(t){var e=arguments.length;if(e>1){for(var i=[],n=0;n<e;n++)i[n]=arguments[n];i.sort(function(t,e){return e-t});for(var s=!0,n=0;n<e;n++)s=s&&this.removeChildAt(i[n]);return s}if(t<0||t>this.children.length-1)return!1;var r=this.children[t];return r&&(r.parent=null),this.children.splice(t,1),r.dispatchEvent("removed"),!0},i.removeAllChildren=function(){for(var t=this.children;t.length;)this.removeChildAt(0)},i.getChildAt=function(t){return this.children[t]},i.getChildByName=function(t){for(var e=this.children,i=0,n=e.length;i<n;i++)if(e[i].name==t)return e[i];return null},i.sortChildren=function(t){this.children.sort(t)},i.getChildIndex=function(e){return t.indexOf(this.children,e)},i.swapChildrenAt=function(t,e){var i=this.children,n=i[t],s=i[e];n&&s&&(i[t]=s,i[e]=n)},i.swapChildren=function(t,e){for(var i,n,s=this.children,r=0,a=s.length;r<a&&(s[r]==t&&(i=r),s[r]==e&&(n=r),null==i||null==n);r++);r!=a&&(s[i]=e,s[n]=t)},i.setChildIndex=function(t,e){var i=this.children,n=i.length;if(!(t.parent!=this||e<0||e>=n)){for(var s=0;s<n&&i[s]!=t;s++);s!=n&&s!=e&&(i.splice(s,1),i.splice(e,0,t))}},i.contains=function(t){for(;t;){if(t==this)return!0;t=t.parent}return!1},i.hitTest=function(t,e){return null!=this.getObjectUnderPoint(t,e)},i.getObjectsUnderPoint=function(t,e,i){var n=[],s=this.localToGlobal(t,e);return this._getObjectsUnderPoint(s.x,s.y,n,i>0,1==i),n},i.getObjectUnderPoint=function(t,e,i){var n=this.localToGlobal(t,e);return this._getObjectsUnderPoint(n.x,n.y,null,i>0,1==i)},i.getBounds=function(){return this._getBounds(null,!0)},i.getTransformedBounds=function(){return this._getBounds()},i.clone=function(t){var i=this._cloneProps(new e);return t&&this._cloneChildren(i),i},i.toString=function(){return"[Container (name="+this.name+")]"},i._tick=function(t){if(this.tickChildren)for(var e=this.children.length-1;e>=0;e--){var i=this.children[e];i.tickEnabled&&i._tick&&i._tick(t)}this.DisplayObject__tick(t)},i._cloneChildren=function(t){t.children.length&&t.removeAllChildren();for(var e=t.children,i=0,n=this.children.length;i<n;i++){var s=this.children[i].clone(!0);s.parent=t,e.push(s)}},i._getObjectsUnderPoint=function(i,n,s,r,a,h){if(!(h=h||0)&&!this._testMask(this,i,n))return null;var o,l=t.DisplayObject._hitTestContext;a=a||r&&this._hasMouseEventListener();for(var c=this.children,u=c.length-1;u>=0;u--){var d=c[u],p=d.hitArea;if(d.visible&&(p||d.isVisible())&&(!r||d.mouseEnabled)&&(p||this._testMask(d,i,n)))if(!p&&d instanceof e){var f=d._getObjectsUnderPoint(i,n,s,r,a,h+1);if(!s&&f)return r&&!this.mouseChildren?this:f}else{if(r&&!a&&!d._hasMouseEventListener())continue;var _=d.getConcatenatedDisplayProps(d._props);if(o=_.matrix,p&&(o.appendMatrix(p.getMatrix(p._props.matrix)),_.alpha=p.alpha),l.globalAlpha=_.alpha,l.setTransform(o.a,o.b,o.c,o.d,o.tx-i,o.ty-n),(p||d).draw(l),!this._testHit(l))continue;if(l.setTransform(1,0,0,1,0,0),l.clearRect(0,0,2,2),!s)return r&&!this.mouseChildren?this:d;s.push(d)}}return null},i._testMask=function(e,i,n){var s=e.mask;if(!s||!s.graphics||s.graphics.isEmpty())return!0;var r=this._props.matrix,a=e.parent;r=a?a.getConcatenatedMatrix(r):r.identity(),r=s.getMatrix(s._props.matrix).prependMatrix(r);var h=t.DisplayObject._hitTestContext;return h.setTransform(r.a,r.b,r.c,r.d,r.tx-i,r.ty-n),s.graphics.drawAsPath(h),h.fillStyle="#000",h.fill(),!!this._testHit(h)&&(h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,2,2),!0)},i._getBounds=function(t,e){var i=this.DisplayObject_getBounds();if(i)return this._transformBounds(i,t,e);var n=this._props.matrix;n=e?n.identity():this.getMatrix(n),t&&n.prependMatrix(t);for(var s=this.children.length,r=null,a=0;a<s;a++){var h=this.children[a];h.visible&&(i=h._getBounds(n))&&(r?r.extend(i.x,i.y,i.width,i.height):r=i.clone())}return r},t.Container=t.promote(e,"DisplayObject")}();t=t||{};!function(){function e(t){this.Container_constructor(),this.autoClear=!0,this.canvas="string"==typeof t?document.getElementById(t):t,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var i=t.extend(e,t.Container);i._get_nextStage=function(){return this._nextStage},i._set_nextStage=function(t){this._nextStage&&(this._nextStage._prevStage=null),t&&(t._prevStage=this),this._nextStage=t};try{Object.defineProperties(i,{nextStage:{get:i._get_nextStage,set:i._set_nextStage}})}catch(t){}i.update=function(e){if(this.canvas&&(this.tickOnUpdate&&this.tick(e),!1!==this.dispatchEvent("drawstart",!1,!0))){t.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled;var i=this.drawRect,n=this.canvas.getContext("2d");n.setTransform(1,0,0,1,0,0),this.autoClear&&(i?n.clearRect(i.x,i.y,i.width,i.height):n.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),n.save(),this.drawRect&&(n.beginPath(),n.rect(i.x,i.y,i.width,i.height),n.clip()),this.updateContext(n),this.draw(n,!1),n.restore(),this.dispatchEvent("drawend")}},i.tick=function(e){if(this.tickEnabled&&!1!==this.dispatchEvent("tickstart",!1,!0)){var i=new t.Event("tick");if(e)for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);this._tick(i),this.dispatchEvent("tickend")}},i.handleEvent=function(t){"tick"==t.type&&this.update(t)},i.clear=function(){if(this.canvas){var t=this.canvas.getContext("2d");t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},i.toDataURL=function(t,e){var i,n=this.canvas.getContext("2d"),s=this.canvas.width,r=this.canvas.height;if(t){i=n.getImageData(0,0,s,r);var a=n.globalCompositeOperation;n.globalCompositeOperation="destination-over",n.fillStyle=t,n.fillRect(0,0,s,r)}var h=this.canvas.toDataURL(e||"image/png");return t&&(n.putImageData(i,0,0),n.globalCompositeOperation=a),h},i.enableMouseOver=function(t){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==t&&this._testMouseOver(!0)),null==t)t=20;else if(t<=0)return;var e=this;this._mouseOverIntervalID=setInterval(function(){e._testMouseOver()},1e3/Math.min(50,t))},i.enableDOMEvents=function(t){null==t&&(t=!0);var e,i,n=this._eventListeners;if(!t&&n){for(e in n)(i=n[e]).t.removeEventListener(e,i.f,!1);this._eventListeners=null}else if(t&&!n&&this.canvas){var s=window.addEventListener?window:document,r=this;(n=this._eventListeners={}).mouseup={t:s,f:function(t){r._handleMouseUp(t)}},n.mousemove={t:s,f:function(t){r._handleMouseMove(t)}},n.dblclick={t:this.canvas,f:function(t){r._handleDoubleClick(t)}},n.mousedown={t:this.canvas,f:function(t){r._handleMouseDown(t)}};for(e in n)(i=n[e]).t.addEventListener(e,i.f,!1)}},i.clone=function(){throw"Stage cannot be cloned."},i.toString=function(){return"[Stage (name="+this.name+")]"},i._getElementRect=function(t){var e;try{e=t.getBoundingClientRect()}catch(i){e={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}var i=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),n=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0);return{left:e.left+i,right:e.width+i,top:e.top+n,bottom:e.height+n}},i._getPointerData=function(t){var e=this._pointerData[t];return e||(e=this._pointerData[t]={x:0,y:0}),e},i._handleMouseMove=function(t){t||(t=window.event),this._handlePointerMove(-1,t,t.pageX,t.pageY)},i._handlePointerMove=function(t,e,i,n,s){if(this.canvas){var r=this._nextStage,a=this._getPointerData(t),h=a.inBounds;this._updatePointerPosition(t,e,i,n),(h||a.inBounds||this.mouseMoveOutside)&&(-1===t&&a.inBounds==!h&&this._dispatchMouseEvent(this,h?"mouseleave":"mouseenter",!1,t,a,e),this._dispatchMouseEvent(this,"stagemousemove",!1,t,a,e),this._dispatchMouseEvent(a.target,"pressmove",!0,t,a,e)),r&&r._handlePointerMove(t,e,i,n,null)}},i._updatePointerPosition=function(t,e,i,n){var s=this._getElementRect(this.canvas);i-=s.left,n-=s.top;var r=this.canvas.width,a=this.canvas.height;i/=(s.right-s.left)/r,n/=(s.bottom-s.top)/a;var h=this._getPointerData(t);(h.inBounds=i>=0&&n>=0&&i<=r-1&&n<=a-1)?(h.x=i,h.y=n):this.mouseMoveOutside&&(h.x=i<0?0:i>r-1?r-1:i,h.y=n<0?0:n>a-1?a-1:n),h.posEvtObj=e,h.rawX=i,h.rawY=n,t!==this._primaryPointerID&&-1!==t||(this.mouseX=h.x,this.mouseY=h.y,this.mouseInBounds=h.inBounds)},i._handleMouseUp=function(t){this._handlePointerUp(-1,t,!1)},i._handlePointerUp=function(t,e,i,n){var s=this._nextStage,r=this._getPointerData(t);if(!this._prevStage||void 0!==n){var a=null,h=r.target;n||!h&&!s||(a=this._getObjectsUnderPoint(r.x,r.y,null,!0)),r.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,t,r,e,a),r.down=!1),a==h&&this._dispatchMouseEvent(h,"click",!0,t,r,e),this._dispatchMouseEvent(h,"pressup",!0,t,r,e),i?(t==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[t]):r.target=null,s&&s._handlePointerUp(t,e,i,n||a&&this)}},i._handleMouseDown=function(t){this._handlePointerDown(-1,t,t.pageX,t.pageY)},i._handlePointerDown=function(t,e,i,n,s){this.preventSelection&&e.preventDefault(),null!=this._primaryPointerID&&-1!==t||(this._primaryPointerID=t),null!=n&&this._updatePointerPosition(t,e,i,n);var r=null,a=this._nextStage,h=this._getPointerData(t);s||(r=h.target=this._getObjectsUnderPoint(h.x,h.y,null,!0)),h.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,t,h,e,r),h.down=!0),this._dispatchMouseEvent(r,"mousedown",!0,t,h,e),a&&a._handlePointerDown(t,e,i,n,s||r&&this)},i._testMouseOver=function(t,e,i){if(!this._prevStage||void 0!==e){var n=this._nextStage;if(this._mouseOverIntervalID){var s=this._getPointerData(-1);if(s&&(t||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var r,a,h,o=s.posEvtObj,l=i||o&&o.target==this.canvas,c=null,u=-1,d="";!e&&(t||this.mouseInBounds&&l)&&(c=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var p=this._mouseOverTarget||[],f=p[p.length-1],_=this._mouseOverTarget=[];for(r=c;r;)_.unshift(r),d||(d=r.cursor),r=r.parent;for(this.canvas.style.cursor=d,!e&&i&&(i.canvas.style.cursor=d),a=0,h=_.length;a<h&&_[a]==p[a];a++)u=a;for(f!=c&&this._dispatchMouseEvent(f,"mouseout",!0,-1,s,o,c),a=p.length-1;a>u;a--)this._dispatchMouseEvent(p[a],"rollout",!1,-1,s,o,c);for(a=_.length-1;a>u;a--)this._dispatchMouseEvent(_[a],"rollover",!1,-1,s,o,f);f!=c&&this._dispatchMouseEvent(c,"mouseover",!0,-1,s,o,f),n&&n._testMouseOver(t,e||c&&this,i||l&&this)}}else n&&n._testMouseOver(t,e,i)}},i._handleDoubleClick=function(t,e){var i=null,n=this._nextStage,s=this._getPointerData(-1);e||(i=this._getObjectsUnderPoint(s.x,s.y,null,!0),this._dispatchMouseEvent(i,"dblclick",!0,-1,s,t)),n&&n._handleDoubleClick(t,e||i&&this)},i._dispatchMouseEvent=function(e,i,n,s,r,a,h){if(e&&(n||e.hasEventListener(i))){var o=new t.MouseEvent(i,n,!1,r.x,r.y,a,s,s===this._primaryPointerID||-1===s,r.rawX,r.rawY,h);e.dispatchEvent(o)}},t.Stage=t.promote(e,"Container")}();t=t||{};!function(){function e(t){this.DisplayObject_constructor(),"string"==typeof t?(this.image=document.createElement("img"),this.image.src=t):this.image=t,this.sourceRect=null}var i=t.extend(e,t.DisplayObject);i.initialize=e,i.isVisible=function(){var t=this.image,e=this.cacheCanvas||t&&(t.naturalWidth||t.width||t.getContext||t.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},i.draw=function(t,e){if(this.DisplayObject_draw(t,e)||!this.image)return!0;var i=this.image,n=this.sourceRect;if(n){var s=n.x,r=n.y,a=s+n.width,h=r+n.height,o=0,l=0,c=i.width,u=i.height;s<0&&(o-=s,s=0),a>c&&(a=c),r<0&&(l-=r,r=0),h>u&&(h=u),t.drawImage(i,s,r,a-s,h-r,o,l,a-s,h-r)}else t.drawImage(i,0,0);return!0},i.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;var e=this.image,i=this.sourceRect||e;return e&&(e.naturalWidth||e.width||e.getContext||e.readyState>=2)?this._rectangle.setValues(0,0,i.width,i.height):null},i.clone=function(){var t=new e(this.image);return this.sourceRect&&(t.sourceRect=this.sourceRect.clone()),this._cloneProps(t),t},i.toString=function(){return"[Bitmap (name="+this.name+")]"},t.Bitmap=t.promote(e,"DisplayObject")}();t=t||{};!function(){function e(t,e){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=t,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,null!=e&&this.gotoAndPlay(e)}var i=t.extend(e,t.DisplayObject);i.initialize=e,i.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},i.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;this._normalizeFrame();var i=this.spriteSheet.getFrame(0|this._currentFrame);if(!i)return!1;var n=i.rect;return n.width&&n.height&&t.drawImage(i.image,n.x,n.y,n.width,n.height,-i.regX,-i.regY,n.width,n.height),!0},i.play=function(){this.paused=!1},i.stop=function(){this.paused=!0},i.gotoAndPlay=function(t){this.paused=!1,this._skipAdvance=!0,this._goto(t)},i.gotoAndStop=function(t){this.paused=!0,this._goto(t)},i.advance=function(t){var e=this.framerate||this.spriteSheet.framerate,i=e&&null!=t?t/(1e3/e):1;this._normalizeFrame(i)},i.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},i.clone=function(){return this._cloneProps(new e(this.spriteSheet))},i.toString=function(){return"[Sprite (name="+this.name+")]"},i._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.currentFrame=this.currentFrame,t.currentAnimation=this.currentAnimation,t.paused=this.paused,t.currentAnimationFrame=this.currentAnimationFrame,t.framerate=this.framerate,t._animation=this._animation,t._currentFrame=this._currentFrame,t._skipAdvance=this._skipAdvance,t},i._tick=function(t){this.paused||(this._skipAdvance||this.advance(t&&t.delta),this._skipAdvance=!1),this.DisplayObject__tick(t)},i._normalizeFrame=function(t){t=t||0;var e,i=this._animation,n=this.paused,s=this._currentFrame;if(i){var r=i.speed||1,a=this.currentAnimationFrame;if(e=i.frames.length,a+t*r>=e){var h=i.next;if(this._dispatchAnimationEnd(i,s,n,h,e-1))return;if(h)return this._goto(h,t-(e-a)/r);this.paused=!0,a=i.frames.length-1}else a+=t*r;this.currentAnimationFrame=a,this._currentFrame=i.frames[0|a]}else if(s=this._currentFrame+=t,e=this.spriteSheet.getNumFrames(),s>=e&&e>0&&!this._dispatchAnimationEnd(i,s,n,e-1)&&(this._currentFrame-=e)>=e)return this._normalizeFrame();s=0|this._currentFrame,this.currentFrame!=s&&(this.currentFrame=s,this.dispatchEvent("change"))},i._dispatchAnimationEnd=function(e,i,n,s,r){var a=e?e.name:null;if(this.hasEventListener("animationend")){var h=new t.Event("animationend");h.name=a,h.next=s,this.dispatchEvent(h)}var o=this._animation!=e||this._currentFrame!=i;return o||n||!this.paused||(this.currentAnimationFrame=r,o=!0),o},i._goto=function(t,e){if(this.currentAnimationFrame=0,isNaN(t)){var i=this.spriteSheet.getAnimation(t);i&&(this._animation=i,this.currentAnimation=t,this._normalizeFrame(e))}else this.currentAnimation=this._animation=null,this._currentFrame=t,this._normalizeFrame()},t.Sprite=t.promote(e,"DisplayObject")}();t=t||{};!function(){function e(e){this.DisplayObject_constructor(),this.graphics=e||new t.Graphics}var i=t.extend(e,t.DisplayObject);i.isVisible=function(){var t=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},i.draw=function(t,e){return!!this.DisplayObject_draw(t,e)||(this.graphics.draw(t,this),!0)},i.clone=function(t){var i=t&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new e(i))},i.toString=function(){return"[Shape (name="+this.name+")]"},t.Shape=t.promote(e,"DisplayObject")}();t=t||{};!function(){function e(t,e,i){this.DisplayObject_constructor(),this.text=t,this.font=e,this.color=i,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var i=t.extend(e,t.DisplayObject),n=t.createCanvas?t.createCanvas():document.createElement("canvas");n.getContext&&(e._workingContext=n.getContext("2d"),n.width=n.height=1),e.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},e.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},i.isVisible=function(){var t=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},i.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;var i=this.color||"#000";return this.outline?(t.strokeStyle=i,t.lineWidth=1*this.outline):t.fillStyle=i,this._drawText(this._prepContext(t)),!0},i.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},i.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},i.getMeasuredHeight=function(){return this._drawText(null,{}).height},i.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;if(null==this.text||""===this.text)return null;var i=this._drawText(null,{}),n=this.maxWidth&&this.maxWidth<i.width?this.maxWidth:i.width,s=n*e.H_OFFSETS[this.textAlign||"left"],r=(this.lineHeight||this.getMeasuredLineHeight())*e.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(s,r,n,i.height)},i.getMetrics=function(){var t={lines:[]};return t.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),t.vOffset=t.lineHeight*e.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,t,t.lines)},i.clone=function(){return this._cloneProps(new e(this.text,this.font,this.color))},i.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},i._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.maxWidth=this.maxWidth,t.outline=this.outline,t.lineHeight=this.lineHeight,t.lineWidth=this.lineWidth,t},i._prepContext=function(t){return t.font=this.font||"10px sans-serif",t.textAlign=this.textAlign||"left",t.textBaseline=this.textBaseline||"top",t},i._drawText=function(t,i,n){var s=!!t;s||((t=e._workingContext).save(),this._prepContext(t));for(var r=this.lineHeight||this.getMeasuredLineHeight(),a=0,h=0,o=String(this.text).split(/(?:\r\n|\r|\n)/),l=0,c=o.length;l<c;l++){var u=o[l],d=null;if(null!=this.lineWidth&&(d=t.measureText(u).width)>this.lineWidth){var p=u.split(/(\s)/);u=p[0],d=t.measureText(u).width;for(var f=1,_=p.length;f<_;f+=2){var m=t.measureText(p[f]+p[f+1]).width;d+m>this.lineWidth?(s&&this._drawTextLine(t,u,h*r),n&&n.push(u),d>a&&(a=d),u=p[f+1],d=t.measureText(u).width,h++):(u+=p[f]+p[f+1],d+=m)}}s&&this._drawTextLine(t,u,h*r),n&&n.push(u),i&&null==d&&(d=t.measureText(u).width),d>a&&(a=d),h++}return i&&(i.width=a,i.height=h*r),s||t.restore(),i},i._drawTextLine=function(t,e,i){this.outline?t.strokeText(e,0,i,this.maxWidth||65535):t.fillText(e,0,i,this.maxWidth||65535)},i._getMeasuredWidth=function(t){var i=e._workingContext;i.save();var n=this._prepContext(i).measureText(t).width;return i.restore(),n},t.Text=t.promote(e,"DisplayObject")}();t=t||{};!function(){function e(t,e){this.Container_constructor(),this.text=t||"",this.spriteSheet=e,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0}}var i=t.extend(e,t.Container);e.maxPoolSize=100,e._spritePool=[],i.draw=function(t,e){this.DisplayObject_draw(t,e)||(this._updateText(),this.Container_draw(t,e))},i.getBounds=function(){return this._updateText(),this.Container_getBounds()},i.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY&&t)},i.clone=function(){return this._cloneProps(new e(this.text,this.spriteSheet))},i.addChild=i.addChildAt=i.removeChild=i.removeChildAt=i.removeAllChildren=function(){},i._cloneProps=function(t){return this.Container__cloneProps(t),t.lineHeight=this.lineHeight,t.letterSpacing=this.letterSpacing,t.spaceWidth=this.spaceWidth,t},i._getFrameIndex=function(t,e){var i,n=e.getAnimation(t);return n||(t!=(i=t.toUpperCase())||t!=(i=t.toLowerCase())||(i=null),i&&(n=e.getAnimation(i))),n&&n.frames[0]},i._getFrame=function(t,e){var i=this._getFrameIndex(t,e);return null==i?i:e.getFrame(i)},i._getLineHeight=function(t){var e=this._getFrame("1",t)||this._getFrame("T",t)||this._getFrame("L",t)||t.getFrame(0);return e?e.rect.height:1},i._getSpaceWidth=function(t){var e=this._getFrame("1",t)||this._getFrame("l",t)||this._getFrame("e",t)||this._getFrame("a",t)||t.getFrame(0);return e?e.rect.width:1},i._updateText=function(){var i,n=0,s=0,r=this._oldProps,a=!1,h=this.spaceWidth,o=this.lineHeight,l=this.spriteSheet,c=e._spritePool,u=this.children,d=0,p=u.length;for(var f in r)r[f]!=this[f]&&(r[f]=this[f],a=!0);if(a){var _=!!this._getFrame(" ",l);_||h||(h=this._getSpaceWidth(l)),o||(o=this._getLineHeight(l));for(var m=0,g=this.text.length;m<g;m++){var v=this.text.charAt(m);if(" "!=v||_)if("\n"!=v&&"\r"!=v){var x=this._getFrameIndex(v,l);null!=x&&(d<p?i=u[d]:(u.push(i=c.length?c.pop():new t.Sprite),i.parent=this,p++),i.spriteSheet=l,i.gotoAndStop(x),i.x=n,i.y=s,d++,n+=i.getBounds().width+this.letterSpacing)}else"\r"==v&&"\n"==this.text.charAt(m+1)&&m++,n=0,s+=o;else n+=h}for(;p>d;)c.push(i=u.pop()),i.parent=null,p--;c.length>e.maxPoolSize&&(c.length=e.maxPoolSize)}},t.BitmapText=t.promote(e,"Container")}();t=t||{};!function(){function e(i,n,s,r){this.Container_constructor(),!e.inited&&e.init(),this.mode=i||e.INDEPENDENT,this.startPosition=n||0,this.loop=s,this.currentFrame=0,this.timeline=new t.Timeline(null,r,{paused:!0,position:n,useTicks:!0}),this.paused=!1,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||null,this.framerate=null,this._synchOffset=0,this._prevPos=-1,this._prevPosition=0,this._t=0,this._managed={}}function i(){throw"MovieClipPlugin cannot be instantiated."}var n=t.extend(e,t.Container);e.INDEPENDENT="independent",e.SINGLE_FRAME="single",e.SYNCHED="synched",e.inited=!1,e.init=function(){e.inited||(i.install(),e.inited=!0)},n.getLabels=function(){return this.timeline.getLabels()},n.getCurrentLabel=function(){return this._updateTimeline(),this.timeline.getCurrentLabel()},n.getDuration=function(){return this.timeline.duration};try{Object.defineProperties(n,{labels:{get:n.getLabels},currentLabel:{get:n.getCurrentLabel},totalFrames:{get:n.getDuration},duration:{get:n.getDuration}})}catch(t){}n.initialize=e,n.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},n.draw=function(t,e){return!!this.DisplayObject_draw(t,e)||(this._updateTimeline(),this.Container_draw(t,e),!0)},n.play=function(){this.paused=!1},n.stop=function(){this.paused=!0},n.gotoAndPlay=function(t){this.paused=!1,this._goto(t)},n.gotoAndStop=function(t){this.paused=!0,this._goto(t)},n.advance=function(t){var i=e.INDEPENDENT;if(this.mode==i){for(var n=this,s=n.framerate;(n=n.parent)&&null==s;)n.mode==i&&(s=n._framerate);this._framerate=s;var r=null!=s&&-1!=s&&null!=t?t/(1e3/s)+this._t:1,a=0|r;for(this._t=r-a;!this.paused&&a--;)this._prevPosition=this._prevPos<0?0:this._prevPosition+1,this._updateTimeline()}},n.clone=function(){throw"MovieClip cannot be cloned."},n.toString=function(){return"[MovieClip (name="+this.name+")]"},n._tick=function(t){this.advance(t&&t.delta),this.Container__tick(t)},n._goto=function(t){var e=this.timeline.resolve(t);null!=e&&(-1==this._prevPos&&(this._prevPos=NaN),this._prevPosition=e,this._t=0,this._updateTimeline())},n._reset=function(){this._prevPos=-1,this._t=this.currentFrame=0,this.paused=!1},n._updateTimeline=function(){var i=this.timeline,n=this.mode!=e.INDEPENDENT;i.loop=null==this.loop||this.loop;var s=n?this.startPosition+(this.mode==e.SINGLE_FRAME?0:this._synchOffset):this._prevPos<0?0:this._prevPosition,r=n||!this.actionsEnabled?t.Tween.NONE:null;if(this.currentFrame=i._calcPosition(s),i.setPosition(s,r),this._prevPosition=i._prevPosition,this._prevPos!=i._prevPos){this.currentFrame=this._prevPos=i._prevPos;for(var a in this._managed)this._managed[a]=1;for(var h=i._tweens,o=0,l=h.length;o<l;o++){var c=h[o],u=c._target;if(u!=this&&!c.passive){var d=c._stepPosition;u instanceof t.DisplayObject?this._addManagedChild(u,d):this._setState(u.state,d)}}var p=this.children;for(o=p.length-1;o>=0;o--){var f=p[o].id;1==this._managed[f]&&(this.removeChildAt(o),delete this._managed[f])}}},n._setState=function(t,e){if(t)for(var i=t.length-1;i>=0;i--){var n=t[i],s=n.t,r=n.p;for(var a in r)s[a]=r[a];this._addManagedChild(s,e)}},n._addManagedChild=function(t,i){t._off||(this.addChildAt(t,0),t instanceof e&&(t._synchOffset=i,t.mode==e.INDEPENDENT&&t.autoReset&&!this._managed[t.id]&&t._reset()),this._managed[t.id]=2)},n._getBounds=function(t,e){var i=this.DisplayObject_getBounds();return i||(this._updateTimeline(),this.frameBounds&&(i=this._rectangle.copy(this.frameBounds[this.currentFrame]))),i?this._transformBounds(i,t,e):this.Container__getBounds(t,e)},t.MovieClip=t.promote(e,"Container"),i.priority=100,i.install=function(){t.Tween.installPlugin(i,["startPosition"])},i.init=function(t,e,i){return i},i.step=function(){},i.tween=function(t,i,n,s,r,a,h,o){return t.target instanceof e?1==a?r[i]:s[i]:n}}();t=t||{};!function(){function e(){throw"SpriteSheetUtils cannot be instantiated"}var i=t.createCanvas?t.createCanvas():document.createElement("canvas");i.getContext&&(e._workingCanvas=i,e._workingContext=i.getContext("2d"),i.width=i.height=1),e.addFlippedFrames=function(t,i,n,s){if(i||n||s){var r=0;i&&e._flip(t,++r,!0,!1),n&&e._flip(t,++r,!1,!0),s&&e._flip(t,++r,!0,!0)}},e.extractFrame=function(t,i){isNaN(i)&&(i=t.getAnimation(i).frames[0]);var n=t.getFrame(i);if(!n)return null;var s=n.rect,r=e._workingCanvas;r.width=s.width,r.height=s.height,e._workingContext.drawImage(n.image,s.x,s.y,s.width,s.height,0,0,s.width,s.height);var a=document.createElement("img");return a.src=r.toDataURL("image/png"),a},e.mergeAlpha=function(e,i,n){n||(n=t.createCanvas?t.createCanvas():document.createElement("canvas")),n.width=Math.max(i.width,e.width),n.height=Math.max(i.height,e.height);var s=n.getContext("2d");return s.save(),s.drawImage(e,0,0),s.globalCompositeOperation="destination-in",s.drawImage(i,0,0),s.restore(),n},e._flip=function(t,i,n,s){for(var r=t._images,a=e._workingCanvas,h=e._workingContext,o=r.length/i,l=0;l<o;l++){var c=r[l];c.__tmp=l,h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,a.width+1,a.height+1),a.width=c.width,a.height=c.height,h.setTransform(n?-1:1,0,0,s?-1:1,n?c.width:0,s?c.height:0),h.drawImage(c,0,0);var u=document.createElement("img");u.src=a.toDataURL("image/png"),u.width=c.width,u.height=c.height,r.push(u)}var d=t._frames,p=d.length/i;for(l=0;l<p;l++){var f=(c=d[l]).rect.clone(),_={image:u=r[c.image.__tmp+o*i],rect:f,regX:c.regX,regY:c.regY};n&&(f.x=u.width-f.x-f.width,_.regX=f.width-c.regX),s&&(f.y=u.height-f.y-f.height,_.regY=f.height-c.regY),d.push(_)}var m="_"+(n?"h":"")+(s?"v":""),g=t._animations,v=t._data,x=g.length/i;for(l=0;l<x;l++){var w=g[l],y={name:w+m,speed:(c=v[w]).speed,next:c.next,frames:[]};c.next&&(y.next+=m);for(var b=0,E=(d=c.frames).length;b<E;b++)y.frames.push(d[b]+p*i);v[y.name]=y,g.push(y.name)}},t.SpriteSheetUtils=e}();t=t||{};!function(){function e(t){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this.framerate=t||0,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var i=t.extend(e,t.EventDispatcher);e.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",e.ERR_RUNNING="a build is already running",i.addFrame=function(t,i,n,s,r){if(this._data)throw e.ERR_RUNNING;var a=i||t.bounds||t.nominalBounds;return!a&&t.getBounds&&(a=t.getBounds()),a?(n=n||1,this._frames.push({source:t,sourceRect:a,scale:n,funct:s,data:r,index:this._frames.length,height:a.height*n})-1):null},i.addAnimation=function(t,i,n,s){if(this._data)throw e.ERR_RUNNING;this._animations[t]={frames:i,next:n,speed:s}},i.addMovieClip=function(t,i,n,s,r,a){if(this._data)throw e.ERR_RUNNING;var h=t.frameBounds,o=i||t.bounds||t.nominalBounds;if(!o&&t.getBounds&&(o=t.getBounds()),o||h){var l,c,u=this._frames.length,d=t.timeline.duration;for(l=0;l<d;l++){var p=h&&h[l]?h[l]:o;this.addFrame(t,p,n,this._setupMovieClipFrame,{i:l,f:s,d:r})}var f=t.timeline._labels,_=[];for(var m in f)_.push({index:f[m],label:m});if(_.length)for(_.sort(function(t,e){return t.index-e.index}),l=0,c=_.length;l<c;l++){for(var g=_[l].label,v=u+_[l].index,x=u+(l==c-1?d:_[l+1].index),w=[],y=v;y<x;y++)w.push(y);a&&!(g=a(g,t,v,x))||this.addAnimation(g,w,!0)}}},i.build=function(){if(this._data)throw e.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},i.buildAsync=function(t){if(this._data)throw e.ERR_RUNNING;this.timeSlice=t,this._startBuild();var i=this;this._timerID=setTimeout(function(){i._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},i.stopAsync=function(){clearTimeout(this._timerID),this._data=null},i.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},i.toString=function(){return"[SpriteSheetBuilder]"},i._startBuild=function(){var i=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var n=[];this._data={images:[],frames:n,framerate:this.framerate,animations:this._animations};var s=this._frames.slice();if(s.sort(function(t,e){return t.height<=e.height?-1:1}),s[s.length-1].height+2*i>this.maxHeight)throw e.ERR_DIMENSIONS;for(var r=0,a=0,h=0;s.length;){var o=this._fillRow(s,r,h,n,i);if(o.w>a&&(a=o.w),r+=o.h,!o.h||!s.length){var l=t.createCanvas?t.createCanvas():document.createElement("canvas");l.width=this._getSize(a,this.maxWidth),l.height=this._getSize(r,this.maxHeight),this._data.images[h]=l,o.h||(a=r=0,h++)}}},i._setupMovieClipFrame=function(t,e){var i=t.actionsEnabled;t.actionsEnabled=!1,t.gotoAndStop(e.i),t.actionsEnabled=i,e.f&&e.f(t,e.d,e.i)},i._getSize=function(t,e){for(var i=4;Math.pow(2,++i)<t;);return Math.min(e,Math.pow(2,i))},i._fillRow=function(i,n,s,r,a){for(var h=this.maxWidth,o=this.maxHeight-(n+=a),l=a,c=0,u=i.length-1;u>=0;u--){var d=i[u],p=this._scale*d.scale,f=d.sourceRect,_=d.source,m=Math.floor(p*f.x-a),g=Math.floor(p*f.y-a),v=Math.ceil(p*f.height+2*a),x=Math.ceil(p*f.width+2*a);if(x>h)throw e.ERR_DIMENSIONS;v>o||l+x>h||(d.img=s,d.rect=new t.Rectangle(l,n,x,v),c=c||v,i.splice(u,1),r[d.index]=[l,n,x,v,s,Math.round(-m+p*_.regX-a),Math.round(-g+p*_.regY-a)],l+=x)}return{w:l,h:c}},i._endBuild=function(){this.spriteSheet=new t.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},i._run=function(){for(var e=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),i=(new Date).getTime()+e,n=!1;i>(new Date).getTime();)if(!this._drawNext()){n=!0;break}if(n)this._endBuild();else{var s=this;this._timerID=setTimeout(function(){s._run()},50-e)}var r=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var a=new t.Event("progress");a.progress=r,this.dispatchEvent(a)}},i._drawNext=function(){var t=this._frames[this._index],e=t.scale*this._scale,i=t.rect,n=t.sourceRect,s=this._data.images[t.img].getContext("2d");return t.funct&&t.funct(t.source,t.data),s.save(),s.beginPath(),s.rect(i.x,i.y,i.width,i.height),s.clip(),s.translate(Math.ceil(i.x-n.x*e),Math.ceil(i.y-n.y*e)),s.scale(e,e),t.source.draw(s),s.restore(),++this._index<this._frames.length},t.SpriteSheetBuilder=t.promote(e,"EventDispatcher")}();t=t||{};!function(){function e(t){this.DisplayObject_constructor(),"string"==typeof t&&(t=document.getElementById(t)),this.mouseEnabled=!1;var e=t.style;e.position="absolute",e.transformOrigin=e.WebkitTransformOrigin=e.msTransformOrigin=e.MozTransformOrigin=e.OTransformOrigin="0% 0%",this.htmlElement=t,this._oldProps=null}var i=t.extend(e,t.DisplayObject);i.isVisible=function(){return null!=this.htmlElement},i.draw=function(t,e){return!0},i.cache=function(){},i.uncache=function(){},i.updateCache=function(){},i.hitTest=function(){},i.localToGlobal=function(){},i.globalToLocal=function(){},i.localToLocal=function(){},i.clone=function(){throw"DOMElement cannot be cloned."},i.toString=function(){return"[DOMElement (name="+this.name+")]"},i._tick=function(t){var e=this.getStage();e&&e.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(t)},i._handleDrawEnd=function(e){var i=this.htmlElement;if(i){var n=i.style,s=this.getConcatenatedDisplayProps(this._props),r=s.matrix,a=s.visible?"visible":"hidden";if(a!=n.visibility&&(n.visibility=a),s.visible){var h=this._oldProps,o=h&&h.matrix,l=1e4;if(!o||!o.equals(r)){var c="matrix("+(r.a*l|0)/l+","+(r.b*l|0)/l+","+(r.c*l|0)/l+","+(r.d*l|0)/l+","+(r.tx+.5|0);n.transform=n.WebkitTransform=n.OTransform=n.msTransform=c+","+(r.ty+.5|0)+")",n.MozTransform=c+"px,"+(r.ty+.5|0)+"px)",h||(h=this._oldProps=new t.DisplayProps(!0,NaN)),h.matrix.copy(r)}h.alpha!=s.alpha&&(n.opacity=""+(s.alpha*l|0)/l,h.alpha=s.alpha)}}},t.DOMElement=t.promote(e,"DisplayObject")}();t=t||{};!function(){function e(){}var i=e.prototype;i.getBounds=function(t){return t},i.applyFilter=function(t,e,i,n,s,r,a,h){r=r||t,null==a&&(a=e),null==h&&(h=i);try{var o=t.getImageData(e,i,n,s)}catch(t){return!1}return!!this._applyFilter(o)&&(r.putImageData(o,a,h),!0)},i.toString=function(){return"[Filter]"},i.clone=function(){return new e},i._applyFilter=function(t){return!0},t.Filter=e}();t=t||{};!function(){function e(t,e,i){(isNaN(t)||t<0)&&(t=0),(isNaN(e)||e<0)&&(e=0),(isNaN(i)||i<1)&&(i=1),this.blurX=0|t,this.blurY=0|e,this.quality=0|i}var i=t.extend(e,t.Filter);e.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],e.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],i.getBounds=function(e){var i=0|this.blurX,n=0|this.blurY;if(i<=0&&n<=0)return e;var s=Math.pow(this.quality,.2);return(e||new t.Rectangle).pad(i*s+1,n*s+1,i*s+1,n*s+1)},i.clone=function(){return new e(this.blurX,this.blurY,this.quality)},i.toString=function(){return"[BlurFilter]"},i._applyFilter=function(t){var i=this.blurX>>1;if(isNaN(i)||i<0)return!1;var n=this.blurY>>1;if(isNaN(n)||n<0)return!1;if(0==i&&0==n)return!1;var s=this.quality;(isNaN(s)||s<1)&&(s=1),(s|=0)>3&&(s=3),s<1&&(s=1);var r=t.data,a=0,h=0,o=0,l=0,c=0,u=0,d=0,p=0,f=0,_=0,m=0,g=0,v=0,x=0,w=0,y=i+i+1|0,b=n+n+1|0,E=0|t.width,S=0|t.height,T=E-1|0,M=S-1|0,D=i+1|0,C=n+1|0,P={r:0,b:0,g:0,a:0},O=P;for(o=1;o<y;o++)O=O.n={r:0,b:0,g:0,a:0};O.n=P;var k={r:0,b:0,g:0,a:0},I=k;for(o=1;o<b;o++)I=I.n={r:0,b:0,g:0,a:0};I.n=k;for(var L=null,F=0|e.MUL_TABLE[i],A=0|e.SHG_TABLE[i],R=0|e.MUL_TABLE[n],N=0|e.SHG_TABLE[n];s-- >0;){d=u=0;var B=F,Y=A;for(h=S;--h>-1;){for(p=D*(g=r[0|u]),f=D*(v=r[u+1|0]),_=D*(x=r[u+2|0]),m=D*(w=r[u+3|0]),O=P,o=D;--o>-1;)O.r=g,O.g=v,O.b=x,O.a=w,O=O.n;for(o=1;o<D;o++)l=u+((T<o?T:o)<<2)|0,p+=O.r=r[l],f+=O.g=r[l+1],_+=O.b=r[l+2],m+=O.a=r[l+3],O=O.n;for(L=P,a=0;a<E;a++)r[u++]=p*B>>>Y,r[u++]=f*B>>>Y,r[u++]=_*B>>>Y,r[u++]=m*B>>>Y,l=d+((l=a+i+1)<T?l:T)<<2,p-=L.r-(L.r=r[l]),f-=L.g-(L.g=r[l+1]),_-=L.b-(L.b=r[l+2]),m-=L.a-(L.a=r[l+3]),L=L.n;d+=E}for(B=R,Y=N,a=0;a<E;a++){for(p=C*(g=r[u=a<<2|0])|0,f=C*(v=r[u+1|0])|0,_=C*(x=r[u+2|0])|0,m=C*(w=r[u+3|0])|0,I=k,o=0;o<C;o++)I.r=g,I.g=v,I.b=x,I.a=w,I=I.n;for(c=E,o=1;o<=n;o++)u=c+a<<2,p+=I.r=r[u],f+=I.g=r[u+1],_+=I.b=r[u+2],m+=I.a=r[u+3],I=I.n,o<M&&(c+=E);if(u=a,L=k,s>0)for(h=0;h<S;h++)r[(l=u<<2)+3]=w=m*B>>>Y,w>0?(r[l]=p*B>>>Y,r[l+1]=f*B>>>Y,r[l+2]=_*B>>>Y):r[l]=r[l+1]=r[l+2]=0,l=a+((l=h+C)<M?l:M)*E<<2,p-=L.r-(L.r=r[l]),f-=L.g-(L.g=r[l+1]),_-=L.b-(L.b=r[l+2]),m-=L.a-(L.a=r[l+3]),L=L.n,u+=E;else for(h=0;h<S;h++)r[(l=u<<2)+3]=w=m*B>>>Y,w>0?(w=255/w,r[l]=(p*B>>>Y)*w,r[l+1]=(f*B>>>Y)*w,r[l+2]=(_*B>>>Y)*w):r[l]=r[l+1]=r[l+2]=0,l=a+((l=h+C)<M?l:M)*E<<2,p-=L.r-(L.r=r[l]),f-=L.g-(L.g=r[l+1]),_-=L.b-(L.b=r[l+2]),m-=L.a-(L.a=r[l+3]),L=L.n,u+=E}}return!0},t.BlurFilter=t.promote(e,"Filter")}();t=t||{};!function(){function e(t){this.alphaMap=t,this._alphaMap=null,this._mapData=null}var i=t.extend(e,t.Filter);i.clone=function(){var t=new e(this.alphaMap);return t._alphaMap=this._alphaMap,t._mapData=this._mapData,t},i.toString=function(){return"[AlphaMapFilter]"},i._applyFilter=function(t){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var e=t.data,i=this._mapData,n=0,s=e.length;n<s;n+=4)e[n+3]=i[n]||0;return!0},i._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var e,i=this._alphaMap=this.alphaMap,n=i;i instanceof HTMLCanvasElement?e=n.getContext("2d"):((n=t.createCanvas?t.createCanvas():document.createElement("canvas")).width=i.width,n.height=i.height,(e=n.getContext("2d")).drawImage(i,0,0));try{var s=e.getImageData(0,0,i.width,i.height)}catch(t){return!1}return this._mapData=s.data,!0},t.AlphaMapFilter=t.promote(e,"Filter")}();t=t||{};!function(){function e(t){this.mask=t}var i=t.extend(e,t.Filter);i.applyFilter=function(t,e,i,n,s,r,a,h){return!this.mask||(r=r||t,null==a&&(a=e),null==h&&(h=i),r.save(),t==r&&(r.globalCompositeOperation="destination-in",r.drawImage(this.mask,a,h),r.restore(),!0))},i.clone=function(){return new e(this.mask)},i.toString=function(){return"[AlphaMaskFilter]"},t.AlphaMaskFilter=t.promote(e,"Filter")}();t=t||{};!function(){function e(t,e,i,n,s,r,a,h){this.redMultiplier=null!=t?t:1,this.greenMultiplier=null!=e?e:1,this.blueMultiplier=null!=i?i:1,this.alphaMultiplier=null!=n?n:1,this.redOffset=s||0,this.greenOffset=r||0,this.blueOffset=a||0,this.alphaOffset=h||0}var i=t.extend(e,t.Filter);i.toString=function(){return"[ColorFilter]"},i.clone=function(){return new e(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},i._applyFilter=function(t){for(var e=t.data,i=e.length,n=0;n<i;n+=4)e[n]=e[n]*this.redMultiplier+this.redOffset,e[n+1]=e[n+1]*this.greenMultiplier+this.greenOffset,e[n+2]=e[n+2]*this.blueMultiplier+this.blueOffset,e[n+3]=e[n+3]*this.alphaMultiplier+this.alphaOffset;return!0},t.ColorFilter=t.promote(e,"Filter")}();t=t||{};!function(){function e(t,e,i,n){this.setColor(t,e,i,n)}var i=e.prototype;e.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],e.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],e.LENGTH=e.IDENTITY_MATRIX.length,i.setColor=function(t,e,i,n){return this.reset().adjustColor(t,e,i,n)},i.reset=function(){return this.copy(e.IDENTITY_MATRIX)},i.adjustColor=function(t,e,i,n){return this.adjustHue(n),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i)},i.adjustBrightness=function(t){return 0==t||isNaN(t)?this:(t=this._cleanValue(t,255),this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1]),this)},i.adjustContrast=function(t){if(0==t||isNaN(t))return this;var i;return i=(t=this._cleanValue(t,100))<0?127+t/100*127:127*(i=0==(i=t%1)?e.DELTA_INDEX[t]:e.DELTA_INDEX[t<<0]*(1-i)+e.DELTA_INDEX[1+(t<<0)]*i)+127,this._multiplyMatrix([i/127,0,0,0,.5*(127-i),0,i/127,0,0,.5*(127-i),0,0,i/127,0,.5*(127-i),0,0,0,1,0,0,0,0,0,1]),this},i.adjustSaturation=function(t){if(0==t||isNaN(t))return this;var e=1+((t=this._cleanValue(t,100))>0?3*t/100:t/100);return this._multiplyMatrix([.3086*(1-e)+e,.6094*(1-e),.082*(1-e),0,0,.3086*(1-e),.6094*(1-e)+e,.082*(1-e),0,0,.3086*(1-e),.6094*(1-e),.082*(1-e)+e,0,0,0,0,0,1,0,0,0,0,0,1]),this},i.adjustHue=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,180)/180*Math.PI;var e=Math.cos(t),i=Math.sin(t);return this._multiplyMatrix([.213+.787*e+-.213*i,.715+-.715*e+-.715*i,.072+-.072*e+.928*i,0,0,.213+-.213*e+.143*i,.715+e*(1-.715)+.14*i,.072+-.072*e+-.283*i,0,0,.213+-.213*e+-.787*i,.715+-.715*e+.715*i,.072+.928*e+.072*i,0,0,0,0,0,1,0,0,0,0,0,1]),this},i.concat=function(t){return(t=this._fixMatrix(t)).length!=e.LENGTH?this:(this._multiplyMatrix(t),this)},i.clone=function(){return(new e).copy(this)},i.toArray=function(){for(var t=[],i=0,n=e.LENGTH;i<n;i++)t[i]=this[i];return t},i.copy=function(t){for(var i=e.LENGTH,n=0;n<i;n++)this[n]=t[n];return this},i.toString=function(){return"[ColorMatrix]"},i._multiplyMatrix=function(t){var e,i,n,s=[];for(e=0;e<5;e++){for(i=0;i<5;i++)s[i]=this[i+5*e];for(i=0;i<5;i++){var r=0;for(n=0;n<5;n++)r+=t[i+5*n]*s[n];this[i+5*e]=r}}},i._cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},i._fixMatrix=function(t){return t instanceof e&&(t=t.toArray()),t.length<e.LENGTH?t=t.slice(0,t.length).concat(e.IDENTITY_MATRIX.slice(t.length,e.LENGTH)):t.length>e.LENGTH&&(t=t.slice(0,e.LENGTH)),t},t.ColorMatrix=e}();t=t||{};!function(){function e(t){this.matrix=t}var i=t.extend(e,t.Filter);i.toString=function(){return"[ColorMatrixFilter]"},i.clone=function(){return new e(this.matrix)},i._applyFilter=function(t){for(var e,i,n,s,r=t.data,a=r.length,h=this.matrix,o=h[0],l=h[1],c=h[2],u=h[3],d=h[4],p=h[5],f=h[6],_=h[7],m=h[8],g=h[9],v=h[10],x=h[11],w=h[12],y=h[13],b=h[14],E=h[15],S=h[16],T=h[17],M=h[18],D=h[19],C=0;C<a;C+=4)e=r[C],i=r[C+1],n=r[C+2],s=r[C+3],r[C]=e*o+i*l+n*c+s*u+d,r[C+1]=e*p+i*f+n*_+s*m+g,r[C+2]=e*v+i*x+n*w+s*y+b,r[C+3]=e*E+i*S+n*T+s*M+D;return!0},t.ColorMatrixFilter=t.promote(e,"Filter")}();t=t||{};!function(){function e(){throw"Touch cannot be instantiated"}e.isSupported=function(){return!!("ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)||wx.onTouchStart},e.enable=function(t,i,n){return!!(t&&t.canvas&&e.isSupported())&&(!!t.__touch||(t.__touch={pointers:{},multitouch:!i,preventDefault:!n,count:0},"ontouchstart"in window?e._IOS_enable(t):wx.onTouchStart?e._IOS_enable(t):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&e._IE_enable(t),!0))},e.disable=function(t){t&&("ontouchstart"in window?e._IOS_disable(t):wx.onTouchStart?e._IOS_disable(t):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&e._IE_disable(t),delete t.__touch)},e._IOS_enable=function(t){var i=t.canvas,n=t.__touch.f=function(i){e._IOS_handleEvent(t,i)};i.addEventListener("touchstart",n,!1),i.addEventListener("touchmove",n,!1),i.addEventListener("touchend",n,!1),i.addEventListener("touchcancel",n,!1)},e._IOS_disable=function(t){var e=t.canvas;if(e){var i=t.__touch.f;e.removeEventListener("touchstart",i,!1),e.removeEventListener("touchmove",i,!1),e.removeEventListener("touchend",i,!1),e.removeEventListener("touchcancel",i,!1)}},e._IOS_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();for(var i=e.changedTouches,n=e.type,s=0,r=i.length;s<r;s++){var a=i[s],h=a.identifier;n.replace("touchstart","")!=n?this._handleStart(t,h,e,a.pageX,a.pageY):n.replace("touchmove","")!=n?this._handleMove(t,h,e,a.pageX,a.pageY):n.replace("touchend","")==n&&n.replace("touchcancel","")==n||this._handleEnd(t,h,e)}}},e._IE_enable=function(t){var i=t.canvas,n=t.__touch.f=function(i){e._IE_handleEvent(t,i)};void 0===window.navigator.pointerEnabled?(i.addEventListener("MSPointerDown",n,!1),window.addEventListener("MSPointerMove",n,!1),window.addEventListener("MSPointerUp",n,!1),window.addEventListener("MSPointerCancel",n,!1),t.__touch.preventDefault&&(i.style.msTouchAction="none")):(i.addEventListener("pointerdown",n,!1),window.addEventListener("pointermove",n,!1),window.addEventListener("pointerup",n,!1),window.addEventListener("pointercancel",n,!1),t.__touch.preventDefault&&(i.style.touchAction="none")),t.__touch.activeIDs={}},e._IE_disable=function(t){var e=t.__touch.f;void 0===window.navigator.pointerEnabled?(window.removeEventListener("MSPointerMove",e,!1),window.removeEventListener("MSPointerUp",e,!1),window.removeEventListener("MSPointerCancel",e,!1),t.canvas&&t.canvas.removeEventListener("MSPointerDown",e,!1)):(window.removeEventListener("pointermove",e,!1),window.removeEventListener("pointerup",e,!1),window.removeEventListener("pointercancel",e,!1),t.canvas&&t.canvas.removeEventListener("pointerdown",e,!1))},e._IE_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();var i=e.type,n=e.pointerId,s=t.__touch.activeIDs;if("MSPointerDown"==i||"pointerdown"==i){if(e.srcElement!=t.canvas)return;s[n]=!0,this._handleStart(t,n,e,e.pageX,e.pageY)}else s[n]&&("MSPointerMove"==i||"pointermove"==i?this._handleMove(t,n,e,e.pageX,e.pageY):"MSPointerUp"!=i&&"MSPointerCancel"!=i&&"pointerup"!=i&&"pointercancel"!=i||(delete s[n],this._handleEnd(t,n,e)))}},e._handleStart=function(t,e,i,n,s){var r=t.__touch;if(r.multitouch||!r.count){var a=r.pointers;a[e]||(a[e]=!0,r.count++,t._handlePointerDown(e,i,n,s))}},e._handleMove=function(t,e,i,n,s){t.__touch.pointers[e]&&t._handlePointerMove(e,i,n,s)},e._handleEnd=function(t,e,i){var n=t.__touch,s=n.pointers;s[e]&&(n.count--,t._handlePointerUp(e,i,!0),delete s[e])},t.Touch=e}();var t=t||{};!function(){var e=t.EaselJS=t.EaselJS||{};e.version="0.8.2",e.buildDate="Thu, 26 Nov 2015 20:44:34 GMT"}(),function(){function e(t,e,i){this.Text_constructor(t,e,i)}t.extend(e,t.Text)._drawTextLine=function(t,e,i){if(this.gradient){var n=this.getMeasuredLineHeight(),s=t.createLinearGradient(0,i,0,i+n);s.addColorStop(0,this.colorX),s.addColorStop(1,this.colorY),t.fillStyle=s,t.fillText(e,0,i,this.maxWidth||65535)}else this.Text__drawTextLine(t,e,i)},window.GradientText=t.promote(e,"Text")}(),module.exports=t; 
 			});
 		define("lib/md5.min.js", function(require, module, exports){ 			
"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};!function(t){function r(n,t){var r=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(r>>16)<<16|65535&r}function o(n,t){return n<<t|n>>>32-t}function e(n,t,e,u,f,c){return r(o(r(r(t,n),r(u,c)),f),e)}function u(n,t,r,o,u,f,c){return e(t&r|~t&o,n,t,u,f,c)}function f(n,t,r,o,u,f,c){return e(t&o|r&~o,n,t,u,f,c)}function c(n,t,r,o,u,f,c){return e(t^r^o,n,t,u,f,c)}function i(n,t,r,o,u,f,c){return e(r^(t|~o),n,t,u,f,c)}function d(n,t){n[t>>5]|=128<<t%32,n[14+(t+64>>>9<<4)]=t;var o,e,d,l,a,h=1732584193,m=-271733879,y=-1732584194,p=271733878;for(o=0;o<n.length;o+=16)e=h,d=m,l=y,a=p,m=i(m=i(m=i(m=i(m=c(m=c(m=c(m=c(m=f(m=f(m=f(m=f(m=u(m=u(m=u(m=u(m,y=u(y,p=u(p,h=u(h,m,y,p,n[o],7,-680876936),m,y,n[o+1],12,-389564586),h,m,n[o+2],17,606105819),p,h,n[o+3],22,-1044525330),y=u(y,p=u(p,h=u(h,m,y,p,n[o+4],7,-176418897),m,y,n[o+5],12,1200080426),h,m,n[o+6],17,-1473231341),p,h,n[o+7],22,-45705983),y=u(y,p=u(p,h=u(h,m,y,p,n[o+8],7,1770035416),m,y,n[o+9],12,-1958414417),h,m,n[o+10],17,-42063),p,h,n[o+11],22,-1990404162),y=u(y,p=u(p,h=u(h,m,y,p,n[o+12],7,1804603682),m,y,n[o+13],12,-40341101),h,m,n[o+14],17,-1502002290),p,h,n[o+15],22,1236535329),y=f(y,p=f(p,h=f(h,m,y,p,n[o+1],5,-165796510),m,y,n[o+6],9,-1069501632),h,m,n[o+11],14,643717713),p,h,n[o],20,-373897302),y=f(y,p=f(p,h=f(h,m,y,p,n[o+5],5,-701558691),m,y,n[o+10],9,38016083),h,m,n[o+15],14,-660478335),p,h,n[o+4],20,-405537848),y=f(y,p=f(p,h=f(h,m,y,p,n[o+9],5,568446438),m,y,n[o+14],9,-1019803690),h,m,n[o+3],14,-187363961),p,h,n[o+8],20,1163531501),y=f(y,p=f(p,h=f(h,m,y,p,n[o+13],5,-1444681467),m,y,n[o+2],9,-51403784),h,m,n[o+7],14,1735328473),p,h,n[o+12],20,-1926607734),y=c(y,p=c(p,h=c(h,m,y,p,n[o+5],4,-378558),m,y,n[o+8],11,-2022574463),h,m,n[o+11],16,1839030562),p,h,n[o+14],23,-35309556),y=c(y,p=c(p,h=c(h,m,y,p,n[o+1],4,-1530992060),m,y,n[o+4],11,1272893353),h,m,n[o+7],16,-155497632),p,h,n[o+10],23,-1094730640),y=c(y,p=c(p,h=c(h,m,y,p,n[o+13],4,681279174),m,y,n[o],11,-358537222),h,m,n[o+3],16,-722521979),p,h,n[o+6],23,76029189),y=c(y,p=c(p,h=c(h,m,y,p,n[o+9],4,-640364487),m,y,n[o+12],11,-421815835),h,m,n[o+15],16,530742520),p,h,n[o+2],23,-995338651),y=i(y,p=i(p,h=i(h,m,y,p,n[o],6,-198630844),m,y,n[o+7],10,1126891415),h,m,n[o+14],15,-1416354905),p,h,n[o+5],21,-57434055),y=i(y,p=i(p,h=i(h,m,y,p,n[o+12],6,1700485571),m,y,n[o+3],10,-1894986606),h,m,n[o+10],15,-1051523),p,h,n[o+1],21,-2054922799),y=i(y,p=i(p,h=i(h,m,y,p,n[o+8],6,1873313359),m,y,n[o+15],10,-30611744),h,m,n[o+6],15,-1560198380),p,h,n[o+13],21,1309151649),y=i(y,p=i(p,h=i(h,m,y,p,n[o+4],6,-145523070),m,y,n[o+11],10,-1120210379),h,m,n[o+2],15,718787259),p,h,n[o+9],21,-343485551),h=r(h,e),m=r(m,d),y=r(y,l),p=r(p,a);return[h,m,y,p]}function l(n){var t,r="",o=32*n.length;for(t=0;t<o;t+=8)r+=String.fromCharCode(n[t>>5]>>>t%32&255);return r}function a(n){var t,r=[];for(r[(n.length>>2)-1]=void 0,t=0;t<r.length;t+=1)r[t]=0;var o=8*n.length;for(t=0;t<o;t+=8)r[t>>5]|=(255&n.charCodeAt(t/8))<<t%32;return r}function h(n){return l(d(a(n),8*n.length))}function m(n,t){var r,o,e=a(n),u=[],f=[];for(u[15]=f[15]=void 0,e.length>16&&(e=d(e,8*n.length)),r=0;r<16;r+=1)u[r]=909522486^e[r],f[r]=1549556828^e[r];return o=d(u.concat(a(t)),512+8*t.length),l(d(f.concat(o),640))}function y(n){var t,r,o="";for(r=0;r<n.length;r+=1)t=n.charCodeAt(r),o+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return o}function p(n){return unescape(encodeURIComponent(n))}function g(n){return h(p(n))}function v(n){return y(g(n))}function b(n,t){return m(p(n),p(t))}function s(n,t){return y(b(n,t))}function S(n,t,r){return t?r?b(t,n):s(t,n):r?g(n):v(n)}"function"==typeof define&&define.amd?define(function(){return S}):"object"==("undefined"==typeof module?"undefined":n(module))&&module.exports?module.exports=S:t.md5=S}(void 0); 
 			});
 		define("page/gameOver.js", function(require, module, exports){ 			
"use strict";var e=require("../global/config.js").sourcePath,a=require("../global/config.js").urlPrefix,t=require("../lib/easeljs-0.8.2.for.minapp.js"),n=require("../global/util.js"),i=require("../global/config.js").font,s=require("../lib/base64.js"),r=wx.getFileSystemManager(),c=4,o={scale:0,maxScore:0,curScore:0,handleLocation:{},init:function(e){var a=this;this.stage=e,wx.setStorageSync("page",""),t.Touch.enable(e),this.scale=canvas.width/750,this.user_openid=wx.getStorageSync("openid");var n=wx.getStorageSync("turn_data")||{maxScore:0,curScore:0,curList:[]};this.maxScore=n.maxScore,this.curScore=n.curScore;var i=n.curList;t.Ticker.on("tick",function(){a.stage.update()});for(var s=[],r=0;i.length>0&&r<3;){r++;for(var c=0,o=i[c].count,d=1;d<i.length;d++)i[d].count>o&&(o=i[c=d].count);s.push(i.splice(c,1).pop())}this.list=s,this.render()},render:function(a){var i=this;t.Ticker.on("tick",function(){i.stage.update()});var s="";a&&(s="?date="+(new Date).getTime());var r=[e+"gameOver/bg-1700.jpg",e+"gameOver/game-over.png",e+"gameOver/btn-share.png",e+"gameOver/modal_3.png",e+"gameOver/btn-notice.png",e+"gameOver/btn-KO.png",e+"gameOver/btn3_01.png",e+"gameOver/btn3_02.png",e+"gameOver/btn3_03.png"];this.list.forEach(function(e){r.push(e.avatar)});for(var o=0;o<r.length;o++)r[o]+=s;wx.showLoading({title:"成绩统计中"}),n.loadImage(r).then(function(a){wx.hideLoading(),i.stage.removeAllChildren(),i.drawBackground(a[0],i.stage),i.drawTopCtx(a[1],a[2],i.curScore);for(var t=[],s=9;s<a.length;s++)t.push(a[s]);i.drawModal({modal:a[3],imageList:t,isShowBtn:!0}),i.drawCenterBtn(a[4],a[5],250,t),i.drawBottomBtn(a[6],a[7],a[8]);var r=[e+"gameOver/reserve.png",e+"gameOver/btn-res.png",e+"gameOver/btn-confirm.png",e+"rank/modal.png",e+"rank/btn_1.png",e+"rank/btn_2.png",e+"rank/back.png",e+"rank/dropdown.png",e+"rank/btn_share.png"];n.preload(r),i.shareQrCanvas=wx.createCanvas(),i.shareQrCanvas.width=750,i.shareQrCanvas.height=1334,i.hasDrawShareQrCanvas=!1,i.hasDrawNoticeCanvas=!1,i.stage.update()},function(e){c-- >=0?i.render():(wx.hideLoading(),wx.showModal({title:"网络繁忙",content:"资源拉取失败，请稍后重试X_X",showCancel:!1,confirmText:"刷新重试",success:function(){setTimeout(function(){c=4,i.render("reflash")},2e3)}}))})},drawBackground:function(e,a){var t=this.drawImage({imageObj:e,cancelAddToStage:!0});a.addChild(t)},drawTopCtx:function(a,n,s){var r=this;this.drawImage({imageObj:a,x:74,y:83});var c=this.drawImage({imageObj:n,cancelAddToStage:!0,x:450,y:107});c.addEventListener("click",function(){wx.showLoading({title:"正在生成分享卡片"});var a=r.curScore,t=e+"share/";t+=a>100?"title-5.png":a>70?"title-4.png":a>40?"title-3.png":a>20?"title-2.png":"title-1.png";var n=[e+"share/bg.png",e+"share/bubble.png"];n.push(t),r.list.forEach(function(e){n.push(e.avatar)}),r.drawShareCanvas(n)}),this.stage.addChild(c),this.stage.update();var o=new t.Container,d=Math.ceil(34*this.scale)+"px "+i,l=[d,"#252C86"],g=82,h=288;d=46*this.scale+"px "+i,s>999?s="999+":s>99||(s>9?(g+=15,h-=15):s>=0&&(g+=22,h-=22));var u=[d,"#4FC5EE"],w=new t.Text("本局KO好友",l[0],l[1]),v=new t.Text(s,u[0],u[1]),x=new t.Text("次",l[0],l[1]);w.x=g*this.scale,w.y=10*this.scale,w.textAlign="center",v.x=225*this.scale,v.y=3*this.scale,v.textAlign="center",x.x=h*this.scale,x.y=10*this.scale,x.textAlign="center",o.x=110*this.scale,o.y=155*this.scale,o.skewX=22,o.rotation=-6,o.addChild(w,v,x),this.stage.addChild(o)},drawTopBanner:function(e,a){var n=30*this.scale+"px "+i,s=[n,"#252C86"],r=[n="bold "+30*this.scale+"px "+i,"#FFB618"];e>999&&(e="999+"),a>999&&(a="999+");var c=new t.Text("最高KO记录 :",s[0],s[1]),o=new t.Text("本次成绩 : ",s[0],s[1]),d=new t.Text(e,r[0],r[1]),l=new t.Text(a,r[0],r[1]),g=new t.Text("次",s[0],s[1]);g.x=300*this.scale,c.x=140*this.scale,c.textAlign="center",o.x=550*this.scale,o.textAlign="center",d.x=265*this.scale,d.textAlign="center",l.x=650*this.scale,l.textAlign="center";var h=new t.Container;h.addChild(c,o,g,d,l),h.y=58*this.scale,this.stage.addChild(h)},drawModal:function(e){var a=e.stage||this.stage,n=e.scale||this.scale,s=e.offY||250,r=(e.isShowBtn,e.imageList||[]),c=this.drawImage({imageObj:e.modal,cancelAddToStage:!0,scale:n,x:0,y:s});a.addChild(c);var o=this.list,d={countColor:["#E61952","#EA460B","#ED7700"],countStyle:"bold "+68*n+"px "+i,nickname:[" bold "+30*n+"px "+i,"#252C86"],content:[30*n+"px "+i,"#252C86"],score:["bold "+30*n+"px "+i,"#FFB400"]},l=["肉泥!","肉酱!","肉饼!"],g=s+110;2===o.length&&(g+=55),o.forEach(function(e,i){e.nickname.length>3?e.subName=e.nickname.substring(0,2)+"...":e.subName=e.nickname;var s=new t.Container,c=e.count,o=0;c>999?c="999+":c<100?o=16:c<10&&(o=30);var h=new t.Text(i+1,d.countStyle,d.countColor[i]),u=new t.Bitmap(r[i]),w=new t.Text(e.subName,d.nickname[0],d.nickname[1]),v=new t.Text("被我KO",d.content[0],d.content[1]),x=new t.Text("次，已成",d.content[0],d.content[1]),f=new t.Text(l[i],"bold "+d.content[0],"#FF1A5A"),m=new t.Text(c,d.score[0],d.score[1]);u.x=56*n,u.y=10*n,u.scaleX=86/r[i].width*n,u.scaleY=86/r[i].height*n,w.x=160*n,w.y=36*n,v.x=(316+o)*n,v.y=36*n,x.x=496*n,x.y=36*n,f.x=592*n,f.y=35*n,v.textAlign="center",x.textAlign="center",f.textAlign="center",m.x=(402+o/2)*n,m.y=34*n,m.textAlign="center",s.x=55*n,s.y=(g+136*i)*n,s.addChild(h,u,w,v,x,f,m),a.addChild(s),a.update()})},drawCenterBtn:function(e,n,i,s){var r=this,c=i+526,o=this.drawImage({imageObj:e,scale:.86*this.scale,cancelAddToStage:!0,x:114,y:c}),d=this.drawImage({imageObj:n,scale:.86*this.scale,cancelAddToStage:!0,x:408,y:c});this.stage.addChild(o),this.stage.addChild(d),o.addEventListener("click",function(){wx.request({url:a+"/add_share_stat",data:{openid:wx.getStorageSync("openid"),type:"share_record_to_group"},success:function(e){}}),wx.showLoading({title:"正在生成截图"});var e="";r.list.length>0&&r.list[0].nickname&&(e=r.list[0].nickname),e.length>6&&(e=e.substring(0,6)+"...");var n=wx.env.USER_DATA_PATH+"/sharenotice.jpg";if(r.hasDrawNoticeCanvas)wx.hideLoading(),wx.shareAppMessage({title:"这些弱鸡被我KO了"+r.curScore+"次, 已将"+e+"碾压成肉泥！",imageUrl:n,query:"launch=index&score="+r.curScore,success:function(e){r.stage.update()},fail:function(){r.stage.update()}});else{var i=wx.createCanvas();i.width=750,i.height=1334;var c=new t.Stage(i);r.loadingNoticeCanvas({tempStage:c,tempCanvas:i,path_img:n,imageList:s})}}),d.addEventListener("click",function(){r.reqReserve()})},loadingNoticeCanvas:function(a){var t=this,i=a.tempStage,o=a.tempCanvas,d=a.path_img,l=a.imageList;wx.hideLoading(),n.loadImage([e+"gameOver/bg-1700.jpg",e+"gameOver/modal_3.png"]).then(function(e){var a=t.drawImage({imageObj:e[0],cancelAddToStage:!0,scale:1});i.addChild(a),t.drawModal({scale:1,stage:i,modal:e[1],offY:50,imageList:l}),i.update();var n=o.toDataURL("image/png"),c=s.decodeArrayBuffer(n.split(",")[1]),g="";t.list.length>0&&t.list[0].nickname&&(g=t.list[0].nickname),g.length>6&&(g=g.substring(0,6)+"..."),r.writeFile({filePath:d,data:c,success:function(e){wx.shareAppMessage({title:"这些弱鸡被我KO了"+t.curScore+"次, 已将"+g+"碾压成肉泥！",imageUrl:d,query:"launch=index&score="+t.curScore,complete:function(e){t.stage.update()}})}})},function(e){c-- >=0?t.loadingNoticeCanvas(a):wx.showModal({title:"资源加载失败",content:"请检查网络或稍后重试~",showCancel:!1,confirmText:"刷新重试",success:function(){setTimeout(function(){c=4,t.loadingNoticeCanvas(a)},2e3)}})})},drawBottomBtn:function(t,n,i){var s=this,r=1120,c=this.drawImage({imageObj:t,x:130,y:r}),o=this.drawImage({imageObj:n,x:374,y:r}),d=this.drawImage({imageObj:i,x:621,y:r});c.regX=o.regX=d.regX=t.width/2,c.regY=o.regY=d.regY=t.height/2;var l=!1;c.addEventListener("click",function(){s.btnAnimate(c),!0!==l&&(l=!0,wx.setStorageSync("page","restart"),s.handleLocation.restart())}),o.addEventListener("click",function(){s.btnAnimate(o),wx.showLoading({title:"网络请求中"});wx.shareAppMessage({title:"群里的战五渣！让哥用拳头教你们做人",imageUrl:e+"default/share-logo.png",query:"launch=index",success:function(e){if(wx.hideLoading(),e.shareTickets){wx.request({url:a+"/add_share_stat",data:{openid:wx.getStorageSync("openid"),type:"share_game_to_group"},success:function(e){}});e.shareTickets[0];wx.setStorageSync("shareTicket",e.shareTickets[0]),wx.setStorageSync("page","restart"),s.handleLocation.restart("flag"),s.stage.update()}else wx.showModal({title:"无效的分享 X_X",content:"分享到群聊天才能启动游戏喔，再试一下吧~",showCancel:!1}),s.stage.update()},fail:function(){l=!1,wx.hideLoading(),s.stage.update()}})}),d.addEventListener("click",function(){s.btnAnimate(d),s.handleLocation.rank()})},reqReserve:function(){var e=this;wx.showLoading({title:"请求中"}),wx.request({url:a+"get_reserve_status",data:{openid:this.user_openid},success:function(a){wx.hideLoading(),e.drawReservation(a)},fail:function(a){c-- >=0?e.reqReserve():(wx.hideLoading(),wx.showModal({title:"请求失败",content:"请检查网络连接或稍后重试~",confirmText:"刷新重试",success:function(a){a.confirm&&setTimeout(function(){c=4,e.reqReserve()},2e3)}}))}})},drawReservation:function(s){var r=this,o=[e+"gameOver/reserve.png",e+"gameOver/btn-res.png",e+"gameOver/btn-confirm.png"];wx.showLoading({title:"资源加载中"}),n.loadImage(o).then(function(e){wx.hideLoading();var n=new t.Container,c=new t.Shape;c.graphics.beginFill("#000").drawRect(0,0,canvas.width,canvas.height),c.alpha=.7;var o=new t.Bitmap(e[0]);o.scaleX=r.scale,o.scaleY=r.scale,o.y=338*r.scale,n.addChild(c),n.addChild(o);var d=[36*r.scale+"px "+i,"#fff"];if("SUCCESS"===s.data.status&&1===s.data.data.subscribed)r.drawReserved(n,e[2],d,125);else{var l=new t.Bitmap(e[1]);l.scaleX=r.scale,l.scaleY=r.scale,l.x=canvas.width/2,l.y=780*r.scale,l.regX=e[1].width/2,n.addChild(l);var g=["新一届拳皇KOF即将开幕，","想和草薙、八神、不知火舞等","格斗家一决高下？点击下方按钮","预约《拳皇命运》手游，用拳头","KO一切不服吧！"],h=new t.Container;g.forEach(function(e,a){var n=new t.Text(e,d[0],d[1]);n.x=125*r.scale,n.y=(488+54*a)*r.scale,h.addChild(n)}),n.addChild(h),l.addEventListener("click",function(){wx.request({url:a+"reserve",data:{openid:r.user_openid},success:function(a){"SUCCESS"===a.data.status&&(n.removeChildAt(2,3),r.drawReserved(n,e[2],d,125))}})})}o.addEventListener("click",function(){}),c.addEventListener("click",function(){r.stage.removeChild(n),r.stage.update()}),r.stage.addChild(n),r.stage.update()},function(e){c-- >=0?r.drawReservation(s):wx.showModal({title:"网络繁忙",content:"请检查网络连接或稍后重试~",confirmText:"刷新重试",success:function(e){e.confirm&&setTimeout(function(){c=4,r.drawReservation(e)},2e3)}})})},drawReserved:function(e,a,n,i){var s=this,r=new t.Bitmap(a);r.scaleX=this.scale,r.scaleY=this.scale,r.x=canvas.width/2,r.y=780*this.scale,r.regX=a.width/2;var c=new t.Container;["恭喜您已成功预约《拳皇命运》","手游，关注微信公众号kofmy666","了解游戏最新动态"].forEach(function(e,a){var r=new t.Text(e,n[0],n[1]);r.x=i*s.scale,r.y=(540+60*a)*s.scale,c.addChild(r)}),e.addChild(c),e.addChild(r),r.addEventListener("click",function(){s.stage.removeChild(e),s.stage.update()}),this.stage.update()},drawImage:function(e){if(!e.imageObj)throw new Error("参数缺失：imageObj");var a=new t.Bitmap(e.imageObj),n=e.y||0,i=e.x||0;return n*=this.scale,i*=this.scale,a.scaleX=e.scale||this.scale,a.scaleY=e.scale||this.scale,a.y=n,a.x=i,e.cancelAddToStage||this.stage.addChild(a),a},drawShareCanvas:function(e){var a=this,t=wx.env.USER_DATA_PATH+"/shareQrCanvas.jpg";this.hasDrawShareQrCanvas?wx.previewImage({current:t,urls:[t],success:function(e){wx.hideLoading(),a.btnStatus="thaw"},fail:function(e){a.btnStatus="thaw"}}):this.loadingShareCanvas({imageArray:e,path_img:t})},loadingShareCanvas:function(e){var a=this,t=e.imageArray,i=e.path_img;n.loadImage(t).then(function(e){for(var t=[],n=3;n<e.length;n++)t.push(e[n]);a.drawShareQrCanvas({bg:e[0],bubble:e[1],title:e[2],avatarList:t});var c=a.shareQrCanvas.toDataURL(),o=s.decodeArrayBuffer(c.split(",")[1]);r.writeFile({filePath:i,data:o,success:function(e){a.hasDrawShareQrCanvas=!0,wx.previewImage({current:i,urls:[i],success:function(e){wx.hideLoading(),a.btnStatus="thaw"},fail:function(e){a.btnStatus="thaw"}})}})},function(t){c-- >=0?a.loadingShareCanvas(e):wx.showModal({title:"网络繁忙",content:"资源拉取失败，请稍后重试X_X",confirmText:"刷新重试",success:function(t){t.confirm&&setTimeout(function(){c=4,a.loadingShareCanvas(e)},2e3)}})})},drawShareQrCanvas:function(e){var a=this.shareQrCanvas,n=new t.Stage(a),i=this.drawImage({imageObj:e.bg,cancelAddToStage:!0,scale:1}),s=this.drawImage({imageObj:e.title,cancelAddToStage:!0,scale:1}),r=new t.Container,c=210,o=448,d=this.curScore;d>999?(c-=40,o=434,d="999+"):d<10&&(c+=30,o+=18);var l=new t.Text("震惊!本局KO好友","47px Microsoft YaHei","#ffffff");l.x=1*c,l.y=12,l.textAlign="center";var g=new t.Text(d,"65px Microsoft YaHei","#8EF0FF");g.x=1*o,g.textAlign="center";var h=new t.Text("次","47px Microsoft YaHei","#ffffff");h.x=510,h.y=12,r.x=170,r.y=268,r.addChild(l,g,h),n.addChild(i,s,r);var u=[{x:110,y:605,rotation:6},{x:308,y:602,rotation:-4},{x:500,y:608,rotation:12}];2===e.avatarList.length?u=[{x:110,y:605,rotation:6},{x:500,y:608,rotation:12}]:1===e.avatarList.length&&(u=[{x:500,y:608,rotation:12}]),e.avatarList.forEach(function(e,a){var i=new t.Bitmap(e),s=u[a];i.scaleX=i.scaleY=96/e.width*1,i.x=1*s.x,i.y=1*s.y,i.rotation=s.rotation,n.addChild(i)});var w=new t.Bitmap(e.bubble);w.scaleX=w.scaleY=1,w.x=500,w.y=510,n.addChild(w),n.update()},fadeIn:function(e){var a=this,n=t.Ticker.on("tick",function(){if(e.alpha<1){var i=e.alpha+.1;i>1&&(i=1),e.alpha=i,a.stage.update()}else t.Ticker.removeEventListener("tick",n)})},btnAnimate:function(e){var a=this,t=e.scaleX;e.scaleX=e.scaleY=t-.08,this.stage.update(),setTimeout(function(){e.scaleX=e.scaleY=t-.02,a.stage.update()},100)},addHandleLocation:function(e){this.handleLocation=e}};module.exports=o; 
 			});
 		define("page/index.js", function(require, module, exports){ 			
"use strict";var e=require("../global/config.js").sourcePath,t=require("../global/config.js").urlPrefix,a=require("../lib/easeljs-0.8.2.for.minapp.js"),n=require("../global/util.js"),i=require("../global/config.js").urlDomain,s=3,o={scale:0,stage:null,init:function(e,t){var n=this;this.stage=e,this.hasLogin=!1,a.Touch.enable(e),wx.setStorageSync("page","init"),this.isShareTicket=t,this.stage.removeAllChildren(),a.Ticker.removeAllEventListeners("tick"),this.scale=canvas.width/750,a.Ticker.on("tick",function(){n.stage.update()}),this.render()},handleLocation:function(){},login:function(t){var a=this,n=t.callback;wx.login({success:function(t){wx.getUserInfo({success:function(i){wx.setStorageSync("nickname",i.userInfo.nickName),wx.setStorageSync("avatar",i.userInfo.avatarUrl||e+"default/default.png"),a.get_session(t.code,n)},fail:function(e){a.showModal()}})},fail:function(e){wx.showModal({title:"登录失败",content:""})}})},showModal:function(){var e=this;wx.hideLoading(),wx.showModal({title:"提示",content:"小游戏需要您的用户授权才能体验~ 请前往 关于游戏->设置 进行授权",confirmText:"去设置",success:function(t){t.confirm&&wx.openSetting({success:function(t){!0===t.authSetting["scope.userInfo"]?e.init(e.stage,e.isShareTicket):e.showModal()}})},fail:function(){e.showModal()}})},get_session:function(e,t){var a=this;wx.request({url:i+"/php/ingame/wxapp/login.php",data:{login_type:"wxapp",game:"kof",code:e},success:function(e){var a=e.data.data;wx.setStorageSync("openid",a.openid),wx.setStorageSync("sessionId",a.session_id),t&&t()},fail:function(e){s-- >=0?a.get_session():wx.showModal({title:"网络繁忙",content:"登录态请求出错啦，请稍后重试X_X",confirmText:"刷新重试",success:function(e){e.confirm&&setTimeout(function(){a.get_session()},2e3)}})}})},render:function(){var t=this,a=e+"index/";!0===window.isIphoneX?a+="bg-1700.png":a+="bg-1600.png",wx.showLoading({title:""}),n.loadImage([a,e+"index/title.png",e+"index/share-btn.png"]).then(function(a){t.stage.removeAllChildren(),t.drawBackground(a[0]),t.drawTitle(a[1]),!0===t.isShareTicket?t.login({callback:function(){t.drawModal()}}):(wx.hideLoading(),t.drawShareBtn(a[2])),t.stage.update();var i=[e+"rule/rule-avatar.png",e+"rule/button-02.png",e+"startGame/bg-1639.jpg",e+"startGame/border-bg-light.png",e+"startGame/start-3.png",e+"startGame/start-2.png",e+"startGame/start-1.png",e+"startGame/ready-go.png",e+"startGame/flag001-top.png",e+"startGame/flag001-bottom.png",e+"startGame/flag002-top.png",e+"startGame/flag002-bottom.png",e+"startGame/burrow-1.png",e+"startGame/burrow-2.png",e+"startGame/getScore.png",e+"default/1.png",e+"default/2.png",e+"default/3.png",e+"default/4.png",e+"default/5.png",e+"startGame/sprite-00-02.png",e+"startGame/sprite-03-05.png",e+"startGame/sprite-06-08.png",e+"startGame/sprite-09-11.png",e+"startGame/sprite-12-13.png",e+"default/default.png"];n.preload(i)},function(e){s-- >=0?(t.render(),wx.showLoading({title:"资源加载中"})):(wx.hideLoading(),wx.showModal({title:"网络繁忙",content:"资源拉取失败，请稍后重试X_X",showCancel:!1,confirmText:"刷新重试",success:function(e){setTimeout(function(){t.render()},2e3)}}))})},drawBackground:function(e){this.drawImage({imageObj:e,x:0,y:0})},drawTitle:function(e){this.drawImage({imageObj:e,x:0,y:100})},drawShareBtn:function(a){var n=this,i=1100;!0===window.isIphoneX&&(i=1195),this.shareBtn=this.drawImage({imageObj:a,x:canvas.width/this.scale/2,y:i+a.height/2,cancelAddToStage:!0});var s=this.shareBtn;s.regX=a.width/2,s.regY=a.height/2,this.breathe(s),s.addEventListener("click",function(){n.btnAnimate(s),wx.showLoading({title:"用户登录中"}),n.timeout=setTimeout(function(){!1===n.hasLogin&&(wx.hideLoading(),wx.showModal({title:"登录超时，请重试~"}))},6e3),n.login({callback:function(){n.hasLogin=!0,wx.hideLoading(),n.timeout&&clearTimeout(n.timeout),wx.shareAppMessage({title:"群里的战五渣! 让哥用拳头教你们做人",imageUrl:e+"default/share-logo.png",query:"launch=index",success:function(e){if(e.shareTickets){n.stage.removeChild(n.shareBtn),wx.request({url:t+"/add_share_stat",data:{openid:wx.getStorageSync("openid"),type:"share_game_to_group"},success:function(e){}});e.shareTickets[0];wx.setStorageSync("shareTicket",e.shareTickets[0]),n.drawModal()}else wx.showModal({title:"无效的分享 X_X",content:"分享到 群 才能体验游戏喔，再试一下吧~",showCancel:!1}),n.stage.update()},fail:function(){wx.hideLoading(),n.stage.update()}})}})}),this.stage.addChild(s)},drawModal:function(){var t=this;wx.showLoading({title:"资源加载中"});var i=[e+"rule/rule-avatar.png",e+"rule/button-02.png"];n.loadImage(i).then(function(e){wx.hideLoading();var n=new a.Shape;n.graphics.beginFill("#000").drawRect(0,0,canvas.width,canvas.height),n.alpha=.6,t.stage.addChild(n);var i=t.drawImage({imageObj:e[0],x:0,y:253,cancelAddToStage:!0});i.alpha=0,t.fadeIn(i);var s=t.drawImage({imageObj:e[1],x:canvas.width/t.scale/2,y:990,cancelAddToStage:!0});t.stage.addChild(i),t.stage.addChild(s),s.alpha=0,s.regX=e[1].width/2,s.regY=e[1].height/2,t.fadeIn(s);var o=!0;s.scaleX;s.addEventListener("click",function(){t.btnAnimate(s),wx.setStorageSync("loginStatus",""),!1!==o&&(o=!1,t.handleLocation())}),t.stage.update(),wx.createInnerAudioContext().src="assets/mp3/punch.mp3"},function(e){s-- >=0?(wx.showLoading({title:"网络连接中"}),t.drawModal()):(wx.hideLoading(),wx.showModal({title:"网络繁忙",content:"资源拉取失败，请稍后重试X_X",showCancel:!1,confirmText:"刷新重试",success:function(){setTimeout(function(){t.drawModal()},2e3)}}))})},drawImage:function(e){if(!e.imageObj)throw new Error("参数缺失：imageObj");var t=new a.Bitmap(e.imageObj),n=e.y||0,i=e.x||0;return n*=this.scale,i*=this.scale,t.scaleX=this.scale,t.scaleY=this.scale,t.y=n,t.x=i,!0!==e.cancelAddToStage&&this.stage.addChild(t),t},fadeIn:function(e){var t=this,n=a.Ticker.on("tick",function(){if(e.alpha<1){var i=e.alpha+.09;i>1&&(i=1),e.alpha=i,t.stage.update()}else a.Ticker.removeEventListener("tick",n)})},breathe:function(e){var t=this,n=e.scaleX,i=n+.001,s=n-.025,o="positive";a.Ticker.on("tick",function(){switch(o){case"positive":(n+=5e-4)>i&&(o="negative");break;case"negative":(n-=5e-4)<s&&(o="positive")}e.scaleX=e.scaleY=n,t.stage.update()})},btnAnimate:function(e){var t=this,a=e.scaleX;e.scaleX=e.scaleY=a-.08,this.stage.update(),setTimeout(function(){e.scaleX=e.scaleY=a-.02,t.stage.update()},100)},addHandleLocation:function(e){e=e||function(){},this.handleLocation=e}};module.exports=o; 
 			});
 		define("page/rank.js", function(require, module, exports){ 			
"use strict";var e=require("../global/config.js").sourcePath,t=require("../global/config.js").urlPrefix,a=require("../lib/easeljs-0.8.2.for.minapp.js"),n=require("../global/util.js"),i=4,s={handleLocation:{},init:function(e){this.stage=e,wx.setStorageSync("page",""),a.Ticker.removeAllEventListeners("tick"),this.scale=canvas.width/750;var t=wx.getStorageSync("turn_data")||{maxScore:0};this.maxScore=t.maxScore,this.countRecord=0,this.user_openid=wx.getStorageSync("openid"),this.group_list=[],this.person_list=[],wx.showLoading({title:"资源加载中"}),this.get_player_rank(),this.get_total_ko(),this.get_group_rank()},get_player_rank:function(){var e=this;wx.showLoading({title:"资源加载中"}),wx.request({url:t+"get_player_rank?time="+(new Date).getTime(),data:{type:"TOTAL",num:5,openid:this.user_openid},success:function(t){var a=[];"SUCCESS"===t.data.status?(a=t.data.data,"[object Array]"===Object.prototype.toString.call(a.result)?e.person_list=a.result:e.person_list=[]):i-- >=0?e.get_player_rank():wx.showModal({title:"网络繁忙",content:"获取个人KO记录失败，请稍后重试",confirmText:"刷新重试",success:function(){setTimeout(function(){i=4,e.get_player_rank()},2e3)}})},fail:function(t){i-- >=0&&e.init()}})},get_total_ko:function(){var e=this;wx.request({url:t+"get_player_total_ko_this_week?time="+(new Date).getTime(),data:{openid:this.user_openid},success:function(t){"SUCCESS"===t.data.status?e.countRecord=t.data.data.total_ko:e.countRecord=0},fail:function(t){i-- >=0&&e.get_total_ko()}})},get_group_rank:function(){var e=this;wx.request({url:t+"get_group_rank?time="+(new Date).getTime(),data:{num:5,with_members:3},success:function(t){var a=[];"SUCCESS"===t.data.status?(a=t.data.data,e.group_list=a.result,e.render()):i--},fail:function(t){i-- >=0||wx.showModal({title:"网络繁忙",content:"数据拉取失败(group_rank)，请稍后重试X_X",confirmText:"刷新重试",success:function(t){t.confirm&&setTimeout(function(){e.get_group_rank()},1e3)}})}})},render:function(){var t=this,s=[e+"gameOver/bg-1700.jpg",e+"rank/modal.png",e+"rank/btn_1.png",e+"rank/btn_2.png",e+"rank/back.png"];n.loadImage(s).then(function(e){wx.hideLoading(),t.stage.removeAllChildren();var n=t.drawBackground(e[0]),i=t.drawModal(e[1]);t.container_one=new a.Container,t.container_group=new a.Container;wx.getStorageSync("page");t.drawByOne();var s=t.drawFooter(),c=t.drawBackBtn(e[4]);t.stage.alpha=0,t.fadeIn(t.stage),t.stage.addChild(n,i,t.container_one,t.container_group,s,c),t.stage.update()},function(e){i-- >=0?t.render():wx.showModal({title:"网络繁忙",content:"资源拉取失败，请稍后重试X_X",confirmText:"刷新重试",success:function(e){e.confirm?setTimeout(function(){t.render()},2e3):wx.hideLoading()}})})},drawBackground:function(e){return this.drawImage({imageObj:e})},drawModal:function(e){return this.drawImage({imageObj:e,x:25,y:54})},drawBackBtn:function(e){var t=this,a=this.drawImage({imageObj:e,x:680,y:198});return a.addEventListener("click",function(){t.handleLocation.gameOver()}),a},drawBtnByGroup:function(e){var t=this.drawImage({imageObj:e,x:230,y:342});return t.regX=e.width/2,t.regY=e.height/2,t},drawBtnByOne:function(e){var t=this.drawImage({imageObj:e,x:530,y:342});return t.regX=e.width/2,t.regY=e.height/2,t},drawByOne:function(){var e=this,t=this.drawTopData(this.maxScore,this.countRecord);this.container_one.addChild(t),a.Ticker.on("tick",function(){e.stage.update()}),this.drawRank()},drawTopData:function(e,t){var n=new a.Container,i=30*this.scale+"px Microsoft YaHei",s=["#EB5283","#FFB400"],c=new a.Text("最高KO记录",i,s[0]),r=new a.Text("累计KO记录",i,s[0]),o=e,l=t;o>999&&(o="999+"),l>999&&(l="999+");var d=new a.Text(o,"bold "+i,s[1]),h=new a.Text(l,"bold "+i,s[1]);return c.x=115*this.scale,d.x=285*this.scale,r.x=415*this.scale,h.x=585*this.scale,n.addChild(c,r,d,h),n.y=328*this.scale,n},drawRank:function(){var s=this,c=this.person_list,r=this.person_list.map(function(e){return e.avatar});r.push(e+"rank/btn_share.png"),wx.showLoading({title:"资源加载中"}),n.loadImage(r).then(function(n){wx.hideLoading();var i={countColor:["#E61952","#EA460B","#ED7700","#252C86","#252C86"],countStyle:"bold "+40*s.scale+"px Microsoft YaHei",nickname:[" bold "+26*s.scale+"px Microsoft YaHei","#252C86"],content:[26*s.scale+"px Microsoft YaHei","#252C86"],score:["bold "+26*s.scale+"px Microsoft YaHei","#FFB400"]},r=n.pop(),o=new a.Container;c.forEach(function(c,l){c.nickname.length>3?c.subName=c.nickname.substring(0,2)+"...":c.subName=c.nickname;var d=new a.Container,h=c.ko;h>1e4?h="9k+":h>999&&(h=Math.floor(h/1e3)+"k+");var u=new a.Text(l+1,i.countStyle,i.countColor[l]),g=new a.Bitmap(n[l]),w=new a.Text(c.subName,i.nickname[0],i.nickname[1]),p=new a.Text("被我KO",i.content[0],i.content[1]),x=new a.Text("次",i.content[0],i.content[1]),f=new a.Text(h,i.score[0],i.score[1]),m=new a.Bitmap(r);g.x=50*s.scale,g.scaleX=64/n[l].width*s.scale,g.scaleY=64/n[l].height*s.scale,w.x=125*s.scale,w.y=16*s.scale,p.x=270*s.scale,p.y=16*s.scale,p.textAlign="center",x.x=388*s.scale,x.y=16*s.scale,x.textAlign="center",f.x=346*s.scale,f.y=16*s.scale,f.textAlign="center",m.scaleX=s.scale,m.scaleY=s.scale,m.x=410*s.scale,m.y=7*s.scale,d.x=120*s.scale,d.y=(455+105*l)*s.scale,d.addChild(u,g,w,p,x,f,m),m.addEventListener("click",function(){wx.request({url:t+"/add_share_stat",data:{openid:s.user_openid,type:"share_to_friend"},success:function(e){}});var a=c.ko,n="";c.nickname&&(n=c.nickname+", "),a>1e5?a="10w+":a>1e4&&(a=Math.floor(a/1e4)+"w+"),wx.shareAppMessage({title:n+"你被我KO了"+a+"次, 不服来咬我呀！",imageUrl:e+"default/share-logo.png",query:"launch=index",success:function(e){s.stage.update()},fail:function(e){s.stage.update()}})}),o.addChild(d)}),s.container_one.addChild(o),s.stage.update()},function(e){i-- >=0?s.drawRank():wx.showModal({title:"网络繁忙",content:"资源拉取失败，请稍后重试X_X",showCancel:!1,confirmText:"刷新重试",success:function(){setTimeout(function(){i=4,s.drawRank()},2e3)}})})},drawByGroup:function(){var e=this,t={countStyle:"bold "+40*this.scale+"px Microsoft YaHei",groupname:[26*this.scale+"px Microsoft YaHei","#252C86"],nickname:[" bold "+26*this.scale+"px Microsoft YaHei","#252C86"],content:[26*this.scale+"px Microsoft YaHei","#252C86"],score:["bold "+26*this.scale+"px Microsoft YaHei","#FFB400"]};this.group_list.forEach(function(n,i){var s=n.gname;s&&s.length>6&&(s=s.substring(0,6)+"...");var c=new a.Container;c.x=canvas.width/2,c.y=(460+105*i)*e.scale,c.regX=250*e.scale;var r=new a.Shape;r.graphics.beginFill("#fff").drawRect(0,0,540*e.scale,85*e.scale);var o=new a.Text(i+1,t.countStyle,"#252C86"),l=new a.Text("群名：",t.nickname[0],t.nickname[1]),d=new a.Text(s,t.groupname[0],t.groupname[1]),h=new a.Text("累计KO记录",t.content[0],t.content[1]),u=n.ko;u>999&&(u="999+");var g=new a.Text(u,t.score[0],t.score[1]);l.x=40*e.scale,l.y=16*e.scale,d.x=115*e.scale,d.y=16*e.scale,h.x=320*e.scale,h.y=16*e.scale,g.x=465*e.scale,g.y=16*e.scale,c.addChild(r),c.addChild(o),c.addChild(l),c.addChild(d),c.addChild(h),c.addChild(g),e.container_group.addChild(c),c.addEventListener("click",function(){e.btnAnimate(c),e.listBranch.alpha>0?(e.listBranch.alpha=0,e.stage.update()):i<3?(e.listBranch.alpha=1,e.drawListBranch({data:n.memebers,index:i,x:120,y:460+105*i})):i>=3&&wx.showModal({title:"排行前3名的群",content:"才会显示成员信息喔~",showCancel:!1})})}),this.listBranch=new a.Container,this.listBranch.alpha=0,this.container_group.addChild(this.listBranch),this.stage.update()},drawListBranch:function(t){var s=this,c=void 0;c=t.data&&t.data.length>0?t.data:[];t.index;var r=t.x,o=t.y;this.listBranch.removeAllChildren(),this.listBranch.x=r*this.scale,this.listBranch.y=(o+60)*this.scale,this.listBranch.alpha=1;var l=new a.Shape;l.graphics.beginFill("#fff").drawRect(0,0,540*this.scale,255*this.scale),this.listBranch.addChild(l),this.stage.update();var d={countStyle:"bold "+40*this.scale+"px Microsoft YaHei",groupname:[26*this.scale+"px Microsoft YaHei","#252C86"],nickname:[" bold "+26*this.scale+"px Microsoft YaHei","#252C86"],content:[26*this.scale+"px Microsoft YaHei","#252C86"],score:["bold "+26*this.scale+"px Microsoft YaHei","#FFB400"]},h=c.map(function(e){return e.avatar});h.push(e+"rank/dropdown.png"),wx.showLoading({title:"资源加载中"}),n.loadImage(h).then(function(e){wx.hideLoading();var t=e.pop(),n=s.drawImage({imageObj:t,x:-8});s.listBranch.addChild(n);var i=12;2===c.length?i=52:1===c.length&&(i=90),c.forEach(function(t,n){var c=new a.Container,r=new a.Bitmap(e[n]);r.x=45*s.scale,r.scaleX=64/e[n].width*s.scale,r.scaleY=64/e[n].height*s.scale,t.nickname.length>4&&(t.nickname=t.nickname.substring(0,3)+"...");var o=new a.Text(t.nickname,d.nickname[0],d.nickname[1]),l=new a.Text("累计KO记录",d.content[0],d.content[1]),h=t.ko;h>999&&(h="999+");var u=new a.Text(h,d.score[0],d.score[1]);o.x=125*s.scale,o.y=16*s.scale,l.x=260*s.scale,l.y=16*s.scale,u.x=405*s.scale,u.y=16*s.scale,c.x=20*s.scale,c.y=(i+80*n)*s.scale,c.addChild(r,o,l,u),s.listBranch.addChild(c)}),s.stage.update()},function(e){i-- >=0?s.drawListBranch(t):wx.showModal({title:"网络繁忙",content:"资源拉取失败，请稍后重试X_X",showCancel:!1,confirmText:"刷新重试",success:function(){setTimeout(function(){i=4,s.drawListBranch(t)})}})})},drawFooter:function(){var e=new a.Text("提示：该榜单每周一0点清零刷新",24*this.scale+"px Microsoft YaHei","#FF6779");return e.x=canvas.width/2,e.y=1040*this.scale,e.textAlign="center",e},drawImage:function(e){if(!e.imageObj)throw new Error("参数缺失：imageObj");var t=new a.Bitmap(e.imageObj),n=e.y||0,i=e.x||0;return n*=this.scale,i*=this.scale,t.scaleX=this.scale,t.scaleY=this.scale,t.y=n,t.x=i,t},fadeIn:function(e){var t=this,n=a.Ticker.on("tick",function(){if(e.alpha<1){var i=e.alpha+.1;i>1&&(i=1),e.alpha=i,t.stage.update()}else a.Ticker.removeEventListener("tick",n)})},btnAnimate:function(e){var t=this;if(!0!==this.isOnClick){var a=e.scaleX,n=e.scaleX;this.isOnClick=!0,e.scaleX=e.scaleY=a-.04,this.stage.update(),setTimeout(function(){e.scaleX=e.scaleY=n,t.isOnClick=!1,t.stage.update()},100)}},addHandleLocation:function(e){e=e||function(){},this.handleLocation=e}};module.exports=s; 
 			});
 		define("page/startGame.js", function(require, module, exports){ 			
"use strict";var e=require("../global/config.js").sourcePath,a=require("../global/config.js").urlPrefix,t=require("../global/config.js").urlDomain,r=require("../lib/easeljs-0.8.2.for.minapp.js"),n=require("../global/util.js"),i=require("../lib/md5.min.js"),o="devtools"===wx.getSystemInfoSync().brand,s=require("../global/config.js").font,c=3,l={iphoneXoffset:0,config:{num:0,FPS:3,level:0,phase:2,warmUp:5,countDown:900,freq:8,levelData:[{percent:8e-4,speed:.56},{percent:.0015,speed:.59},{percent:.003,speed:.62},{percent:.005,speed:.65},{percent:.007,speed:.68},{percent:.009,speed:.71},{percent:.0075,speed:.74},{percent:.011,speed:.78},{percent:.013,speed:.81},{percent:.015,speed:.825},{percent:.017,speed:.85},{percent:.019,speed:.875},{percent:.019,speed:.9},{percent:.021,speed:.925},{percent:.023,speed:.95},{percent:.025,speed:.975},{percent:.027,speed:1}]},game:{},control:{coordinate:{x0:68,y0:590,xCell:240,yCell:160,punchDirX:-178,punchDirY:-142},batter:{init:40,countDown:0,num:0},batterCountDown:20,batterNum:0},currentScoreArea:{count:0,disObject:null},maxRecordArea:{count:0,disObject:null},recordList:[],burrowData:[],flagConfig:{avatarSize:104,x:14,y:14},warningAvatar:[{id:-1,avatar:e+"default/1.png"},{id:-1,avatar:e+"default/2.png"},{id:-1,avatar:e+"default/3.png"},{id:-1,avatar:e+"default/4.png"},{id:-1,avatar:e+"default/5.png"}],scoreAvatar:[],listData:[],handleLocation:function(){},init:function(a,t){var n=this;this.redirect=t,this.stage=a,this.isGameOver=!1,this.control.batter.num=0,wx.setStorageSync("page","start"),this.user_openid=wx.getStorageSync("openid"),this.user_avatar=wx.getStorageSync("avatar"),this.user_nickname=wx.getStorageSync("nickname"),r.Ticker.removeAllEventListeners("tick"),r.Touch.disable(this.stage),!0===window.isIphoneX&&(this.iphoneXoffset=60),this.scale=canvas.width/750,this.loading(),this.punchTimes=0,this.currentScoreArea.count=0,this.textConfig={default:[28*this.scale+"px 微软雅黑","#FEE4C4"],bold:["bold "+28*this.scale+"px 微软雅黑","#FFB618"]};for(var i=this.control.coordinate,o=0,s=0,c=0,l=0,d=0;d<6;d++)s=l=228+(c=d<3?i.y0:i.y0+i.yCell),o=i.x0+d%3*i.xCell,this.burrowData[d]={offsetX:o,offsetY:s,fromY:c,toY:l,dirY:228,countdown:2,imageObj:null,src:"",index:d,id:-1,status:"hidden"};wx.request({url:e+"config/level.json?v=1"+new Date,success:function(e){n.config=e.data,n.game=JSON.parse(JSON.stringify(n.config)),n.getGroupInfo()},fail:function(e){n.game=JSON.parse(JSON.stringify(n.config)),n.getGroupInfo()}})},handleTouch:function(e){for(var a=e.touches.length,t=0;t<a;t++){var n=e.touches[t],i=n.pageX,o=n.pageY,s=window.innerWidth/750,c=window.innerWidth/canvas.width,l=this.burrowData[0].offsetX*s,d=this.burrowData[1].offsetX*s,h=this.burrowData[2].offsetX*s,u=0,g=!1;window.innerWidth,window.innerHeight;if(i>l&&i<l+65?(g=!0,u=0):i>d&&i<d+65?(g=!0,u=1):i>h&&i<h+65&&(g=!0,u=2),!0===g&&this.burrowData[u].imageObj&&this.burrowData[u].imageObj.y){var f=this.burrowData[u].imageObj.y*c,p=this.burrowData[u+3].imageObj.y*c;o>p&&o<p+65?u+=3:o>f&&o<f+65||(g=!1)}if(!0===g){if(this.isGameOver)return;var m=this.burrowData[u],v=m.id;if(m.canPunch)if(m.canPunch=!1,200===v){var w=this.control.batter;w.countDown>0?(w.num+=1,this.batterUpdate(w.num)):w.num=1,w.countDown=w.init,m.status="punched",this.rotateFlag(m.imageObj),m.index<this.scoreAvatar.length&&this.scoreAvatar[m.index].count++;var x=this.currentScoreArea.count+1;this.drawPunch({index:u,y:m.imageObj.y}),this.scoreUpdate(x)}else m.status="punched",this.rotateFlag(m.imageObj),this.drawFailAni("wrong"),this.drawPunch({index:u,y:m.imageObj.y,lost:!0}),r.Ticker.removeEventListener("tick",this.timer)}}},getGroupInfo:function(){var a=this,t=wx.getStorageSync("shareTicket");if(!t)return wx.showModal({title:"获取shareTicket失败",content:"请重新分享游戏",showCancel:!1,confirmText:"分享到群",success:function(e){a.handleLocation.reInit()}}),void wx.setStorageSync("page","reInit");wx.getShareInfo({shareTicket:t,success:function(t){var r="";if(t.roomTopic)r=t.roomTopic;else for(var n=JSON.parse(t.rawData).profileList||[],i=0;i<n.length;i++)if((r+=n[i].nickName+"、").length>28){r=r.substring(0,26),r+="...";break}wx.setStorageSync("roomTopic",r);var s=t.encryptedData,c=t.iv;if(o)a.scoreAvatar=[{id:200,index:0,openid:"asdfwerwerwer12938019238",nickname:"子非鱼",count:0,avatar:e+"default/avatar.jpg"},{id:200,index:1,openid:"0w36fduio78y9oj85d5646a",count:0,nickname:"五花马",avatar:e+"default/avatar-2.jpg"},{id:200,index:2,openid:"tdh123sg14546465sdfgsf",count:0,nickname:"乌鹊南飞",avatar:e+"default/avatar-3.jpg"}];else{for(var l=JSON.parse(t.rawData).profileList||[],d=[],h=[],u=0;u<l.length;u++)if(l[u].openId===a.user_openid){l.splice(u,1);break}for(var g=0;g<l.length;g++)l[g].avatarUrl&&null!=l[g].avatarUrl.match(/\w/)?l[g].avatarUrl=l[g].avatarUrl.replace(/\/\d+$/,"/96"):l[g].avatarUrl=e+"default/default.png";if(l.length<10)a.scoreAvatar=l,h=l.map(function(e){return e.avatarUrl});else{for(var f=[],p={},m=0;m<6;){var v=Math.floor(Math.random()*l.length);!0!==p[v]&&(m++,f.push(v),p[v]=!0)}for(var w=0;w<f.length;w++){var x=l[f[w]];d.push(x),h.push(x.avatarUrl)}a.scoreAvatar=d}a.scoreAvatar.forEach(function(a,t){a.id=200,a.index=t,a.count=0,a.avatar=a.avatarUrl||e+"default/default.png",a.openid=a.openId,a.nickname=a.nickName.replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g,"")})}var b=wx.getStorageSync("sessionId");a.encryptedData({session_id:b,encryptedData:s,iv:c})},fail:function(e){wx.showModal({title:"获取群信息失败 x_x",content:"请尝试重新分享~",showCancel:!1,success:function(e){"restart"===a.redirect?a.handleLocation.gameOver():a.handleLocation.reInit()}})}})},encryptedData:function(e){var a=this;wx.request({url:t+"php/ingame/kof/decrypt_wxdata.php?date="+(new Date).getTime(),method:"POST",header:{"content-type":"application/x-www-form-urlencoded"},data:e,success:function(t){t.data.data&&t.data.data.openGId?(a.groupId=t.data.data.openGId,a.render()):c-- >=0?a.encryptedData(e):(console.log(t.data),wx.showModal({title:"获取群ID失败 x_x",content:"请尝试重新分享",confirmText:"刷新重试",success:function(){"restart"===a.redirect?a.handleLocation.gameOver():a.handleLocation.reInit()}}))},fail:function(t){c-- >=0?a.encryptedData(e):wx.showModal({title:"获取群ID失败 x_x",content:"请尝试重新分享",confirmText:"刷新重试",success:function(){"restart"===a.redirect?a.handleLocation.gameOver():a.handleLocation.reInit()}})}})},loading:function(){var a=this;wx.showLoading({title:"资源加载中"}),this.loadObj=new r.Bitmap(e+"default/load.png");var t=this.loadObj;t.image.onload=function(){wx.hideLoading();var e=t.image;t.x=canvas.width/2,t.y=canvas.height/2,t.scaleX=a.scale/2,t.scaleY=a.scale/2,t.regX=e.width/2,t.regY=e.height/2,a.stage.addChild(t),a.stage.update()};var n=0;this.loadingTimer=r.Ticker.on("tick",function(){n+=4,t.rotation=n,a.stage.update()})},render:function(t){var i=this,o=(this.currentScoreArea.count,"");t&&(o="?date="+(new Date).getTime());var s=[e+"startGame/bg-1639.jpg",e+"startGame/border-bg-light.png",e+"startGame/start-3.png",e+"startGame/start-2.png",e+"startGame/start-1.png",e+"startGame/ready-go.png",e+"default/1.png",e+"startGame/flag001-top.png",e+"startGame/flag001-bottom.png",e+"startGame/flag002-top.png",e+"startGame/flag002-bottom.png",e+"startGame/burrow-1.png",e+"startGame/burrow-2.png",e+"startGame/getScore.png",e+"startGame/fail_01.png",e+"startGame/fail_02.png"];this.avatarData=this.scoreAvatar.concat(this.warningAvatar),this.avatarData.forEach(function(e){s.push(e.avatar)});for(var l=0;l<s.length;l++)s[l]+=o;n.loadImage(s).then(function(e){i.stage.removeAllChildren(),wx.onTouchStart(i.handleTouch.bind(i)),i.loadTimer&&clearInterval(i.loadTimer),i.drawBackground(e[0]),i.drawBatter();for(var t=[],n=6;n<14;n++)t.push(e[n]);i.draw3dBurrows(t),i.fail_01=e[14],i.fail_02=e[15],t=[];for(var o=16;o<e.length;o++)t.push(e[o]);for(var s=0;s<t.length;s++)i.avatarData[s].image=t[s];var c=wx.getStorageSync("turn_data"),l={x:4,y:6},d=i.drawImage({imageObj:e[1],x:l.x,y:l.y+i.iphoneXoffset});i.stage.addChild(d),c&&c.maxScore?(i.maxRecordArea.count=c.maxScore,i.firstTime=!1,i.drawMaxRecordBtn(l)):wx.request({url:a+"get_player_top_ko_per_round",data:{openid:i.user_openid},success:function(e){var a=0;"SUCCESS"===e.data.status&&(a=parseInt(e.data.data.top_ko)),i.firstTime=a<=0,i.maxRecordArea.count=a,i.drawMaxRecordBtn(l)},fail:function(e){i.drawMaxRecordBtn(l)}}),i.loadingTimer&&r.Ticker.removeEventListener("tick",i.loadingTimer),i.loadObj&&i.loadObj.alpha&&(i.loadObj.alpha=0),i.currentScoreArea.disObject=i.drawCurrentScoreBtn(l),i.drawReadyGo(e[2],e[3],e[4],e[5])},function(e){c-- >=0?i.render():wx.showModal({title:"网络繁忙",content:"资源拉取失败，请稍后重试X_X",showCancel:!1,confirmText:"刷新重试",success:function(){setTimeout(function(){i.render("reflash")},2e3)}})})},draw3dBurrows:function(a){for(var t=0;t<6;t++){var n=this.burrowData[t];n.imageObj=this.drawFlag({avatarImage:a[0],flagXTop:a[1],flagXBottom:a[2],flagYTop:a[3],flagYBottom:a[4],x:n.offsetX,y:n.offsetY,fromY:n.fromY,index:t}),2===t&&this.drawBurrowX(a[5])}this.drawBurrowY(a[6]);for(var i=new r.SpriteSheet({images:[e+"startGame/sprite-00-02.png",e+"startGame/sprite-03-05.png",e+"startGame/sprite-06-08.png",e+"startGame/sprite-09-11.png",e+"startGame/sprite-12-13.png"],frames:{height:532,width:647},animations:{stop:14,punch:[0,13,"stop",.2]}}),o=this.control.coordinate,s=0;s<6;s++){var c=this.burrowData[s],l=s%3*o.xCell+o.x0+o.punchDirX,d=(s<3?o.y0:o.y0+o.yCell)+o.punchDirY,h=l+265,u=d+30,g=new r.Sprite(i);g.x=l*this.scale,g.y=d*this.scale,g.scaleX=g.scaleY=this.scale,c.punchObj=g,this.stage.addChild(c.punchObj),c.scoreObj=this.drawImage({imageObj:a[7],x:h,y:u}),c.punchObj.alpha=0,c.scoreObj.alpha=0,c.scoreObj.scaleX=c.scoreObj.scaleY=.55*this.scale}},drawReadyGo:function(e,a,t,n){var i=this,o=new r.Container,s=[];[e,a,t,n].forEach(function(e,a){s[a]=new r.Bitmap(e),s[a].x=canvas.width/2,s[a].y=canvas.height/2,s[a].alpha=0,s[a].regX=e.width/2,s[a].regY=e.height/2});var c=0,l=s[c];this.stage.addChild(o);var d=2,h=0,u=12,g="start";setTimeout(function(){var e=wx.createInnerAudioContext();e.src="assets/mp3/readygo.mp3",e.play()},1200);var f=r.Ticker.on("tick",function(){"start"===g?(d=2,h=0,l=s[c],o.addChild(s[c]),g="scale"):"scale"===g?(d-=i.getAcceleration(2,d),h+=i.getAcceleration(0,h,.012),d<1&&(d=1,g="hold"),h>1&&(h=1),l.alpha=h,l.scaleX=l.scaleY=i.scale*d):"hold"===g?--u<0&&(u=12,g="fadeOut"):"fadeOut"===g?(i.stage.update(),(h-=i.getAcceleration(0,h,.005))<0&&(h=0,g="finish"),l.alpha=h):"finish"===g?c>2?g="allDone":(c++,g="start"):(i.stage.removeChild(o),r.Ticker.removeEventListener("tick",f),i.firstTime?i.guide():i.start()),i.stage.update()})},getAcceleration:function(e,a,t){var r=t||.012,n=Math.abs(e-a),i=Math.sqrt(2*r*n);return i<.002&&(i=.002),i},guide:function(){var a=this,t=void 0;n.loadImage(e+"startGame/bubble.png").then(function(e){var i=r.Ticker.on("tick",function(){var o=a.burrowData[2],s=a.game.levelData[0].speed;switch(o.status){case"hidden":o.status="ready";break;case"ready":var c=a.scoreAvatar.length,l=Math.floor(Math.random()*c);o.id=a.scoreAvatar[l].id,o.index=l,o.imageObj.children[0].removeChildAt(0);var d=new r.Bitmap(a.avatarData[l].image);d.scaleX=d.scaleY=a.flagConfig.avatarSize/d.image.width*a.scale,d.x=a.flagConfig.x*a.scale,d.y=a.flagConfig.y*a.scale,o.imageObj.children[0].addChildAt(d,0),o.imageObj.children[0].children[1].alpha=1,o.imageObj.children[1].children[0].alpha=1,o.imageObj.children[0].children[2].alpha=0,o.imageObj.children[1].children[1].alpha=0,(t=a.drawBubble(e)).alpha=0,a.stage.addChild(t),a.fadeIn(t),o.status="up";break;case"up":if(o.imageObj.y<=o.fromY*a.scale)o.status="hold";else{var h=n.getEaseSpeed(o.imageObj.y,o.fromY)*s;o.imageObj.y=o.imageObj.y-h}o.imageObj.y<(o.toY-.2*o.dirY)*a.scale&&(o.canPunch=!0);break;case"hold":break;case"punched":var u=o.imageObj.alpha-.03;a.firstTime=!1,t&&a.stage.removeChild(t),u<=0&&(u=0,o.imageObj.y=o.toY*a.scale,o.imageObj.children[0].y=o.imageObj.children[0].y+2*a.scale,o.imageObj.children[1].y=o.imageObj.children[1].y-2*a.scale,a.stage.update(),r.Ticker.removeEventListener("tick",i),a.start()),o.imageObj.alpha=u}a.stage.update()})},function(e){c-- >=0?a.guide():wx.showModal({title:"网络繁忙",content:"资源拉取失败(bubble)，请稍后重试X_X",showCancel:!1,confirmText:"刷新重试",success:function(){setTimeout(function(){a.guide()},2e3)}})})},start:function(){var a=this,t=this.game,i=t.num,o=t.FPS,s=t.warmUp,c=!1,l=this.control.batter;this.timer=r.Ticker.on("tick",function(){if(l.countDown>0){l.countDown--;var e=.04*l.countDown;l.num>1&&e<1&&e>0&&(a.batterContainer.alpha=e)}else a.batterContainer.alpha=0;t.countDown<=0&&(a.drawFailAni("timeout"),r.Ticker.removeEventListener("tick",a.timer)),t.countDown--;var d=t.level,h=t.levelData[d].percent,u=t.levelData[d].speed;if(i<=0&&!c){var g=Math.floor(6*Math.random());c=!0,"hidden"===a.burrowData[g].status&&(a.burrowData[g].status="ready")}for(var f=0;f<6;f++){var p=a.burrowData[f],m=p.imageObj,v=void 0,w=void 0;switch(p.status){case"hidden":Math.random()<h&&(p.status="ready");break;case"ready":i++;var x=a.avatarData.length;(o<=0||s>0)&&(x=a.scoreAvatar.length,s>0&&s--);var b=Math.floor(Math.random()*x);p.id=a.avatarData[b].id,p.index=b,200===p.id?(o=t.FPS-2+Math.round(2*Math.random()),m.children[0].children[1].alpha=1,m.children[1].children[0].alpha=1,m.children[0].children[2].alpha=0,m.children[1].children[1].alpha=0):(o--,m.children[0].children[1].alpha=0,m.children[1].children[0].alpha=0,m.children[0].children[2].alpha=1,m.children[1].children[1].alpha=1),m.children[0].removeChildAt(0);var y=new r.Bitmap(a.avatarData[b].image);y.scaleX=y.scaleY=a.flagConfig.avatarSize/y.image.width*a.scale,y.x=a.flagConfig.x*a.scale,y.y=a.flagConfig.y*a.scale,m.children[0].addChildAt(y,0),p.status="up";break;case"up":if(w=n.getEaseSpeed(m.y,p.fromY)*u,(v=m.y-w)<=p.fromY*a.scale){v=p.fromY*a.scale,p.status="hold";var O=Math.floor(22-d/2);(O+=Math.floor(8*Math.random()))<0&&(O=0),p.countDown=O}m.y=v,m.y<(p.toY-.2*p.dirY)*a.scale&&(p.canPunch=!0);break;case"hold":p.countDown<=0?p.status="down":p.countDown--;break;case"down":w=n.getEaseSpeed(m.y,p.toY)*u,(v=m.y+w)>=p.toY*a.scale&&(v=p.toY*a.scale,--i<=0&&(c=!1),p.status="hidden",m.alpha=1,m.children[0].rotation=m.children[1].rotation=0),m.y=m.y+w,m.y>(p.toY-.2*p.dirY)*a.scale&&(p.canPunch=!1);break;case"punched":var C=m.alpha-.03;C<=0&&(C=0,m.children[0].y=m.children[0].y+2*a.scale,m.children[1].y=m.children[1].y-2*a.scale,m.y=p.toY*a.scale,p.status="down"),m.alpha=C;break;default:p.status="hidden"}}a.stage.update()});var d=[e+"gameOver/bg-1700.jpg",e+"gameOver/game-over.png",e+"gameOver/btn-share.png",e+"gameOver/modal_3.png",e+"gameOver/btn-notice.png",e+"gameOver/btn-KO.png",e+"gameOver/btn3_01.png",e+"gameOver/btn3_02.png",e+"gameOver/btn3_03.png"];n.preload(d)},over:function(){var e=this;r.Touch.enable(this.stage);var a=this.maxRecordArea.count,t=this.currentScoreArea.count;a<t&&(a=t),this.maxRecordArea.count=a,wx.showLoading({title:"数据存储中"}),wx.setStorage({key:"turn_data",data:{maxScore:a,curScore:t,curList:this.scoreAvatar},success:function(){if(t<=0)e.handleLocation.gameOver();else{var a=e.groupId,r=wx.getStorageSync("roomTopic"),n=e.user_openid,o=[];e.scoreAvatar.forEach(function(e){e.count>0&&o.push(e)});var s=o.map(function(e){return e.openid+"|"+e.count}),c=Math.floor(new Date/1e3),l={gid:a,gname:r,openid:n,ko:s,sign:i(a+n+c+"ieg_kof_wxgame_secret_key_74dbe500"),timestamp:c};o.concat({openid:e.user_openid,avatar:e.user_avatar,nickname:e.user_nickname}).forEach(function(e){var a=e.openid+"_avatar";l[a]=e.avatar,a=e.openid+"_nickname",l[a]=e.nickname}),e.reportData(l)}},fail:function(){wx.showModal({title:"KO记录上报失败 x_x",content:"请检查网络或稍后重试，请重试~",confirmText:"刷新重试",success:function(a){setTimeout(function(){e.over()},1e3)}})}})},reportData:function(e){var t=this;wx.showLoading({title:"正在上传数据"}),wx.request({url:a+"report_ko_record?"+n.formatParam(e),success:function(a){wx.hideLoading(),"SUCCESS"!==a.data.status?c-- >=0?t.reportData(e):wx.showModal({title:"KO记录上报失败 x_x",content:"服务器处理未成功，请重试~",confirmText:"刷新重试",cancelText:"跳过上报",success:function(a){a.confirm?setTimeout(function(){t.reportData(e)},2e3):t.handleLocation.gameOver()}}):t.handleLocation.gameOver()},fail:function(a){wx.getNetworkType({success:function(a){"none"===a.networkType||"unknown"===a.networkType?(wx.hideLoading(),wx.showModal({title:"KO记录上传失败 x_x",content:"请检查网络或稍后重试~",showCancel:!1,confirmText:"刷新重试",success:function(a){setTimeout(function(){t.reportData(e)},2e3)}})):c-- >=0?t.reportData(e):(wx.hideLoading(),wx.showModal({title:"KO记录上传失败 x_x",content:"请检查网络或稍后重试~",confirmText:"刷新重试",showCancel:!1,success:function(a){a.confirm?setTimeout(function(){t.reportData(e)},2e3):t.handleLocation.gameOver()}}))},fail:function(e){wx.showModal({title:"获取网络状态失败",content:""})}})}})},scoreUpdate:function(e){this.currentScoreArea.count=e,this.currentScoreArea.disObject.children[1].text=e;var a=this.game;if(this.game.countDown=this.config.countDown,++this.punchTimes>=a.phase){this.punchTimes=0;var t=a.levelData.length-1;a.level<t&&a.level++}this.stage.update()},drawBatter:function(){this.batterContainer=new r.Container;var e=new GradientText("2","bold "+70*this.scale+"px "+s,"#FFB618");e.colorX="#F8F8D8",e.colorY="#F85600",e.gradient=!0;var a=e.clone();a.color="#ffffff",a.outline=8;var t=new r.Text("HIT","bold "+35*this.scale+"px "+s,"#000000");t.x=56*this.scale,t.y=34*this.scale,t.outline=5;var n=t.clone();n.outline=!1,n.color="#eeeeee",this.batterContainer.addChild(a,e,t,n),this.batterContainer.x=580*this.scale,this.batterContainer.y=400*this.scale,this.batterContainer.alpha=0,this.stage.addChild(this.batterContainer)},batterUpdate:function(e){e>99&&(e=99);var a=0;e>9&&(a=-48),this.batterContainer.children[0].x=a*this.scale,this.batterContainer.children[1].x=a*this.scale,this.batterContainer.children[0].text=e,this.batterContainer.children[1].text=e,this.batterContainer.alpha=1},drawBackground:function(e){this.drawImage({imageObj:e,x:0,y:0})},drawMaxRecordBtn:function(e){var a=e.x,t=e.y+this.iphoneXoffset+8,n=a*this.scale,i=t*this.scale,o=n+100*this.scale,s=this.maxRecordArea.count,c=new r.Text("最高KO记录 :",this.textConfig.default[0],this.textConfig.default[1]),l=new r.Text("次",this.textConfig.default[0],this.textConfig.default[1]),d=new r.Container;c.x=o,c.y=i,c.textAlign="center",l.x=n+280*this.scale,l.y=i,l.textAlign="center",d.addChild(l),s>999&&(s="999+");var h=n+230*this.scale,u=new r.Text(s,this.textConfig.bold[0],this.textConfig.bold[1]);return u.x=h,u.y=i,u.textAlign="center",d.addChild(c,u),this.stage.addChild(d),d},drawCurrentScoreBtn:function(e){var a=4+e.x,t=(44+e.y+this.iphoneXoffset)*this.scale,n=a*this.scale,i=n+78*this.scale,o=n+160*this.scale,s=this.currentScoreArea.count;s>999&&(s="999+");var c=new r.Container,l=new r.Text("本次成绩 :",this.textConfig.default[0],this.textConfig.default[1]);l.x=i,l.y=t,l.textAlign="center";var d=new r.Text(s,this.textConfig.bold[0],this.textConfig.bold[1]);return d.x=o,d.y=t+1,c.addChild(l,d),this.stage.addChild(c),c},drawBurrowX:function(e){var a=new r.Bitmap(e);a.scaleX=this.scale,a.scaleY=this.scale,a.y=739*this.scale,a.x=0*this.scale,this.stage.addChild(a)},drawBurrowY:function(e){var a=new r.Bitmap(e);a.scaleX=this.scale,a.scaleY=this.scale,a.y=909*this.scale,a.x=0*this.scale,this.stage.addChild(a)},drawFlag:function(e){if(!(e.avatarImage&&e.flagXTop&&e.flagXBottom&&e.flagYTop&&e.flagYBottom&&void 0!==e.x&&void 0!==e.y&&void 0!==e.fromY&&void 0!==e.index))throw new Error("参数缺失");var a=this.flagConfig.avatarSize,t=(e.src,e.x),n=e.y,i=(e.fromY,e.avatarImage),o=this.flagConfig.x,s=this.flagConfig.y,c=this.drawImage({imageObj:i,x:o,y:s,scale:a/i.width*this.scale,cancelAddToStage:!1}),l=this.drawImage({imageObj:e.flagXTop,cancelAddToStage:!1}),d=this.drawImage({imageObj:e.flagYTop,cancelAddToStage:!1}),h=this.drawImage({imageObj:e.flagXBottom,cancelAddToStage:!1}),u=this.drawImage({imageObj:e.flagYBottom,cancelAddToStage:!1}),g=new r.Container,f=new r.Container,p=new r.Container;f.regX=p.regX=67*this.scale,f.regY=p.regY=175*this.scale,f.x=p.x=67*this.scale,f.y=p.y=175*this.scale,g.x=t*this.scale,g.y=n*this.scale;e.index,c.image.width,this.scale;return f.addChild(c,l,d),p.addChild(h,u),g.addChild(f,p),this.stage.addChild(g),g},drawBubble:function(e){return this.drawImage({imageObj:e,x:403,y:380,cancelAddToStage:!0})},drawPunch:function(e){var a=e.index,t=e.lost,r=wx.createInnerAudioContext();r.src="assets/mp3/punch.mp3",r.play(),t||(this.burrowData[a].scoreObj.alpha=1,this.float(this.burrowData[a].scoreObj));var n=this.burrowData[a].punchObj;e.y&&(n.y=e.y+this.control.coordinate.punchDirY*this.scale),n.alpha=1,n.gotoAndPlay("punch"),this.fadeOut(this.burrowData[a].punchObj)},drawFailAni:function(e){var a=this;this.isGameOver=!0;var t=wx.createInnerAudioContext();t.src="assets/mp3/fail.mp3",t.play(),wx.vibrateLong({}),this.stage.removeAllEventListeners("click"),wx.offTouchStart(this.handleTouch);var r=null;r="wrong"===e?this.fail_01:this.fail_02;var n=this.drawImage({imageObj:r,x:218,y:221});n.alpha=.2,this.fadeIn(n),setTimeout(function(){a.over()},2400)},drawImage:function(e){if(!e.imageObj)throw new Error("参数缺失：imageObj");var a=new r.Bitmap(e.imageObj),t=e.y||0,n=e.x||0,i=e.scale||this.scale;return t*=this.scale,n*=this.scale,a.scaleX=i,a.scaleY=i,a.y=t,a.x=n,e.cancelAddToStage||this.stage.addChild(a),a},bgFadeIn:function(e){var a=this;if(!e)throw new Error("缺少动画的主对象: obj");var t=r.Ticker.on("tick",function(){if(e.alpha<1){var n=e.alpha+.05;n>1&&(n=1),e.alpha=n,a.stage.update()}else r.Ticker.removeEventListener("tick",t)})},fadeIn:function(e){var a=this;if(!e)throw new Error("缺少动画的主对象: obj");var t=r.Ticker.on("tick",function(){if(e.alpha<1){var n=e.alpha+.02;n>1&&(n=1),e.alpha=n,a.stage.update()}else r.Ticker.removeEventListener("tick",t)})},fadeOut:function(e){var a=this;if(!e)throw new Error("缺少动画的主对象: obj");var t=e.alpha,n=r.Ticker.on("tick",function(){t>0?((t-=.03)<0&&(t=0),e.alpha=t,t<=.05&&(t=0),a.stage.update()):r.Ticker.removeEventListener("tick",n)})},flash:function(e){var a=this;if(!e)throw new Error("缺少动画的主对象: obj");e.alpha;var t=this.scale-.2,n=0,i=101,o=r.Ticker.on("tick",function(){if(101===i){var s=e.alpha+.2;s=s>1?1:s,(t+=.03)>a.scale&&(t=a.scale,i=200),e.scaleX=e.scaleY=t,e.alpha=s,a.stage.update()}else if(200===i)if(n<36)n++;else{var c=e.alpha-.1;c<0&&(c=0,i=400),e.alpha=c,a.stage.update()}else r.Ticker.removeEventListener("tick",o)})},float:function(e){var a=this;if(!e)throw new Error("缺少动画的主对象: obj");var t=e.alpha,n=e.y,i=e.y,o=r.Ticker.on("tick",function(){t>0?(i-=.7*a.scale,e.y=i,n-i>8&&(t=t>.1?t-.08:0,e.alpha=t),a.stage.update()):(e.y=n,r.Ticker.removeEventListener("tick",o))})},rotateFlag:function(e){var a=this,t=0,n=0,i=7,o=16,s=e.children[0].y,c=e.children[1].y,l=r.Ticker.on("tick",function(){--i>2||(o=Math.sqrt(o),2===i&&(e.children[0].y=s-2*a.scale,e.children[1].y=c+2*a.scale),i>0&&i<3?(t+=2*o,n-=2*o,e.children[0].rotation=t,e.children[1].rotation=n):i<=0&&r.Ticker.removeEventListener("tick",l))})},addHandleLocation:function(e){this.handleLocation=e}};module.exports=l; 
 			});
 		define("weapp-adapter.js", function(require, module, exports){ 			
"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),r=GameGlobal;GameGlobal.__isAdapterInjected||(GameGlobal.__isAdapterInjected=!0,function(){o.addEventListener=o.canvas.addEventListener=function(e,t){o.document.addEventListener(e,t)},o.removeEventListener=o.canvas.removeEventListener=function(e,t){o.document.removeEventListener(e,t)};var e=wx.getSystemInfoSync().platform;if("undefined"==typeof __devtoolssubcontext&&"devtools"===e){for(var t in o){var n=Object.getOwnPropertyDescriptor(r,t);n&&!0!==n.configurable||Object.defineProperty(window,t,{value:o[t]})}for(var i in o.document){var a=Object.getOwnPropertyDescriptor(r.document,i);a&&!0!==a.configurable||Object.defineProperty(r.document,i,{value:o.document[i]})}window.parent=window}else{for(var u in o)r[u]=o[u];r.window=o,window=r,window.top=window.parent=window}}())},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.cancelAnimationFrame=t.requestAnimationFrame=t.clearInterval=t.clearTimeout=t.setInterval=t.setTimeout=t.canvas=t.location=t.localStorage=t.HTMLElement=t.FileReader=t.Audio=t.Image=t.WebSocket=t.XMLHttpRequest=t.navigator=t.document=void 0;var r=n(2);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var i=n(3);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var a=o(n(9)),u=o(n(10)),c=o(n(17)),l=o(n(18)),s=o(n(19)),f=o(n(11)),d=o(n(12)),p=o(n(20)),h=o(n(4)),y=o(n(21)),v=o(n(22));t.document=u.default,t.navigator=c.default,t.XMLHttpRequest=l.default,t.WebSocket=s.default,t.Image=f.default,t.Audio=d.default,t.FileReader=p.default,t.HTMLElement=h.default,t.localStorage=y.default,t.location=v.default;var b=new a.default;t.canvas=b,t.setTimeout=setTimeout,t.setInterval=setInterval,t.clearTimeout=clearTimeout,t.clearInterval=clearInterval,t.requestAnimationFrame=requestAnimationFrame,t.cancelAnimationFrame=cancelAnimationFrame},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=wx.getSystemInfoSync(),o=n.screenWidth,r=n.screenHeight,i=n.devicePixelRatio,a=t.innerWidth=o,u=t.innerHeight=r;t.devicePixelRatio=i;t.screen={availWidth:a,availHeight:u},t.performance={now:function(){return Date.now()/1e3}},t.ontouchstart=null,t.ontouchmove=null,t.ontouchend=null},function(t,n,o){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":e(n))&&"function"!=typeof n?t:n}function a(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":e(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0}),n.HTMLCanvasElement=n.HTMLImageElement=void 0;var u=function(e){return e&&e.__esModule?e:{default:e}}(o(4));n.HTMLImageElement=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"img"))}return a(t,u.default),t}(),n.HTMLCanvasElement=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"canvas"))}return a(t,u.default),t}()},function(t,n,o){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":e(n))&&"function"!=typeof n?t:n}function a(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":e(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=function(e){return e&&e.__esModule?e:{default:e}}(o(5)),l=o(8),s=o(2),f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.className="",n.childern=[],n.style={width:s.innerWidth+"px",height:s.innerHeight+"px"},n.insertBefore=l.noop,n.innerHTML="",n.tagName=e.toUpperCase(),n}return a(t,c.default),u(t,[{key:"setAttribute",value:function(e,t){this[e]=t}},{key:"getAttribute",value:function(e){return this[e]}},{key:"getBoundingClientRect",value:function(){return{top:0,left:0,width:s.innerWidth,height:s.innerHeight}}},{key:"focus",value:function(){}},{key:"clientWidth",get:function(){var e=parseInt(this.style.fontSize,10)*this.innerHTML.length;return Number.isNaN(e)?0:e}},{key:"clientHeight",get:function(){var e=parseInt(this.style.fontSize,10);return Number.isNaN(e)?0:e}}]),t}();n.default=f},function(t,n,o){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":e(n))&&"function"!=typeof n?t:n}function a(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":e(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(e){return e&&e.__esModule?e:{default:e}}(o(6)),c=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.className="",e.children=[],e}return a(t,u.default),t}();n.default=c},function(t,n,o){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":e(n))&&"function"!=typeof n?t:n}function a(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":e(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=function(e){return e&&e.__esModule?e:{default:e}}(o(7)),l=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.childNodes=[],e}return a(t,c.default),u(t,[{key:"appendChild",value:function(e){if(!(e instanceof t))throw new TypeError("Failed to executed 'appendChild' on 'Node': parameter 1 is not of type 'Node'.");this.childNodes.push(e)}},{key:"cloneNode",value:function(){var e=Object.create(this);return Object.assign(e,this),e}},{key:"removeChild",value:function(e){var t=this.childNodes.findIndex(function(t){return t===e});return t>-1?this.childNodes.splice(t,1):null}}]),t}();n.default=l},function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=new WeakMap,i=function(){function e(){n(this,e),r.set(this,{})}return o(e,[{key:"addEventListener",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.get(this);o||(o={},r.set(this,o)),o[e]||(o[e]=[]),o[e].push(t),n.capture&&console.warn("EventTarget.addEventListener: options.capture is not implemented."),n.once&&console.warn("EventTarget.addEventListener: options.once is not implemented."),n.passive&&console.warn("EventTarget.addEventListener: options.passive is not implemented.")}},{key:"removeEventListener",value:function(e,t){var n=r.get(this)[e];if(n&&n.length>0)for(var o=n.length;o--;o>0)if(n[o]===t){n.splice(o,1);break}}},{key:"dispatchEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.get(this)[e.type];if(t)for(var n=0;n<t.length;n++)t[n](e)}}]),e}();t.default=i},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.noop=function(){}},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=wx.createCanvas();e.type="canvas",e.__proto__.__proto__=new r.default("canvas");e.getContext;return e.getBoundingClientRect=function(){return{top:0,left:0,width:window.innerWidth,height:window.innerHeight}},e};n(3);var r=o(n(4));o(n(10))},function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=o(n(4)),a=o(n(11)),u=o(n(12)),c=o(n(9));n(15);var l={},s={readyState:"complete",visibilityState:"visible",documentElement:r,hidden:!1,style:{},location:r.location,ontouchstart:null,ontouchmove:null,ontouchend:null,head:new i.default("head"),body:new i.default("body"),createElement:function(e){return"canvas"===e?new c.default:"audio"===e?new u.default:"img"===e?new a.default:new i.default(e)},getElementById:function(e){return e===r.canvas.id?r.canvas:null},getElementsByTagName:function(e){return"head"===e?[s.head]:"body"===e?[s.body]:"canvas"===e?[r.canvas]:[]},querySelector:function(e){return"head"===e?s.head:"body"===e?s.body:"canvas"===e?r.canvas:e==="#"+r.canvas.id?r.canvas:null},querySelectorAll:function(e){return"head"===e?[s.head]:"body"===e?[s.body]:"canvas"===e?[r.canvas]:[]},addEventListener:function(e,t){l[e]||(l[e]=[]),l[e].push(t)},removeEventListener:function(e,t){var n=l[e];if(n&&n.length>0)for(var o=n.length;o--;o>0)if(n[o]===t){n.splice(o,1);break}},dispatchEvent:function(e){var t=l[e.type];if(t)for(var n=0;n<t.length;n++)t[n](e)}};t.default=s},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return wx.createImage()}},function(t,n,o){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":e(n))&&"function"!=typeof n?t:n}function a(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":e(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=function(e){return e&&e.__esModule?e:{default:e}}(o(13)),l=0,s=1,f=2,d=3,p=4,h=new WeakMap,y=new WeakMap,v=(new WeakMap,new WeakMap,function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.HAVE_NOTHING=l,n.HAVE_METADATA=s,n.HAVE_CURRENT_DATA=f,n.HAVE_FUTURE_DATA=d,n.HAVE_ENOUGH_DATA=p,n.readyState=l,y.set(n,"");var o=wx.createInnerAudioContext();return h.set(n,o),o.onCanplay(function(){n.dispatchEvent({type:"load"}),n.dispatchEvent({type:"loadend"}),n.dispatchEvent({type:"canplay"}),n.dispatchEvent({type:"canplaythrough"}),n.dispatchEvent({type:"loadedmetadata"}),n.readyState=f}),o.onPlay(function(){n.dispatchEvent({type:"play"})}),o.onPause(function(){n.dispatchEvent({type:"pause"})}),o.onEnded(function(){n.dispatchEvent({type:"ended"}),n.readyState=p}),o.onError(function(){n.dispatchEvent({type:"error"})}),e&&(h.get(n).src=e),n}return a(t,c.default),u(t,[{key:"load",value:function(){console.warn("HTMLAudioElement.load() is not implemented.")}},{key:"play",value:function(){h.get(this).play()}},{key:"pause",value:function(){h.get(this).pause()}},{key:"canPlayType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"string"!=typeof e?"":e.indexOf("audio/mpeg")>-1||e.indexOf("audio/mp4")?"probably":""}},{key:"cloneNode",value:function(){var e=new t;return e.loop=h.get(this).loop,e.autoplay=h.get(this).loop,e.src=this.src,e}},{key:"currentTime",get:function(){return h.get(this).currentTime},set:function(e){h.get(this).seek(e)}},{key:"src",get:function(){return y.get(this)},set:function(e){y.set(this,e),h.get(this).src=e}},{key:"loop",get:function(){return h.get(this).loop},set:function(e){h.get(this).loop=e}},{key:"autoplay",get:function(){return h.get(this).autoplay},set:function(e){h.get(this).autoplay=e}},{key:"paused",get:function(){return h.get(this).paused}}]),t}());n.default=v},function(t,n,o){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":e(n))&&"function"!=typeof n?t:n}function a(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":e(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(e){return e&&e.__esModule?e:{default:e}}(o(14)),c=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"audio"))}return a(t,u.default),t}();n.default=c},function(t,n,o){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!==(void 0===n?"undefined":e(n))&&"function"!=typeof n?t:n}function a(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+(void 0===n?"undefined":e(n)));t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=function(e){return e&&e.__esModule?e:{default:e}}(o(4)),l=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,c.default),u(t,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),t}();n.default=l},function(e,t,n){n(16)},function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){return function(t){var n=new c(e);n.touches=t.touches,n.targetTouches=Array.prototype.slice.call(t.touches),n.changedTouches=t.changedTouches,n.timeStamp=t.timeStamp,a.default.dispatchEvent(n)}}var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),a=function(e){return e&&e.__esModule?e:{default:e}}(n(10)),u=n(8),c=function e(t){o(this,e),this.target=i.canvas,this.currentTarget=i.canvas,this.touches=[],this.targetTouches=[],this.changedTouches=[],this.preventDefault=u.noop,this.stopPropagation=u.noop,this.type=t};wx.onTouchStart(r("touchstart")),wx.onTouchMove(r("touchmove")),wx.onTouchEnd(r("touchend")),wx.onTouchCancel(r("touchcancel"))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=n(8),r={platform:wx.getSystemInfoSync().platform,language:"zh-cn",appVersion:"5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E8301 MicroMessenger/6.6.0 MiniGame NetType/WIFI Language/zh_CN",onLine:!0,geolocation:{getCurrentPosition:o.noop,watchPosition:o.noop,clearWatch:o.noop}};t.default=r},function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){if("function"==typeof this["on"+e]){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];this["on"+e].apply(this,n)}}function r(e){this.readyState=e,o.call(this,"readystatechange")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=new WeakMap,u=new WeakMap,c=new WeakMap,l=new WeakMap,s=new WeakMap,f=function(){function e(){n(this,e),this.onabort=null,this.onerror=null,this.onload=null,this.onloadstart=null,this.onprogress=null,this.ontimeout=null,this.onloadend=null,this.onreadystatechange=null,this.readyState=0,this.response=null,this.responseText=null,this.responseType="",this.responseXML=null,this.status=0,this.statusText="",this.upload={},this.withCredentials=!1,c.set(this,{"content-type":"application/x-www-form-urlencoded"}),l.set(this,{})}return i(e,[{key:"abort",value:function(){var e=s.get(this);e&&e.abort()}},{key:"getAllResponseHeaders",value:function(){var e=l.get(this);return Object.keys(e).map(function(t){return t+": "+e[t]}).join("\n")}},{key:"getResponseHeader",value:function(e){return l.get(this)[e]}},{key:"open",value:function(t,n){u.set(this,t),a.set(this,n),r.call(this,e.OPENED)}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.readyState!==e.OPENED)throw new Error("Failed to execute 'send' on 'XMLHttpRequest': The object's state must be OPENED.");wx.request({data:n,url:a.get(this),method:u.get(this),header:c.get(this),responseType:this.responseType,success:function(n){var i=n.data,a=n.statusCode,u=n.header;if("string"!=typeof i&&!(i instanceof ArrayBuffer))try{i=JSON.stringify(i)}catch(e){i=i}if(t.status=a,l.set(t,u),o.call(t,"loadstart"),r.call(t,e.HEADERS_RECEIVED),r.call(t,e.LOADING),t.response=i,i instanceof ArrayBuffer){t.responseText="";for(var c=new Uint8Array(i),s=c.byteLength,f=0;f<s;f++)t.responseText+=String.fromCharCode(c[f])}else t.responseText=i;r.call(t,e.DONE),o.call(t,"load"),o.call(t,"loadend")},fail:function(e){var n=e.errMsg;-1!==n.indexOf("abort")?o.call(t,"abort"):o.call(t,"error",n),o.call(t,"loadend")}})}},{key:"setRequestHeader",value:function(e,t){var n=c.get(this);n[e]=t,c.set(this,n)}}]),e}();f.UNSEND=0,f.OPENED=1,f.HEADERS_RECEIVED=2,f.LOADING=3,f.DONE=4,t.default=f},function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=new WeakMap,i=function(){function e(t){var o=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(n(this,e),this.binaryType="",this.bufferedAmount=0,this.extensions="",this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this.protocol="",this.readyState=3,"string"!=typeof t||!/(^ws:\/\/)|(^wss:\/\/)/.test(t))throw new TypeError("Failed to construct 'WebSocket': The URL '"+t+"' is invalid");this.url=t,this.readyState=e.CONNECTING;var a=wx.connectSocket({url:t,protocols:Array.isArray(i)?i:[i]});return r.set(this,a),a.onClose(function(t){o.readyState=e.CLOSED,"function"==typeof o.onclose&&o.onclose(t)}),a.onMessage(function(e){"function"==typeof o.onmessage&&o.onmessage(e)}),a.onOpen(function(){o.readyState=e.OPEN,"function"==typeof o.onopen&&o.onopen()}),a.onError(function(e){"function"==typeof o.onerror&&o.onerror(new Error(e.errMsg))}),this}return o(e,[{key:"close",value:function(t,n){this.readyState=e.CLOSING,r.get(this).close({code:t,reason:n})}},{key:"send",value:function(e){if("string"!=typeof e&&!(e instanceof ArrayBuffer))throw new TypeError("Failed to send message: The data "+e+" is invalid");r.get(this).send({data:e})}}]),e}();i.CONNECTING=0,i.OPEN=1,i.CLOSING=2,i.CLOSED=3,t.default=i},function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){n(this,e)}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={get length(){return wx.getStorageInfoSync().keys.length},key:function(e){return wx.getStorageInfoSync().keys[e]},getItem:function(e){return wx.getStorageSync(e)},setItem:function(e,t){return wx.setStorageSync(e,t)},removeItem:function(e){wx.removeStorageSync(e)},clear:function(){wx.clearStorageSync()}};t.default=n},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={href:"game.js",reload:function(){}};t.default=n}]); 
 			});
 		define("game.js", function(require, module, exports){ 			
"use strict";require("weapp-adapter.js");var e=require("lib/easeljs-0.8.2.for.minapp.js"),n=(require("lib/md5.min.js"),require("page/index.js")),a=require("page/startGame.js"),t=require("page/gameOver.js"),i=require("page/rank.js"),o=require("global/util.js"),r=require("global/config.js").sourcePath,s=require("global/config.js").sourceDomain,c="devtools"===wx.getSystemInfoSync().brand,d=12;wx.showShareMenu({withShareTicket:!0});var l=wx.createInnerAudioContext();l.src="assets/mp3/index.mp3";var u=wx.createInnerAudioContext();wx.request({url:s+"/images/spiderMediaData/kofmy_new/mediaURLData.js",success:function(e){var n=e.data.substring(e.data.indexOf("=")+1),a=JSON.parse(n);u.src=a[2270],u.loop=!0}});var g=window.innerWidth,w=window.innerHeight,h=window.devicePixelRatio||1;canvas.width=g*h,canvas.height=w*h,canvas.style.width=g,canvas.style.height=w;var p=new e.Stage(canvas);e.Ticker.setFPS(60),e.Touch.enable(p);var x=wx.getSystemInfoSync();window.isIphoneX=!1;var v=/iphone\s*x/i;"ios"===x.platform&&!0===v.test(x.model)&&(window.isIphoneX=!0),n.addHandleLocation(function(){a.init(p,"index"),l.pause(),u.play()}),a.addHandleLocation({reInit:function(){n.init(p),l.play()},gameOver:function(){t.init(p),u.pause()}}),t.addHandleLocation({restart:function(){a.init(p,"restart"),u.seek(0),u.play()},rank:function(){i.init(p)}}),i.addHandleLocation({gameOver:function(){t.init(p)}});var f={timer:null,onload:function(a){var t=this,i=canvas.width/750;p.removeAllChildren();var s=new e.Shape;canvas.width,s.graphics.beginFill("#fff").drawRect(0,0,canvas.width,canvas.height),p.addChild(s),p.update();var u=["抵制不良游戏，拒绝盗版游戏。注意自我保护，谨防受骗上当。","适度游戏益脑，过度游戏伤身。合理安排时间，享受健康生活。"],g=new e.Text(u[0],22*i+"px Microsoft YaHei","#000");g.x=canvas.width/2,g.textAlign="center";var w=g.clone();w.text=u[1],w.y+=50*i;var h=new e.Container;h.y=canvas.height-140*i,h.addChild(g,w),p.addChild(h);var x=new e.Bitmap(r+"default/load.png");x.x=canvas.width/2,x.y=canvas.height/2,x.image.onload=function(){var e=x.image;x.scaleX=i/2,x.scaleY=i/2,x.regX=e.width/2,x.regY=e.height/2,p.addChild(x),p.update()};var v=0;this.timer=e.Ticker.on("tick",function(){v+=7,x.rotation=v,p.update()});var f=r+"index/";!0===window.isIphoneX?f+="bg-1600.png":f+="bg-1700.png",o.loadImage(f).then(function(){x.alpha=0,h.alpha=0,e.Ticker.removeEventListener("tick",t.timer),c||l.play(),a?n.init(p,a):n.init(p)},function(e){--d>=0?t.onload():wx.showModal({title:"资源加载失败",content:"请检查网络或退出重试~"})})}},m=wx.getLaunchOptionsSync();if(m.shareTicket){wx.setStorageSync("shareTicket",m.shareTicket),f.onload(!0)}else f.onload();wx.onShow(function(e){var n=wx.getStorageSync("nickname"),a=wx.getStorageSync("openid");if(n&&a&&wx.gameLoginReport({data:{gameVersion:1,roleName:n,roleId:a},success:function(e){},fail:function(e){}}),e.shareTicket&&1044===e.scene&&e.query&&"index"===e.query.launch){wx.setStorageSync("shareTicket",e.shareTicket),f.onload(!0)}else if(1001===e.scene&&"index.html"===e.path||!0===e.reLaunch||"index"===e.query.launch&&1044===e.scene)return f.onload(),void l.play();var t=wx.getStorageSync("page");"init"===t?l.play():"restart"===t?(u.seek(0),u.play(),wx.setStorageSync("page","start")):"start"===t?u.play():"reInit"===t&&f.onload()}),wx.onHide&&wx.onHide(function(){var e=wx.getStorageSync("nickname"),n=wx.getStorageSync("openid");wx.gameLogoutReport({data:{gameVersion:1,roleName:e,roleId:n},success:function(e){},fail:function(e){}})}),wx.onNetworkStatusChange(function(e){console.log(e.networkType),"none"===e.networkType||"unknown"===e.networkType?wx.showModal({title:"网络已断开",content:"请检查网络连接~"}):"2g"!==e.networkType&&"3g"!==e.networkType||wx.showModal({title:"网络不给力哦",content:"切换到其他网络来改善体验吧~"})}),wx.onShareAppMessage(function(){return{title:"群里的战五渣! 让哥用拳头教你们做人",imageUrl:r+"default/share-logo.png",query:"launch=index",success:function(){},fail:function(){}}}); 
 			}); 	require("game.js");
 	